<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>charlesæ–‡ä»¶æ˜ å°„</title>
    <link href="/2023/05/26/charles%E6%96%87%E4%BB%B6%E6%98%A0%E5%B0%84/"/>
    <url>/2023/05/26/charles%E6%96%87%E4%BB%B6%E6%98%A0%E5%B0%84/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>æœ€è¿‘å·¥ä½œä¸Šç¢°åˆ°ä¸€ä¸ªä¸šåŠ¡ï¼Œéœ€è¦è°ƒè¯•ä»¥å‰çš„è€ä»£ç ï¼Œæ˜¯æœ‰å•é¡µé¢å•æ–‡ä»¶å½¢å¼çš„<code>vue</code>é¡¹ç›®ï¼Œå¹¶ä¸æ˜¯åƒ<code>webpack</code>ç±»ä¼¼ï¼Œèµ·æœ¬åœ°æœåŠ¡çš„é¡¹ç›®ã€‚<br>ä¹‹å‰çš„æ–¹æ³•æ˜¯é€šè¿‡å¯åŠ¨æœ¬åœ°ä¸»å·¥ç¨‹çš„ä»£ç ï¼Œè°ƒè¯•è¯¥ä¸šåŠ¡çš„ä»£ç ï¼Œä½†æ˜¯ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç¹çã€‚<br>å¹¶ä¸”ä¸»å·¥ç¨‹è¿è¡Œé€Ÿåº¦ä¹Ÿå¹¶ä¸å¿«ã€‚</p><p>æ­¤æ—¶æƒ³åˆ°äº†ä½¿ç”¨<a href="https://www.charlesproxy.com/">charles</a>ï¼Œä½¿ç”¨<code>charles</code>å·¥å…·å°†<strong>è¿œç¨‹æ–‡ä»¶</strong>æ˜ å°„åˆ°<strong>æœ¬åœ°</strong>ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="é…ç½®">é…ç½®</h3><ul><li><p>é¦–å…ˆæ˜¯ä¸‹è½½<code>charles</code>ï¼Œå®˜ç½‘åœ°å€åœ¨<a href="https://www.charlesproxy.com/">è¿™é‡Œ</a>ï¼Œé€‰æ‹©è‡ªå·±ç”µè„‘ç³»ç»Ÿçš„åŒ…ã€‚</p></li><li><p>å®‰è£…å®Œæˆåï¼Œå°±ä¼šçœ‹åˆ°ç›¸å…³é¡µé¢çš„ç½‘ç»œè¯·æ±‚ä¿¡æ¯ã€‚<br><img src="/images/charlesæ–‡ä»¶æ˜ å°„/charles.jpg" /></p></li><li><p>æ‰¾åˆ°å¯¹åº”éœ€è¦è°ƒè¯•çš„<strong>åœ°å€</strong>ï¼Œæ‰¾åˆ°éœ€è¦æ˜ å°„çš„æ–‡ä»¶ï¼Œå³å‡»æ‰¾åˆ°<code>Map Local</code>é€‰é¡¹(æ²¡æœ‰æ‰¾åˆ°å¯¹åº”æ–‡ä»¶ä¹Ÿæ²¡äº‹ï¼Œéšä¾¿æ‰¾ä¸€ä¸ªå¡«å†™ä¸Šå¯¹åº”ç½‘ç»œåœ°å€å’Œæ˜ å°„è·¯å¾„å³å¯)ã€‚<br><img src="/images/charlesæ–‡ä»¶æ˜ å°„/map-local.jpg" /></p></li><li><p>å¡«å†™å¯¹åº”çš„ä¿¡æ¯<br><img src="/images/charlesæ–‡ä»¶æ˜ å°„/link.jpg" /></p></li></ul><p>ä¹‹ååˆ·æ–°é¡µé¢ï¼Œå°±ä¼šå‘ç°ï¼Œè¯¥æ–‡ä»¶å·²ç»æ˜ å°„åˆ°äº†æœ¬åœ°ã€‚</p><h3 id="ç ´è§£ç‰ˆ">ç ´è§£ç‰ˆ</h3><p>å› ä¸ºæœ¬èº«<code>charles</code>æ˜¯ä»˜è´¹çš„ï¼Œåªæœ‰30å¤©çš„å…è´¹è¯•ç”¨ï¼Œå¹¶ä¸”è¿ç»­ä½¿ç”¨ä¸èƒ½è¶…è¿‡30åˆ†é’Ÿã€‚<br>å¯ä»¥æ ¹æ®æ­¤<a href="https://www.cnblogs.com/tiechui2015/p/17125847.html">æ­¥éª¤</a>å°†å…¶è¿›è¡Œç ´è§£ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><p>å‚è€ƒé“¾æ¥</p><blockquote><p><a href="https://juejin.cn/post/7114960937840279565">charleså°†è¿œç¨‹æ–‡ä»¶æ˜ å°„åˆ°æœ¬åœ°æ–‡ä»¶</a><br><a href="https://www.cnblogs.com/tiechui2015/p/17125847.html">Charlesæ°¸ä¹…å…è´¹ç ´è§£æ–¹æ³•</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>frontend</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯åŸºç¡€å›é¡¾-6-Node</title>
    <link href="/2023/05/17/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-6-Node/"/>
    <url>/2023/05/17/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-6-Node/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯å‰ç«¯åŸºç¡€å›é¡¾çš„ç¬¬å…­ç¯‡ï¼Œè®°å½•ä¸€ä¸‹<code>Node</code>çš„ç›¸å…³é—®é¢˜ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="dirname-å’Œ-process-cwd-åŒºåˆ«">__dirname å’Œ process.cwd() åŒºåˆ«</h3><p>å‡è®¾å½“å‰åœ¨<code>/Users/daniel/development/project/output.js</code>æ–‡ä»¶ä¸­è¾“å‡ºä¸Šè¿°ä¸¤ä¸ªå€¼<br>æ¥ç€å®šä½åˆ°<code>/Users/daniel/development</code>ä¸‹æ‰§è¡Œ<code>output.js</code><br>è¾“å‡ºå¦‚ä¸‹ç»“æœ</p><ul><li>__dirname<br><code>/Users/daniel/development/project</code><br>æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®</li><li>process.cwd()<br><code>/Users/daniel/development</code><br>æ–‡ä»¶æ‰§è¡Œçš„æ‰€åœ¨ä½ç½®</li></ul><h3 id="process-env-npm-config-user-agent">process.env.npm_config_user_agent</h3><p>è·å–ç”¨æˆ·å½“å‰ä½¿ç”¨çš„åŒ…ç®¡ç†å·¥å…·ä¿¡æ¯<br>ç±»ä¼¼<code>npm/6.14.15 node/v12.16.1 darwin x64</code>ç»“æ„</p><h3 id="npm-create">npm create</h3><p><code>npm create xxx</code> -&gt; <code>npm exec create-xxx</code><br><code>npm create @xxx/yyy</code> -&gt; <code>npm exec @xxx/create-yyy</code><br>å¦‚æœæœ¬åœ°æ²¡æœ‰å®‰è£…è¯¥ä¾èµ–åŒ…åˆ™å…ˆ<strong>å®‰è£…</strong><br>æ¥ç€ä¼šæŒ‰ç…§åŒ…å†…<code>package.json</code>çš„<code>bin</code>å±æ€§æ‰¾åˆ°å¯¹åº”çš„<strong>æ‰§è¡Œæ–‡ä»¶</strong>ï¼ˆä»¥<code>#!/usr/bin/env node</code>å¼€å¤´ï¼‰</p><blockquote><p>ä¸Šé¢çš„æ‰§è¡Œå’Œ<code>yarn create</code>å’Œ<code>npx create</code>æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯<code>npx create</code>ä¸éœ€è¦å®‰è£…å¯¹åº”åŒ…ã€‚</p></blockquote><h3 id="npm-version-patch">npm version patch</h3><p>æ›´æ–°ç‰ˆæœ¬</p><h3 id="postversion">postversion</h3><p>æ›´æ–°ç‰ˆæœ¬åè§¦å‘</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><blockquote><p>å‚è€ƒèµ„æ–™<br><a href="https://juejin.cn/post/6844903913435430919">nodeä¸­__dirnameã€__filenameã€process.cwd()ã€process.chdir()è¡¨ç¤ºçš„è·¯å¾„</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>basic</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>qiankuné¡¹ç›®æ­å»ºå®è·µ</title>
    <link href="/2023/04/27/qiankun%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E5%AE%9E%E8%B7%B5/"/>
    <url>/2023/04/27/qiankun%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[<h2 id="è¿™ç¯‡å†™ä¸€åŠä¸æƒ³å†™äº†ï¼Œåˆ«çœ‹äº†-ã¸Â´-ãƒ">è¿™ç¯‡å†™ä¸€åŠä¸æƒ³å†™äº†ï¼Œåˆ«çœ‹äº†(`ã¸Â´*)ãƒ</h2><h2 id="ä»‹ç»">ä»‹ç»</h2><h3 id="ä»€ä¹ˆæ˜¯å¾®å‰ç«¯ï¼Ÿ">ä»€ä¹ˆæ˜¯å¾®å‰ç«¯ï¼Ÿ</h3><blockquote><p><strong>å¾®å‰ç«¯</strong>æ˜¯ä¸€ç§ç±»ä¼¼äºå¾®æœåŠ¡çš„æ¶æ„ï¼Œå®ƒå°†å¾®æœåŠ¡çš„ç†å¿µåº”ç”¨äºæµè§ˆå™¨ç«¯ï¼Œå³å°†å•é¡µé¢å‰ç«¯åº”ç”¨ç”±å•ä¸€çš„å•ä½“åº”ç”¨è½¬å˜ä¸ºå¤šä¸ªå°å‹å‰ç«¯åº”ç”¨èšåˆä¸ºä¸€çš„åº”ç”¨ã€‚å„ä¸ªå‰ç«¯åº”ç”¨è¿˜å¯ä»¥<strong>ç‹¬ç«‹å¼€å‘</strong>ã€<strong>ç‹¬ç«‹éƒ¨ç½²</strong>ã€‚åŒæ—¶ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥åœ¨<strong>å…±äº«ç»„ä»¶</strong>çš„åŒæ—¶è¿›è¡Œå¹¶è¡Œå¼€å‘â€”â€”è¿™äº›ç»„ä»¶å¯ä»¥é€šè¿‡<code>NPM</code>æˆ–è€…<code>Git Tag</code>ã€<code>Git Submodule</code>æ¥ç®¡ç†ã€‚</p></blockquote><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¾®å‰ç«¯ï¼Ÿ">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¾®å‰ç«¯ï¼Ÿ</h3><ul><li>å„ä¸ªå­é¡¹ç›®çš„æŠ€æœ¯æ ˆæ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•æŠ€æœ¯ç ”å‘ã€‚</li><li>ç‹¬ç«‹å­é¡¹ä¹Ÿå¯ä»¥å•ç‹¬è¿è¡Œã€‚</li><li>å„ä¸ªå­é¡¹çš„çŠ¶æ€éƒ½æ˜¯éš”ç¦»çš„ã€‚</li></ul><h3 id="æœ¬æ–‡å°†ä»‹ç»qiankuné¡¹ç›®çš„ç®€å•æ­å»ºã€‚">æœ¬æ–‡å°†ä»‹ç»<a href="https://qiankun.umijs.org/zh">qiankun</a>é¡¹ç›®çš„ç®€å•æ­å»ºã€‚</h3><blockquote><p>qiankun æ˜¯ä¸€ä¸ªåŸºäº single-spa çš„å¾®å‰ç«¯å®ç°åº“ï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶èƒ½æ›´ç®€å•ã€æ— ç—›çš„æ„å»ºä¸€ä¸ªç”Ÿäº§å¯ç”¨å¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚<br>qiankun å­µåŒ–è‡ªèš‚èšé‡‘èç§‘æŠ€åŸºäºå¾®å‰ç«¯æ¶æ„çš„äº‘äº§å“ç»Ÿä¸€æ¥å…¥å¹³å°ï¼Œåœ¨ç»è¿‡ä¸€æ‰¹çº¿ä¸Šåº”ç”¨çš„å……åˆ†æ£€éªŒåŠæ‰“ç£¨åï¼Œæˆ‘ä»¬å°†å…¶å¾®å‰ç«¯å†…æ ¸æŠ½å–å‡ºæ¥å¹¶å¼€æºï¼Œå¸Œæœ›èƒ½åŒæ—¶å¸®åŠ©ç¤¾åŒºæœ‰ç±»ä¼¼éœ€æ±‚çš„ç³»ç»Ÿæ›´æ–¹ä¾¿çš„æ„å»ºè‡ªå·±çš„å¾®å‰ç«¯ç³»ç»Ÿï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›é€šè¿‡ç¤¾åŒºçš„å¸®åŠ©å°†<code>qiankun</code>æ‰“ç£¨çš„æ›´åŠ æˆç†Ÿå®Œå–„ã€‚<br>ç›®å‰<code>qiankun</code>å·²åœ¨èš‚èšå†…éƒ¨æœåŠ¡äº†è¶…è¿‡<code>2000+</code>çº¿ä¸Šåº”ç”¨ï¼Œåœ¨æ˜“ç”¨æ€§åŠå®Œå¤‡æ€§ä¸Šï¼Œç»å¯¹æ˜¯å€¼å¾—ä¿¡èµ–çš„ã€‚</p></blockquote><h2 id="å¼€å§‹">å¼€å§‹</h2><p>æœ¬æ¬¡çš„<code>demo</code>é¡¹ç›®çš„ä»£ç éƒ½åœ¨<a href="https://github.com/food-billboard/qiankun-practice">github</a>ï¼Œå¯è‡ªè¡ŒæŸ¥çœ‹è¿è¡Œã€‚</p><blockquote><p>æœ¬æ¬¡é¡¹ç›®ä½¿ç”¨<a href="https://umijs.org/">umi</a>ä½œä¸ºåŸºåº§ï¼Œåˆ†åˆ«é…ç½®<code>react</code>ã€<code>vue</code>ã€<code>angular</code>ã€<code>jquery</code>å­åº”ç”¨ã€‚<br>ä¸»é¡¹ç›®åŠå­é¡¹ç›®éƒ½åªæ˜¯ç®€å•å®Œæˆäº†æœ€åŸºç¡€çš„ä¸€äº›é…ç½®ï¼Œåç»­å¯èƒ½ä¼šç»§ç»­å®Œå–„ã€‚</p></blockquote><h3 id="umiä¸»åº”ç”¨">umiä¸»åº”ç”¨</h3><blockquote><p>version: 4.+</p></blockquote><p><code>umi</code>ç¤¾åŒºæœ‰ç›¸å…³æ¥å…¥<code>qiankun</code>çš„æ’ä»¶ï¼Œå¯ä»¥ä½¿ç”¨æ’ä»¶(<a href="https://github.com/umijs/plugins/tree/master/packages/plugin-qiankun">@umijs/plugin-qiankun</a>)ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<code>qiankun</code>ã€‚<br>è¿™é‡Œæ˜¯é€‰æ‹©ä½¿ç”¨<strong>æ’ä»¶</strong>ã€‚</p><ul><li>å®‰è£…æ’ä»¶<br><code>yarn add @umijs/plugin-qiankun -D</code></li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>.umirc.ts</code></li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@umijs/max&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; apps &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./config/qiankun&#x27;</span><br><span class="hljs-keyword">import</span> routes <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./config/routes&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> defineConfig(&#123;<br>  <span class="hljs-comment">// è·¯ç”±é…ç½®</span><br>  routes,<br>  <span class="hljs-comment">// qiankuné…ç½®</span><br>  <span class="hljs-attr">qiankun</span>: &#123;<br>    <span class="hljs-attr">master</span>: &#123;<br>      apps <br>    &#125;<br>  &#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><ul><li>ä¿®æ”¹è·¯ç”±é…ç½®(<code>./config/routes</code>)</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ts"><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [<br>  &#123;<br>    <span class="hljs-comment">// ä¾§è¾¹æ çš„åç§°</span><br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;reactå­åº”ç”¨&#x27;</span>,<br>    <span class="hljs-comment">// è·¯ç”±</span><br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/sub-react-project&#x27;</span>,<br>    <span class="hljs-comment">// å­åº”ç”¨çš„åç§°</span><br>    <span class="hljs-comment">// å’Œä¸‹é¢appsçš„é…ç½®çš„nameå¯¹åº”</span><br>    <span class="hljs-attr">microApp</span>: <span class="hljs-string">&#x27;sub-react-project&#x27;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;vueå­åº”ç”¨&#x27;</span>,<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/sub-vue-project&#x27;</span>,<br>    <span class="hljs-attr">microApp</span>: <span class="hljs-string">&#x27;sub-vue-project&#x27;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;angularå­åº”ç”¨&#x27;</span>,<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/sub-angular-project&#x27;</span>,<br>    <span class="hljs-attr">microApp</span>: <span class="hljs-string">&#x27;sub-angular-project&#x27;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;jqueryå­åº”ç”¨&#x27;</span>,<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/sub-jquery-project&#x27;</span>,<br>    <span class="hljs-attr">microApp</span>: <span class="hljs-string">&#x27;sub-jquery-project&#x27;</span><br>  &#125;,<br><br>]<br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®å­åº”ç”¨è·¯ç”±é…ç½®(<code>./config/qiankun</code>)</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> apps = [<br>  &#123;<br>    <span class="hljs-comment">// å­åº”ç”¨åç§°</span><br>    <span class="hljs-comment">// å’Œä¸Šé¢è·¯ç”±çš„nameå¯¹åº”</span><br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;sub-react-project&#x27;</span>,<br>    <span class="hljs-comment">// è®¿é—®åœ°å€ </span><br>    <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;//localhost:5000&#x27;</span>,<br>    <span class="hljs-comment">// å­åº”ç”¨çš„å®¹å™¨id</span><br>    <span class="hljs-attr">container</span>: <span class="hljs-string">&#x27;#sub-react-project&#x27;</span>,<br>    <span class="hljs-comment">// åŒ¹é…å­åº”ç”¨çš„è·¯ç”±è§„åˆ™</span><br>    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">&#x27;/sub-react-project&#x27;</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;sub-vue-project&#x27;</span>, <br>    <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;//localhost:5001&#x27;</span>,<br>    <span class="hljs-attr">container</span>: <span class="hljs-string">&#x27;#sub-vue-project&#x27;</span>,<br>    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">&#x27;/sub-vue-project&#x27;</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;sub-angular-project&#x27;</span>, <br>    <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;//localhost:5002&#x27;</span>,<br>    <span class="hljs-attr">container</span>: <span class="hljs-string">&#x27;#sub-angular-project&#x27;</span>,<br>    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">&#x27;/sub-angular-project&#x27;</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;sub-jquery-project&#x27;</span>, <br>    <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;//localhost:5003&#x27;</span>,<br>    <span class="hljs-attr">container</span>: <span class="hljs-string">&#x27;#sub-jquery-project&#x27;</span>,<br>    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">&#x27;/sub-jquery-project&#x27;</span>,<br>  &#125;,<br>]<br></code></pre></td></tr></table></figure><p>å®Œæˆä¸Šé¢çš„æ­¥éª¤ï¼Œä¸»åº”ç”¨çš„æ­å»ºå°±ç®—æ˜¯å®Œæˆäº†ã€‚<br>å¯åŠ¨é¡¹ç›®å°±èƒ½çœ‹åˆ°ï¼Œå¦‚ä¸‹å›¾ã€‚</p><img src="/images/qiankuné¡¹ç›®æ­å»ºå®è·µ/ä¸»åº”ç”¨.jpg" /><h3 id="Reactå­åº”ç”¨">Reactå­åº”ç”¨</h3><blockquote><p>version: 18.+<br>cli: create-react-app 5.+</p></blockquote><ul><li>åœ¨<code>/src/packages</code>ä¸‹æ–°å»º<code>react</code>å­åº”ç”¨<br><code>yarn create react-app sub-react-project --template typescript</code></li><li>å®‰è£…<a href="https://github.com/arackaf/customize-cra">customize-cra</a>å’Œ<a href="https://github.com/timarney/react-app-rewired">react-app-rewired</a>æ‰©å±•é…ç½®<br><code>yarn add customize-cra react-app-rewired -D</code></li><li>ä¿®æ”¹<code>package.json</code></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;start&quot;</span>: <span class="hljs-string">&quot;react-app-rewired start&quot;</span>,<br>    <span class="hljs-attr">&quot;build&quot;</span>: <span class="hljs-string">&quot;react-app-rewired build&quot;</span>,<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ–°å¢<code>config-overrides.js</code>æ–‡ä»¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js">  <span class="hljs-keyword">const</span> &#123; <br>  override, <br>  overrideDevServer, <br>  watchAll,<br>&#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;customize-cra&#x27;</span>);<br><span class="hljs-keyword">const</span> packageName = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./package.json&#x27;</span>).name<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">webpack</span>: override(<br>    <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br>      config.output = &#123;<br>        ...config.output,<br>        <span class="hljs-attr">library</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;packageName&#125;</span>-[name]`</span>,<br>        <span class="hljs-attr">libraryTarget</span>: <span class="hljs-string">&#x27;umd&#x27;</span>,<br>        <span class="hljs-comment">// webpack5 ä»¥å‰ç”¨jsonFunction</span><br>        <span class="hljs-attr">chunkLoadingGlobal</span>: <span class="hljs-string">`webpackJsonp_<span class="hljs-subst">$&#123;packageName&#125;</span>`</span>,<br>      &#125;<br>      <span class="hljs-keyword">return</span> config <br>    &#125;,<br>  ),<br>  <span class="hljs-attr">devServer</span>: overrideDevServer(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;<br>    config.headers = config.headers || &#123;&#125; <br>    config.headers[<span class="hljs-string">&#x27;Access-Control-Allow-Origin&#x27;</span>] = <span class="hljs-string">&#x27;*&#x27;</span><br>    <span class="hljs-keyword">return</span> config <br>  &#125;, watchAll())<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å¢åŠ publicPath.jsæ–‡ä»¶(<code>./src/publicPath.js</code>)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// micro-app-vue/src/public-path.js</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.__POWERED_BY_QIANKUN__) &#123;<br>  <span class="hljs-comment">// åŠ¨æ€è®¾ç½® webpack publicPathï¼Œé˜²æ­¢èµ„æºåŠ è½½å‡ºé”™</span><br>  <span class="hljs-comment">// eslint-disable-next-line no-undef</span><br>  __webpack_public_path__ = <span class="hljs-built_in">window</span>.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å…¥å£æ–‡ä»¶ä¿®æ”¹(<code>./src/index.tsx</code>)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom/client&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123;<br>  createHashRouter,<br>  RouterProvider,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-router-dom&quot;</span><br><span class="hljs-comment">// å¼•å…¥publicPathå…¨å±€èµ‹å€¼</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./publicPath&#x27;</span><br><span class="hljs-keyword">import</span> routes <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./routes&#x27;</span><br><br><span class="hljs-keyword">let</span> root: ReactDOM.Root;<br><br><span class="hljs-comment">// å¦‚æœæ²¡æœ‰è¿™ä¸ªå˜é‡å°±è¯´æ˜æ˜¯ç‹¬ç«‹è¿è¡Œ</span><br><span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>.__POWERED_BY_QIANKUN__) &#123;<br>  render()<br>&#125;<br><br><span class="hljs-comment">// æ¸²æŸ“å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params">props?: any</span>) </span>&#123;<br>  root?.unmount()<br><br>  root = ReactDOM.createRoot(<br>    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;sub-react-project&#x27;</span>) <span class="hljs-keyword">as</span> HTMLElement<br>  );<br>  <span class="hljs-keyword">const</span> router = createHashRouter(routes);<br>  root.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">&#123;router&#125;</span> <span class="hljs-attr">fallbackElement</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">div</span>&gt;</span>æ•°æ®åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#125; /&gt;</span>);<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * bootstrap åªä¼šåœ¨å¾®åº”ç”¨åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ï¼Œä¸‹æ¬¡å¾®åº”ç”¨é‡æ–°è¿›å…¥æ—¶ä¼šç›´æ¥è°ƒç”¨ mount é’©å­ï¼Œä¸ä¼šå†é‡å¤è§¦å‘ bootstrapã€‚</span><br><span class="hljs-comment"> * é€šå¸¸æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›å…¨å±€å˜é‡çš„åˆå§‹åŒ–ï¼Œæ¯”å¦‚ä¸ä¼šåœ¨ unmount é˜¶æ®µè¢«é”€æ¯çš„åº”ç”¨çº§åˆ«çš„ç¼“å­˜ç­‰ã€‚</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrap</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åº”ç”¨æ¯æ¬¡è¿›å…¥éƒ½ä¼šè°ƒç”¨ mount æ–¹æ³•ï¼Œé€šå¸¸æˆ‘ä»¬åœ¨è¿™é‡Œè§¦å‘åº”ç”¨çš„æ¸²æŸ“æ–¹æ³•</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mount</span>(<span class="hljs-params">props: any</span>) </span>&#123;<br>  render(props)<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åº”ç”¨æ¯æ¬¡ åˆ‡å‡º/å¸è½½ ä¼šè°ƒç”¨çš„æ–¹æ³•ï¼Œé€šå¸¸åœ¨è¿™é‡Œæˆ‘ä»¬ä¼šå¸è½½å¾®åº”ç”¨çš„åº”ç”¨å®ä¾‹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unmount</span>(<span class="hljs-params">props: any</span>) </span>&#123;<br>  root?.unmount()<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¯é€‰ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä»…ä½¿ç”¨ loadMicroApp æ–¹å¼åŠ è½½å¾®åº”ç”¨æ—¶ç”Ÿæ•ˆ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params">props: any</span>) </span>&#123;&#125;<br></code></pre></td></tr></table></figure><p>å®Œæˆä¸Šé¢çš„æ­¥éª¤ï¼Œå­åº”ç”¨çš„æ­å»ºå°±ç®—æ˜¯å®Œæˆäº†ã€‚<br>å¯åŠ¨é¡¹ç›®å°±èƒ½çœ‹åˆ°ï¼Œå¦‚ä¸‹å›¾ã€‚<br><img src="/images/qiankuné¡¹ç›®æ­å»ºå®è·µ/reactå­åº”ç”¨.jpg" /></p><h3 id="Vueå­åº”ç”¨">Vueå­åº”ç”¨</h3><blockquote><p>version: 3.+<br>cli: 5.+</p></blockquote><ul><li>åœ¨<code>/src/packages</code>ä¸‹æ–°å»º<code>vue</code>å­åº”ç”¨<br><code>vue create sub-vue-project</code><br>è·Ÿç€æ­¥éª¤åˆå§‹åŒ–</li><li>åŒæ ·æŒ‰ç…§ä¸Šé¢<code>react</code>å­åº”ç”¨çš„é…ç½®ä¿®æ”¹<code>vue.config.js</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>)<br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">name</span>: packageName &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./package.json&#x27;</span>)<br><br><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-attr">configureWebpack</span>: &#123;<br>    <span class="hljs-attr">output</span>: &#123;<br>      <span class="hljs-attr">library</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;packageName&#125;</span>-[name]`</span>,<br>      <span class="hljs-attr">libraryTarget</span>: <span class="hljs-string">&#x27;umd&#x27;</span>,<br>      <span class="hljs-attr">jsonpFunction</span>: <span class="hljs-string">`webpackJsonp_<span class="hljs-subst">$&#123;packageName&#125;</span>`</span>,<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-attr">devServer</span>: &#123;<br>    <span class="hljs-comment">// ç›‘å¬ç«¯å£</span><br>    <span class="hljs-attr">port</span>: <span class="hljs-number">5001</span>,<br>    <span class="hljs-comment">// é…ç½®è·¨åŸŸè¯·æ±‚å¤´ï¼Œè§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜</span><br>    <span class="hljs-attr">headers</span>: &#123;<br>      <span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>: <span class="hljs-string">&quot;*&quot;</span>,<br>    &#125;,<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åŒæ ·åˆ›å»º<code>publicPath.js</code></li><li>åŒæ ·åœ¨å…¥å£æ–‡ä»¶æ–°å¢é…ç½®(<code>./src/main.js</code>)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> routes <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./config/routes&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./publicPath&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">let</span> root;<br><span class="hljs-keyword">let</span> router <br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>&#123;<br>  router = createRouter(&#123;<br>    <span class="hljs-attr">history</span>: createWebHashHistory(),<br>    routes<br>  &#125;)<br><br>  root = createApp(App)<br>  root.use(router)<br>  root.mount(<span class="hljs-string">&#x27;#sub-vue-project&#x27;</span>)<br>&#125;<br><br><span class="hljs-keyword">if</span> (!<span class="hljs-built_in">window</span>.__POWERED_BY_QIANKUN__) &#123;<br>  render()<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bootstrap</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mount</span>(<span class="hljs-params">props</span>) </span>&#123;<br>  render(props)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unmount</span>(<span class="hljs-params"></span>) </span>&#123;<br>  root.$destroy()<br>  root = <span class="hljs-literal">null</span> <br>  router = <span class="hljs-literal">null</span> <br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params">props</span>) </span>&#123;&#125;<br></code></pre></td></tr></table></figure><p>å®Œæˆä¸Šé¢çš„æ­¥éª¤ï¼Œå­åº”ç”¨çš„æ­å»ºå°±ç®—æ˜¯å®Œæˆäº†ã€‚<br>å¯åŠ¨é¡¹ç›®å°±èƒ½çœ‹åˆ°ï¼Œå¦‚ä¸‹å›¾ã€‚<br><img src="/images/qiankuné¡¹ç›®æ­å»ºå®è·µ/vueå­åº”ç”¨.jpg" /></p><h3 id="Angularå­åº”ç”¨">Angularå­åº”ç”¨</h3><blockquote><p>version: 15.+</p></blockquote><h3 id="Jqueryå­åº”ç”¨">Jqueryå­åº”ç”¨</h3><blockquote><p>version: 3.+</p></blockquote><p>è¿™é‡Œä»£è¡¨çš„æ˜¯ä¸€äº›ä½¿ç”¨ä¼ ç»Ÿä¸‰å‰‘å®¢å¼€å‘çš„åº”ç”¨ã€‚</p><ul><li>å°†é¡¹ç›®æ”¾ç½®åœ¨<code>/src/packages/sub-jquery-project/src</code>ç›®å½•ä¸‹</li><li>å¯ç”¨åº”ç”¨<br>å› ä¸ºä¸å­˜åœ¨<code>webpack</code>ç¼–è¯‘ï¼Œç›´æ¥ä½¿ç”¨<code>express</code>å¯åŠ¨<code>node</code>æœåŠ¡æ¥è¿›è¡Œè®¿é—®ã€‚<br><code>npm init</code><br><code>npm install express cors</code><br><code>npm install nodemon -D</code>(<a href="https://github.com/remy/nodemon">nodemon</a>å¯ä»¥ç›‘å¬æ–‡ä»¶çš„å˜åŒ–åˆ·æ–°nodeæœåŠ¡)</li><li>ä¿®æ”¹<code>package.json</code>æ–‡ä»¶</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;start&quot;</span>: <span class="hljs-string">&quot;nodemon index.js&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ–°å»ºå¯åŠ¨æœåŠ¡è„šæœ¬(<code>/sub-jquery-project/index.js</code>)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;express&quot;</span>);<br><span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;cors&quot;</span>);<br><span class="hljs-keyword">const</span> chalk = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;chalk&#x27;</span>)<br><br><span class="hljs-keyword">const</span> app = express();<br><span class="hljs-comment">// è§£å†³è·¨åŸŸé—®é¢˜</span><br>app.use(cors());<br><span class="hljs-comment">// è®¿é—®é™æ€æ–‡ä»¶åœ¨srcä¸‹</span><br>app.use(<span class="hljs-string">&#x27;/&#x27;</span>, express.static(<span class="hljs-string">&#x27;src&#x27;</span>));<br><br><span class="hljs-comment">// ç›‘å¬ç«¯å£5003</span><br>app.listen(<span class="hljs-number">5003</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(chalk.green(<span class="hljs-string">&quot;server is listening in http://localhost:5003&quot;</span>))<br>&#125;);<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶<code>cmd</code>å¯åŠ¨<code>npm run start</code>ï¼Œè®¿é—®<code>http://localhost:5003</code>å³å¯çœ‹åˆ°å†…å®¹</p><ul><li>æ¥å…¥<code>qiankun</code>è„šæœ¬(<code>/sub-jquery-project/src/js/entry.js</code>)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> render = <span class="hljs-function">(<span class="hljs-params">$, isSub=<span class="hljs-literal">false</span></span>) =&gt;</span> &#123;<br>  $(<span class="hljs-string">&#x27;#sub-jquery-project&#x27;</span>).append(<span class="hljs-string">`And, I am mount in <span class="hljs-subst">$&#123;isSub ? <span class="hljs-string">&#x27;sub&#x27;</span> : <span class="hljs-string">&#x27;self&#x27;</span>&#125;</span>`</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve();<br>&#125;;<br><br><span class="hljs-keyword">if</span>(!<span class="hljs-built_in">window</span>.__POWERED_BY_QIANKUN__) &#123;<br>  render($)<br>&#125;<br><br><span class="hljs-comment">// ç»‘å®šqiankunçš„ä¸€äº›ç”Ÿå‘½å‘¨æœŸ</span><br>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">global</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">global</span>[<span class="hljs-string">&#x27;sub-jquery-project&#x27;</span>] = &#123;<br>    <span class="hljs-attr">bootstrap</span>: <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve();<br>    &#125;,<br>    <span class="hljs-attr">mount</span>: <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> render($, <span class="hljs-literal">true</span>);<br>    &#125;,<br>    <span class="hljs-attr">unmount</span>: <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve();<br>    &#125;,<br>  &#125;;<br>&#125;)(<span class="hljs-built_in">window</span>);<br></code></pre></td></tr></table></figure><p>å®Œæˆä¸Šé¢çš„æ­¥éª¤ï¼Œå­åº”ç”¨çš„æ­å»ºå°±ç®—æ˜¯å®Œæˆäº†ã€‚<br>å¯åŠ¨é¡¹ç›®å°±èƒ½çœ‹åˆ°ï¼Œå¦‚ä¸‹å›¾ã€‚<br><img src="/images/qiankuné¡¹ç›®æ­å»ºå®è·µ/jqueryå­åº”ç”¨.jpg" /></p><h3 id="ä¸€äº›é—®é¢˜">ä¸€äº›é—®é¢˜</h3><h4 id="å­åº”ç”¨é™æ€èµ„æº404">å­åº”ç”¨é™æ€èµ„æº404</h4><h2 id="ç»“æŸ">ç»“æŸ</h2><blockquote><p>å‚è€ƒé“¾æ¥<br><a href="https://github.com/a1029563229/blogs/tree/master/BestPractices/qiankun">å¾®å‰ç«¯å®æˆ˜ - åŸºäº qiankun çš„æœ€ä½³å®è·µ</a><br><a href="https://qiankun.umijs.org/zh/guide/tutorial">é¡¹ç›®å®è·µ</a><br><a href="https://blog.csdn.net/w544924116/article/details/120105320">å¾®å‰ç«¯ç³»åˆ—è®²è§£â€“åº”ç”¨é›†æˆæ–¹æ¡ˆï¼ˆqiankun+umi+vueï¼‰</a><br><a href="https://juejin.cn/post/6986258669172490271#heading-24">åŸºäºqiankunçš„å¾®å‰ç«¯æœ€ä½³å®è·µ -ï¼ˆåŒæ—¶åŠ è½½å¤šä¸ªå¾®åº”ç”¨ï¼‰</a><br><a href="https://juejin.cn/post/6844904016581754888#heading-8">Create React Appæ— ejecté…ç½®ï¼ˆreact-app-rewired å’Œ customize-craï¼‰</a><br><a href="https://www.cnblogs.com/chenxincoder/p/9163194.html">Angularåˆ·æ–°æµè§ˆå™¨ 404 é—®é¢˜</a><br><a href="https://www.cnblogs.com/wangyongping/p/16788537.html">qiankun angular12 single-spa-angularå­åº”ç”¨çš„æ”¹é€ </a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>front</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>todo-list-é—®é¢˜æ±‡æ€»</title>
    <link href="/2023/04/19/todo-list-%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
    <url>/2023/04/19/todo-list-%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    
    <content type="html"><![CDATA[<h2 id="todo-list-é—®é¢˜æ±‡æ€»">todo-list-é—®é¢˜æ±‡æ€»</h2><h2 id="ä»‹ç»">ä»‹ç»</h2><p>å‰æ®µæ—¶é—´åˆšåˆšå®Œæˆäº†æ‰‹ç»˜é£æ ¼çš„ToDoListçš„Demoï¼Œå½“ä¸­é‡åˆ°äº†ä¸å°‘çš„é—®é¢˜ï¼Œç®€å•åœ¨è¿™é‡Œåšä¸€ä¸‹è®°å½•ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="å‡ ä¸ªå…³é”®çš„åŒ…ï¼š">å‡ ä¸ªå…³é”®çš„åŒ…ï¼š</h3><ul><li><a href="https://github.com/rough-stuff/rough">roughjs</a><br>ç”¨äºç»˜åˆ¶æ‰‹ç»˜é£æ ¼çš„å›¾å½¢ï¼Œæ­¤é¡¹ç›®ä¸ºä¸‹é¢<code>wired-elements</code>çš„åŸºç¡€ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯ä¸‡<code>star</code>â­ï¸é¡¹ç›®<a href="https://github.com/excalidraw/excalidraw">excalidraw</a>çš„åŸºç¡€ã€‚<br>åªè¦ç®€å•çš„å‡ è¡Œä»£ç å°±èƒ½å®ç°ç›¸å…³å›¾å½¢çš„ç»˜åˆ¶ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// canvas </span><br><span class="hljs-keyword">const</span> rc = rough.canvas(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;canvas&#x27;</span>));<br>rc.rectangle(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>);<br><br><span class="hljs-comment">// svg</span><br><span class="hljs-keyword">const</span> rc = rough.svg(svg);<br><span class="hljs-keyword">let</span> node = rc.rectangle(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">200</span>, <span class="hljs-number">200</span>); <br>svg.appendChild(node);<br></code></pre></td></tr></table></figure></li><li><a href="https://github.com/rough-stuff/wired-elements">wired-elements</a><br>åŸºäº<code>roughjs</code>å®ç°çš„<code>web-component</code>ç»„ä»¶åº“ã€‚<br>ä¸åŒäº<code>react</code>ç»„ä»¶åº“æˆ–è€…<code>vue</code>ç»„ä»¶åº“ï¼Œ<code>web-component</code>æ˜¯ä¸å—æ¡†æ¶å½±å“çš„ï¼Œèƒ½å¤Ÿæ¥å…¥ä»»ä½•æ¡†æ¶æˆ–è€…è¯´ç›´æ¥åŸç”Ÿä½¿ç”¨ï¼ˆå½“ç„¶ä»–ä¹Ÿå®ç°äº†ç›¸å…³çƒ­é—¨æ¡†æ¶çš„ç»„ä»¶åº“å°è£…ï¼‰ã€‚<br>å› ä¸ºä»–æœ¬æ˜¯å°±æ˜¯è¢«æµè§ˆå™¨æ‰€å…¼å®¹çš„<code>api</code>ã€‚<br>æœ‰å…³<code>web-component</code>çš„å†…å®¹ï¼Œå¯ä»¥å‚çœ‹<a href="https://www.ruanyifeng.com/blog/2019/08/web_components.html">ruanyifengçš„blog</a><br>æ­¤é¡¹ç›®åˆ™æ˜¯ä½¿ç”¨äº†<a href="https://github.com/lit/lit">lit</a>(ä¸€ä¸ªç”¨äºå¿«é€Ÿæ„å»º<code>web-component</code>ç»„ä»¶åº“çš„æ¡†æ¶)</li></ul><h3 id="ç›¸å…³é—®é¢˜">ç›¸å…³é—®é¢˜</h3><p>å› ä¸ºä¸Šé¢çš„ä¸¤ä¸ªåŒ…éƒ½å·²ç»å¾ˆä¹…æ²¡æœ‰è¿›è¡Œç»´æŠ¤ï¼Œè™½ç„¶æ˜¯ä¸€ä¸ªå›¢é˜Ÿçš„é¡¹ç›®ï¼Œä½†æ˜¯ç‰ˆæœ¬ç›¸å…³çš„æ§åˆ¶æ²¡æœ‰åšçš„å¾ˆå¥½ã€‚</p><h4 id="é—®é¢˜ä¸€">é—®é¢˜ä¸€</h4><p>æ­£å¸¸ä¸‹è½½ä¸Šé¢ä¸¤ä¸ªåŒ…æ—¶ï¼Œåœ¨ä½¿ç”¨ç›¸å…³ç»„ä»¶ä¼šè§¦å‘ä¿å­˜ã€‚<br>æ¯”å¦‚ä½¿ç”¨é‡Œé¢çš„ä¸‹æ‹‰ç»„ä»¶(WiredCombo)</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; WiredCombo &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;wired-elements-react/lib/WiredCombo&#x27;</span><br><span class="hljs-keyword">import</span> &#123; WiredItem &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;wired-elements-react/lib/wiredItem&#x27;</span><br><br><span class="hljs-keyword">const</span> RoughTest = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WiredCombo</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">WiredItem</span>&gt;</span>å…¨éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">WiredItem</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">WiredItem</span>&gt;</span>å°äº<span class="hljs-tag">&lt;/<span class="hljs-name">WiredItem</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">WiredItem</span>&gt;</span>å¤§äº<span class="hljs-tag">&lt;/<span class="hljs-name">WiredItem</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">WiredItem</span>&gt;</span>ç­‰äº<span class="hljs-tag">&lt;/<span class="hljs-name">WiredItem</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">WiredCombo</span>&gt;</span></span><br>  )<br>&#125;<br></code></pre></td></tr></table></figure>  <img src="/images/todo-list-é—®é¢˜æ±‡æ€»/combo.jpg" />  æ˜¾ç¤ºæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å½“ç‚¹å‡»æ˜¾ç¤ºä¸‹æ‹‰æ—¶å°±ä¼šæŠ¥é”™ã€‚   <img src="/images/todo-list-é—®é¢˜æ±‡æ€»/combo-error.png" />  <h4 id="è§£å†³åŠæ³•">è§£å†³åŠæ³•</h4><p>æŸ¥çœ‹ä»“åº“<code>issue</code>å‘ç°äº†<a href="https://github.com/rough-stuff/wired-elements/issues/179#issuecomment-986052290">è§£å†³åŠæ³•</a>ã€‚<br>å› ä¸ºæ²¡æœ‰åšç‰ˆæœ¬å…¼å®¹ï¼Œ<code>hf.fillPolygon</code>è¿™ä¸ª<code>api</code>å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¼è‡´æŠ¥é”™ã€‚<br>è§£å†³åŠæ³•å°±æ˜¯ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„<code>roughjs</code>ï¼ˆæ¯”å¦‚ä¸Šé¢æåˆ°çš„ç‰ˆæœ¬<strong>4.4</strong>ï¼‰</p><p>ä½†æ˜¯ç›´æ¥ä½¿ç”¨å‘½ä»¤æ§åˆ¶ç‰ˆæœ¬ä¸‹è½½è¿˜ä¸å¤Ÿ<code>yarn add roughjs@4.4</code><br>è™½ç„¶ç¡®å®å°†ç‰ˆæœ¬ä¸‹è½½æˆäº†<code>4.4</code><br>ä½†æ˜¯æŸ¥çœ‹<code>node_modules</code>çš„<code>wired-elements</code>åŒ…ä¸­ï¼Œä»ç„¶å¼•ç”¨çš„æ˜¯<code>4.5.2</code>ï¼ˆæµ‹è¯•ç”¨çš„æ˜¯<code>node=16.14.2</code>ï¼Œ<code>yarn=1.22.10</code>ï¼‰<br><img src="/images/todo-list-é—®é¢˜æ±‡æ€»/rough-version-error.png" /></p><p>éœ€è¦åœ¨é¡¹ç›®<code>package.json</code>ä¸­æ·»åŠ å±æ€§</p>  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;resolutions&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;roughjs&quot;</span>: <span class="hljs-string">&quot;4.4&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é¡¾åæ€ä¹‰å¯ä»¥é€šè¿‡å¤–éƒ¨æ§åˆ¶ä¸‹è½½ç›¸åº”åŒ…çš„æŒ‡å®šç‰ˆæœ¬ï¼Œé˜²æ­¢å†²çªã€‚</p><h4 id="é—®é¢˜äºŒ">é—®é¢˜äºŒ</h4><p>åœ¨é¡¹ç›®å³å°†å®Œå·¥ä¹‹æ—¶ï¼Œæœ¬åœ°è¿è¡Œæ— é—®é¢˜ï¼Œä½†æ˜¯å½“æŠŠé¡¹ç›®æ”¾åˆ°<a href="https://code.juejin.cn/">ç ä¸Šæ˜é‡‘</a>ä¸Šæ—¶ï¼Œå´å‘ç”Ÿäº†é”™è¯¯ã€‚<br><img src="/images/todo-list-é—®é¢˜æ±‡æ€»/import-error.png" /></p><p>çœ‹æŠ¥é”™åº”è¯¥æ˜¯<code>lit</code>ä¸­é‡å¤å®šä¹‰äº†åŒä¸€ä¸ªèŠ‚ç‚¹åç§°å¯¼è‡´äº†æŠ¥é”™ã€‚<br>æ¥ç€æŸ¥çœ‹ç»„ä»¶åº“æºä»£ç å‘ç°äº†é—®é¢˜ã€‚<br><img src="/images/todo-list-é—®é¢˜æ±‡æ€»/github-import.png" /><br><code>WiredCombo</code>ç»„ä»¶ä¾èµ–äº†<code>WiredCard</code>å’Œ<code>WiredItem</code>ï¼Œç›®å‰æ¥çœ‹é—®é¢˜å°±æ˜¯å¼•å…¥äº†ä¸¤æ¬¡é€ æˆäº†<strong>å¤šæ¬¡åˆå§‹åŒ–</strong>ã€‚<br>ä½†æ˜¯æœ¬åœ°<code>umi</code>é¡¹ç›®å¹¶æœªå‘ç°å¼‚æ ·ã€‚</p><h5 id="è§£å†³åŠæ³•-2">è§£å†³åŠæ³•</h5><p>æš‚æ—¶è¿˜æœªæ‰¾åˆ°æœ‰æ•ˆçš„è§£å†³åŠæ³•å¤„ç†è¯¥é—®é¢˜ï¼Œæœ€ååªå¾—é‡‡ç”¨æœ€æœ´ç´ çš„åŠæ³•â€“æ‰“åŒ…ä¸Šä¼ (`ã¸Â´*)ãƒã€‚</p><p>å¦‚æœå„ä½æœ‰äº†è§£è¿™æ–¹é¢çš„<strong>æ¬¢è¿æŒ‡æ­£</strong>ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><p>é¡ºä¾¿çœ‹çœ‹<a href="https://code.juejin.cn/pen/7222841199583821885">æ•ˆæœ</a>å§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>frontend</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯åŸºç¡€å›é¡¾-4-React</title>
    <link href="/2023/02/17/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-4-React/"/>
    <url>/2023/02/17/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-4-React/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯å‰ç«¯åŸºç¡€å›é¡¾çš„ç¬¬å››ç¯‡ï¼Œè®°å½•ä¸€ä¸‹Reactçš„ç›¸å…³é—®é¢˜ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="äº‹ä»¶æœºåˆ¶">äº‹ä»¶æœºåˆ¶</h3><p><code>react</code>å†…éƒ¨å®šä¹‰äº†ä¸€å¥—äº‹ä»¶æœºåˆ¶ï¼Œå¸®åŠ©<br>- æŠ¹å¹³å„ä¸ªæµè§ˆå™¨çš„å·®å¼‚<br>- æ–¹ä¾¿ç®¡ç†<br><code>react16</code>å­˜åœ¨äº‹ä»¶æ± çš„æ¦‚å¿µï¼Œå¸®åŠ©ç¼“å­˜äº‹ä»¶å¯¹è±¡ï¼Œå‡å°‘æ€§èƒ½æ¶ˆè€—ã€‚<br>é€šè¿‡å†…éƒ¨çš„<strong>äº‹åŠ¡</strong>å®ç°å„ç§æ‰©å±•ã€‚<br>ç»Ÿä¸€å°†äº‹ä»¶ç»‘å®šåœ¨<code>document</code>ä¸Šï¼Œå…ˆæ•è·åå†’æ³¡ã€‚<br>å› ä¸ºå­˜åœ¨äº‹ä»¶æ± çš„æ¦‚å¿µï¼Œå¦‚æœå›è°ƒä¸­å­˜åœ¨å¼‚æ­¥ï¼Œåˆ™å¯èƒ½æ— æ³•è·å–åˆ°<code>event</code>å¯¹è±¡ã€‚</p><h3 id="classç”Ÿå‘½å‘¨æœŸ">classç”Ÿå‘½å‘¨æœŸ</h3><ul><li><s>componentWillMount</s></li><li>render</li><li>componentDidMount</li><li>æ›´æ–°stateæˆ–props</li><li><s>componentWillReceiveProps</s>(æ›´æ–°props)</li><li>getDerivedStateFromProps</li><li>shouldComponentUpdate</li><li><s>componentWillUpdate</s></li><li>getSnapshotBeforeUpdate(æ›¿ä»£ä¸Šé¢çš„WillUpdate)</li><li>render</li><li>componentDidUpdate</li><li>componentWillUnmout</li></ul><h3 id="diff">diff</h3><p><a href="https://food-billboard.github.io/2022/11/21/dom-diff%E5%AD%A6%E4%B9%A0/">ä»¥å‰è‡ªå·±å†™çš„diff</a></p><h3 id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</h3><ul><li>memo/pureComponent</li><li>useMemo</li><li>lazyã€suspense</li><li>å°½é‡é€šè¿‡cssæ§åˆ¶é€»è¾‘</li><li>key</li></ul><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><blockquote><p>å‚è€ƒèµ„æ–™<br><a href="https://juejin.cn/post/7061588533214969892#heading-27">åšäº†ä¸€ä»½å‰ç«¯é¢è¯•å¤ä¹ è®¡åˆ’ï¼Œä¿ç†Ÿï½</a><br><a href="https://pomb.us/build-your-own-react/">Build your own React</a><br><a href="https://juejin.cn/post/6844903975112671239">è¿™å¯èƒ½æ˜¯æœ€é€šä¿—çš„ React Fiber(æ—¶é—´åˆ†ç‰‡) æ‰“å¼€æ–¹å¼</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>basic</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯åŸºç¡€å›é¡¾-5-Webpack</title>
    <link href="/2023/02/17/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-5-Webpack/"/>
    <url>/2023/02/17/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-5-Webpack/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯å‰ç«¯åŸºç¡€å›é¡¾çš„ç¬¬äº”ç¯‡ï¼Œè®°å½•ä¸€ä¸‹Webpackçš„ç›¸å…³é—®é¢˜ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><blockquote><p>å‚è€ƒèµ„æ–™<br><a href="https://juejin.cn/post/7061588533214969892#heading-27">åšäº†ä¸€ä»½å‰ç«¯é¢è¯•å¤ä¹ è®¡åˆ’ï¼Œä¿ç†Ÿï½</a><br><a href="https://juejin.cn/post/6943468761575849992">å½“é¢è¯•å®˜é—®Webpackçš„æ—¶å€™ä»–æƒ³çŸ¥é“ä»€ä¹ˆ</a><br><a href="https://juejin.cn/post/6844903520378814471">ç®€å•æ˜“æ‡‚çš„ webpack æ‰“åŒ…å JS çš„è¿è¡Œè¿‡ç¨‹</a><br><a href="https://juejin.cn/post/6888936770692448270">Webpackæ‰‹å†™loaderå’Œplugin</a><br><a href="https://zhuanlan.zhihu.com/p/30669007">Webpack HMR åŸç†è§£æ</a><br><a href="https://juejin.cn/post/6844904094281236487">ã€Œåè¡€æ•´ç†ã€å†æ¥ä¸€æ‰“Webpacké¢è¯•é¢˜</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>basic</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯åŸºç¡€å›é¡¾-3-æ‰‹å†™æºç </title>
    <link href="/2023/02/15/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-3-%E6%89%8B%E5%86%99%E6%BA%90%E7%A0%81/"/>
    <url>/2023/02/15/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-3-%E6%89%8B%E5%86%99%E6%BA%90%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯å‰ç«¯åŸºç¡€å›é¡¾çš„ç¬¬ä¸‰ç¯‡ï¼Œè®°å½•ä¸€ä¸‹ä¸€äº›æ‰‹å†™æºç çš„ä¾‹å­ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="æ·±æ‹·è´">æ·±æ‹·è´</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepClone</span>(<span class="hljs-params">object, map=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> object !== <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>    <span class="hljs-keyword">return</span> object <br>  &#125;<br>  <span class="hljs-keyword">if</span>(map.get(object)) <span class="hljs-keyword">return</span> map.get(object)<br>  <span class="hljs-keyword">let</span> result = &#123;&#125;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Object</span>.prototype.toString.call(object) === <span class="hljs-string">&#x27;[object Array]&#x27;</span>) &#123;<br>    result = []<br>  &#125;<br><br>  map.set(object, result)<br><br>  <span class="hljs-keyword">for</span>(objectKey <span class="hljs-keyword">in</span> object) &#123;<br>    <span class="hljs-keyword">if</span>(object.hasOwnProperty(objectKey)) &#123;<br>      result[objectKey] = deepClone(object[objectKey])<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> result <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="0-1-0-2-0-3">0.1 + 0.2 === 0.3</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumberEqual</span>(<span class="hljs-params">number1, number2</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.abs(number1 - number2) &lt; <span class="hljs-built_in">Math</span>.EPSILON<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="callã€applyã€bind">callã€applyã€bind</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// call </span><br><span class="hljs-built_in">Function</span>.prototype.myCall = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span> !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;is not a function&#x27;</span>)<br>  &#125;<br>  <span class="hljs-keyword">const</span> symbol = <span class="hljs-built_in">Symbol</span>()<br>  <span class="hljs-keyword">const</span> args = [...arguments].slice(<span class="hljs-number">1</span>)<br>  context = context || <span class="hljs-built_in">window</span> <br>  context[symbol] = <span class="hljs-built_in">this</span>  <br>  <span class="hljs-keyword">const</span> result = context[symbol](...args)<br>  <span class="hljs-keyword">delete</span> context[symbol] <br>  <span class="hljs-keyword">return</span> result <br>&#125;<br><br><span class="hljs-comment">// apply </span><br><span class="hljs-built_in">Function</span>.prototype.myApply = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span> !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;is not a function&#x27;</span>)<br>  &#125;<br>  <span class="hljs-keyword">const</span> symbol = <span class="hljs-built_in">Symbol</span>()<br>  <span class="hljs-keyword">let</span> args = [...arguments][<span class="hljs-number">1</span>]<br>  args = <span class="hljs-built_in">Array</span>.isArray(args) ? args : [] <br>  context = context || <span class="hljs-built_in">window</span> <br>  context[symbol] = <span class="hljs-built_in">this</span> <br>  <span class="hljs-keyword">const</span> result = context[symbol](...args)<br>  <span class="hljs-keyword">delete</span> context[symbol] <br>  <span class="hljs-keyword">return</span> result <br>&#125;<br><br><span class="hljs-comment">// bind </span><br><span class="hljs-built_in">Function</span>.prototype.myBind = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span> !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;is not a function&#x27;</span>)<br>  &#125;<br>  <span class="hljs-keyword">const</span> args = [...arguments].slice(<span class="hljs-number">1</span>)<br>  context = context || <span class="hljs-built_in">window</span> <br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">const</span> realArgs = [...args, ...arguments]<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.call(<span class="hljs-built_in">this</span> instanceOf fn ? <span class="hljs-built_in">this</span> : context, ...realArgs)<br>  &#125;<br>  <span class="hljs-keyword">return</span> fn <br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="new">new</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myNew</span>(<span class="hljs-params">context</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> obj = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>)<br>  obj.__proto__ = context.prototype <br>  <span class="hljs-keyword">const</span> result = context.apply(obj, [...arguments].slice(<span class="hljs-number">1</span>))<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">&#x27;object&#x27;</span> ? result : obj  <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="instanceof">instanceof</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myInstanceof</span>(<span class="hljs-params">target, origin</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> proto = target.__proto__<br>  <span class="hljs-keyword">const</span> prototype = origin.prototype <br>  <span class="hljs-keyword">while</span>(proto) &#123;<br>    <span class="hljs-keyword">if</span>(prototype === proto) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <br>    proto = proto.__proto__<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="flag">flag</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-built_in">Array</span>.prototype.myFlat = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">deep</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> origin = <span class="hljs-built_in">this</span> <br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flat</span>(<span class="hljs-params">array, deep</span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> result = []<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i ++) &#123;<br>      <span class="hljs-keyword">const</span> item = array[i]<br>      <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Array</span>.isArray(item) &amp;&amp; (deep &gt; <span class="hljs-number">0</span>)) &#123;<br>        result.push(...flat(item, deep === <span class="hljs-literal">Infinity</span> ? deep : (deep - <span class="hljs-number">1</span>)))<br>      &#125;<span class="hljs-keyword">else</span> &#123;<br>        result.push(item)<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> result <br>  &#125;<br>  <span class="hljs-keyword">return</span> flat(origin, deep || <span class="hljs-number">1</span>)<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="reduce">reduce</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-built_in">Array</span>.prototype.myReduce = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">handler, initialValue</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> total = initialValue || <span class="hljs-number">0</span> <br>  <span class="hljs-keyword">const</span> origin = <span class="hljs-built_in">this</span> <br>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; origin.length; i ++) &#123;<br>    total = handler(total, origin[i], i, origin)<br>  &#125;<br>  <span class="hljs-keyword">return</span> total <br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="é˜²æŠ–å’ŒèŠ‚æµ">é˜²æŠ–å’ŒèŠ‚æµ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// èŠ‚æµ</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>(<span class="hljs-params">func, options=&#123;&#125;</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> &#123; wait=<span class="hljs-number">100</span> &#125; = options <br>  <span class="hljs-keyword">let</span> done = <span class="hljs-literal">true</span> <br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span>(!done) <span class="hljs-keyword">return</span> <br>    done = <span class="hljs-literal">false</span> <br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      func(...args)<br>      done = <span class="hljs-literal">false</span> <br>    &#125;, wait)<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// é˜²æŠ–  </span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>(<span class="hljs-params">func, options=&#123;&#125;</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> &#123; wait=<span class="hljs-number">100</span> &#125; = options <br>  <span class="hljs-keyword">let</span> timeout <br>  <span class="hljs-keyword">let</span> done = <span class="hljs-literal">true</span> <br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span>(!done) <span class="hljs-built_in">clearTimeout</span>(timeout)<br>    done = <span class="hljs-literal">false</span> <br>    timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      func(...args)<br>      done = <span class="hljs-literal">true</span> <br>    &#125;, wait)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Promise">Promise</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-keyword">const</span> PENDING = <span class="hljs-string">&#x27;PENDING&#x27;</span><br><span class="hljs-keyword">const</span> FULFILLED = <span class="hljs-string">&#x27;FULFILLED&#x27;</span><br><span class="hljs-keyword">const</span> REJECTED = <span class="hljs-string">&#x27;REJECTED&#x27;</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPromise</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">executor</span>)</span> &#123;<br>    executor(<span class="hljs-built_in">this</span>.resolve, <span class="hljs-built_in">this</span>.reject)<br>  &#125;<br><br>  status = PENDING <br>  value = <span class="hljs-literal">undefined</span> <br>  reason = <span class="hljs-literal">undefined</span> <br><br>  resolve = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.status === PENDING) &#123;<br>      <span class="hljs-built_in">this</span>.status = FULFILLED<br>      <span class="hljs-built_in">this</span>.value = value <br>    &#125;<br>  &#125;<br><br>  reject = <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.status === PENDING) &#123;<br>      <span class="hljs-built_in">this</span>.status = REJECTED<br>      <span class="hljs-built_in">this</span>.reason = reason <br>    &#125;<br>  &#125;<br><br>  then = <span class="hljs-function">(<span class="hljs-params">onFulfilled, onReject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.status === FULFILLED) &#123;<br>      onFulfilled(<span class="hljs-built_in">this</span>.value)<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.status === REJECTED) &#123;<br>      onReject(<span class="hljs-built_in">this</span>.reason)<br>    &#125;<br>  &#125;<br><br>&#125;<br><br><span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> MyPromise(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.random() &gt; <span class="hljs-number">0.5</span>) &#123;<br>    resolve(<span class="hljs-string">&#x27;resolve&#x27;</span>)<br>  &#125;<span class="hljs-keyword">else</span> &#123;<br>    reject(<span class="hljs-string">&#x27;reject&#x27;</span>)<br>  &#125;<br>&#125;)<br><br>promise<br>.then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br><span class="hljs-built_in">console</span>.log(value)<br>&#125;, <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> &#123;<br><span class="hljs-built_in">console</span>.log(reason)<br>&#125;)<br><br></code></pre></td></tr></table></figure><h3 id="æ•°å­—ç´¯åŠ ">æ•°å­—ç´¯åŠ </h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (start + end) * (end - start + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="éšæœºèŒƒå›´æ•°å­—">éšæœºèŒƒå›´æ•°å­—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomNumber</span>(<span class="hljs-params">start, end, startContain=<span class="hljs-literal">true</span>, endContain=<span class="hljs-literal">true</span></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> number = <span class="hljs-built_in">Math</span>.random() * (end - start + <span class="hljs-number">1</span>) + start <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å‰å‡ ä¸ªæ–æ³¢é‚£å¥‘">å‰å‡ ä¸ªæ–æ³¢é‚£å¥‘</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fibonacci</span>(<span class="hljs-params">limit</span>) </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cal</span>(<span class="hljs-params">number</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> number &lt; <span class="hljs-number">2</span> ? number : cal(number - <span class="hljs-number">1</span>) + cal(number - <span class="hljs-number">2</span>)<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(limit).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> cal(index + <span class="hljs-number">1</span>)<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="éšæœºæ’åº">éšæœºæ’åº</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randomSort</span>(<span class="hljs-params">arr</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> length = arr.length <br><br>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; length; index ++) &#123;<br>    <span class="hljs-keyword">const</span> ind = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (length - index)) - index<br>    [arr[index], [arr[ind]]] = [arr[ind], arr[index]] <br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é€šç”¨äº‹ä»¶æ¨¡å‹">é€šç”¨äº‹ä»¶æ¨¡å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EventUtil</span> </span>&#123;<br><br>  <span class="hljs-function"><span class="hljs-title">addEventListener</span>(<span class="hljs-params">element, event, handler</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span>(element.addEventListener) &#123;<br>      element.addEventListener(event, handler)<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(element.attachEvent) &#123;<br>      element.attachEvent(<span class="hljs-string">`on<span class="hljs-subst">$&#123;event&#125;</span>`</span>, handler)<br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>      element[<span class="hljs-string">`on<span class="hljs-subst">$&#123;event&#125;</span>`</span>] = handler <br>    &#125;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">removeEventListener</span>(<span class="hljs-params">element, event, handler</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span>(element.removeEventListener) &#123;<br>      element.removeEventListener(event, handler)<br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(element.detachEvent) &#123;<br>      element.detachEvent(<span class="hljs-string">`on<span class="hljs-subst">$&#123;event&#125;</span>`</span>, handler)<br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>      element[<span class="hljs-string">`on<span class="hljs-subst">$&#123;event&#125;</span>`</span>] = <span class="hljs-literal">null</span>  <br>    &#125;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getEventTarget</span>(<span class="hljs-params">event</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> event.target || event.srcElement <br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">getEvent</span>(<span class="hljs-params">event</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> event || <span class="hljs-built_in">window</span>.event <br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">stopPropagation</span>(<span class="hljs-params">event</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span>(event.stopPropagation) &#123;<br>      event.stopPropagation()<br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>      event.cancelBubble = <span class="hljs-literal">true</span> <br>    &#125;<br>  &#125;<br><br>  <span class="hljs-function"><span class="hljs-title">preventDefault</span>(<span class="hljs-params">event</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span>(event.preventDefault) &#123;<br>      event.preventDefault()<br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>      event.returnValue = <span class="hljs-literal">false</span>  <br>    &#125;<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ajax">ajax</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br><br>xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;/request&#x27;</span>, <span class="hljs-literal">true</span>)<br><br>xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.readyState == <span class="hljs-number">4</span>) <span class="hljs-keyword">return</span> <br><br>  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.status == <span class="hljs-number">200</span>) &#123;<br>    <span class="hljs-comment">// TODO </span><br>  &#125;<br>&#125;<br><br>xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>&#125;<br><br>xhr.send()<br><br></code></pre></td></tr></table></figure><h3 id="jsonp">jsonp</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsonp</span>(<span class="hljs-params">url, params, callback</span>) </span>&#123;<br><br>  <span class="hljs-keyword">const</span> resonseCallbackName = <span class="hljs-string">&#x27;jsonpCallback&#x27;</span> + <span class="hljs-built_in">Date</span>.now()<br><br>  <span class="hljs-keyword">const</span> queryString = <span class="hljs-built_in">Object</span>.entries(&#123;<br>    ...params,<br>    <span class="hljs-attr">callback</span>: resonseCallbackName<br>  &#125;).map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;item[<span class="hljs-number">0</span>]&#125;</span>=<span class="hljs-subst">$&#123;item[<span class="hljs-number">1</span>]&#125;</span>`</span>).join(<span class="hljs-string">&#x27;&amp;&#x27;</span>)<br>  <span class="hljs-keyword">let</span> src = url + <span class="hljs-string">`<span class="hljs-subst">$&#123;url.includes(<span class="hljs-string">&#x27;?&#x27;</span>) ? <span class="hljs-string">&#x27;&amp;&#x27;</span> : <span class="hljs-string">&#x27;?&#x27;</span>&#125;</span><span class="hljs-subst">$&#123;queryString&#125;</span>`</span><br><br>  <span class="hljs-keyword">const</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;script&#x27;</span>)<br>  script.src = url <br><br>  <span class="hljs-built_in">window</span>[resonseCallbackName] = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) </span>&#123;<br><br>    callback(...args)<br>    <span class="hljs-built_in">document</span>.body.removeChild(script)<br>  &#125;<br><br>  <span class="hljs-built_in">document</span>.body.appendChild(script)<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å€’è®¡æ—¶çº å">å€’è®¡æ—¶çº å</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-keyword">let</span> interval = <span class="hljs-number">1000</span> <br><span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span> <br><span class="hljs-keyword">let</span> timeout = <span class="hljs-number">5000</span> <br><span class="hljs-keyword">const</span> startTime = <span class="hljs-built_in">Date</span>.now()<br><span class="hljs-keyword">let</span> nextTime = interval<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">countup</span>(<span class="hljs-params"></span>) </span>&#123;<br>  count ++ <br>  <span class="hljs-keyword">const</span> offset = <span class="hljs-built_in">Date</span>.now() - (count * interval + startTime)<br>  nextTime = interval - off<span class="hljs-keyword">set</span> <br>  <span class="hljs-title">if</span>(<span class="hljs-params">nextTime &lt; <span class="hljs-number">0</span></span>) &#123;<br>    nextTime = <span class="hljs-number">0</span><br>  &#125;<br><br>  timeout -= interval<br><br>  <span class="hljs-keyword">if</span>(!timeout) &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;timeout&#x27;</span>)<br>  &#125;<span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">setTimeout</span>(countup, nextTime)<br>  &#125;<br><br>&#125;<br><br><span class="hljs-built_in">setTimeout</span>(countup, nextTime)<br><br></code></pre></td></tr></table></figure><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><blockquote><p>å‚è€ƒèµ„æ–™<br><a href="https://juejin.cn/post/6844903784229896199">ä»URLè¾“å…¥åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿä»€ä¹ˆï¼Ÿ</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>basic</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯åŸºç¡€å›é¡¾-2-ç®€å•çŸ¥è¯†ç‚¹</title>
    <link href="/2023/02/14/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-2-%E7%AE%80%E5%8D%95%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <url>/2023/02/14/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-2-%E7%AE%80%E5%8D%95%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯å‰ç«¯åŸºç¡€å›é¡¾çš„ç¬¬äºŒç¯‡ï¼Œè®°å½•ä¸€ä¸‹ä¸€äº›ç®€å•çš„çŸ¥è¯†ç‚¹ï¼Œä»…ä»…ç”¨äºé€Ÿè®°ï¼Œè¯¦ç»†çš„è¿˜æ˜¯æŸ¥çœ‹å…·ä½“çš„ä¸€äº›æ–‡ç« å§ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="HTML">HTML</h3><ul><li><p>ä»æµè§ˆå™¨åœ°å€æ è¾“å…¥ url åˆ°è¯·æ±‚è¿”å›å‘ç”Ÿäº†ä»€ä¹ˆ<br>urlè§£æã€ç¼“å­˜ã€dnsè§£æã€tcpé“¾æ¥ã€httpè¯·æ±‚ã€å“åº”ã€æ¸²æŸ“ã€‚</p></li><li><p>ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹</p><ul><li>ä¸‰æ¬¡æ¡æ‰‹<br>å®¢æˆ·ç«¯ï¼šæˆ‘è¦å‘é€<br>æœåŠ¡ç«¯ï¼šæ¥æ”¶åˆ°å®¢æˆ·ç«¯ä¿¡æ¯<br>å®¢æˆ·ç«¯ï¼šæ¥æ”¶åˆ°æœåŠ¡ç«¯ä¿¡æ¯</li><li>å››æ¬¡æŒ¥æ‰‹<br>å®¢æˆ·ç«¯ï¼šæˆ‘è¦å…³é—­<br>æœåŠ¡ç«¯ï¼šæ¥æ”¶åˆ°å®¢æˆ·ç«¯ä¿¡æ¯<br>æœåŠ¡ç«¯ï¼šå‘é€å…³é—­ä¿¡æ¯<br>å®¢æˆ·ç«¯ï¼šæ¥æ”¶åˆ°å…³é—­ä¿¡æ¯</li></ul></li><li><p>æµè§ˆå™¨å†…å®¹è§£æ<br>domæ ‘<br>cssæ ‘<br>renderæ ‘<br>å¸ƒå±€è®¡ç®—<br>æ¸²æŸ“</p></li><li><p>httpç¼“å­˜</p><ul><li>å¼ºç¼“å­˜<ul><li>cache-control: max-age=xxx(æœ€å¤§æ—¶é—´s)</li></ul></li><li>åå•†ç¼“å­˜<ul><li>last-modified -&gt; if-modified-since</li><li>etag -&gt; if-none-match</li></ul></li></ul></li><li><p>getå’Œpostçš„åŒºåˆ«</p><ul><li>getå¯ä»¥ç¼“å­˜</li><li>getåœ¨urlä¸Š</li><li>getæ˜æ–‡ä¼ è¾“ï¼Œä¸å®‰å…¨</li><li>getä¸€æ¬¡æ€§ä¼ è¾“ï¼Œpostéœ€è¦ä¸¤æ¬¡</li></ul></li><li><p>è·¨åŸŸ</p><ul><li>åŒæºç­–ç•¥<br>åŸŸå(<a href="http://baidu.com">baidu.com</a>) åè®®(http) ç«¯å£(80)</li><li>ç®€å•è¯·æ±‚<ul><li>get post head</li><li>headersåªæœ‰<code>Accept</code>ã€<code>Accept-Language</code>ã€<code>Content-Language</code>ã€<code>Content-Type(application/x-www-form-urlencodedæˆ–è€…multipart/form-dataæˆ–è€…text/plain)</code></li><li>è¯·æ±‚ä¸­ç›´æ¥å¸¦<code>Origin: 192.168.x.x</code><br>å“åº”å¸¦<br><code>Access-Control-Allow-Origin: 192.168.x.x</code> å…è®¸çš„åŸŸå<br><code>Access-Control-Allow-Credential: true</code> å…è®¸æºå¸¦<code>cookie</code><br><code>Access-Control-Allow-Headers</code>  å…è®¸æºå¸¦çš„<code>headers</code><br><code>Access-Control-Allow-Method</code>  å…è®¸è¯·æ±‚çš„æ–¹æ³•</li></ul></li><li>éç®€å•è¯·æ±‚<ul><li><code>options</code>è¯·æ±‚é¢„æŸ¥</li><li>å“åº”å¸¦<br><code>Access-Control-Max-Age: xxx</code> optionsç¼“å­˜æœ‰æ•ˆæ—¶é—´ï¼Œæ—¶é—´å†…å…è®¸ç›´æ¥å‘é€æ­£å¼è¯·æ±‚</li></ul></li><li><strong>è§£å†³åŠæ³•</strong><ul><li>ä»£ç†æœåŠ¡å™¨ï¼ŒåŒæºæœåŠ¡å™¨ä»£ç†å®¢æˆ·ç«¯è¯·æ±‚</li><li>nginx<br>æ­£å‘ä»£ç†<br>é…ç½®<code>Access-Control-Allow-Origin: xxx</code></li><li>webpack</li></ul></li></ul></li><li><p>å¸¸ç”¨meta</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span>&gt;</span> å…ƒç´ å¯æä¾›æœ‰å…³é¡µé¢çš„å…ƒä¿¡æ¯ï¼ˆmeta-informationï¼‰ï¼Œæ¯”å¦‚é’ˆå¯¹æœç´¢å¼•æ“å’Œæ›´æ–°é¢‘åº¦çš„æè¿°å’Œå…³é”®è¯ã€‚<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span>&gt;</span> æ ‡ç­¾ä½äºæ–‡æ¡£çš„å¤´éƒ¨ï¼Œä¸åŒ…å«ä»»ä½•å†…å®¹ã€‚<span class="hljs-tag">&lt;<span class="hljs-name">meta</span>&gt;</span> æ ‡ç­¾çš„å±æ€§å®šä¹‰äº†ä¸æ–‡æ¡£ç›¸å…³è”çš„åç§°/å€¼å¯¹ã€‚<br><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>  H5æ ‡å‡†å£°æ˜ï¼Œä½¿ç”¨ HTML5 doctypeï¼Œä¸åŒºåˆ†å¤§å°å†™<br><span class="hljs-tag">&lt;<span class="hljs-name">head</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span> æ ‡å‡†çš„ lang å±æ€§å†™æ³•<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span>    å£°æ˜æ–‡æ¡£ä½¿ç”¨çš„å­—ç¬¦ç¼–ç <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge,chrome=1&quot;</span>/&gt;</span>   ä¼˜å…ˆä½¿ç”¨ IE æœ€æ–°ç‰ˆæœ¬å’Œ Chrome<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ä¸è¶…è¿‡150ä¸ªå­—ç¬¦&quot;</span>/&gt;</span>       é¡µé¢æè¿°<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;keywords&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;&quot;</span>/&gt;</span>      é¡µé¢å…³é”®è¯è€…<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;author&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;name, email@gmail.com&quot;</span>/&gt;</span>    ç½‘é¡µä½œ<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;robots&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;index,follow&quot;</span>/&gt;</span>      æœç´¢å¼•æ“æŠ“å–<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;initial-scale=1, maximum-scale=3, minimum-scale=1, user-scalable=no&quot;</span>&gt;</span> ä¸ºç§»åŠ¨è®¾å¤‡æ·»åŠ  viewport<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-title&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;æ ‡é¢˜&quot;</span>&gt;</span> iOS è®¾å¤‡ begin<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-capable&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span>/&gt;</span>  æ·»åŠ åˆ°ä¸»å±åçš„æ ‡é¢˜ï¼ˆiOS 6 æ–°å¢ï¼‰<br>æ˜¯å¦å¯ç”¨ WebApp å…¨å±æ¨¡å¼ï¼Œåˆ é™¤è‹¹æœé»˜è®¤çš„å·¥å…·æ å’Œèœå•æ <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-itunes-app&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL&quot;</span>&gt;</span><br>æ·»åŠ æ™ºèƒ½ App å¹¿å‘Šæ¡ Smart App Bannerï¼ˆiOS 6+ Safariï¼‰<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;apple-mobile-web-app-status-bar-style&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;black&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;format-detection&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;telphone=no, email=no&quot;</span>/&gt;</span>  è®¾ç½®è‹¹æœå·¥å…·æ é¢œè‰²<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;renderer&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;webkit&quot;</span>&gt;</span>  å¯ç”¨360æµè§ˆå™¨çš„æé€Ÿæ¨¡å¼(webkit)<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span>     é¿å…IEä½¿ç”¨å…¼å®¹æ¨¡å¼<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Cache-Control&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-siteapp&quot;</span> /&gt;</span>    ä¸è®©ç™¾åº¦è½¬ç <br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;HandheldFriendly&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>     é’ˆå¯¹æ‰‹æŒè®¾å¤‡ä¼˜åŒ–ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ä¸€äº›è€çš„ä¸è¯†åˆ«viewportçš„æµè§ˆå™¨ï¼Œæ¯”å¦‚é»‘è“<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;MobileOptimized&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;320&quot;</span>&gt;</span>   å¾®è½¯çš„è€å¼æµè§ˆå™¨<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;screen-orientation&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;portrait&quot;</span>&gt;</span>   ucå¼ºåˆ¶ç«–å±<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;x5-orientation&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;portrait&quot;</span>&gt;</span>    QQå¼ºåˆ¶ç«–å±<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;full-screen&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;yes&quot;</span>&gt;</span>              UCå¼ºåˆ¶å…¨å±<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;x5-fullscreen&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>       QQå¼ºåˆ¶å…¨å±<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;browsermode&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;application&quot;</span>&gt;</span>   UCåº”ç”¨æ¨¡å¼<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;x5-page-mode&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>    QQåº”ç”¨æ¨¡å¼<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;msapplication-tap-highlight&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no&quot;</span>&gt;</span>    windows phone ç‚¹å‡»æ— é«˜å…‰<br>è®¾ç½®é¡µé¢ä¸ç¼“å­˜<br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;pragma&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-cache&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;cache-control&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;no-cache&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;expires&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;0&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="CSS">CSS</h3><ul><li><p>ç›’æ¨¡å‹<br><code>box = content + padding + border + margin</code></p><ul><li>æ ‡å‡†ç›’æ¨¡å‹(box-sizing: content-box)<br><code>width = content</code></li><li>æ€ªå¼‚ç›’æ¨¡å‹(box-sizing: border-box)<br><code>width = content + padding + border</code></li></ul></li><li><p>ä¼˜å…ˆçº§<br><code>!important &gt; å†…è” &gt; id &gt; class &gt; tag</code><br>ä¼˜å…ˆçº§ = (A, B, C, D)</p><ul><li>A<br>å†…è”ï¼Œ!important</li><li>B<br>#id</li><li>C<br>.class a[href=â€œhttp://â€] :after</li><li>D<br>div ::after</li></ul></li><li><p>æ ·å¼å±æ€§ç»§æ‰¿<br>æ ·å¼å¯è¢«ç»§æ‰¿åˆ°å­å…ƒç´ ï¼Œæ¯”å¦‚<code>font-size</code>ã€<code>font-weight</code>ã€<code>color</code>ç­‰</p></li><li><p><code>margin</code>é‡å <br>å‚ç›´æ–¹å‘å‘ç”Ÿé‡å </p><ol><li>ç›¸é‚»å…„å¼Ÿå…ƒç´ <code>margin-top[bottom]</code>é‡å <br>è§£å†³ï¼šè®¾ç½®<code>BFC</code></li><li>çˆ¶<code>margin-top</code>å’Œå­<code>margin-top</code>é‡å <br>è§£å†³ï¼šè®¾ç½®çˆ¶<code>padding</code>æˆ–<code>border</code></li><li>çˆ¶é«˜åº¦<code>auto</code>çš„<code>margin-bottom</code>å’Œå­<code>margin-bottom</code>é‡å <br>è§£å†³ï¼šè®¾ç½®çˆ¶<strong>é«˜åº¦</strong></li><li>æœ¬èº«æ— é«˜åº¦ï¼Œä¸Šä¸‹<code>margin</code>é‡å <br>è§£å†³ï¼šè®¾ç½®<code>padding</code>æˆ–<code>border</code></li></ol><p>è®¡ç®—ï¼š</p><ol><li><code>Math.max(+, +)</code></li><li><code>Math.abs(+ - Math.abs(-))</code></li><li><code>-Math.abs(Math.abs(-) - Math.abs(-))</code></li></ol></li><li><p>è®¾å¤‡åƒç´ ã€css åƒç´ ã€è®¾å¤‡ç‹¬ç«‹åƒç´ ã€dprã€ppi ä¹‹é—´çš„åŒºåˆ«</p><ul><li>è®¾å¤‡åƒç´ <br>ç‰©ç†åƒç´ ï¼Œä¸å¯å˜</li><li>cssåƒç´ <br>cssåƒç´ =è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œç›¸å¯¹å•ä½ï¼Œç›¸å¯¹äºè®¾å¤‡åƒç´ </li><li>dpr<br>dpr = è®¾å¤‡åƒç´  / è®¾å¤‡ç‹¬ç«‹åƒç´ <br>ç¼©æ”¾ä¼šæ”¹å˜<code>dpr</code></li><li>ppi<br>æ¯è‹±å¯¸çš„ç‰©ç†åƒç´ å¯†åº¦ï¼Œå¯†åº¦è¶Šå¤§ï¼Œåˆ†è¾¨ç‡è¶Šå¤§</li></ul></li><li><p>ç²¾çµå›¾<br>åˆå¹¶å›¾ç‰‡ï¼Œåˆ©ç”¨<code>background-</code>åŠ è½½å„ä¸ªä½ç½®çš„å°å›¾<br>ä¼˜ç‚¹ï¼š</p><ul><li>å‡å°‘<code>http</code>è¯·æ±‚</li><li>æé«˜å‹ç¼©æ¯”<br>ç¼ºç‚¹ï¼š</li><li>åŠ¨ä¸€å›¾æ”¹å…¨å›¾</li></ul></li><li><p><code>rem</code>ä¼˜ç¼ºç‚¹<br>ä¼˜ç‚¹ï¼š</p><ul><li>å±å¹•é€‚é…<br>ç¼ºç‚¹ï¼š</li><li>æœ‰äº›ä¸åŒ<code>dpr</code>è®¾å¤‡æ˜¾ç¤ºé”™è¯¯</li><li><code>iframe</code>æ˜¾ç¤ºé”™è¯¯<br>ps:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">!<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resize</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">document</span>.documentElement.style.fontSize = <span class="hljs-built_in">window</span>.innerWidth / <span class="hljs-number">540</span> <span class="hljs-comment">/*è®¾è®¡ç¨¿çš„å®½åº¦*/</span> * <span class="hljs-number">10</span> <span class="hljs-comment">/*1rem = 10px*/</span> + <span class="hljs-string">&quot;px&quot;</span><br>  &#125;;<br>  resize()<br>  <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;resize&quot;</span>, resize)<br>&#125;()<br></code></pre></td></tr></table></figure></li><li><p><code>margin</code> æ— æ•ˆ</p><ul><li>å†…è”å…ƒç´ æ— æ•ˆ</li><li>å†…è”æ›¿æ¢å…ƒç´ <strong>å‚ç›´</strong>æœ‰æ•ˆï¼Œæ— <strong>åˆå¹¶</strong>é—®é¢˜</li><li><code>dispaly</code>çš„<code>table-row</code>å’Œ<code>table-cell</code>æ— æ•ˆ</li><li>å®šé«˜å®¹å™¨çš„å­å…ƒç´ çš„<code>margin-bottom</code>å’Œå®šå®½å®¹å™¨çš„å­å…ƒç´ çš„<code>margin-right</code>æ— æ•ˆ</li></ul></li><li><p><code>min-width</code>ã€<code>max-width</code>ã€<code>width</code>å…³ç³»<br><code>min-width &gt; max-width &gt; width</code></p></li><li><p><code>line-height</code><br>æ•°å€¼ã€ç™¾åˆ†æ¯”ã€é•¿åº¦<br>ç»§æ‰¿ï¼š<br>æ•°å€¼<strong>ç›´æ¥</strong>ç»§æ‰¿<br>ç™¾åˆ†æ¯”å’Œé•¿åº¦ä¸º<strong>è®¡ç®—å</strong>ç»§æ‰¿</p></li><li><p><code>text-indent</code><br><code>inline</code>å’Œæ›¿æ¢å…ƒç´ æ— æ•ˆ<br>ç™¾åˆ†æ¯”ç›¸å¯¹<strong>åŒ…å«å—</strong>å®½åº¦</p></li><li><p><code>letter-spacing</code><br>å­—ç¬¦é—´è·<br>ä¸æ”¯æŒ<strong>ç™¾åˆ†æ¯”</strong><br>æ”¯æŒè´Ÿå€¼<br>é»˜è®¤å€¼<code>normal</code></p><div style="letter-spacing: 10px;">hello world</div></li><li><p><code>word-spacing</code><br>æ–‡ä»¶é—´ç©ºæ ¼é—´è·</p><div style="word-spacing: 10px;">hello world</div></li><li><p>æ–‡æœ¬çœç•¥</p></li></ul> <div     style="width:200px;overflow: hidden;text-overflow: ellipsis;white-space:nowrap;"  >    å•è¡Œè¡Œæ–‡æœ¬çœç•¥å•è¡Œè¡Œæ–‡æœ¬çœç•¥å•è¡Œè¡Œæ–‡æœ¬çœç•¥å•è¡Œè¡Œæ–‡æœ¬çœç•¥å•è¡Œè¡Œæ–‡æœ¬çœç•¥å•è¡Œè¡Œæ–‡æœ¬çœç•¥å•è¡Œè¡Œæ–‡æœ¬çœç•¥  </div>    <div     style="width:200px;overflow: hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;"  >    å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥å¤šè¡Œè¡Œæ–‡æœ¬çœç•¥  </div><ul><li><p>å…ƒç´ éšè—</p><ul><li><code>display: none</code></li><li><code>opacity: 0</code></li><li><code>visibility: hidden</code></li><li><code>z-index: -1</code></li></ul></li><li><p>é‡æ’å’Œé‡ç»˜</p><ul><li>é‡æ’<br>é¡µé¢å…ƒç´ é‡æ–°è®¡ç®—æ’åˆ—å¸ƒå±€</li><li>é‡ç»˜<br>é¡µé¢å…ƒç´ é‡æ–°æ¸²æŸ“</li></ul><p>é‡æ’æ¯”é‡ç»˜æ›´æ¶ˆè€—æ€§èƒ½</p><ul><li>é¿å…<ul><li>ç»Ÿä¸€ä¿®æ”¹æ ·å¼</li><li>ä¸´æ—¶å­˜å‚¨éœ€è¦è®¡ç®—çš„å°ºå¯¸ä½ç½®å±æ€§</li><li>ç»Ÿä¸€å¢åˆ æ”¹domå…ƒç´ </li><li>positionè„±ç¦»æ–‡æ¡£æµ</li><li>transform GPU åŠ é€Ÿ</li></ul></li></ul></li><li><p>BFC<br>ç”¨äºç»å¯¹å—æç›’å­çš„å¸ƒå±€ä»¥åŠæµ®åŠ¨ç›¸äº’å½±å“çš„åŒºåŸŸã€‚</p><ol><li>å—æç›’å­å‚ç›´æ–¹å‘æ’åˆ—</li><li>BFCå†…å…ƒç´ çš„ä¸Šä¸‹<code>margin</code>ä¼šé‡å </li><li>BFCè®¡ç®—é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿä¼šå‚ä¸è®¡ç®—</li><li>BFCä¸ä¼šä¸æµ®åŠ¨å…ƒç´ å‘ç”Ÿé‡å </li><li>BFCå¤–éƒ¨å…ƒç´ ä¸ä¼šå½±å“åˆ°å†…éƒ¨</li><li>BFCå†…éƒ¨å…ƒç´ çš„å·¦<code>margin</code>å’Œ<code>border</code>æ¥è§¦</li></ol><p>åˆ›å»ºBFC</p><ul><li>position: absolute fixed</li><li>display: inline-block</li><li>overflow: ä¸ä¸ºvisible</li></ul></li></ul><!-- - å¸ƒå±€    - ä¸¤æ å¸ƒå±€(å·¦ä¾§å›ºå®šï¼Œå³ä¾§è‡ªé€‚åº”)      <details>    <summary>      ç‚¹å‡»æŸ¥çœ‹ä»£ç 1    </summary>    <div class="outer" style="height: 100px;border: 1px solid black;">      <div class="left" style="width: 100px;height:100%;float:left;background-color: red;">å·¦ä¾§</div>      <div class="right" style="height: 100%;overflow: auto;background-color: yellow;">å³ä¾§</div>    </div>  </details>  <details>    <summary>      ç‚¹å‡»æŸ¥çœ‹ä»£ç 2    </summary>    <div class="outer" style="height: 100px;border: 1px solid black;">      <div class="left" style="width: 100px;height:100%;float:left;background-color: red;">å·¦ä¾§</div>      <div class="right" style="height: 100%;margin-left: 100px;background-color: yellow;">å³ä¾§</div>    </div>  </details>    - åŒé£ç¿¼å¸ƒå±€(ä¸¤è¾¹å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº”)    <style>    .clear-float::after {      content: "";      display: table;      clear: both;    }  </style>  <details>    <summary>      ç‚¹å‡»æŸ¥çœ‹ä»£ç     </summary>    <div class="outer clear-float" style="height: 100px;width: 200px;margin: 0 -100px;">      <div class="left" style="width: 100px;height:100%;float:left;background-color: red;">å·¦ä¾§</div>      <div class="right" style="width: 100%;height: 100%;overflow: auto;background-color: green;float: left;">ä¸­é—´</div>      <div class="right" style="width: 100px;height: 100%;;background-color: yellow;float: left;">å³ä¾§</div>    </div>  </details> --><h3 id="Javascript">Javascript</h3><ul><li><p>åŸºæœ¬æ•°æ®ç±»å‹<br><code>null</code>ã€<code>undefined</code>ã€<code>number</code>ã€<code>boolean</code>ã€<code>string</code>ã€<code>object</code>ã€<code>bigint</code>ã€<code>symbol</code></p></li><li><p>æ•°æ®ç±»å‹åˆ¤æ–­</p><ol><li>typeof<br>åªèƒ½åˆ¤æ–­æ™®é€šç±»å‹ï¼Œå¼•ç”¨ç±»å‹æ— æ³•åˆ¤æ–­</li><li>instanceof<br>åªèƒ½åˆ¤æ–­å¼•ç”¨ç±»å‹ï¼Œæ— æ³•åŒºåˆ†ç»§æ‰¿çš„åŸå‹å±æ€§</li><li>Object.prototype.toString.call<br>å¯ä»¥åˆ¤æ–­æ‰€æœ‰ç±»å‹</li></ol></li><li><p>ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾<br>è§„å®šå¦‚ä½•æŸ¥æ‰¾å˜é‡<br>ä»å½“å‰ä½œç”¨åŸŸä¸æ–­å‘ä¸Šå¯»æ‰¾å˜é‡ï¼Œç›´è‡³åˆ°å…¨å±€ã€‚</p></li><li><p>æ‰§è¡Œä¸Šä¸‹æ–‡<br>æ‰§è¡Œä¸€æ®µä»£ç éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå½“ä¸­åŒ…æ‹¬ï¼š</p><ol><li>å˜é‡</li><li>this</li><li>ä½œç”¨åŸŸé“¾</li></ol></li><li><p>é—­åŒ…<br>å‡½æ•°çš„å†…éƒ¨çš„å‡½æ•°å¯ä»¥è®¿é—®å…¶å¤–éƒ¨çš„ä½œç”¨åŸŸã€‚</p><ul><li>ä½œç”¨<ol><li>ç§æœ‰å˜é‡</li><li>å…¨å±€å˜é‡æ±¡æŸ“</li></ol></li><li>å½±å“<ul><li>å†…å­˜æ³„æ¼ï¼ˆæ— æ³•GCï¼‰</li></ul></li></ul></li><li><p>event loop äº‹ä»¶æµ<br>javascriptä»£ç æ‰§è¡Œåˆ†ä¸ºä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼Œå…ˆæ‰§è¡Œä¸€ä¸ª<strong>å®ä»»åŠ¡</strong>ï¼Œæ¥ç€æ‰§è¡Œå®Œæ‰€æœ‰çš„<strong>å¾®ä»»åŠ¡</strong>ï¼Œå¾ªç¯ã€‚</p><ul><li>å®ä»»åŠ¡<br>setTimeoutã€setIntervalã€DOMã€request</li><li>å¾®ä»»åŠ¡<br>Promiseã€async/awaitã€nextTickã€Observer</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;1&#x27;</span>);<br><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;2&#x27;</span>);<br>    process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;3&#x27;</span>);<br>    &#125;)<br>    <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;4&#x27;</span>);<br>        resolve();<br>    &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;5&#x27;</span>)<br>    &#125;)<br>&#125;)<br>process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;6&#x27;</span>);<br>&#125;)<br><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;7&#x27;</span>);<br>    resolve();<br>&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;8&#x27;</span>)<br>&#125;)<br><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;9&#x27;</span>);<br>    process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;10&#x27;</span>);<br>    &#125;)<br>    <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;11&#x27;</span>);<br>        resolve();<br>    &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;12&#x27;</span>)<br>    &#125;)<br>&#125;)<br><br></code></pre></td></tr></table></figure><details>  <summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>  <pre>1 7 6 8 2 4 3 5 9 11 10 12</pre></details><ul><li><p>Promise</p><ul><li>all<br>å…¨éƒ¨æˆåŠŸæ‰æ˜¯æˆåŠŸ</li><li>any<br>æœ‰ä¸€ä¸ªæˆåŠŸå°±æ˜¯æˆåŠŸ</li><li>race<br>æœ€å…ˆå®Œæˆçš„ç®—å®Œæˆ</li><li>allSettled<br>å…¨éƒ¨å¤„ç†å®Œæ‰ç»“æŸ</li></ul></li><li><p>åƒåœ¾å›æ”¶</p><ul><li>å¼•ç”¨æ¬¡æ•°æ¸…é™¤<br>è®¡ç®—å¯¹è±¡å¼•ç”¨æ¬¡æ•°ï¼Œä¸º0çš„æ¸…é™¤ã€‚</li><li>æ ‡è®°æ¸…é™¤<br>æ´»åŠ¨å¯¹è±¡æ‰“æ ‡ï¼Œæœªæ ‡è®°çš„æ¸…é™¤ã€‚</li></ul></li><li><p>æ¨¡å—åŒ–<br>å°†å¤šä¸ªä¸åŒçš„æ–‡ä»¶ï¼ŒæŒ‰ç…§ä¸€å®šè§„èŒƒè¿›è¡Œåˆ’åˆ†ï¼Œå¾—åˆ°çš„ä¸€ä¸ªä¸ªå—ã€‚</p><ul><li>è§„èŒƒ<ul><li>CommonJS<br>åŒæ­¥åŠ è½½<br>å¯ç¼“å­˜<br>å€¼çš„<strong>æ‹·è´</strong>ï¼Œå†…éƒ¨å€¼æ”¹å˜ä¸ä¼šå½±å“åˆ°å¤–éƒ¨<br><code>module.exportsã€exports.xxx = xxxã€require</code></li><li>AMD<br>å¼‚æ­¥åŠ è½½<br><code>define([module], callback)ã€require([module], callback)</code></li><li>CMD<br>å¯åŒæ­¥(<code>require</code>)ä¹Ÿå¯å¼‚æ­¥(<code>require.async</code>)åŠ è½½<br>ä½¿ç”¨æ—¶æ‰åŠ è½½(å’ŒAMDçš„åŒºåˆ«)<br><code>define(function(require, exports, module) &#123;&#125;)</code></li><li>ESM<br>ES6æ–°è§„èŒƒ<br>é™æ€åŒ–ï¼Œ<strong>ç¼–è¯‘</strong>æ—¶å°±ç¡®å®šä¾èµ–å…³ç³»<br>å€¼çš„<strong>å¼•ç”¨</strong><br><code>export defaultã€ export const xxx = xxã€import xx from xx</code></li><li>UMD<br>é€šç”¨æ¨¡å—è§„èŒƒï¼Œå¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒè¿è¡Œ<br>ç«‹å³æ‰§è¡Œå‡½æ•°å†…å®ç°å‰é¢å„ä¸ªè§„èŒƒçš„å…¼å®¹</li></ul></li></ul></li><li><p>æ€§èƒ½ä¼˜åŒ–</p><ul><li>ä»£ç ä¼˜åŒ–<ul><li>é˜²æŠ–èŠ‚æµ</li><li>cssText</li><li>é‡ç»˜é‡æ’</li><li>æ‡’åŠ è½½</li><li>äº‹ä»¶å§”æ‰˜</li></ul></li><li>æ„å»ºä¼˜åŒ–<ul><li>ä»£ç å‹ç¼©</li><li>gzip</li><li>cdn</li></ul></li><li>å…¶ä»–<ul><li>http2</li><li>å›¾ç‰‡å‹ç¼©</li><li>å‡å°‘è¯·æ±‚</li><li>ç¼“å­˜</li></ul></li></ul></li><li><p><code>this</code>æŒ‡å‘</p><ul><li>æ™®é€šå‡½æ•°<br>ä¸ä½œä¸ºå¯¹è±¡å±æ€§æ—¶ï¼Œ<code>this</code>æŒ‡å‘<strong>å…¨å±€</strong></li><li>æ–¹æ³•å‡½æ•°<br>ä½œä¸ºå¯¹è±¡æ–¹æ³•ï¼Œ<code>this</code>æ‰§è¡Œ<strong>å¯¹è±¡</strong></li><li>æ„é€ å‡½æ•°<br>ä½œä¸ºæ„é€ å‡½æ•°ï¼Œæ‰§è¡Œ<code>new</code>å‰åˆ›å»ºå¯¹è±¡ï¼Œ<code>this</code>æŒ‡å‘è¯¥<strong>å¯¹è±¡</strong></li><li><code>call</code>ã€<code>apply</code>ã€<code>bind</code><br>æŒ‡å‘ä¼ å…¥<strong>å¯¹è±¡</strong></li></ul></li><li><p><code>json</code><br><code>function</code>ã€<code>undefined</code>ä¼šè¢«å¿½ç•¥<br><code>NaN</code>å˜ä¸º<code>null</code></p></li><li><p><code>offsetWidth</code>ã€<code>clientWidth</code>ã€<code>scrollWidth</code><br>clientWidth = width + padding<br>offsetWidth = width + padding + borderWidth + scrollBarWidth<br>scrollWidth = width + padding + scrollWidth</p></li><li><p>ä¸€é“å¥‡æ€ªçš„é¢˜ç›®</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"></span>) </span>&#123;<br>  getName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    alert(<span class="hljs-number">1</span>);<br>  &#125;;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span>(<span class="hljs-params"></span>) </span>&#123;<br>  alert(<span class="hljs-number">5</span>);<br>&#125;<br>Foo.getName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  alert(<span class="hljs-number">2</span>);<br>&#125;;<br>Foo.prototype.getName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  alert(<span class="hljs-number">3</span>);<br>&#125;;<br><span class="hljs-keyword">var</span> getName = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  alert(<span class="hljs-number">4</span>);<br>&#125;;<br><br><span class="hljs-comment">//è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æœï¼š</span><br>Foo.getName();<br>getName(); <br>Foo().getName(); <br>getName();<br><span class="hljs-keyword">new</span> Foo.getName();<br><span class="hljs-keyword">new</span> Foo().getName();<br><span class="hljs-keyword">new</span> <span class="hljs-keyword">new</span> Foo().getName(); <br></code></pre></td></tr></table></figure><details>  <summary>    ç‚¹å‡»æŸ¥çœ‹ä»£ç 1  </summary>  <div>    2 4 1 1 2 3 3  </div></details><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><blockquote><p>å‚è€ƒèµ„æ–™<br><a href="https://juejin.cn/post/6844903784229896199">ä»URLè¾“å…¥åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿä»€ä¹ˆï¼Ÿ</a><br><a href="https://juejin.cn/post/7061588533214969892#heading-27">åšäº†ä¸€ä»½å‰ç«¯é¢è¯•å¤ä¹ è®¡åˆ’ï¼Œä¿ç†Ÿï½</a><br><a href="https://juejin.cn/post/6844903512845860872#heading-3">è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶</a><br><a href="https://zhuanlan.zhihu.com/p/149734572?from_voters_page=true">èŠèŠè·¨åŸŸçš„åŸç†ä¸è§£å†³æ–¹æ³•</a><br><a href="https://www.cnblogs.com/xxcanghai/p/5189353.html">ä¸€é“å¸¸è¢«äººè½»è§†çš„å‰ç«¯JSé¢è¯•é¢˜</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>basic</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯åŸºç¡€å›é¡¾-1-åŸå‹å’ŒåŸå‹é“¾</title>
    <link href="/2023/01/15/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-1-%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
    <url>/2023/01/15/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%9B%9E%E9%A1%BE-1-%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/</url>
    
    <content type="html"><![CDATA[<p>å…œå…œè½¬è½¬å·¥ä½œäº†ä¹Ÿæœ‰å¿«ä¸¤å¹´äº†ï¼Œæœ€ç»ˆè¿˜æ˜¯å†³å®šæ‹¾èµ·å½“åˆçš„<code>js</code>åŸºç¡€ã€‚<br>æ¯•ç«Ÿå®Œå…¨ç†è§£å®ƒæ‰èƒ½æ›´åŠ æ·±å…¥å‰ç«¯è¿™ä¸ªè¡Œä¸šï¼ŒæŠ€æœ¯æ‰èƒ½æœ‰æ›´å¤§çš„çªç ´ã€‚</p><p>æœ¬æ–‡æ˜¯é‡å­¦åŸºç¡€çš„ç¬¬ä¸€ç¯‡ï¼Œå…³äº<strong>åŸå‹å’ŒåŸå‹é“¾</strong>ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><p>æœ€è¿‘æƒ³å°è¯•é˜…è¯»ä¸€ä¸‹<a href="https://github.com/axios/axios">axios</a>çš„æºç ï¼Œå‚è€ƒå¤§ä½¬çš„<a href="https://mp.weixin.qq.com/s/GNYpgHo97xml0NxT93dHxQ">æ¶æ„æ–‡ç« </a>ï¼Œåœ¨çœ‹åˆ°ç¬¬ä¸€ä¸ªå‡½æ•°æ—¶å°±æœ‰ç‚¹åƒåŠ› ğŸ˜“ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createInstance</span>(<span class="hljs-params">defaultConfig</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> context = <span class="hljs-keyword">new</span> Axios(defaultConfig);<br><br>  <span class="hljs-keyword">const</span> instance = bind(Axios.prototype.request, context);<br><br>  <span class="hljs-comment">// Copy axios.prototype to instance</span><br>  utils.extend(instance, Axios.prototype, context, &#123;<span class="hljs-attr">allOwnKeys</span>: <span class="hljs-literal">true</span>&#125;);<br><br>  <span class="hljs-comment">// Copy context to instance</span><br>  utils.extend(instance, context, <span class="hljs-literal">null</span>, &#123;<span class="hljs-attr">allOwnKeys</span>: <span class="hljs-literal">true</span>&#125;);<br><br>  <span class="hljs-comment">// Factory for creating new instances</span><br>  instance.create = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span>(<span class="hljs-params">instanceConfig</span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> createInstance(mergeConfig(defaultConfig, instanceConfig));<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> instance;<br>&#125;<br><span class="hljs-keyword">const</span> axios = createInstance(defaults)<br><br>axios.xxx = xxx <br><span class="hljs-comment">// ...</span><br><br></code></pre></td></tr></table></figure><p>å¹³å¸¸åœ¨ä½¿ç”¨çš„æ—¶å€™å°±å‘ç°ï¼Œ<code>axios</code>å¯¼å‡ºçš„å®ä¾‹æœ‰éå¸¸å¤šçš„å†™æ³•ä»¥åŠ<code>api</code>ã€‚<br><code>axios.post()</code><br><code>axios()</code><br><code>axios.create</code><br>ä¼¼ä¹æ˜¯æ›´æ”¹äº†å®ä¾‹çš„åŸå‹é“¾å…³ç³»ã€‚<br><img src="/images/å‰ç«¯åŸºç¡€å›é¡¾/åŸå‹å’ŒåŸå‹é“¾/axios-structure.jpeg" /></p><blockquote><p>å›¾ç‰‡æ¥æº <a href="https://mp.weixin.qq.com/s/GNYpgHo97xml0NxT93dHxQ">å­¦ä¹  axios æºç æ•´ä½“æ¶æ„ï¼Œæ‰“é€ å±äºè‡ªå·±çš„è¯·æ±‚åº“</a></p></blockquote><h3 id="æ¦‚å¿µ">æ¦‚å¿µ</h3><ul><li>åŸå‹<br><code>js</code>å½“ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆé™¤äº†<code>null</code>ï¼‰éƒ½ä¼šæœ‰ä¸€ä¸ªå…³è”å¯¹è±¡ï¼Œåƒæ˜¯çˆ¶å­å…³ç³»ï¼Œå®ƒå°±æ˜¯åŸå‹ã€‚<br><strong>å¯¹è±¡</strong>éƒ½ä¼šä»åŸå‹ä¸Šé¢ç»§æ‰¿å®ƒçš„å±æ€§ã€‚</li><li>åŸå‹é“¾<br>è¿ç»­å…³è”çš„åŸå‹å³æ˜¯åŸå‹é“¾ã€‚<br>æ¯”å¦‚<code>A -&gt; B -&gt; Object</code></li><li>åŸºç¡€ç±»å‹å’Œå¼•ç”¨ç±»å‹<br>åŸºç¡€ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«å°±æ˜¯åœ¨å †æ ˆä¸­çš„<strong>å­˜å‚¨æ–¹å¼</strong>ä¸åŒã€‚<br><strong>åŸºç¡€ç±»å‹</strong>å­˜å‚¨çš„æ˜¯ä»–çš„å€¼ã€‚<br><strong>å¼•ç”¨ç±»å‹</strong>å­˜å‚¨çš„æ˜¯ä»–çš„å€¼çš„å¼•ç”¨ã€‚<br>æ¯”å¦‚ä¸‹é¢è¿™æ ·</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> a = <span class="hljs-number">100</span> <br><span class="hljs-keyword">var</span> b = a <br>a = <span class="hljs-number">200</span> <br><span class="hljs-built_in">console</span>.log(a, b) <span class="hljs-comment">// 200 100 </span><br><br><span class="hljs-keyword">var</span> objA = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">100</span> &#125;<br><span class="hljs-keyword">var</span> objB = objA <br>objA.a = <span class="hljs-number">200</span> <br><span class="hljs-comment">// å¼•ç”¨ç±»å‹çš„å€¼åªæ˜¯ä¸€ä¸ªå¼•ç”¨çš„åœ°å€ï¼Œå½“å®é™…å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰å¼•ç”¨åœ°å€çš„å€¼éƒ½ä¼šå‘ç”Ÿå˜åŒ–</span><br><span class="hljs-built_in">console</span>.log(objA.a, objB.a) <span class="hljs-comment">// 200 200</span><br></code></pre></td></tr></table></figure><ul><li>__proto__<br>æ‰€æœ‰çš„å¼•ç”¨ç±»å‹éƒ½æœ‰ä¸€ä¸ª<code>__proto__</code>å±æ€§ï¼Œä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ã€‚<br><img src="/images/å‰ç«¯åŸºç¡€å›é¡¾/åŸå‹å’ŒåŸå‹é“¾/proto.jpg" /></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-attr">constructor</span>: xxx,<br>  <span class="hljs-attr">__proto__</span>: xx<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>prototype<br><code>__proto__</code>æŒ‡å‘å‘äº†å®ƒçš„æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§<br><img src="/images/å‰ç«¯åŸºç¡€å›é¡¾/åŸå‹å’ŒåŸå‹é“¾/prototype.jpg" /></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-attr">constructor</span>: xxx,<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢çš„å›¾å¯ä»¥çœ‹åˆ°<code>const obj = &#123;&#125;</code>çš„<code>__proto__</code>æŒ‡å‘çš„å°±æ˜¯æ„é€ å‡½æ•°<code>Object</code>çš„<code>prototype</code><br>å½“è¯•å›¾å»è·å–ä¸€ä¸ªå½“å‰å€¼ä¸Šä¸å­˜åœ¨çš„æŸä¸ªå±æ€§æ—¶ï¼Œå®ƒä¼šå»å®ƒçš„<code>__proto__</code>ä¸Šæ‰¾ï¼Œä¸€ç›´å¾€ä¸Šï¼Œç›´åˆ°ä¸º<code>null</code>ä¸ºæ­¢ï¼ˆæœ€é¡¶å±‚ä¸º<code>null</code>ï¼‰ã€‚</p><blockquote><p>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰<code>__proto__</code>å¯¹è±¡ï¼Œåªæœ‰å‡½æ•°å¯¹è±¡æ‰ä¼šæœ‰<code>prototype</code>å¯¹è±¡ã€‚</p></blockquote><h4 id="æ„é€ å‡½æ•°çš„åŸå‹é“¾å…³ç³»">æ„é€ å‡½æ•°çš„åŸå‹é“¾å…³ç³»</h4><p>è®°å½•ä¸€ä¸‹å®Œæ•´çš„æ„é€ å‡½æ•°çš„åŸå‹é“¾å…³ç³»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span> </span>&#123;<br><br>  name = <span class="hljs-string">&quot;parent&quot;</span><br><br>  <span class="hljs-function"><span class="hljs-title">getName</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.name <br>  &#125;<br><br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Parent</span> </span>&#123;<br><br>  name = <span class="hljs-string">&quot;child&quot;</span><br><br>&#125;<br><br><span class="hljs-keyword">const</span> parent = <span class="hljs-keyword">new</span> Parent()<br><span class="hljs-keyword">const</span> child = <span class="hljs-keyword">new</span> Child() <br><br><span class="hljs-built_in">console</span>.log(parent.__proto__ === Parent.prototype) <span class="hljs-comment">// true </span><br><span class="hljs-built_in">console</span>.log(child.__proto__ === Child.prototype) <span class="hljs-comment">// true </span><br><span class="hljs-built_in">console</span>.log(child.__proto__ === Parent.prototype) <span class="hljs-comment">// false </span><br><span class="hljs-built_in">console</span>.log(Child.prototype === Parent.prototype) <span class="hljs-comment">// false  </span><br><span class="hljs-built_in">console</span>.log(Child.__proto__ === Parent) <span class="hljs-comment">// true </span><br><span class="hljs-built_in">console</span>.log(Parent.prototype.__proto__ === <span class="hljs-built_in">Object</span>.prototype) <span class="hljs-comment">// true </span><br><br></code></pre></td></tr></table></figure><blockquote><p>å›¾ç‰‡æ¥æº <a href="https://juejin.cn/post/6844903989088092174">è½»æ¾ç†è§£JS åŸå‹åŸå‹é“¾</a></p></blockquote><h3 id="å°ç»ƒä¹ ">å°ç»ƒä¹ </h3><ol><li>parent.<strong>proto</strong> === Parent.prototype</li></ol><details>  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>  <pre>true</pre></details>  <ol start="2"><li>child.<strong>proto</strong> === Child.prototype</li></ol><details>  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>  <pre>true</pre></details><ol start="3"><li>Child.<strong>proto</strong> === Parent</li></ol><details>  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>  <pre>true</pre></details><ol start="4"><li>Parent.prototype.<strong>proto</strong> === Object.prototype</li></ol><details>  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>  <pre>true</pre></details><ol start="5"><li>Parent.prototype.constructor === Parent</li></ol><details>  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>  <pre>true</pre></details><ol start="6"><li>Object.prototype.<strong>proto</strong> = ?</li></ol><details>  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>  <pre>null</pre></details><ol start="7"><li>Function.prototype.<strong>proto</strong> = ?</li></ol><details>  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>  <pre>Object.prototype</pre></details><h3 id="ç»§æ‰¿">ç»§æ‰¿</h3><ul><li>æ„é€ å‡½æ•°ç»§æ‰¿</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Parent</span>(<span class="hljs-params">name</span>) </span>&#123;<br>  <span class="hljs-built_in">this</span>.name = name <br>&#125;<br>Parent.prototype.say = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Child</span>(<span class="hljs-params">name, subName</span>) </span>&#123;<br><br>&#125;<br><span class="hljs-comment">// åŸå‹æ‰§è¡ŒParentï¼Œå¯ä»¥è®¿é—®åˆ°Parentçš„åŸå‹ä¸Šçš„å±æ€§</span><br>Child.prototype = <span class="hljs-keyword">new</span> Parent()<br><span class="hljs-comment">// æ„é€ å™¨è¿˜æ˜¯æŒ‡å‘è‡ªå·±</span><br>Child.prototype.constructor = Child <br></code></pre></td></tr></table></figure><ul><li>å¯„ç”Ÿç»„åˆç»§æ‰¿</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Parent</span>(<span class="hljs-params">name</span>) </span>&#123;<br>  <span class="hljs-built_in">this</span>.name = name <br>&#125;<br>Parent.prototype.say = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name)<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Child</span>(<span class="hljs-params">name, subName</span>) </span>&#123;<br>  <span class="hljs-comment">// å”¯ä¸€å’Œä¸Šé¢ä¸ä¸€æ ·çš„åœ°æ–¹</span><br>  <span class="hljs-comment">// ä¸ºäº†èƒ½å°†å‚æ•°æ­£ç¡®èµ‹å€¼ç»™æ„é€ å‡½æ•°</span><br>  Parent.call(<span class="hljs-built_in">this</span>, name)<br>  <span class="hljs-built_in">this</span>.subName = subName<br>&#125;<br><span class="hljs-comment">// åŸå‹æ‰§è¡ŒParentï¼Œå¯ä»¥è®¿é—®åˆ°Parentçš„åŸå‹ä¸Šçš„å±æ€§</span><br>Child.prototype = <span class="hljs-keyword">new</span> Parent()<br><span class="hljs-comment">// æ„é€ å™¨è¿˜æ˜¯æŒ‡å‘è‡ªå·±</span><br>Child.prototype.constructor = Child <br></code></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><h3 id="å››å‡†åˆ™">å››å‡†åˆ™</h3><ol><li>jsåˆ†ä¸ºå‡½æ•°å¯¹è±¡å’Œæ™®é€šå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰__proto__å±æ€§ï¼Œä½†æ˜¯åªæœ‰å‡½æ•°å¯¹è±¡æ‰æœ‰prototypeå±æ€§</li><li>Objectã€Functionéƒ½æ˜¯jså†…ç½®çš„å‡½æ•°, ç±»ä¼¼çš„è¿˜æœ‰æˆ‘ä»¬å¸¸ç”¨åˆ°çš„Arrayã€RegExpã€Dateã€Booleanã€Numberã€String</li><li>å±æ€§__proto__æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰ä¸¤ä¸ªå±æ€§ï¼Œconstructorå’Œ__proto__</li><li>åŸå‹å¯¹è±¡prototypeæœ‰ä¸€ä¸ªé»˜è®¤çš„constructorå±æ€§ï¼Œç”¨äºè®°å½•å®ä¾‹æ˜¯ç”±å“ªä¸ªæ„é€ å‡½æ•°åˆ›å»º</li></ol><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><blockquote><p>å‚è€ƒèµ„æ–™<br><a href="https://juejin.cn/post/6844903989088092174">è½»æ¾ç†è§£JS åŸå‹åŸå‹é“¾</a><br><a href="https://juejin.cn/post/7061588533214969892#heading-32">åšäº†ä¸€ä»½å‰ç«¯é¢è¯•å¤ä¹ è®¡åˆ’ï¼Œä¿ç†Ÿï½</a><br><a href="https://mp.weixin.qq.com/s/GNYpgHo97xml0NxT93dHxQ">å­¦ä¹  axios æºç æ•´ä½“æ¶æ„ï¼Œæ‰“é€ å±äºè‡ªå·±çš„è¯·æ±‚åº“</a><br><a href="https://juejin.cn/post/6934498361475072014#heading-2">é¢ä¸é¢è¯•çš„ï¼Œä½ éƒ½å¾—æ‡‚åŸå‹å’ŒåŸå‹é“¾</a><br><a href="https://github.com/vortesnail/blog/issues/1">åŸå‹é“¾ç»§æ‰¿å›¾è§£</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>é¢è¯•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>basic</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯é¡¹ç›®gh-pageséƒ¨ç½²</title>
    <link href="/2023/01/14/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AEgh-pages%E9%83%A8%E7%BD%B2/"/>
    <url>/2023/01/14/%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AEgh-pages%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰ç«¯é¡¹ç›®gh-pageséƒ¨ç½²">å‰ç«¯é¡¹ç›®gh-pageséƒ¨ç½²</h2><h2 id="å¼€å§‹">å¼€å§‹</h2><p>æœ€è¿‘çš„è‡ªå·±é¡¹ç›®éœ€è¦éƒ¨ç½²åˆ°<code>github-pages</code>ï¼Œéœ€è¦ç”¨åˆ°<a href="https://github.com/tschaub/gh-pages">gh-pages</a>è¿™ä¸ªåŒ…ã€‚</p><h3 id="å‘½ä»¤è¡Œ">å‘½ä»¤è¡Œ</h3><ul><li>å®‰è£…ä¾èµ–<br><code>yarn add gh-pages -D</code></li><li>packageæ·»åŠ å‘½ä»¤<br><code>deploy: gh-pages -d dist</code></li><li>é…ç½®<br>å› ä¸ºé¡¹ç›®ä½¿ç”¨çš„æ˜¯<code>github actions</code>ï¼Œæ•…åœ¨<code>yml</code>é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ã€‚</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">ğŸš€</span><br>  <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br>    <span class="hljs-string">yarn</span> <span class="hljs-string">deploy</span><br></code></pre></td></tr></table></figure><ul><li>æäº¤<br>ä½†æ˜¯å‘ç°æŠ¥é”™äº†ã€‚<br><img src="/images/å‰ç«¯é¡¹ç›®gh-pageséƒ¨ç½²/auth-error.jpg" /></li></ul><p>çœ‹æ˜¯æŠ¥äº†<code>auth</code>é”™è¯¯ã€‚</p><h3 id="github-action">github action</h3><p>åé¢å‘ç°å¯ä»¥ç›´æ¥ä½¿ç”¨<code>github action</code>å®Œæˆã€‚</p><ul><li>è·å–<code>access token</code><br>ä¸ªäºº<code>github</code>çš„<code>settings/Developer settings/Personal access tokens/Tokens(classic)</code><br>Grenerate new token<br><img src="/images/å‰ç«¯é¡¹ç›®gh-pageséƒ¨ç½²/access-token.jpg" /><br><img src="/images/å‰ç«¯é¡¹ç›®gh-pageséƒ¨ç½²/access-token-detail.jpg" /></li></ul><p>ç”Ÿæˆæ–°<code>token</code>ï¼Œå¹¶å¤åˆ¶ã€‚</p><ul><li>è®¾ç½®é¡¹ç›®ç¯å¢ƒå˜é‡<br>åœ¨é¡¹ç›®ä¸­<code>Settings/Secrets and variables/Actions</code><br>åˆ›å»ºæ–°çš„ç¯å¢ƒå˜é‡ï¼Œä¾‹å­ä¸­ç¯å¢ƒå˜é‡çš„åå­—ä¸º<code>DEPLOY_TOKEN</code><br><img src="/images/å‰ç«¯é¡¹ç›®gh-pageséƒ¨ç½²/secrets.jpg" /></li><li>é¡¹ç›®å·¥ä½œæµè®¾ç½®</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">ğŸš€</span><br>  <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">    git remote set-url origin https://git:$&#123;GITHUB_TOKEN&#125;@github.com/your-github-username/your-registry-name.git</span><br><span class="hljs-string">    npx gh-pages -d dist -u &quot;github-actions-bot &lt;support+actions@github.com&gt;&quot;</span><br><span class="hljs-string"></span>  <span class="hljs-attr">env:</span><br>    <span class="hljs-attr">GITHUB_TOKEN:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.DEPLOY_TOKEN</span> <span class="hljs-string">&#125;&#125;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„<code>secrets.DEPLOY_TOKEN</code>å³ä¸ºåˆšåˆšè®¾ç½®çš„<strong>ç¯å¢ƒå˜é‡</strong>ã€‚<br><code>your-github-username</code>æ˜¯ä½ çš„githubç”¨æˆ·åã€‚<br><code>your-registry-name</code>æ˜¯ä½ çš„ä»“åº“åã€‚</p><ul><li>æäº¤éƒ¨ç½²<br>ä»¥ä¸Šå³å¯å®Œæˆé¡¹ç›®çš„<code>gh-pages</code>éƒ¨ç½²ã€‚</li></ul><h2 id="ç»“æŸ">ç»“æŸ</h2><p>å…³äºéƒ¨ç½²å®Œæ•´çš„ä¾‹å­ï¼Œå¯ä»¥å‚è€ƒæˆ‘é¡¹ç›®çš„<a href="https://github.com/food-billboard/create-chart/blob/main/.github/workflows/static-deploy.yml">é…ç½®æ–‡ä»¶</a>ã€‚</p><blockquote><p>å‚è€ƒé“¾æ¥<br><a href="https://juejin.cn/post/6844903977897705485">å¦‚ä½•éƒ¨ç½²create-react-appé¡¹ç›®åˆ°Github pagesæ­¥éª¤</a><br><a href="https://juejin.cn/post/7054872300922863624">GitHub Actions å®ç°æäº¤ä»£ç è‡ªåŠ¨æ‰“åŒ…éƒ¨ç½²åˆ° gh-pages</a><br><a href="https://github.com/tschaub/gh-pages/issues/345">How to use with GitHub Actions?</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>éƒ¨ç½²</category>
      
    </categories>
    
    
    <tags>
      
      <tag>deploy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>umiç¯å¢ƒå˜é‡</title>
    <link href="/2023/01/13/umi%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"/>
    <url>/2023/01/13/umi%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<h1>umiç¯å¢ƒå˜é‡</h1><h2 id="å¼€å§‹">å¼€å§‹</h2><p>umiå¹³å¸¸éƒ½æœ‰ç”¨ï¼Œå…³äºä»–çš„ç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œåšä¸€ä¸ªè¸©å‘è®°å½•ã€‚</p><p>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡å¾ˆå®¹æ˜“ã€‚</p><h3 id="envæ–‡ä»¶">.envæ–‡ä»¶</h3><p>åœ¨æ ¹ç›®å½•æ–°å¢<code>.env</code>æ–‡ä»¶ï¼Œå°†éœ€è¦çš„ç¯å¢ƒå˜é‡è®¾ç½®è¿›å»å³å¯ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">PORT=8000<br>CUSTOM=123<br></code></pre></td></tr></table></figure><h3 id="cross-env">cross-env</h3><p>æ ¹æ®ä¸åŒçš„å‘½ä»¤è®¾ç½®ä¸åŒçš„ç¯å¢ƒå˜é‡<br>å¯ä»¥é€šè¿‡<code>cross-env</code>æ¥è¿›è¡Œè®¾ç½®ã€‚<br><code>cross-env PORT=8000 CUSTOM=123 umi dev</code></p><h3 id="å‘">å‘</h3><p>ä½†æ˜¯éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœåªæ˜¯åƒä¸Šé¢è¿™æ ·è®¾ç½®äº†æ˜¯æ²¡æœ‰åŠæ³•åœ¨é¡¹ç›®ä¸­é€šè¿‡<code>process.env.xxx</code>æ¥è®¿é—®çš„ã€‚<br>ä½ éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé€ä¼ è¦†ç›–æ‰èƒ½è®¿é—®ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> config = &#123;<br>  <span class="hljs-attr">define</span>: &#123;<br>    <span class="hljs-string">&#x27;process.env.PORT&#x27;</span>: process.env.PORT,<br>    <span class="hljs-string">&#x27;process.env.CUSTOM&#x27;</span>: process.env.CUSTOM,<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·æ‰å¯ä»¥åœ¨é¡¹ç›®ä¸­è®¿é—®åˆ°ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>umi</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è£…ä¿®å°è®°</title>
    <link href="/2023/01/11/%E8%A3%85%E4%BF%AE%E5%B0%8F%E8%AE%B0/"/>
    <url>/2023/01/11/%E8%A3%85%E4%BF%AE%E5%B0%8F%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1>è£…ä¿®å°è®°</h1><h2 id="è£…å‰æ€è€ƒ">è£…å‰æ€è€ƒ</h2><h3 id="å®¶åº­ç»“æ„">å®¶åº­ç»“æ„</h3><ul><li>3äººæˆ–5äººä½</li><li>åŸºæœ¬æ— ç•™å®¿æƒ…å†µ</li><li>é•¿æœŸä½</li><li>éœ€è¦æœ‰åŠå…¬åŒº</li><li>æœ‰å¥èº«éœ€æ±‚</li><li>å‘¼å«é“ƒï¼ˆè€äººéœ€æ±‚ï¼‰</li><li>ä¸éœ€è¦å®¢å§</li></ul><h3 id="ç”Ÿæ´»ä¹ æƒ¯">ç”Ÿæ´»ä¹ æƒ¯</h3><h4 id="ç¡çœ ">ç¡çœ </h4><ul><li>éœ€è¦æœ‰è´¨é‡é«˜çš„ç¡çœ ï¼ˆéš”éŸ³ã€é®é˜³ï¼‰</li><li>å§å®¤æœ€å¥½å¯ä»¥æœ‰ç”µè§†</li></ul><h4 id="å«æµ´">å«æµ´</h4><ul><li>è‡³å°‘ä¸¤å«</li><li>å¹²æ¹¿åˆ†ç¦»</li><li>æµ´éœ¸</li><li>æ— éœ€æ™ºèƒ½å«æµ´</li></ul><h4 id="ç€è£…">ç€è£…</h4><ul><li>è´´å¢™é•œ</li><li>è¡£å¸½é—´éœ€è¦ç¨å¾®å¤§ä¸€ç‚¹çš„ä½ç½®</li><li>æŒ‚è¡£æœä¸æ˜¯å æ”¾è¡£æœ</li><li>éœ€è¦æœ‰ä¸€ä¸ªæ”¾ç½®ç©¿è¿‡è¡£æœçš„æŸœå­</li></ul><h4 id="å¨æˆ¿">å¨æˆ¿</h4><ul><li>Lå‹</li><li>å¤„ç†é£Ÿæã€å¤‡é¤ã€åŠ å·¥åŠ¨çº¿é•¿åº¦ä¹‹å’Œæœ€å¥½ä¸è¦è¶…è¿‡6ç±³</li></ul><h4 id="ç”¨é¤">ç”¨é¤</h4><h4 id="ä¼‘é—²">ä¼‘é—²</h4><ul><li>çœ‹ç”µå½±åŠæ‰“æ¸¸æˆï¼ˆæŠ•å½±ï¼‰</li><li>çœ‹ç”µè§†ï¼ˆç”µè§†æœºï¼‰</li><li>å¥èº«ï¼ˆå¥èº«æˆ¿ï¼‰</li><li>ä»£ç ï¼ˆå·¥ä½œåŒºï¼‰</li><li>é˜³å°ç»¿æ¤</li></ul><h4 id="å®¶åŠ¡ä¹ æƒ¯">å®¶åŠ¡ä¹ æƒ¯</h4><ul><li>æ™¾è¡£åŒºï¼ˆå¯å‡é™è¡£æ¶ï¼‰</li><li>æ´—è¡£æœºåº”è¯¥æ˜¯å’Œæ™¾è¡£æœç¦»å¾—å¾ˆè¿‘çš„å§</li><li>æ™¾è¡£é™„è¿‘æ˜¯å¦å¯ä»¥å¤šä¸€ä¸ªå¹²è¡£åŒº</li></ul><h3 id="å®¶å…·å®¶ç”µ">å®¶å…·å®¶ç”µ</h3><ul><li>å®¢å…ç”µè§†</li><li>å®¢å…ç©ºè°ƒ</li><li>å§å®¤ç”µè§†</li><li>å§å®¤ç©ºè°ƒ</li><li>å§å®¤æˆ–è€…å®¢å…æŠ•å½±</li><li>ç›´é¥®æœº</li><li>æ²™å‘èŒ¶å‡ </li><li>ç”µè§†æŸœ</li></ul><h3 id="åŠ¨çº¿è§„åˆ’">åŠ¨çº¿è§„åˆ’</h3><ul><li>å¤§å®¶åº­</li><li>å®¶é‡Œåšé¥­</li><li>ä¸­é¤</li><li>å‡ ä¹æ— è®¿å®¢</li><li>æ’åºï¼šåƒé¥­ã€çœ‹ç”µè§†ã€ç¡è§‰ã€ä¸Šå•æ‰€ã€æ´—æ¾¡ã€æ‰“æ¸¸æˆã€æ™¾è¡£æœã€‚ã€‚ã€‚</li><li>çˆ¶æ¯åœ¨å®¶å®¶åŠ¡åšé¥­ã€å„¿å¥³ä¸‹ç­å›å®¶åƒé¥­ï¼Œçœ‹ç”µè§†ã€èŠå¤©ã€å¨±ä¹ï¼Œä¸Šå•æ‰€ï¼Œæ´—æ¾¡ç¡è§‰ã€‚<br>å¶å°”å‘¨æœ«èŠ‚å‡æ—¥æ™’å¤ªé˜³åƒçƒ§çƒ¤ã€‚</li><li>ä¸»å§å«ç”Ÿé—´ã€å®¢å§<strong>å°½é‡</strong>å«ç”Ÿé—´ã€å…¬å…±å«ç”Ÿé—´</li><li>è¡£å¸½é—´ï¼ˆæˆ–è¡£æŸœï¼‰ã€çˆ¶æ¯ä»…å§å®¤è¡£æŸœ</li><li>ä¹¦æˆ¿ï¼ˆå¯ä¸è¦ï¼‰ï¼Œä½†æ˜¯éœ€è¦ä¸€ä¸ªç”µè„‘åŠå…¬ä½ï¼ˆæ— è¿‡åˆ†ç±»ä¹¦æˆ¿ç¯å¢ƒéœ€æ±‚ï¼‰</li></ul><h2 id="é¢„ç®—è§„åˆ’">é¢„ç®—è§„åˆ’</h2><h3 id="åŸºç¡€è£…ä¿®">åŸºç¡€è£…ä¿®</h3><p>30%ï¼šæ–½å·¥+è¾…æ–™ï¼Œä¹Ÿå°±æ˜¯â€æ°´ç”µç“¦æœ¨æ²¹å®‰è£…â€œå…­å¤§åŸºç¡€å·¥åºï¼›</p><h3 id="ä¸»æ">ä¸»æ</h3><p>30% - 35%ï¼šé—¨çª—ã€ç“·ç –ã€åœ°æ¿ã€å…¨å±‹å®šåˆ¶ã€å¨å«åŠç¯ç­‰ï¼›</p><h3 id="å®¶ç”µè®¾å¤‡">å®¶ç”µè®¾å¤‡</h3><p>20%ï¼šä¸­å¤®ç©ºè°ƒã€åœ°æš–ã€æ–°é£ã€ç”µè§†ã€å¨æˆ¿ç”µå™¨ç­‰ï¼›</p><h3 id="å®¶å…·è½¯è£…">å®¶å…·è½¯è£…</h3><p>15%ï¼šåºŠã€æ²™å‘ã€æ¡Œæ¤…ã€çª—å¸˜ç­‰ã€‚</p><h2 id="æˆ¿å±‹ç»“æ„">æˆ¿å±‹ç»“æ„</h2><p>æ­¤éƒ¨åˆ†æ ¹æ®æœ€åå®é™…æˆ¿å±‹æ¥å£è¿›è¡Œå‚è€ƒã€‚<br>è¿™é‡Œè´´ä¸‹ç†æƒ³ç»“æ„ã€‚</p><h2 id="è£…ä¿®æµç¨‹">è£…ä¿®æµç¨‹</h2><h3 id="å®Œæ•´è¯¦ç»†">å®Œæ•´è¯¦ç»†</h3><img src="/images/è£…ä¿®å°è®°/è£…ä¿®æµç¨‹å›¾.jpeg" /> <h3 id="å‰æœŸå‡†å¤‡">å‰æœŸå‡†å¤‡</h3><ul><li>é€ ä»·è¯„ä¼°</li><li>é¢„ç®—åˆ†é…</li><li>åŠŸèƒ½å¸ƒå±€</li></ul><h3 id="æ‹†é™¤ä¸æ–°å»º">æ‹†é™¤ä¸æ–°å»º</h3><h4 id="ç°åœºä¿æŠ¤">ç°åœºä¿æŠ¤</h4><ul><li>è£…ä¿®ææ–™ä¿æŠ¤</li><li>å¦‚æœéƒ¨åˆ†åŒºåŸŸæ˜¯ä¸éœ€è¦è£…ä¿®çš„ï¼Œé‚£ä¹ˆéœ€è¦åšä¸€å®šçš„ä¿æŠ¤ï¼Œæ¯”å¦‚åŸå…ˆçš„åœ°ç –ï¼Œä½¿ç”¨çŸ³è†æ¿å«åº•ã€‚</li></ul><h4 id="æ‹†é™¤">æ‹†é™¤</h4><ul><li>æ‹†é™¤åŸç”Ÿå­˜åœ¨çš„ç™½å¢™</li><li>æŒ‰ç…§<strong>è®¾è®¡å›¾çº¸</strong>è¦æ±‚ï¼Œå¯¹ç›¸å…³ä¸ç¬¦åˆçš„å¢™ä½“è¿›è¡Œæ‹†é™¤</li></ul><h4 id="ç Œå¢™">ç Œå¢™</h4><ul><li>æ–°å¢å¢™ä½“</li><li>æœ€å¥½ç”¨é’¢ç­‹æ··å‡åœŸæµ‡åœ°æ¢ï¼Œå¢åŠ ç¨³å®šæ€§ã€‚</li><li>æ–°æ—§å¢™ä½“é“¾æ¥å¢åŠ é’¢ç­‹ä¿è¯ç¨³å®šæ€§ã€‚</li><li>åŒé¢æŠ¹ç°æŒ‚<strong>é’¢ç½‘</strong><br><img src="/images/è£…ä¿®å°è®°/æˆ¿æ¢ç Œå¢™å½¢çŠ¶.jpeg" /></li><li>é—¨æ´åŒºåŸŸç”¨å·¥å­—é’¢æˆ–ç°æµ‡è¿‡æ¢<br><img src="/images/è£…ä¿®å°è®°/é—¨æ´åŒºåŸŸ.webp" /></li></ul><h4 id="å¢™åœ°å›ºæ¶‚åˆ·">å¢™åœ°å›ºæ¶‚åˆ·</h4><p>ä½¿å¢™åœ°é¢æ›´ç¨³å®šã€‚<br><a href="https://baijiahao.baidu.com/s?id=1744571166544438231&amp;wfr=spider&amp;for=pc">å‚è€ƒ</a>ã€‚</p><h4 id="å®šåˆ¶æŸœæµ‹é‡">å®šåˆ¶æŸœæµ‹é‡</h4><p>å› ä¸ºå®šåˆ¶æŸœåˆ¶ä½œéœ€è¦æ—¶é—´ï¼Œæå‰æµ‹é‡å®šåšã€‚</p><h4 id="å¨å«è®¾å¤‡å®šåš">å¨å«è®¾å¤‡å®šåš</h4><h3 id="æ°´ç”µå·¥ç¨‹">æ°´ç”µå·¥ç¨‹</h3><h4 id="æ°´ç”µäº¤åº•">æ°´ç”µäº¤åº•</h4><p>é›†åˆæ©±æŸœã€ç©ºè°ƒã€åœ°æš–ã€é›†æˆç¶ä¸­å¤®å‡€æ°´å‚å®¶ï¼Œç¡®å®šä½¿ç”¨æ–¹å¼åŠæ‘†æ”¾å®‰è£…ä½ç½®ï¼Œä¸€èµ·è¿›è¡Œæ°´ç”µå®šä½ï¼Œç”±å‚å®¶å’Œæ°´ç”µå·¥è¿›è¡Œæ°´ç”µäº¤åº•ï¼ˆç”¨ç²‰ç¬”åœ¨å¢™ä¸Šæ ‡æ³¨å¥½ã€æœ‰å›¾æœ‰åºå· ï¼‰</p><h4 id="æ”¹é€ æ°´ç”µ">æ”¹é€ æ°´ç”µ</h4><h5 id="é¡ºåº">é¡ºåº</h5><ul><li>æ°´ç”µäº¤åº•</li><li>æ°´è·¯æ”¹é€ </li><li>æ°´ç”µéªŒæ”¶</li><li>æŒ¡æ°´æ¡å®‰è£…</li><li>åœ°æš–ï¼ˆåº”è¯¥ä¸ç”¨è£…åœ°æš–å§ï¼‰</li><li>çª—æ¡†å®‰è£…</li><li>æ–°é£ã€ä¸­å¤®ç©ºè°ƒå®‰è£…ï¼ˆåº”è¯¥ä¸ç”¨å§ï¼‰</li><li>è´­ä¹°æ°´æ³¥ã€ç ‚æµ†ã€ç“·ç –ã€æ”¶è¾¹æ¡ã€çŸ³æã€åœ°æ¼ç­‰</li></ul><h5 id="æ³¨æ„">æ³¨æ„</h5><ul><li>å†·çƒ­æ°´ç®¡é—´è·150mm</li><li>å·¦çƒ­å³å†·</li><li>å†·çƒ­æ°´ç®¡éƒ½ç”¨ä¿æ¸©æ£‰åŒ…è£¹</li><li>æ°´ç”µä¸èƒ½åŒæ§½</li><li>å¼ºå¼±ç”µäº¤æ¥å¤„éœ€è¦ç”¨<strong>é”¡ç®”çº¸</strong>åŒ…è£¹é¿å…å¼ºå¼±ç”µä¹‹é—´çš„å¹²æ‰°</li><li>æ°´ç®¡æ¯60å…¬åˆ†éœ€è¦ç”¨å¡æ‰£æ‰£ä½å›ºå®šèµ·æ¥ï¼Œé¿å…æ°´å‹è¿‡å¤§å¯¼è‡´æ°´ç®¡æ™ƒåŠ¨ã€‚</li><li>æ°´è·¯<strong>èµ°é¡¶</strong>ä¸èµ°åœ°ï¼Œèµ°ç«–ä¸èµ°æ¨ª</li><li>ä¸è¦å¼€<strong>æ¨ªæ§½</strong></li><li><strong>ææ–™ç¬¦åˆå›½å®¶è§„èŒƒ</strong></li></ul><h3 id="å·¥ç¨‹è¿›åº¦éªŒæ”¶">å·¥ç¨‹è¿›åº¦éªŒæ”¶</h3><h3 id="æ³¥å·¥">æ³¥å·¥</h3><h4 id="å¢™åœ°é¢æ‰¾å¹³ã€å›å¡«">å¢™åœ°é¢æ‰¾å¹³ã€å›å¡«</h4><h5 id="å«ç”Ÿé—´æ³¨æ„">å«ç”Ÿé—´æ³¨æ„</h5><ul><li>å›å¡«ä¹‹å‰éœ€è¦<strong>æ¶‚é˜²æ°´</strong></li><li>å›å¡«ä¹‹å‰ï¼Œæ’æ±¡éƒ½è¦å¸¦<strong>å­˜æ°´å¼¯</strong></li><li>æ’æ±¡æ°´ç®¡<strong>é’çŸ³</strong>ç –å †ç Œå¹¶ç”¨<strong>é»„æ²™</strong>å¤¯å®ï¼Œå†ç”¨<strong>é™¶ç²’</strong>å›å¡«</li><li>å›å¡«åæŒ‚<strong>é’¢ç½‘</strong></li><li>é˜²æ°´å±‚å’Œæ°´æ³¥å±‚ä¸­é—´åšä¸€ä¸ª<strong>æš—è—åœ°æ¼</strong></li><li>ä¸‹æ°´ç®¡é“<strong>éš”éŸ³æ£‰</strong>å¤„ç†</li><li>æ°´ç®¡åŒ…è£¹å¤„ç”¨<strong>Må‹é’¢ç½‘</strong>æŠ¹å¹³</li><li>åœ°æ¼æ˜¯<strong>æœ€ä½ç‚¹</strong>ï¼Œ<strong>æ¢¯å½¢æ’æ°´</strong>å¤„ç†ï¼Œæœ€å¥½åœ¨ç –<strong>æ­£ä¸­é—´</strong>ã€‚</li><li>æµ´å®¤æŸœé‡‡ç”¨<strong>å¢™æ’</strong>ã€‚</li></ul><h4 id="é˜²æ°´ã€é—­æ°´">é˜²æ°´ã€é—­æ°´</h4><ul><li>å«ç”Ÿé—´<br>é«˜åº¦<strong>1800mm</strong><br>èƒŒé¢æœ‰è¡£æŸœéœ€æ¶‚æ»¡å¢™ï¼Œè¡£æŸœèƒŒé¢æ¶‚é˜²æ½®ã€‚<br>å›å¡«å‰ä¸€æ¬¡ï¼Œä¹‹åä¸€æ¬¡<br><strong>æ¸—é€æ€§çš„æŸ”æ€§é˜²æ°´</strong></li><li>é˜³å°<br>é«˜åº¦<strong>30mm</strong></li><li>å¨æˆ¿<br>é«˜åº¦<strong>1000mm</strong></li></ul><h4 id="åœ°æ¼ã€é—¨æ§›çŸ³">åœ°æ¼ã€é—¨æ§›çŸ³</h4><h4 id="è´´ç –">è´´ç –</h4><ul><li>ç“·ç –ã€åœ°ç –ã€è¸¢è„šçº¿</li><li>éªŒæ”¶<strong>æ°´å¹³</strong>ã€<strong>å¹³æ•´åº¦</strong>ã€<strong>ç©ºé¼“</strong></li></ul><h4 id="å‹¾ç¼">å‹¾ç¼</h4><p>åº”è¯¥å’Œ<strong>å¡«ç¼</strong>ä¸€ä¸ªé“ç†å§<br><a href="https://baike.baidu.com/item/%E5%8B%BE%E7%BC%9D/11051483?fr=aladdin">å‹¾ç¼</a></p><h4 id="çª—å°çŸ³ï¼ˆå¯é€‰ï¼‰">çª—å°çŸ³ï¼ˆå¯é€‰ï¼‰</h4><h4 id="ç…¤æ°”ç®¡é“æ”¹çº¿ï¼ˆä¸ç¡®å®šï¼‰">ç…¤æ°”ç®¡é“æ”¹çº¿ï¼ˆä¸ç¡®å®šï¼‰</h4><h4 id="æœ¨æè´­ä¹°åŠæˆå“æœ¨å…·å®šåš">æœ¨æè´­ä¹°åŠæˆå“æœ¨å…·å®šåš</h4><h3 id="æœ¨å·¥">æœ¨å·¥</h3><h4 id="æŸœå­">æŸœå­</h4><p>ä¸€èˆ¬éƒ½æ˜¯<strong>å®šåˆ¶æŸœ</strong><br>è¡£æŸœã€æ©±æŸœã€é‹æŸœã€å‚¨ç‰©æŸœ</p><h4 id="åŠé¡¶">åŠé¡¶</h4><ul><li>è½»é’¢é¾™éª¨</li><li>é¾™éª¨ä¸Šæœ‰ä¸€å±‚åŸºå±‚å›ºå®š</li><li>çŸ³è†æ¿åŠé¡¶ä¸ƒå­—è½¬è§’å¤„ï¼Œç”¨ä¸€æ•´å—åˆ‡å‰²ã€‚</li><li>å›ºå®šèºä¸æ¶‚é˜²é”ˆå‰‚</li><li>æ¯å—çŸ³è†æ¿çš„æ¥ç¼å¤„éƒ½è¦å¼€<strong>Vå‹æ§½</strong>ï¼Œç”¨<strong>å¡«ç¼å‰‚</strong>å¤„ç†æ¥ç¼ã€‚</li></ul><h4 id="é€ å‹å¢™">é€ å‹å¢™</h4><p>å‚è€ƒè¿™ä¸ª<a href="https://www.zhihu.com/question/23190694/answer/89808492">è‰ºæœ¯å½¢å¼çš„é€ å‹å¢™</a>ã€‚</p><h3 id="æ²¹å·¥">æ²¹å·¥</h3><h4 id="å¢™é¢æ‰¾æ–¹">å¢™é¢æ‰¾æ–¹</h4><ul><li>çŸ³è†å¢™é¢æ‰¾å¹³</li><li>è…»å­ç²‰<strong>ä¸¤é</strong></li><li>è£…é—¨</li><li>ç¬¬ä¸‰éè…»å­ç²‰</li><li>é«˜å…‰æ‰“ç£¨</li><li>å…ˆä¸€å±‚åº•æ¼†</li><li>å¦‚æœæ˜¯<strong>å¢™å¸ƒ</strong>åˆ™ç›´æ¥è´´å¢™å¸ƒï¼ˆå¦åˆ™å†åˆ·<strong>ä¸¤å±‚é¢æ¼†</strong>ï¼‰<br><img src="/images/è£…ä¿®å°è®°/å¢™é¢å¤„ç†æ±‡æ€».jpeg" /></li></ul><h4 id="æŸœä½“è£…é¥°é¢å–·æ¼†">æŸœä½“è£…é¥°é¢å–·æ¼†</h4><h3 id="å®‰è£…">å®‰è£…</h3><h4 id="å¨å«">å¨å«</h4><h4 id="åœ°æ¿ã€è¸¢è„šçº¿">åœ°æ¿ã€è¸¢è„šçº¿</h4><h4 id="çª—å°çŸ³">çª—å°çŸ³</h4><h4 id="é—¨ã€å­å£ã€çª—å¥—">é—¨ã€å­å£ã€çª—å¥—</h4><h4 id="å®šåˆ¶æŸœ">å®šåˆ¶æŸœ</h4><h4 id="å¼€å…³ã€æ’åº§ã€ç¯å…·">å¼€å…³ã€æ’åº§ã€ç¯å…·</h4><h3 id="è½¯è£…">è½¯è£…</h3><img src="/images/è£…ä¿®å°è®°/è£…ä¿®æµç¨‹.webp" /><h2 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h2><h3 id="è£…ä¿®å…¬å¸">è£…ä¿®å…¬å¸</h3><ol><li>ä»”ç»†æ ¸éªŒæŠ¥ä»·å•</li></ol><ul><li>æ•…æ„æ¼æŠ¥è£…ä¿®é¡¹</li><li>å¤§é¡¹æ‹†æˆå°é¡¹è®©ä»·æ ¼çœ‹èµ·æ¥ä½</li><li>ææ–™çš„å‹å·è§„æ ¼å†™æ¸…æ¥š</li></ul><ol start="2"><li>ç¦æ­¢æ¶æ„å¢é¡¹</li></ol><ul><li>ä¸šä¸»ä¸æ›´æ”¹è®¾è®¡å¾—æƒ…å†µä¸‹åº”è¯¥æ˜¯<strong>é›¶å¢é¡¹</strong></li></ul><ol start="3"><li>å·¥æœŸ</li></ol><ul><li>æ˜ç¡®å·¥æœŸæ—¶é—´</li><li>ä¸¥æ ¼é™åˆ¶å·¥æœŸå»¶æœŸçš„é—®é¢˜</li></ul><ol start="4"><li>è®¾è®¡å›¾çº¸</li></ol><ul><li>ä¸ä»…é™äºè¯¦ç»†çš„å¹³é¢å›¾çº¸</li><li>éœ€è¦æœ‰è¯¦ç»†çš„æ•ˆæœå›¾çº¸</li></ul><ol start="5"><li>å”®åæœåŠ¡å“ªä¸ªæ›´å¥½</li><li><strong>ç­¾çº¦æ³¨æ„äº‹é¡¹</strong></li></ol><ul><li>æŸ¥çœ‹åˆåŒæ˜¯ä¸æ˜¯å·¥å•†éƒ¨é—¨ç»Ÿä¸€å°å‘çš„æ­£è§„åˆåŒ</li><li>ä»˜æ¬¾æ¯”ä¾‹ä¸€å®šè¦æ˜ç¡®<br>å¼€å·¥ä»˜30%ï¼Œç“¦å·¥ç»“æŸä»˜30%ï¼Œæ²¹å·¥ç»“æŸä»˜30%ï¼Œå…¨éƒ¨ç«£å·¥ä»˜å°¾æ¬¾10%ï¼Œæ°´ç”µå•ç‹¬ç»“ç®—</li><li>æ–½å·¥å·¥æœŸå’Œå»¶æœŸçš„è´£ä»»è¦æ˜ç¡®<br>å»¶æœŸèµ”é’±</li><li>è¦æ˜ç¡®å‡ºç°æ–½å·¥è´¨é‡é—®é¢˜æ—¶è§£å†³çš„æ–¹æ¡ˆ<br>å‡ºé—®é¢˜çš„èµ”ä»˜ç»†åˆ™</li><li>è¦æ˜ç¡®å‡ºç°æ–½å·¥è´¨é‡é—®é¢˜æ—¶è§£å†³çš„æ–¹æ¡ˆ</li><li>æ˜ç¡®ç«£å·¥åçš„ä¿ä¿®æ¡æ¬¾<br>ä¸€èˆ¬æ¥è¯´ï¼Œæ°´ç”µã€é˜²æ°´éšè”½å·¥ç¨‹ä¿ä¿®5å¹´ï¼Œå…¶ä»–æ–½å·¥å·¥ç¨‹ä¿ä¿®2å¹´</li></ul><h3 id="è£…ä¿®åŠåŒ…">è£…ä¿®åŠåŒ…</h3><h4 id="åŒ…å«å†…å®¹">åŒ…å«å†…å®¹</h4><p>æ°´ç®¡ã€ç”µçº¿ã€ç”µç®¡ã€çº¿ç›’ã€æ²™å­ã€æ°´æ³¥ã€è…»å­ã€é’‰å­ã€çŸ³è†æ¿ã€ä¹³èƒ¶æ¼†ã€é˜²æ°´ã€å‹¾ç¼å‰‚ç­‰ç­‰</p><h5 id="å®¢æˆ·è´­ä¹°">å®¢æˆ·è´­ä¹°</h5>  <img src="/images/è£…ä¿®å°è®°/åŠåŒ…ææ–™æ±‡æ€».webp" /> <h5 id="æ³¨æ„-2">æ³¨æ„</h5><p>å¿…é¡»ç™½çº¸é»‘å­—æŠŠææ–™çš„<strong>å“ç‰Œã€å‹å·ã€ä»·æ ¼</strong>å†™æ¸…æ¥š<br>åœ¨ç­¾è£…ä¿®åˆåŒçš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„å“ªäº›ææ–™æ˜¯è£…ä¿®å…¬å¸ä¹°ï¼Œå“ªäº›éœ€è¦ä¸šä¸»è‡ªå·±è´­ä¹°ã€‚åšåˆ°â€œç™½çº¸é»‘å­—â€ï¼ŒæŠŠææ–™çš„å“ç‰Œå‹å·å’Œè§„æ ¼éƒ½æ˜ç¡®ä¸‹æ¥<br>è£…ä¿®æŠ¥ä»·ï¼šæˆ‘ä»¬è¦ç•™æ„æŠ¥ä»·è¡¨ä¸Šæ˜¯å¦è¯¦ç»†ï¼Œæœ‰æ²¡æœ‰å¢é¡¹ã€æ¼é¡¹ã€é‡å¤æ”¶è´¹é¡¹ç­‰</p><h3 id="åˆåŒç­¾è®¢">åˆåŒç­¾è®¢</h3><blockquote><p>ä»¥ä¸‹å‡ä¸ºä¸ªäººè§‚ç‚¹</p></blockquote><ol><li>è£…ä¿®è¿‡ç¨‹ä¸­å‡ºç°å·¥äººå—ä¼¤ç­‰æƒ…å†µç”±ä¹™æ–¹å…¨æƒè´Ÿè´£ã€‚</li><li>å‡ºç°å»¶æœŸçš„æƒ…å†µçš„èµ”ä»˜é‡‘é¢ï¼Œæ—¶é—´è®¡ç®—è§„åˆ™ï¼ˆèŠ‚å‡æ—¥æ˜¯å¦ç®—åœ¨å†…ï¼‰</li><li>è´Ÿè´£çš„å„ä¸ªææ–™çš„æ¸…å•ï¼ˆå“ç‰Œã€å‹å·ã€æ•°é‡ï¼‰ï¼Œä»¥åŠä½¿ç”¨éå¯¹åº”ææ–™çš„èµ”ä»˜è§„åˆ™ã€‚</li><li>æ˜¯å¦å·²æä¾›æ‰€æœ‰çš„è®¾è®¡å›¾çº¸ï¼Œæ•ˆæœå›¾</li><li>ç”²ä¹™åŒæ–¹äº¤æµåœ¨å·¥ä½œæ—¶é—´æ‰¾ä¸åˆ°äººçš„æƒ…å†µå¦‚ä½•å¤„ç†</li><li>ä»˜æ¬¾çš„æµç¨‹ï¼ˆä»€ä¹ˆæ—¶é—´ä»˜å¤šå°‘æ¯”ä¾‹çš„æ¬¾ï¼‰</li><li>ä¿è¯åœ¨ç­¾è®¢åï¼Œç”²æ–¹ä¸æ›´æ”¹çš„æƒ…å†µä¸‹ï¼Œä¸è¶…è¿‡å¼€å§‹çš„é¢„ç®—é‡‘é¢</li><li>æ˜¯å¦è™šæŠ¥äº†è£…ä¿®é¢ç§¯</li><li>æ˜ç¡®å»ºæçš„<strong>æŸè€—</strong></li><li>ä¿ä¿®ç»†èŠ‚</li><li>ä¸¤ä»½åˆåŒå¿…é¡»ä¿è¯ä¸€è‡´ï¼Œåç»­å¿…è¦<strong>å˜æ›´</strong>ï¼Œéœ€è¦å†å‡ºå…·ä¸¤æ–¹åˆåŒ</li><li>ä¸è®¾è®¡ä¸ç¬¦çš„æƒ…å†µ</li></ol><h3 id="è®¾è®¡å›¾æ³¨æ„">è®¾è®¡å›¾æ³¨æ„</h3><h3 id="å°‘æ‹†æ”¹">å°‘æ‹†æ”¹</h3><p>å‡å°‘æ‹†æ”¹å°±æ˜¯åœ¨çœé’±ï¼Œå¦‚æœæˆ¿å±‹ç»“æ„æ•´ä½“æ²¡æœ‰é—®é¢˜çš„è¯å°½é‡å°‘æ‹†æ”¹ã€‚</p><h2 id="ææ–™">ææ–™</h2><h3 id="ç”µçº¿">ç”µçº¿</h3><p>å®¶ç”¨çº¿è·¯æ­£å¸¸ä¸º<strong>2.5</strong>å¹³æ–¹é“œèŠ¯çº¿ï¼Œç©ºè°ƒã€çƒ­æ°´å™¨æ­£å¸¸ä¸º<strong>4-6</strong>å¹³æ–¹é“œèŠ¯çº¿ï¼Œæ‰€æœ‰çš„ç”µçº¿å¿…é¡»ç”¨PVCç”µç®¡é“ºè®¾<br>ç”µç®¡PVCã€æ°´ç®¡PPRã€‚</p><h3 id="ä¹³èƒ¶æ¼†">ä¹³èƒ¶æ¼†</h3><p>ç»æµå®æƒ </p><h3 id="çŸ³è†çº¿">çŸ³è†çº¿</h3><p>ç»æµå®æƒ ï¼Œé€‚åˆæ³•å¼é£ã€åŒ—æ¬§é£ã€è½»å¥¢é£</p><h3 id="çª—æˆ·">çª—æˆ·</h3><p>é™éŸ³çª—</p><h3 id="èƒŒæ™¯å¢™">èƒŒæ™¯å¢™</h3><p>é€‰æ‹©ä¸åŒç±»å‹çš„èƒŒæ™¯å¢™ï¼Œä¸ä¸€å®šè´µå°±å¥½ã€‚</p><h3 id="ç“·ç –">ç“·ç –</h3><ul><li>å¼‚å‹ç –<br>å¥½çœ‹ï¼Œè´µï¼Œå¯ä»¥å°èŒƒå›´</li><li>æœ¨çº¹ç –<br>å¥½çœ‹ï¼Œè´µ</li><li>æ–‡åŒ–ç –<br>è´µ</li><li>é©¬èµ›å…‹<br>è´µ</li><li>ç»ç’ƒç –<br>å¥½çœ‹ï¼Œè´µï¼Œå¯ä»¥å°èŒƒå›´</li></ul><h4 id="å¸¸è§è§„æ ¼ç –">å¸¸è§è§„æ ¼ç –</h4><p>ä¸æ­£å¸¸è§„æ ¼ç –çš„æ–½å·¥è´¹æ¯”è¾ƒé«˜ã€‚<br>å¸¸è§è§„æ ¼å¦‚ä¸‹ï¼š</p><blockquote><p>å¢™ç –ï¼š300*300ã€300*600<br>åœ°ç –ï¼š300*300ã€600*600ã€800*800</p></blockquote><h3 id="æœ¨æ">æœ¨æ</h3><!-- æŸœä½“ --><h2 id="ç»“æŸ">ç»“æŸ</h2><p>å…ˆè¿™æ ·æŠŠï¼Œåé¢æœ‰æƒ³åˆ°å•¥å†è¡¥å……ã€‚</p><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><a href="https://www.zhihu.com/question/33602748/answer/1338557186">è£…ä¿®æˆ¿å­æœ‰ä»€ä¹ˆé¡ºåºå’Œæµç¨‹</a><br><a href="https://zhuanlan.zhihu.com/p/465614055">è£…ä¿®å…¨ç³»åˆ—å¹²æ´»~</a><br><a href="https://www.zhihu.com/people/18662821621/posts">è£…ä¿®ç”¨æˆ·ç›¸å…³å¥½æ–‡</a><br><a href="https://zhuanlan.zhihu.com/p/199186378">120ã¡çš„æˆ¿å­è£…ä¿®åªèŠ±6ä¸‡ï¼Ÿä¸ä¿¡ï¼ï¼ˆå«è£…ä¿®çœé’±æ”»ç•¥ï¼‰</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzA3ODY5MzQxNg==&amp;mid=2668195027&amp;idx=2&amp;sn=b630d7a703350bab87fa5f35e828d6e7&amp;chksm=85431994b2349082560396acf8b808ee35bcc5aa3e188aefa72aca4f8137c879a2a5929f3537&amp;scene=21#wechat_redirect">ã€å¹²è´§ã€‘æ°´ç”µæ”¹é€ å…¨æ”»ç•¥ï¼</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzA3ODY5MzQxNg==&amp;mid=2668232093&amp;idx=1&amp;sn=2ebb10674c6f00f4f11e8b0de2a8a139&amp;chksm=854388dab23401cc4da0b337bb0c2cd1fd5468ada4400e01bed35fc244efdfe2fac350ac6048&amp;scene=21#wechat_redirect">å“ªæœ‰ä»€ä¹ˆä¹°è£…ä¿®å»ºæç»éªŒï¼Œä¸éƒ½æ˜¯è¸©å‘è¸©å‡ºæ¥çš„â€¦</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzA3ODY5MzQxNg==&amp;mid=2668191454&amp;idx=1&amp;sn=75840a40435b0e80afca2f8bfa15f2ed&amp;chksm=85432b99b234a28f8cb6215fe57ca88947d4c1ab396f23d516b399b3813a8dadcfc60e2e0e3a&amp;scene=21#wechat_redirect">ç…§ç€è¿™ä»½æ¸…å•ä¹°å®¶ç”µï¼Œé è°±ï¼</a><br><a href="https://www.zhihu.com/question/495225083/answer/2207491241">ç¬¬ä¸€æ¬¡è£…ä¿®ï¼Œè¯¥ä»å“ªé‡Œä¸‹æ‰‹ï¼Ÿ-è£…å°èœœç›‘ç†ç‹å¿—å³°</a><br><a href="https://www.zhihu.com/question/23190694/answer/89808492">ç”µè§†å¢™ä¸æƒ³åšå¤ªå¤æ‚ï¼Œç®€çº¦çš„è®¾è®¡å¦‚ä½•åšå¾—å‡ºå½©ï¼Ÿ</a></p>]]></content>
    
    
    <categories>
      
      <category>life</category>
      
    </categories>
    
    
    <tags>
      
      <tag>life</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-å¤šé€‰æ‹–æ‹½</title>
    <link href="/2023/01/10/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E5%A4%9A%E9%80%89%E6%8B%96%E6%8B%BD/"/>
    <url>/2023/01/10/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E5%A4%9A%E9%80%89%E6%8B%96%E6%8B%BD/</url>
    
    <content type="html"><![CDATA[<h1>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-å¤šé€‰æ‹–æ‹½</h1><h2 id="å¼€å¤´">å¼€å¤´</h2><p>æœ¬æ–‡æ˜¯æ•°æ®å¯è§†åŒ–å¼€å§‹çš„å¼€å‘ç»†èŠ‚ç¬¬äº”ç« ã€‚å…³äºç”»å¸ƒä¸­çš„å…ƒç´ çš„å„ç§é¼ æ ‡æ‹–æ‹½æ“ä½œã€‚</p><blockquote><p>ç®€å•å£°æ˜<br>æœ¬äººåªæ˜¯ä¸€ä¸ªèœé¸¡ï¼Œä»¥ä¸‹æ–¹æ³•ä»…ä¸ªäººæ€è·¯ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè½»å–·ğŸ™ğŸ» ã€‚</p></blockquote><blockquote><p>å¼€å¤´è¯´æ˜<br>ä¸‹é¢æ‰€è¯´çš„<strong>å…ƒç´ </strong>è¡¨ç¤ºçš„æ˜¯<strong>ç»„æˆ–è€…ç»„ä»¶</strong>çš„ç®€ç§°ã€‚</p></blockquote><h2 id="å¼€å§‹">å¼€å§‹</h2><p>å¤§å±è®¾è®¡å½“ä¸­ï¼Œä¸ä¹éœ€è¦è°ƒæ•´å›¾è¡¨ç»„ä»¶çš„<strong>ä½ç½®</strong>å’Œ<strong>å°ºå¯¸</strong>ã€‚<br>ç›¸è¾ƒäºç½‘é¡µä½ä»£ç ï¼Œå›¾è¡¨å¤§å±ä½ä»£ç å¯èƒ½éœ€è¦æ›´å¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚åµŒå¥—<strong>æˆç»„</strong>ã€<strong>å¤šé€‰</strong>ã€<strong>å•å…ƒç´ æ‹–æ‹½ç¼©æ”¾</strong>ã€<strong>å¤šå…ƒç´ æ‹–æ‹½ç¼©æ”¾</strong>ã€‚<br>å¹¶ä¸”éœ€è¦é’ˆå¯¹é¼ æ ‡çš„åŠ¨ä½œåšç›¸åº”çš„åŒºåˆ†ï¼Œå½“ä¸­åŒ…å«äº†ç›¸å½“çš„ç»†èŠ‚ï¼Œè¿™é‡Œå°±ä¸€ä¸€åšç›¸åº”çš„è®²è§£ã€‚</p><h3 id="æ¶‰åŠçš„ä¾èµ–">æ¶‰åŠçš„ä¾èµ–</h3><ul><li><p>react-rnd<br><a href="https://github.com/bokuweb/react-rnd">react-rnd</a>æ˜¯ä¸€ä¸ªåŒ…å«äº†æ‹–æ‹½å’Œç¼©æ”¾ä¸¤ä¸ªåŠŸèƒ½çš„<code>react</code>ç»„ä»¶ï¼Œå¹¶ä¸”æœ‰éå¸¸ä¸°å¯Œçš„é…ç½®é¡¹ã€‚<br>å†…éƒ¨æ˜¯ä¾èµ–äº†æ‹–æ‹½(<a href="https://github.com/react-grid-layout/react-draggable">react-draggable</a>)å’Œç¼©æ”¾ï¼ˆ<a href="https://github.com/bokuweb/re-resizable">re-resizable</a>ï¼‰ä¸¤ä¸ªæ¨¡å—ã€‚<br>å¥ˆä½•å®ƒå¹¶æ²¡æœ‰å†…ç½®å¤šå…ƒç´ çš„å“åº”æ“ä½œï¼Œæœ¬æ–‡å°±æ˜¯é’ˆå¯¹å®ƒæ¥å®ç°å¯¹åº”çš„æ“ä½œã€‚</p></li><li><p>react-selecto<br><a href="https://github.com/daybrush/selecto/tree/master/packages/react-selecto">react-selecto</a>æ˜¯ä¸€ä¸ªç®€å•çš„ç®€å•æ˜“ç”¨çš„å¤šé€‰å…ƒç´ ç»„ä»¶ã€‚</p></li><li><p>eventemitter3<br><a href="https://github.com/primus/eventemitter3">eventemitter3</a>æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶æ¨¡å—ï¼Œèƒ½å¤Ÿåœ¨ä»»ä½•åœ°æ–¹è§¦å‘å’Œå“åº”è‡ªå®šä¹‰çš„äº‹ä»¶ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚</p></li></ul><h3 id="ç›¸å…³æ“ä½œ">ç›¸å…³æ“ä½œ</h3><h4 id="å¤šé€‰">å¤šé€‰</h4><p>ç”»å¸ƒå½“ä¸­å¯ä»¥é€šè¿‡é¼ æ ‡ç‚¹å‡»æ‹–æ‹½å½¢æˆé€‰åŒºï¼Œé€‰åŒºå†…çš„å…ƒç´ å³æ˜¯è¢«é€‰ä¸­çš„çŠ¶æ€ã€‚</p><p>è¿™é‡Œå³å¯ä»¥ä½¿ç”¨<code>react-selecto</code>æ¥å®ç°æ­¤åŠŸèƒ½ã€‚<br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/selecto-demo.gif" /></p><p>ä»å›¾ä¸Šæ“ä½œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨é€‰åŒºå†…çš„å…ƒç´ å³è¢«é€‰ä¸­ï¼ˆä¼šå‡ºç°é»‘è‰²è¾¹æ¡†ï¼‰ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> ReactSelecto <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-selecto&#x27;</span>;<br><br><span class="hljs-keyword">const</span> Selecto = <span class="hljs-function">() =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ReactSelecto</span></span></span><br><span class="hljs-tag"><span class="xml">      // ä¼šè¢«é€‰ä¸­å…ƒç´ çš„çˆ¶å®¹å™¨ åªæœ‰è¿™ä¸ªå®¹å™¨é‡Œçš„å…ƒç´ æ‰ä¼šè¢«é€‰ä¸­  </span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">dragContainer</span>=<span class="hljs-string">&#123;</span>&#x27;#<span class="hljs-attr">container</span>&#x27;&#125;</span></span><br><span class="hljs-tag"><span class="xml">      // è¢«é€‰æ‹©çš„å…ƒç´ çš„<span class="hljs-attr">query</span> </span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">selectableTargets</span>=<span class="hljs-string">&#123;[</span>&#x27;<span class="hljs-attr">.react-select-to</span>&#x27;]&#125;</span></span><br><span class="hljs-tag"><span class="xml">      // è¡¨ç¤ºå…ƒç´ æœ‰è¢«é€‰ä¸­çš„ç™¾åˆ†æ¯”ä¸ºå¤šå°‘æ—¶æ‰èƒ½è¢«é€‰ä¸­</span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">hitRate</span>=<span class="hljs-string">&#123;10&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      // å½“å·²ç»å­˜åœ¨é€‰ä¸­é¡¹æ—¶ï¼ŒæŒ‰ä½æŒ‡å®šæŒ‰é”®å¯è¿›è¡Œç»§ç»­é€‰æ‹©  </span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">toggleContinueSelect</span>=<span class="hljs-string">&#123;</span>&#x27;<span class="hljs-attr">shift</span>&#x27;&#125;</span></span><br><span class="hljs-tag"><span class="xml">      // å¯ä»¥é€šè¿‡ç‚¹å‡»é€‰æ‹©å…ƒç´ </span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">selectByClick</span></span></span><br><span class="hljs-tag"><span class="xml">      // æ˜¯å¦ä»å†…éƒ¨å¼€å§‹é€‰æ‹©ï¼ˆï¼Ÿï¼‰</span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">selectFromInside</span></span></span><br><span class="hljs-tag"><span class="xml">      // æ‹–æ‹½çš„é€Ÿç‡ï¼ˆä¸çŸ¥é“æ˜¯ä¸æ˜¯è¿™ä¸ªæ„æ€ï¼‰</span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">ratio</span>=<span class="hljs-string">&#123;0&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      // é€‰æ‹©ç»“æŸ</span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">onSelectEnd</span>=<span class="hljs-string">&#123;handleSelectEnd&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ReactSelecto</span>&gt;</span></span><br>  );<br>&#125;;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚</p><ol><li>æ“ä½œäº’æ–¥<br>ç”»å¸ƒå½“ä¸­çš„å¤šé€‰å’Œæ‹–æ‹½éƒ½æ˜¯é€šè¿‡é¼ æ ‡å·¦é”®æ¥å®Œæˆçš„ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªå…ƒç´ æ˜¯è¢«é€‰ä¸­çš„æ—¶å€™ï¼Œé¼ æ ‡æƒ³ä»å…ƒç´ ä¸Šå¼€å§‹æ‹–æ‹½é€‰æ‹©ç»„ä»¶æ˜¯ä¸è¢«å…è®¸çš„ï¼Œæ­¤æ—¶åº”è¯¥æ˜¯æ‹–æ‹½å…ƒç´ ï¼Œè€Œä¸æ˜¯å¤šé€‰å…ƒç´ ã€‚</li></ol><p>è€Œå…ƒç´ å¦‚æœæ²¡æœ‰è¢«<strong>é€‰ä¸­</strong>æ—¶ï¼Œä¸Šé¢çš„æ“ä½œåˆ™å˜æˆäº†å¤šé€‰ã€‚</p><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/rnd-select.gif" />  <ol start="2"><li>å†…éƒ¨é€‰ä¸­<br>ç”»å¸ƒå½“ä¸­æœ‰<strong>ç»„</strong>çš„æ¦‚å¿µï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„ä¸ç»„ä»¶æ— é™åµŒå¥—çš„ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥å•ç‹¬é€‰ä¸­ç»„å†…çš„å…ƒç´ ã€‚<br>å½“é€‰ä¸­çš„æ˜¯<strong>ç»„å†…</strong>çš„å…ƒç´ æ—¶ï¼Œå³è¯´æ˜æœ€å¤–å±‚çš„ç»„æ˜¯è¢«<strong>é€‰ä¸­</strong>çš„çŠ¶æ€ï¼ŒåŒæ ·éœ€è¦è€ƒè™‘ä¸Šé¢æ‰€è¯´çš„<strong>äº’æ–¥</strong>é—®é¢˜ã€‚</li></ol><h4 id="å•å…ƒç´ æ‹–æ‹½ç¼©æ”¾">å•å…ƒç´ æ‹–æ‹½ç¼©æ”¾</h4><p>å•å…ƒç´ æ“ä½œç›¸å¯¹ç®€å•ï¼Œåªéœ€è¦ç®€å•ä½¿ç”¨<code>react-rnd</code>æä¾›çš„åŠŸèƒ½å³å¯å®Œæˆã€‚<br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/single-rnd.gif" /></p><h4 id="å¤šå…ƒç´ æ‹–æ‹½ç¼©æ”¾">å¤šå…ƒç´ æ‹–æ‹½ç¼©æ”¾</h4><p>è¿™é‡Œå°±æ˜¯æœ¬æ–‡çš„é‡ç‚¹äº†ï¼Œç»“åˆå‰é¢ä»‹ç»çš„å‡ ä¸ªä¾èµ–ï¼Œå®ç°ä¸€ä¸ªç®€å•çš„å¤šé€‰æ‹–æ‹½ç¼©æ”¾çš„åŠŸèƒ½ã€‚</p><h5 id="å…·ä½“æ€è·¯">å…·ä½“æ€è·¯</h5><p>å¤šä¸ªå…ƒç´ æ‹–æ‹½ï¼Œè¯´åˆ°åº•å…¶å®é¼ æ ‡æ‹–æ‹½çš„è¿˜æ˜¯ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯<strong>é¼ æ ‡æ‹–åŠ¨</strong>çš„é‚£ä¸€ä¸ªå…ƒç´ ã€‚<br>è€Œ<strong>å…¶ä½™</strong>è¢«é€‰ä¸­çš„å…ƒç´ ï¼Œä»…ä»…éœ€è¦æ ¹æ®è¢«æ‹–åŠ¨çš„å…ƒç´ çš„å°ºå¯¸ä½ç½®å˜åŠ¨æ¥åšç›¸åº”çš„<strong>åŠ å‡å¤„ç†</strong>å³å¯ã€‚</p><h5 id="ç›¸å…³é—®é¢˜">ç›¸å…³é—®é¢˜</h5><ul><li>ä¿¡æ¯è®¡ç®—<br>è”åŠ¨å…ƒç´ çš„ä½ç½®å°ºå¯¸ä¿¡æ¯è¯¥å¦‚ä½•è®¡ç®—ã€‚</li><li>ç»„ä»¶é—´é€šä¿¡<br>å› ä¸ºæ¯ä¸€ä¸ªå›¾è¡¨ç»„ä»¶å¹¶éæ˜¯å•çº¯çš„åŒçº§å…³ç³»ï¼Œå¦‚æœæ˜¯é€šè¿‡å±‚å±‚<code>props</code>ä¼ é€’ï¼Œå…ä¸äº†ä¼šæœ‰å¤šä½™çš„åˆ·æ–°ï¼Œé€ æˆ<strong>æ€§èƒ½</strong>é—®é¢˜ã€‚<br>è€Œé€šè¿‡å…¨å±€çš„<code>dva</code>çŠ¶æ€åŒæ ·åœ¨æ›´æ–°çš„æ—¶å€™ä¼šè®©ç»„ä»¶åˆ·æ–°ã€‚</li><li>æ•°æ®åˆ·æ–°<br>å›¾è¡¨æ•°æ®æ˜¯æ¥è‡ªäº<code>dva</code>å…¨å±€çš„æ•°æ®ï¼Œç°åœ¨é¢‘ç¹è‡ªåˆ·æ–°ç›¸å½“äºæ˜¯ä¸€ç›´æ›´æ–°å…¨å±€çš„æ•°æ®ï¼ŒåŒæ ·ä¼šé€ æˆ<strong>æ€§èƒ½</strong>é—®é¢˜ã€‚</li><li>å…¶ä»–<br>ä¸€äº›ç»†èŠ‚é—®é¢˜</li></ul><h4 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h4><ul><li><p>ä¿¡æ¯è®¡ç®—<br>å…³äºä½ç½®çš„è®¡ç®—ç›¸å¯¹ç®€å•ï¼Œåªéœ€è¦å•çº¯çš„å°†æ“ä½œçš„å…ƒç´ çš„ä½ç½®å’Œå°ºå¯¸å·®å€¼ä¼ é€’ç»™è”åŠ¨ç»„ä»¶å³å¯ã€‚</p></li><li><p>ç»„ä»¶é—´é€šä¿¡<br>æ ¹æ®ä¸Šé¢é—®é¢˜çš„è§£æï¼Œå¯ä»¥ä½¿ç”¨<code>eventemitter3</code>æ¥å®Œæˆä»»æ„ä½ç½®ã€å±‚çº§çš„æ•°æ®é€šä¿¡ï¼Œå¹¶ä¸”å®ƒå’Œ<code>react</code>æ¸²æŸ“æ— ä»»ä½•å…³ç³»ã€‚</p></li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; useCallback, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> EventEmitter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;eventemitter3&#x27;</span><br><br><span class="hljs-keyword">const</span> eventemitter = <span class="hljs-keyword">new</span> EventEmitter()<br><br><span class="hljs-keyword">const</span> SonA = <span class="hljs-function">() =&gt;</span> &#123;<br><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;åˆ·æ–°&#x27;</span>)<br><br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> listener = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">console</span>.log(value)<br>    &#125;<br>    eventemitter.addListener(<span class="hljs-string">&#x27;change&#x27;</span>, listener)<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      eventemitter.removeListener(<span class="hljs-string">&#x27;change&#x27;</span>, listener)<br>    &#125;<br>  &#125;, [])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>son A<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>  )<br><br>&#125;<br><br><span class="hljs-keyword">const</span> SonB = <span class="hljs-function">() =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">const</span> handleClick = useCallback(<span class="hljs-function">() =&gt;</span> &#123;<br>    eventemitter.emit(<span class="hljs-string">&#x27;change&#x27;</span>, <span class="hljs-string">&#x27;son B&#x27;</span>)<br>  &#125;, [])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleClick&#125;</span>&gt;</span>son B<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>  )<br><br>&#125;<br><br><span class="hljs-keyword">const</span> Parent = <span class="hljs-function">() =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">SonA</span> /&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">SonB</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  )<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>è¿è¡Œä¸Šé¢çš„ä¾‹å­å¯ä»¥å‘ç°ï¼Œç‚¹å‡»<code>SonB</code>ç»„ä»¶çš„æŒ‰é’®ï¼Œå¯ä»¥è®©<code>SonA</code>æ¥æ”¶åˆ°æ¥è‡ªå…¶çš„æ•°æ®ï¼Œå¹¶ä¸”å¹¶æ²¡æœ‰è§¦å‘<code>SonA</code>çš„åˆ·æ–°ã€‚<br>éœ€è¦<strong>æ¥æ”¶æ•°æ®</strong>çš„ç»„ä»¶åªéœ€è¦ç›‘å¬(<code>addListener</code>)æŒ‡å®šçš„äº‹ä»¶å³å¯ï¼Œæ¯”å¦‚ä¸Šé¢çš„<code>change</code>äº‹ä»¶ã€‚<br>è€Œéœ€è¦<strong>å‘é€æ•°æ®</strong>çš„ç»„ä»¶åˆ™ç›´æ¥å‘å¸ƒ(<code>emit</code>)äº‹ä»¶å³å¯ã€‚<br>è¿™æ ·å°±é¿å…äº†ä¸€äº›ä¸å¿…è¦çš„åˆ·æ–°ã€‚<br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/eventemitter3.gif" /></p><ul><li>æ•°æ®åˆ·æ–°<br>é¢‘ç¹åˆ·æ–°å…¨å±€æ•°æ®ï¼Œä¼šå¯¼è‡´æ‰€æœ‰ä¾èµ–å…¶æ•°æ®çš„ç»„ä»¶éƒ½ä¼šåˆ·æ–°ï¼Œæ‰€ä»¥è€ƒè™‘ä¸ºéœ€è¦åˆ·æ–°æ•°æ®çš„ç»„ä»¶åœ¨å†…éƒ¨å•ç‹¬ç»´æŠ¤ä¸€ä»½çŠ¶æ€ã€‚<br>å½“<strong>å¼€å§‹æ“ä½œ</strong>æ—¶ï¼Œè®°å½•ä¸‹çŠ¶æ€ï¼Œæ ‡è¯†å¼€å§‹ä½¿ç”¨<strong>å†…éƒ¨çŠ¶æ€</strong>è¡¨ç¤ºå›¾è¡¨çš„ä¿¡æ¯ï¼Œ<strong>ç»“æŸæ“ä½œ</strong>æ—¶å¤„ç†ä¸‹å†…éƒ¨æ•°æ®çŠ¶æ€ï¼Œå°†æ•°æ®æ›´æ–°åˆ°å…¨å±€ä¸­å»ã€‚</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; useMemo, useEffect, useState, useRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> EventEmitter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;eventemitter3&#x27;</span><br><br><span class="hljs-keyword">const</span> eventemitter = <span class="hljs-keyword">new</span> EventEmitter()<br><br><span class="hljs-keyword">const</span> Component = <span class="hljs-function">(<span class="hljs-params">props: &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">  position: &#123;left: <span class="hljs-built_in">number</span>, top: <span class="hljs-built_in">number</span>&#125;</span></span><br><span class="hljs-params"><span class="hljs-function">&#125;</span>) =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">const</span> [ position, setPosition ] = useState(&#123;<br>    <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">top</span>: <span class="hljs-number">0</span><br>  &#125;)<br><br>  <span class="hljs-keyword">const</span> isDrag = useRef(<span class="hljs-literal">false</span>)<br><br>  <span class="hljs-keyword">const</span> dragStart = <span class="hljs-function">() =&gt;</span> &#123;<br>    isDrag.current = <span class="hljs-literal">true</span> <br>    setPosition(props.position)<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> drag = <span class="hljs-function">(<span class="hljs-params">position</span>) =&gt;</span> &#123;<br>    setPosition(position)<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> dragEnd = <span class="hljs-function">() =&gt;</span> &#123;<br>    isDrag.current = <span class="hljs-literal">false</span> <br>    <span class="hljs-comment">// TODO </span><br>    <span class="hljs-comment">// æ›´æ–°æ•°æ®åˆ°å…¨å±€</span><br>  &#125;<br><br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    eventemitter.addListener(<span class="hljs-string">&#x27;dragStart&#x27;</span>, dragStart)<br>    eventemitter.addListener(<span class="hljs-string">&#x27;drag&#x27;</span>, drag)<br>    eventemitter.addListener(<span class="hljs-string">&#x27;dragEnd&#x27;</span>, dragEnd)<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      eventemitter.removeListener(<span class="hljs-string">&#x27;dragStart&#x27;</span>, dragStart)<br>      eventemitter.removeListener(<span class="hljs-string">&#x27;drag&#x27;</span>, drag)<br>      eventemitter.removeListener(<span class="hljs-string">&#x27;dragEnd&#x27;</span>, dragEnd)<br>    &#125;<br>  &#125;, [])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">left:</span> (<span class="hljs-attr">isDrag.current</span> ? <span class="hljs-attr">position</span> <span class="hljs-attr">:</span> <span class="hljs-attr">props.position</span>)<span class="hljs-attr">.left</span>,</span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">top:</span> (<span class="hljs-attr">isDrag.current</span> ? <span class="hljs-attr">position</span> <span class="hljs-attr">:</span> <span class="hljs-attr">props.position</span>)<span class="hljs-attr">.top</span></span></span><br><span class="hljs-tag"><span class="xml">      &#125;&#125;</span></span><br><span class="hljs-tag"><span class="xml">    &gt;</span>å›¾è¡¨ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br>  )<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure><blockquote><p>ä¸Šé¢çš„æ•°æ®æ›´æ–°è¿˜å¯ä»¥æ›´åŠ ä¼˜åŒ–ï¼Œå¯¹äº<strong>çŸ­æ—¶é—´</strong>çš„<strong>å¤šæ¬¡</strong>æ›´æ–°æ“ä½œï¼Œå¯ä»¥æ§åˆ¶ä¸€ä¸‹æ›´æ–°é¢‘ç‡ï¼Œå°†å¤šæ¬¡æ›´æ–°åˆå¹¶ä¸ºä¸€æ¬¡ã€‚</p></blockquote><ul><li>å…¶ä»–<ul><li>æ§åˆ¶åˆ·æ–°<br>è¿™é‡Œçš„æ§åˆ¶åˆ·æ–°æŒ‡çš„æ˜¯ä¸Šè¿°çš„å†…éƒ¨åˆ·æ–°ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½å“åº”<code>react-rnd</code>å‘å‡ºçš„ç›¸å…³äº‹ä»¶ï¼Œå¯ä»¥åšå¯¹åº”çš„èŠ‚æµ(<code>throttle</code>)æ“ä½œï¼Œå‡å°‘äº‹ä»¶è§¦å‘é¢‘ç‡ã€‚</li><li>é€šä¿¡å†²çªé—®é¢˜<br>å› ä¸º<strong>æ‰€æœ‰çš„ç»„ä»¶</strong>éƒ½éœ€è¦ç›‘å¬æ‹–æ‹½çš„äº‹ä»¶ï¼ŒåŒ…æ‹¬å½“å‰è¢«æ‹–æ‹½çš„ç»„ä»¶ï¼Œæ‰€ä»¥åœ¨ä¼ é€’ä¿¡æ¯æ—¶ï¼Œéœ€è¦æŠŠè‡ªèº«çš„<code>id</code>ç±»ä¼¼å€¼ä¼ é€’ï¼Œé˜²æ­¢å†²çªã€‚</li><li>ç»„ä»¶çš„ç¼©æ”¾å±æ€§<br>è¿™é‡Œæ˜¯å…³äºå‰æ–‡è¯´åˆ°çš„<strong>æˆç»„</strong>çš„é€»è¾‘ç›¸å…³ï¼Œå› ä¸ºç»„å­˜åœ¨<code>scaleX</code>å’Œ<code>scaleY</code>ä¸¤ä¸ªå±æ€§ï¼Œæ‰€ä»¥åœ¨<strong>è°ƒæ•´å¤§å°</strong>çš„æ—¶å€™ï¼Œä¹Ÿè¦å…¼é¡¾æ­¤å±æ€§ï¼ˆæœ¬æ–‡å…ˆæš‚æ—¶ä¸è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼‰ã€‚</li><li>å•å…ƒç´ é€‰ä¸­æƒ…å†µ<br>è‡ªå®šä¹‰äº‹ä»¶çš„ç›‘å¬æ˜¯<strong>æ— å·®åˆ«</strong>çš„ï¼Œå½“åªé€‰ä¸­äº†ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ‹–æ‹½ç¼©æ”¾æ“ä½œæ—¶ï¼Œæ— é¡»è§¦å‘ç›¸åº”çš„äº‹ä»¶ã€‚</li></ul></li></ul><h4 id="æœ€åçš„DEMO">æœ€åçš„DEMO</h4><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/final-demo.gif" /><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;<br>  useState,<br>  useRef,<br>  useCallback,<br>  useMemo,<br>  useEffect<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; Rnd &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-rnd&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> &#123; RndResizeCallback, RndDragCallback, RndResizeStartCallback &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-rnd&#x27;</span><br><span class="hljs-keyword">import</span> EventEmitter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;eventemitter3&#x27;</span>;<br><span class="hljs-keyword">import</span> ReactSelecto <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-selecto&#x27;</span><br><span class="hljs-keyword">import</span> &#123; throttle &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;lodash&#x27;</span><br><br><span class="hljs-comment">// å¤§å±ç»„ä»¶çš„æ•°æ®ç±»å‹</span><br><span class="hljs-keyword">type</span> ComponentList = &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span><br>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">left</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">top</span>: <span class="hljs-built_in">number</span><br>  <span class="hljs-attr">background</span>: <span class="hljs-built_in">string</span><br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºäº‹ä»¶</span><br><span class="hljs-keyword">const</span> eventEmitter = <span class="hljs-keyword">new</span> EventEmitter()<br><span class="hljs-keyword">const</span> EVENT_MAP = &#123;<br>  <span class="hljs-attr">DRAG_START</span>: <span class="hljs-string">&quot;DRAG_START&quot;</span>,<br>  <span class="hljs-attr">DRAG</span>: <span class="hljs-string">&quot;DRAG&quot;</span>,<br>  <span class="hljs-attr">DRAG_STOP</span>: <span class="hljs-string">&quot;DRAG_STOP&quot;</span>,<br>  <span class="hljs-attr">RESIZE_START</span>: <span class="hljs-string">&quot;RESIZE_START&quot;</span>,<br>  <span class="hljs-attr">RESIZE</span>: <span class="hljs-string">&quot;RESIZE&quot;</span>,<br>  <span class="hljs-attr">RESIZE_STOP</span>: <span class="hljs-string">&quot;RESIZE_STOP&quot;</span><br>&#125;<br><br><span class="hljs-keyword">const</span> getComponentStyle = <span class="hljs-function">(<span class="hljs-params">position: <span class="hljs-built_in">any</span>, size: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> newWidth = <span class="hljs-built_in">parseInt</span>(size.style.width) || <span class="hljs-number">20</span>;<br>  <span class="hljs-keyword">const</span> newHeight = <span class="hljs-built_in">parseInt</span>(size.style.height) || <span class="hljs-number">20</span>;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">width</span>: newWidth,<br>    <span class="hljs-attr">height</span>: newHeight,<br>    <span class="hljs-attr">left</span>: position.x,<br>    <span class="hljs-attr">top</span>: position.y,<br>  &#125;;<br>&#125;;<br><br><span class="hljs-comment">// è¿™é‡Œç”¨åˆ°çš„ dataset æ˜¯htmlåŸç”Ÿdata-çš„å±æ€§  </span><br><span class="hljs-comment">// ç”¨äºæ ‡è¯†ç»„ä»¶</span><br><span class="hljs-keyword">const</span> Selecto = <span class="hljs-function">(<span class="hljs-params">props: &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">  setSelect: (value: <span class="hljs-built_in">string</span>[]) =&gt; <span class="hljs-built_in">void</span>;</span></span><br><span class="hljs-params"><span class="hljs-function">  select: <span class="hljs-built_in">string</span>[]</span></span><br><span class="hljs-params"><span class="hljs-function">&#125;</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> &#123; setSelect, select &#125; = props;<br><br>  <span class="hljs-comment">// è¿™é‡Œå†…éƒ¨æ§åˆ¶ä¸€ä¸ªçŠ¶æ€</span><br>  <span class="hljs-comment">// æ˜¯å› ä¸ºä¸æƒ³é¢‘ç¹åˆ·æ–°é€‰ä¸­çš„çŠ¶æ€ </span><br>  <span class="hljs-comment">// å…¶å®ä¹Ÿæ²¡æœ‰å¿…è¦</span><br>  <span class="hljs-comment">// æœ€åæ‹–æ‹½å®Œæˆå†æ›´æ”¹é€‰ä¸­çŠ¶æ€å°±å¯ä»¥äº† </span><br>  <span class="hljs-keyword">const</span> currentSelect = useRef&lt;<span class="hljs-built_in">string</span>[]&gt;([]);<br><br>  <span class="hljs-comment">// æ‹–æ‹½å®Œæˆæ›´æ”¹çŠ¶æ€</span><br>  <span class="hljs-keyword">const</span> handleSelectEnd = useCallback(<span class="hljs-function">() =&gt;</span> &#123;<br>    setSelect(currentSelect.current);<br>  &#125;, [setSelect]);<br><br>  <span class="hljs-comment">// æ‹–æ‹½ä¸­  </span><br>  <span class="hljs-keyword">const</span> handleSelect = useCallback(<span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; added, removed &#125; = e;<br><br>    <span class="hljs-keyword">const</span> toAddList = added.reduce(<span class="hljs-function">(<span class="hljs-params">acc: <span class="hljs-built_in">any</span>, element: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> select = element.dataset.id;<br>      acc.push(select)<br>      <span class="hljs-keyword">return</span> acc;<br>    &#125;, []);<br>    <span class="hljs-keyword">const</span> toRemoveList = removed.map(<span class="hljs-function">(<span class="hljs-params">element: <span class="hljs-built_in">any</span></span>) =&gt;</span> element.dataset.id);<br><br>    <span class="hljs-keyword">const</span> newSelect = [<br>      ...currentSelect.current.filter(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> !toRemoveList.includes(item)),<br>      ...toAddList,<br>    ];<br>    currentSelect.current = newSelect;<br>  &#125;, []);<br><br>  <span class="hljs-keyword">const</span> handleDragStart = useCallback(<br>    <span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// ç»„ä»¶id</span><br>        <span class="hljs-keyword">const</span> componentId = e.inputEvent.target.dataset?.id;<br>        <span class="hljs-comment">// ç»„ä»¶ç¼©æ”¾çš„è¾¹æ¡†  </span><br>        <span class="hljs-comment">// ä¸æ’é™¤ä»–çš„è¯æ— æ³•ç¼©æ”¾</span><br>        <span class="hljs-keyword">const</span> componentBorder =<br>          e.inputEvent.target.className.includes(<span class="hljs-string">&#x27;react-select-to-border&#x27;</span>);<br>        <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ‰©å±•æ›´å¤šçš„åˆ¤æ–­</span><br>        <span class="hljs-comment">// å› ä¸ºæ ¹æ®å‰é¢ä»‹ç»å¯èƒ½ä¼šä»ç»„å†…å…ƒç´  æˆ–è€… å¤–å±‚ä¸åŒçš„å…ƒç´ å¼€å§‹æ‹–æ‹½  </span><br>        <span class="hljs-comment">// å¯èƒ½ä¼šå­˜åœ¨å†²çª  </span><br><br>        <span class="hljs-keyword">if</span> (!select.includes(componentId) &amp;&amp; !componentBorder) &#123;<br>          setSelect?.([]);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          e.stop();<br>        &#125;<br>      &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>        e.stop();<br>      &#125;<br>    &#125;,<br>    [setSelect, select],<br>  );<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ReactSelecto</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">dragContainer</span>=<span class="hljs-string">&#123;</span>&#x27;#<span class="hljs-attr">container</span>&#x27;&#125;</span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">selectableTargets</span>=<span class="hljs-string">&#123;[</span>&#x27;<span class="hljs-attr">.react-select-to</span>&#x27;]&#125;</span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">hitRate</span>=<span class="hljs-string">&#123;10&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">toggleContinueSelect</span>=<span class="hljs-string">&#123;</span>&#x27;<span class="hljs-attr">shift</span>&#x27;&#125;</span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">selectByClick</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">selectFromInside</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">ratio</span>=<span class="hljs-string">&#123;0&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">onDragStart</span>=<span class="hljs-string">&#123;handleDragStart&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">onSelectEnd</span>=<span class="hljs-string">&#123;handleSelectEnd&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">onSelect</span>=<span class="hljs-string">&#123;handleSelect&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ReactSelecto</span>&gt;</span></span><br>  );<br>&#125;;<br><br><span class="hljs-keyword">const</span> Component = <span class="hljs-function">(<span class="hljs-params">props: ComponentList &amp; &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">  isSelect: <span class="hljs-built_in">boolean</span></span></span><br><span class="hljs-params"><span class="hljs-function">  isMultiSelect: <span class="hljs-built_in">boolean</span></span></span><br><span class="hljs-params"><span class="hljs-function">  onChange: (value: Partial&lt;ComponentList&gt; &amp; &#123; id: <span class="hljs-built_in">string</span> &#125;) =&gt; <span class="hljs-built_in">void</span></span></span><br><span class="hljs-params"><span class="hljs-function">&#125;</span>) =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">const</span> &#123;<br>    isSelect,<br>    background,<br>    left,<br>    top,<br>    width,<br>    height,<br>    id,<br>    onChange,<br>    isMultiSelect<br>  &#125; = props;<br><br>  <span class="hljs-comment">// å†…éƒ¨çš„ä½ç½®ä¿¡æ¯</span><br>  <span class="hljs-keyword">const</span> [statePosition, setStatePosition] = useState(&#123;<br>    <span class="hljs-attr">x</span>: left,<br>    <span class="hljs-attr">y</span>: top<br>  &#125;);<br>  <span class="hljs-comment">// å†…éƒ¨çš„å°ºå¯¸ä¿¡æ¯</span><br>  <span class="hljs-keyword">const</span> [stateSize, setStateSize] = useState(&#123;<br>    width,<br>    height<br>  &#125;)<br>  <span class="hljs-comment">// æ˜¯å¦å¤„äºæ‹–æ‹½ä¸­</span><br>  <span class="hljs-keyword">const</span> [isDealing, setIsDealing] = useState&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">false</span>)<br><br>  <span class="hljs-comment">// æ‹–æ‹½ä¸­çš„ç»„ä»¶çš„ä¿¡æ¯</span><br>  <span class="hljs-comment">// ä½¿ç”¨refæ˜¯ä¸ºäº†åˆ·æ–°</span><br>  <span class="hljs-keyword">const</span> dragInfo = useRef(&#123;<br>    <span class="hljs-attr">left</span>: statePosition?.x || <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">top</span>: statePosition?.y || <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">drag</span>: <span class="hljs-literal">false</span>,<br>  &#125;);<br>  <span class="hljs-comment">// ç¼©æ”¾çš„ç»„ä»¶ä¿¡æ¯</span><br>  <span class="hljs-keyword">const</span> resizeInfo = useRef(&#123;<br>    <span class="hljs-attr">left</span>: statePosition?.x || <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">top</span>: statePosition?.y || <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">width</span>: stateSize?.width || <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">height</span>: stateSize?.height || <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">resize</span>: <span class="hljs-literal">false</span>,<br>  &#125;);<br><br>  <span class="hljs-comment">// æ ¹æ®æ˜¯å¦æ“ä½œçš„çŠ¶æ€ä½¿ç”¨ä¸åŒçš„çŠ¶æ€ä¿¡æ¯</span><br>  <span class="hljs-comment">// ä½ç½®</span><br>  <span class="hljs-keyword">const</span> position = useMemo(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (isDealing) &#123;<br>      <span class="hljs-keyword">return</span> statePosition;<br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">x</span>: left,<br>      <span class="hljs-attr">y</span>: top<br>    &#125;;<br>  &#125;, [left, top, statePosition, isDealing]);<br><br>  <span class="hljs-comment">// æ ¹æ®æ˜¯å¦æ“ä½œçš„çŠ¶æ€ä½¿ç”¨ä¸åŒçš„çŠ¶æ€ä¿¡æ¯</span><br>  <span class="hljs-comment">// å°ºå¯¸</span><br>  <span class="hljs-keyword">const</span> size = useMemo(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (isDealing) <span class="hljs-keyword">return</span> stateSize;<br>    <span class="hljs-keyword">return</span> &#123;<br>      width,<br>      height<br>    &#125;;<br>  &#125;, [width, height, stateSize, isDealing]);<br><br>  <span class="hljs-comment">// è°ƒæ•´å¤§å°æ–¹æ³•</span><br>  <span class="hljs-keyword">const</span> resizeMethod: <span class="hljs-built_in">any</span> = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    e: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    direction: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    ref: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    delta: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    position: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    isSelf: <span class="hljs-built_in">boolean</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    value: ComponentList,</span></span><br><span class="hljs-params"><span class="hljs-function">    outerResizeInfo: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// è·å–åˆ°ä¹‹å‰çš„ä½ç½®ä¿¡æ¯</span><br>    <span class="hljs-keyword">const</span> resizePositionX = (outerResizeInfo || resizeInfo.current).left;<br>    <span class="hljs-keyword">const</span> resizePositionY = (outerResizeInfo || resizeInfo.current).top;<br><br>    <span class="hljs-keyword">let</span> newWidth = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">let</span> newHeight = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// delta </span><br>    <span class="hljs-keyword">let</span> realDeltaX =<br>      <span class="hljs-keyword">typeof</span> resizePositionX === <span class="hljs-string">&#x27;number&#x27;</span> ? position.x - resizePositionX : <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">let</span> realDeltaY =<br>      <span class="hljs-keyword">typeof</span> resizePositionY === <span class="hljs-string">&#x27;number&#x27;</span> ? position.y - resizePositionY : <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// è·å–å½“å‰çš„çŠ¶æ€ä¿¡æ¯</span><br>    <span class="hljs-keyword">const</span> newStyle = getComponentStyle(position, ref);<br>    <span class="hljs-keyword">let</span> defaultChangeConfig: Partial&lt;ComponentList&gt; = &#123;&#125;;<br><br>    <span class="hljs-comment">// é¼ æ ‡æ“ä½œç»„ä»¶</span><br>    <span class="hljs-keyword">if</span> (isSelf) &#123;<br>      <span class="hljs-keyword">const</span> &#123; width, height &#125; = newStyle;<br>      newWidth = width;<br>      newHeight = height;<br>      defaultChangeConfig = &#123;<br>        ...newStyle<br>      &#125;;<br>    &#125; <br>    <span class="hljs-comment">// ä¸æ˜¯é¼ æ ‡æ“ä½œç»„ä»¶</span><br>    <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">const</span> &#123; width, height, left, top &#125; = value;<br>      <span class="hljs-keyword">let</span> realDeltaWidth = outerResizeInfo<br>        ? newStyle.width - outerResizeInfo.width<br>        : <span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">let</span> realDeltaHeight = outerResizeInfo<br>        ? newStyle.height - outerResizeInfo.height<br>        : <span class="hljs-number">0</span>;<br><br>      newWidth = width + realDeltaWidth;<br>      newHeight = height + realDeltaHeight;<br>      defaultChangeConfig = &#123;<br>        <span class="hljs-attr">width</span>: newWidth,<br>        <span class="hljs-attr">height</span>: newHeight,<br>        <span class="hljs-attr">left</span>: left + realDeltaX,<br>        <span class="hljs-attr">top</span>: top + realDeltaY,<br>      &#125;;<br>    &#125;<br><br>    <span class="hljs-comment">// ä¸è€ƒè™‘åµŒå¥—ç»„</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) <span class="hljs-keyword">return</span> defaultChangeConfig<br>    <span class="hljs-comment">// TODO </span><br>    <span class="hljs-comment">// å¯ä»¥ç»§ç»­åœ¨ä¸‹é¢å¤„ç†æ“ä½œç»„çš„é€»è¾‘</span><br>  &#125;;<br><br>  <span class="hljs-comment">// æ‹–æ‹½æ–¹æ³•</span><br>  <span class="hljs-keyword">const</span> dragMethod: <span class="hljs-built_in">any</span> = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    event: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    data: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    isSelf: <span class="hljs-built_in">boolean</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    value: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    outerDragInfo: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; x, y, deltaX, deltaY &#125; = data;<br><br>    <span class="hljs-keyword">const</span> left = x;<br>    <span class="hljs-keyword">const</span> top = y;<br><br>    <span class="hljs-comment">// é¼ æ ‡æ“ä½œç»„ä»¶</span><br>    <span class="hljs-keyword">if</span> (isSelf) &#123;<br>      <span class="hljs-keyword">return</span> &#123;<br>        left,<br>        top,<br>      &#125;;<br>    &#125;<br><br>    <span class="hljs-comment">// ä¸æ˜¯é¼ æ ‡æ“ä½œç»„ä»¶åˆ™ä½¿ç”¨deltaæ¥è¿›è¡Œè®¡ç®—</span><br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">left</span>: value.left + deltaX,<br>      <span class="hljs-attr">top</span>: value.top + deltaY,<br>    &#125;;<br>  &#125;;<br><br>  <span class="hljs-comment">// å¤šç»„ä»¶å¤åˆè°ƒæ•´å¤§å°</span><br>  <span class="hljs-keyword">const</span> multiOnResize: RndResizeCallback = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    e,</span></span><br><span class="hljs-params"><span class="hljs-function">    direction,</span></span><br><span class="hljs-params"><span class="hljs-function">    ref,</span></span><br><span class="hljs-params"><span class="hljs-function">    delta,</span></span><br><span class="hljs-params"><span class="hljs-function">    position,</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> newStyle = getComponentStyle(position, ref);<br><br>    resizeInfo.current.resize = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span><br>    eventEmitter.emit(<br>      EVENT_MAP.RESIZE,<br>      id,<br>      e,<br>      direction,<br>      ref,<br>      delta,<br>      position,<br>      resizeInfo.current,<br>    );<br><br>    <span class="hljs-comment">// æ›´æ–°è‡ªèº«çš„çŠ¶æ€</span><br>    resizeInfo.current = &#123;<br>      ...resizeInfo.current,<br>      ...newStyle,<br>    &#125;;<br>  &#125;;<br><br>  <span class="hljs-comment">// å¤åˆæ‹–æ‹½</span><br>  <span class="hljs-keyword">const</span> multiOnDrag: RndDragCallback = <span class="hljs-function">(<span class="hljs-params">event, data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; x, y &#125; = data;<br><br>    dragInfo.current.drag = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-comment">// è®¡ç®—deltaç»™å…¶ä»–è”åŠ¨ç»„ä»¶ä½¿ç”¨</span><br>    <span class="hljs-keyword">const</span> deltaX = x - dragInfo.current.left;<br>    <span class="hljs-keyword">const</span> deltaY = y - dragInfo.current.top;<br><br>    <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span><br>    eventEmitter.emit(<br>      EVENT_MAP.DRAG,<br>      id,<br>      event,<br>      &#123;<br>        ...data,<br>        deltaX,<br>        deltaY,<br>      &#125;,<br>      dragInfo.current,<br>    );<br><br>    <span class="hljs-comment">// æ›´æ–°è‡ªèº«çŠ¶æ€</span><br>    dragInfo.current = &#123;<br>      ...dragInfo.current,<br>      <span class="hljs-attr">left</span>: x,<br>      <span class="hljs-attr">top</span>: y,<br>    &#125;;<br>  &#125;;<br><br>  <span class="hljs-comment">// realtionå¼€å¤´çš„éƒ½æ˜¯ç›‘å¬</span><br>  <span class="hljs-comment">// é¼ æ ‡æ“ä½œçš„ç›®æ ‡ç»„ä»¶å‘å‡ºçš„è‡ªå®šä¹‰äº‹ä»¶</span><br>  <span class="hljs-keyword">const</span> onRelationDragStart = <span class="hljs-function">(<span class="hljs-params">targetId: <span class="hljs-built_in">string</span></span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (!isSelect || id === targetId) <span class="hljs-keyword">return</span>;<br>    setIsDealing(<span class="hljs-literal">true</span>);<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> onRelationDrag = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    targetId: <span class="hljs-built_in">string</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    event: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    data: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    outerDragInfo: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (!isSelect || id === targetId) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">const</span> nextPosition = dragMethod(<br>      event,<br>      data,<br>      <span class="hljs-literal">false</span>,<br>      &#123;<br>        <span class="hljs-attr">left</span>: dragInfo.current.left || <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">top</span>: dragInfo.current.top || <span class="hljs-number">0</span>,<br>      &#125;,<br>      outerDragInfo,<br>    );<br>    <span class="hljs-keyword">const</span> nextState = &#123;<br>      <span class="hljs-attr">x</span>: nextPosition.left || <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">y</span>: nextPosition.top || <span class="hljs-number">0</span>,<br>    &#125;;<br>    dragInfo.current = &#123;<br>      ...dragInfo.current,<br>      ...nextPosition,<br>    &#125;;<br>    setStatePosition(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> (&#123; ...nextState &#125;));<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> onRelationDragStop = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    targetId: <span class="hljs-built_in">string</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    event: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    data: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    outerDragInfo: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (!isSelect || id === targetId) <span class="hljs-keyword">return</span>;<br>    setIsDealing(<span class="hljs-literal">false</span>);<br>    <span class="hljs-keyword">const</span> nextPosition = dragMethod(<br>      event,<br>      data,<br>      <span class="hljs-literal">false</span>,<br>      &#123;<br>        <span class="hljs-attr">left</span>: dragInfo.current.left || <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">top</span>: dragInfo.current.top || <span class="hljs-number">0</span>,<br>      &#125;,<br>      outerDragInfo,<br>    );<br>    dragInfo.current = &#123;<br>      ...dragInfo.current,<br>      ...nextPosition,<br>    &#125;;<br><br>    <span class="hljs-keyword">const</span> &#123; left, top &#125; = dragInfo.current;<br>    onChange(&#123;<br>      id,<br>      left,<br>      top<br>    &#125;)<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> onRelationResizeStart = <span class="hljs-function">(<span class="hljs-params">targetId: <span class="hljs-built_in">string</span>, direction: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (!isSelect || id === targetId) <span class="hljs-keyword">return</span>;<br>    setIsDealing(<span class="hljs-literal">true</span>);<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> onRelationResize = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    targetId: <span class="hljs-built_in">string</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    e: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    direction: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    ref: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    delta: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    position: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    outerResizeInfo: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (!isSelect || id === targetId) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-keyword">const</span> nextConfig = resizeMethod(<br>      e,<br>      direction,<br>      ref,<br>      delta,<br>      position,<br>      <span class="hljs-literal">false</span>,<br>      &#123;<br>        <span class="hljs-attr">left</span>: resizeInfo.current.left || <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">top</span>: resizeInfo.current.top || <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">width</span>: resizeInfo.current.width || <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">height</span>: resizeInfo.current.height || <span class="hljs-number">0</span>,<br>      &#125;,<br>      outerResizeInfo,<br>    );<br><br>    <span class="hljs-keyword">const</span> &#123; left, top, width, height &#125; = nextConfig;<br>    resizeInfo.current = &#123;<br>      ...resizeInfo.current,<br>      left,<br>      top,<br>      width,<br>      height<br>    &#125;;<br><br>    setStatePosition(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> (&#123;<br>      <span class="hljs-attr">x</span>: resizeInfo.current.left,<br>      <span class="hljs-attr">y</span>: resizeInfo.current.top<br>    &#125;));<br>    setStateSize(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> (&#123;<br>      <span class="hljs-attr">width</span>: resizeInfo.current.width,<br>      <span class="hljs-attr">height</span>: resizeInfo.current.height<br>    &#125;));<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> onRelationResizeStop = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    targetId: <span class="hljs-built_in">string</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    e: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    direction: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    ref: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    delta: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    position: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">    outerResizeInfo: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (!isSelect || id === targetId) <span class="hljs-keyword">return</span>;<br><br>    setIsDealing(<span class="hljs-literal">false</span>);<br>    <span class="hljs-keyword">const</span> nextConfig = resizeMethod(<br>      e,<br>      direction,<br>      ref,<br>      delta,<br>      position,<br>      <span class="hljs-literal">false</span>,<br>      &#123;<br>        <span class="hljs-attr">left</span>: resizeInfo.current.left || <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">top</span>: resizeInfo.current.top || <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">width</span>: resizeInfo.current.width || <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">height</span>: resizeInfo.current.height || <span class="hljs-number">0</span>,<br>      &#125;,<br>      outerResizeInfo,<br>    );<br><br>    <span class="hljs-keyword">const</span> &#123; left, top, width, height &#125; = nextConfig;<br>    resizeInfo.current = &#123;<br>      ...resizeInfo.current,<br>      left,<br>      top,<br>      width,<br>      height<br>    &#125;;<br><br>    <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">left</span>: x, <span class="hljs-attr">top</span>: y, <span class="hljs-attr">width</span>: currentWidth, <span class="hljs-attr">height</span>: currentHeight &#125; = resizeInfo.current;<br><br>    onChange(&#123;<br>      id,<br>      <span class="hljs-attr">left</span>: x || <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">top</span>: y || <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">width</span>: (currentWidth <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>) || <span class="hljs-number">20</span>,<br>      <span class="hljs-attr">height</span>: (currentHeight <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>) || <span class="hljs-number">20</span>,<br>    &#125;)<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> multiResizeStart: RndResizeStartCallback = <span class="hljs-function">(<span class="hljs-params">_, direction</span>) =&gt;</span> &#123;<br>    eventEmitter.emit(<br>      EVENT_MAP.RESIZE_START,<br>      id,<br>      direction,<br>    );<br>    resizeInfo.current.resize = <span class="hljs-literal">true</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> _onDrag: RndDragCallback = <span class="hljs-function">(<span class="hljs-params">event: <span class="hljs-built_in">any</span>, data: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// * å¤åˆç§»åŠ¨</span><br>    <span class="hljs-keyword">if</span> (isMultiSelect) &#123;<br>      multiOnDrag(event, data);<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-comment">// èŠ‚æµå¸®åŠ©å‡å°‘é¢‘ç¹çš„æ›´æ–°</span><br>  <span class="hljs-comment">// å› ä¸ºæ¯ä¸€æ¬¡éƒ½æ›´æ–°æ—¶æ²¡æœ‰å¿…è¦çš„</span><br>  <span class="hljs-keyword">const</span> multiDrag = throttle(_onDrag, <span class="hljs-number">100</span>);<br><br>  <span class="hljs-keyword">const</span> _onResize: RndResizeCallback = <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// * å¤åˆå°ºå¯¸ä¿®æ”¹</span><br>    <span class="hljs-keyword">if</span> (isMultiSelect) &#123;<br>      multiOnResize(...args);<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> multiResize = throttle(_onResize, <span class="hljs-number">100</span>);<br><br>  <span class="hljs-keyword">const</span> multiDragStop: RndDragCallback = <span class="hljs-function">(<span class="hljs-params">event, data</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; x, y &#125; = data;<br>    <span class="hljs-keyword">if</span> (isMultiSelect) &#123;<br>      <span class="hljs-keyword">const</span> deltaX = x - dragInfo.current.left;<br>      <span class="hljs-keyword">const</span> deltaY = y - dragInfo.current.top;<br><br>      eventEmitter.emit(<br>        EVENT_MAP.DRAG_STOP,<br>        id,<br>        event,<br>        &#123;<br>          ...data,<br>          deltaX,<br>          deltaY,<br>        &#125;,<br>        dragInfo.current,<br>      );<br><br>      dragInfo.current = &#123;<br>        ...dragInfo.current,<br>        <span class="hljs-attr">left</span>: x,<br>        <span class="hljs-attr">top</span>: y,<br>      &#125;;<br>    &#125;<br>    dragInfo.current.drag = <span class="hljs-literal">false</span>;<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> multiResizeStop: RndResizeCallback = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    e,</span></span><br><span class="hljs-params"><span class="hljs-function">    direction,</span></span><br><span class="hljs-params"><span class="hljs-function">    ref,</span></span><br><span class="hljs-params"><span class="hljs-function">    delta,</span></span><br><span class="hljs-params"><span class="hljs-function">    position,</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> newStyle = getComponentStyle(position, ref);<br><br>    resizeInfo.current.resize = <span class="hljs-literal">true</span>;<br><br>    eventEmitter.emit(<br>      EVENT_MAP.RESIZE_STOP,<br>      id,<br>      e,<br>      direction,<br>      ref,<br>      delta,<br>      position,<br>      resizeInfo.current,<br>    );<br><br>    resizeInfo.current.resize = <span class="hljs-literal">false</span>;<br><br>    resizeInfo.current = &#123;<br>      ...resizeInfo.current,<br>      ...newStyle,<br>    &#125;;<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> multiDragStart: RndDragCallback = <span class="hljs-function">() =&gt;</span> &#123;<br>    eventEmitter.emit(<br>      EVENT_MAP.DRAG_START,<br>      id,<br>    );<br>    dragInfo.current.drag = <span class="hljs-literal">true</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> onDragStart: RndDragCallback = <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// * æœªé€‰ä¸­ä¸è§¦å‘äº‹ä»¶</span><br>    <span class="hljs-keyword">if</span> (!isSelect) <span class="hljs-keyword">return</span>;<br>    multiDragStart(...args)<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> onDrag: RndDragCallback = <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// * æœªé€‰ä¸­ä¸è§¦å‘äº‹ä»¶</span><br>    <span class="hljs-keyword">if</span> (!isSelect) <span class="hljs-keyword">return</span>;<br>    multiDrag(...args)<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> onResize: RndResizeCallback = <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// * æœªé€‰ä¸­ä¸è§¦å‘äº‹ä»¶</span><br>    <span class="hljs-keyword">if</span> (!isSelect) <span class="hljs-keyword">return</span>;<br>    multiResize(...args)<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> onDragStop: RndDragCallback = <span class="hljs-function">(<span class="hljs-params">event, data</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// * æœªé€‰ä¸­ä¸è§¦å‘äº‹ä»¶</span><br>    <span class="hljs-keyword">if</span> (!isSelect) <span class="hljs-keyword">return</span>;<br>    onChange(&#123;<br>      ...dragMethod(event, data, <span class="hljs-literal">true</span>),<br>      id<br>    &#125;)<br><br>    multiDragStop(event, data);<br>  &#125;;<br><br>  <span class="hljs-keyword">const</span> onResizeStart: RndResizeStartCallback = <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// * æœªé€‰ä¸­ä¸è§¦å‘äº‹ä»¶</span><br>    <span class="hljs-keyword">if</span> (!isSelect) <span class="hljs-keyword">return</span>;<br>    multiResizeStart(...args)<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> onResizeStop: RndResizeCallback = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">    e,</span></span><br><span class="hljs-params"><span class="hljs-function">    direction,</span></span><br><span class="hljs-params"><span class="hljs-function">    ref,</span></span><br><span class="hljs-params"><span class="hljs-function">    delta,</span></span><br><span class="hljs-params"><span class="hljs-function">    position,</span></span><br><span class="hljs-params"><span class="hljs-function">  </span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// * æœªé€‰ä¸­ä¸è§¦å‘äº‹ä»¶</span><br>    <span class="hljs-keyword">if</span> (!isSelect) <span class="hljs-keyword">return</span>;<br><br>    onChange(&#123;<br>      ...resizeMethod(e, direction, ref, delta, position, <span class="hljs-literal">true</span>),<br>      id<br>    &#125;)<br><br>    multiResizeStop(e, direction, ref, delta, position)<br>  &#125;;<br><br>  <span class="hljs-comment">// ç»‘å®šæ‹–æ‹½å’Œç¼©æ”¾çš„äº‹ä»¶</span><br>  <span class="hljs-comment">// ç”¨äºå¤šé€‰ç»„ä»¶é—´é€šä¿¡</span><br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span>(isSelect) &#123;<br>      eventEmitter.addListener(<br>        EVENT_MAP.DRAG_START,<br>        onRelationDragStart,<br>      );<br>      eventEmitter.addListener(<br>        EVENT_MAP.DRAG,<br>        onRelationDrag,<br>      );<br>      eventEmitter.addListener(<br>        EVENT_MAP.DRAG_STOP,<br>        onRelationDragStop,<br>      );<br>      eventEmitter.addListener(<br>        EVENT_MAP.RESIZE_START,<br>        onRelationResizeStart,<br>      );<br>      eventEmitter.addListener(<br>        EVENT_MAP.RESIZE,<br>        onRelationResize,<br>      );<br>      eventEmitter.addListener(<br>        EVENT_MAP.RESIZE_STOP,<br>        onRelationResizeStop,<br>      );<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      eventEmitter.removeListener(<br>        EVENT_MAP.DRAG_START,<br>        onRelationDragStart,<br>      );<br>      eventEmitter.removeListener(<br>        EVENT_MAP.DRAG,<br>        onRelationDrag,<br>      );<br>      eventEmitter.removeListener(<br>        EVENT_MAP.DRAG_STOP,<br>        onRelationDragStop,<br>      );<br>      eventEmitter.removeListener(<br>        EVENT_MAP.RESIZE_START,<br>        onRelationResizeStart,<br>      );<br>      eventEmitter.removeListener(<br>        EVENT_MAP.RESIZE,<br>        onRelationResize,<br>      );<br>      eventEmitter.removeListener(<br>        EVENT_MAP.RESIZE_STOP,<br>        onRelationResizeStop,<br>      );<br>    &#125;;<br>  &#125;, [isSelect]);<br><br>  <span class="hljs-comment">// å…¨å±€ç»„ä»¶çš„å°ºå¯¸ä¿¡æ¯çŠ¶æ€æ›´æ–°æ—¶</span><br>  <span class="hljs-comment">// åŒæ­¥åˆ°ç»„ä»¶å†…éƒ¨</span><br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    setStatePosition(&#123;<br>      <span class="hljs-attr">x</span>: left,<br>      <span class="hljs-attr">y</span>: top<br>    &#125;);<br>    resizeInfo.current = &#123;<br>      ...resizeInfo.current,<br>      <span class="hljs-attr">left</span>: left ?? resizeInfo.current.left,<br>      <span class="hljs-attr">top</span>: top ?? resizeInfo.current.top,<br>    &#125;;<br>    dragInfo.current = &#123;<br>      ...dragInfo.current,<br>      <span class="hljs-attr">left</span>: left ?? dragInfo.current.left,<br>      <span class="hljs-attr">top</span>: top ?? dragInfo.current.top,<br>    &#125;;<br>  &#125;, [left, top]);<br><br>  <span class="hljs-comment">// å…¨å±€ç»„ä»¶çš„å®½é«˜ä¿¡æ¯çŠ¶æ€æ›´æ–°æ—¶</span><br>  <span class="hljs-comment">// åŒæ­¥åˆ°ç»„ä»¶å†…éƒ¨</span><br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    setStateSize(&#123;<br>      width,<br>      height<br>    &#125;);<br>    resizeInfo.current = &#123;<br>      ...resizeInfo.current,<br>      <span class="hljs-attr">width</span>: width ?? resizeInfo.current.width,<br>      <span class="hljs-attr">height</span>: height ?? resizeInfo.current.height,<br>    &#125;;<br>  &#125;, [width, height]);<br><br>  <span class="hljs-keyword">return</span> (<br>    &lt;Rnd<br>      style=&#123;&#123;<br>        border: `1px solid $&#123;isSelect ? &#x27;black&#x27; : &#x27;transparent&#x27;&#125;`<br>      &#125;&#125;<br>      enableResizing=&#123;isSelect&#125;<br>      disableDragging=&#123;!isSelect&#125;<br>      default=&#123;&#123;<br>        x: 0,<br>        y: 0,<br>        width: 320,<br>        height: 200,<br>      &#125;&#125;<br>      onDragStart=&#123;onDragStart&#125;<br>      onDrag=&#123;onDrag&#125;<br>      onDragStop=&#123;onDragStop&#125;<br>      onResizeStart=&#123;onResizeStart&#125;<br>      onResize=&#123;onResize&#125;<br>      onResizeStop=&#123;onResizeStop&#125;<br>      minWidth=&#123;20&#125;<br>      minHeight=&#123;20&#125;<br>      position=&#123;position&#125;<br>      size=&#123;size&#125;<br>      // è®¾ç½®ç¼©æ”¾è¾¹æ¡†çš„class<br>      // ä¸è®¾ç½®çš„è¯ä¼šå¯¼è‡´ä¸ç¼©æ”¾å†²çª <br>      resizeHandleClasses=&#123;[<br>        &#x27;left&#x27;,<br>        &#x27;top&#x27;,<br>        &#x27;right&#x27;,<br>        &#x27;bottom&#x27;,<br>        &#x27;topLeft&#x27;,<br>        &#x27;topRight&#x27;,<br>        &#x27;bottomLeft&#x27;,<br>        &#x27;bottomRight&#x27;,<br>      ].reduce&lt;any&gt;((acc, cur) =&gt; &#123;<br>        acc[cur] = &#x27;react-select-to-border&#x27;;<br>        return acc;<br>      &#125;, &#123;&#125;)&#125;<br>    &gt;<br>      &lt;div<br>        style=&#123;&#123;<br>          backgroundColor: background,<br>          width: &#x27;100%&#x27;,<br>          height: &#x27;100%&#x27;<br>        &#125;&#125;<br>        // ç”¨äºSelectoç»„ä»¶ä¸­çš„ç»„ä»¶æ ‡è¯†<br>        data-id=&#123;id&#125;<br>        // å’ŒSelectoç»„ä»¶ä¸­çš„selectableTargetså¯¹åº”<br>        className=&quot;react-select-to&quot;<br>      &gt;<br><br>      &lt;/div&gt;<br>    &lt;/Rnd&gt;<br>  )<br><br>&#125;<br><br>const Parent = () =&gt; &#123;<br><br>  const [componentList, setComponentList] = useState&lt;ComponentList[]&gt;([<br>    &#123;<br>      id: &#x27;1&#x27;,<br>      background: &#x27;red&#x27;,<br>      left: 20,<br>      top: 30,<br>      width: 200,<br>      height: 100<br>    &#125;,<br>    &#123;<br>      id: &#x27;2&#x27;,<br>      background: &#x27;green&#x27;,<br>      left: 200,<br>      top: 300,<br>      width: 100,<br>      height: 100<br>    &#125;,<br>    &#123;<br>      id: &#x27;3&#x27;,<br>      background: &#x27;gray&#x27;,<br>      left: 250,<br>      top: 50,<br>      width: 50,<br>      height: 50<br>    &#125;,<br>    &#123;<br>      id: &#x27;4&#x27;,<br>      background: &#x27;blue&#x27;,<br>      left: 250,<br>      top: 100,<br>      width: 100,<br>      height: 100<br>    &#125;,<br>    &#123;<br>      id: &#x27;5&#x27;,<br>      background: &#x27;pink&#x27;,<br>      left: 400,<br>      top: 150,<br>      width: 100,<br>      height: 100<br>    &#125;,<br>    &#123;<br>      id: &#x27;6&#x27;,<br>      background: &#x27;yellow&#x27;,<br>      left: 400,<br>      top: 300,<br>      width: 100,<br>      height: 100<br>    &#125;<br>  ])<br>  const [select, setSelect] = useState&lt;string[]&gt;([])<br><br>  // æ›´æ–°ç»„ä»¶ä¿¡æ¯<br>  const onComponentChange = useCallback((value: Partial&lt;ComponentList&gt; &amp; &#123; id: string &#125;) =&gt; &#123;<br>    const &#123; id &#125; = value<br>    setComponentList(prev =&gt; &#123;<br>      return prev.map(item =&gt; &#123;<br>        if (item.id !== id) return item<br>        return &#123;<br>          ...item,<br>          ...value<br>        &#125;<br>      &#125;)<br>    &#125;)<br>  &#125;, [])<br><br>  return (<br>    // å’ŒSelectoç»„ä»¶ä¸­çš„containerå¯¹åº”<br>    &lt;div<br>      id=&quot;container&quot;<br>      style=&#123;&#123;<br>        width: &#x27;100vw&#x27;,<br>        height: &#x27;100vh&#x27;<br>      &#125;&#125;<br>    &gt;<br>      &lt;Selecto<br>        select=&#123;select&#125;<br>        setSelect=&#123;setSelect&#125;<br>      /&gt;<br>      &#123;<br>        componentList.map(component =&gt; &#123;<br>          return (<br>            &lt;Component<br>              key=&#123;component.id&#125;<br>              &#123;...component&#125;<br>              isSelect=&#123;select.includes(component.id)&#125;<br>              onChange=&#123;onComponentChange&#125;<br>              isMultiSelect=&#123;select.length &gt; 1&#125;<br>            /&gt;<br>          )<br>        &#125;)<br>      &#125;<br>    &lt;/div&gt;<br>  )<br><br>&#125;<br><br>export default Parent<br></code></pre></td></tr></table></figure><h2 id="æˆå“">æˆå“</h2><p>å…¶å®åœ¨ä¹‹å‰å°±å·²ç»å‘ç°å…¶å®<code>react-selecto</code>çš„ä½œè€…ä¹Ÿæœ‰ç ”å‘å…¶ä»–çš„å¯è§†åŒ–æ“ä½œæ¨¡å—ï¼ŒåŒ…æ‹¬æœ¬æ–‡æ‰€è¯´çš„å¤šé€‰æ‹–æ‹½çš„æ“ä½œï¼Œä½†æ˜¯å¥ˆä½•æ— æ³•æ»¡è¶³æœ¬é¡¹ç›®çš„éœ€æ±‚ï¼Œæ•…è‡ªå·±å®ç°äº†åŠŸèƒ½ã€‚<br>å¦‚æœæœ‰å…´è¶£å¯ä»¥å»çœ‹ä¸€ä¸‹è¿™ä¸ªæˆå“<a href="https://daybrush.com/moveable/">moveable</a>ã€‚</p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>é€šè¿‡ä¸Šé¢çš„æ€è·¯ï¼Œå³å¯å®Œæˆä¸€ä¸ªç®€å•çš„å¤šå…ƒç´ æ‹–æ‹½ç¼©æ”¾çš„åŠŸèƒ½ï¼Œå…¶æ ¸å¿ƒå…¶å®å°±æ˜¯<code>eventemitter3</code>çš„è‡ªå®šä¹‰äº‹ä»¶åŠŸèƒ½ï¼Œå®ƒçš„ç”¨é€”åœ¨å¹³å¸¸çš„ä¸šåŠ¡ä¸­éå¸¸å¹¿æ³›ã€‚<br>æ¯”å¦‚æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ä»¥ä¸Šä¾‹å­çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šå…ƒç´ æ‹–æ‹½æ—¶<strong>å¸é™„</strong>çš„åŠŸèƒ½ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><p>é¡ºä¾¿åœ¨ä¸‹é¢é™„ä¸Šç›¸å…³çš„é“¾æ¥ã€‚</p><blockquote><p><a href="http://47.97.27.23/api/backend/screen/index.html">è¯•ç”¨åœ°å€</a><br><a href="https://github.com/food-billboard/create-chart/issues/2">è¯•ç”¨è´¦å·</a><br><a href="http://47.97.27.23/api/backend/create-chart-docs/index.html">æ“ä½œæ–‡æ¡£</a><br><a href="https://github.com/food-billboard/create-chart">ä»£ç åœ°å€</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>å¤§å±</category>
      
    </categories>
    
    
    <tags>
      
      <tag>lowcode react chart</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ”¶é›†ä¸€äº›æœ‰ç”¨çš„æ–‡ç« </title>
    <link href="/2023/01/09/%E6%94%B6%E9%9B%86%E4%B8%80%E4%BA%9B%E6%9C%89%E7%94%A8%E7%9A%84%E6%96%87%E7%AB%A0/"/>
    <url>/2023/01/09/%E6%94%B6%E9%9B%86%E4%B8%80%E4%BA%9B%E6%9C%89%E7%94%A8%E7%9A%84%E6%96%87%E7%AB%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="æ”¶é›†ä¸€äº›æœ‰ç”¨çš„æ–‡ç« ">æ”¶é›†ä¸€äº›æœ‰ç”¨çš„æ–‡ç« </h2><p>åœ¨è¿™é‡Œè®°å½•ä¸€äº›æ¯”è¾ƒå®ç”¨çš„æ–‡ç« ã€‚</p><ul><li><a href="https://zhuanlan.zhihu.com/p/460238207">å‰ç«¯å¼€å‘è°ƒè¯•æœ€ä½³å®è·µ</a></li><li><a href="https://mp.weixin.qq.com/s/VOoDHqIo4gh3scHVNxk3lA">å‰ç«¯å®¹æ˜“å¿½ç•¥çš„ debugger è°ƒè¯•æŠ€å·§</a></li><li><a href="https://juejin.cn/post/7061588533214969892#heading-32">åšäº†ä¸€ä»½å‰ç«¯é¢è¯•å¤ä¹ è®¡åˆ’ï¼Œä¿ç†Ÿï½</a></li><li><a href="https://www.cnblogs.com/yaenli/p/16656064.html">gitignoreåŒ¹é…è§„åˆ™</a><br><code>bin/</code>: å¿½ç•¥å½“å‰è·¯å¾„ä¸‹çš„binæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢«å¿½ç•¥ï¼Œä¸å¿½ç•¥ bin æ–‡ä»¶<br><code>/bin</code>: å¿½ç•¥æ ¹ç›®å½•ä¸‹çš„binæ–‡ä»¶<br><code>/*.c</code>: å¿½ç•¥æ ¹ç›®å½•cat.cï¼Œä¸å¿½ç•¥ build/cat.c<br><code>debug/*.obj</code>: å¿½ç•¥ debug/io.objï¼Œä¸å¿½ç•¥ debug/common/io.obj å’Œ tools/debug/io.obj<br><code>**/foo</code>: å¿½ç•¥/foo, a/foo, a/b/fooç­‰<br><code>a/**/b</code>: å¿½ç•¥a/b, a/x/b, a/x/y/bç­‰<br><code>!/bin/run.sh</code>: ä¸å¿½ç•¥ bin ç›®å½•ä¸‹çš„ <a href="http://run.sh">run.sh</a> æ–‡ä»¶<br><code>*.log</code>: å¿½ç•¥æ‰€æœ‰ .log æ–‡ä»¶<br><code>config.php</code>: å¿½ç•¥å½“å‰è·¯å¾„çš„ config.php æ–‡ä»¶<br><code>/mtk/do.c</code>: è¿‡æ»¤æŸä¸ªå…·ä½“æ–‡ä»¶<br><code>!/mtk/one.txt</code>: è¿½è¸ªï¼ˆä¸è¿‡æ»¤ï¼‰æŸä¸ªå…·ä½“æ–‡ä»¶</li></ul><h2 id="ç»“æŸ">ç»“æŸ</h2><p>æŒç»­æ›´æ–°â€¦</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡ç« </category>
      
    </categories>
    
    
    <tags>
      
      <tag>frontend</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-umiæ‰“åŒ…ä½“ç§¯ä¼˜åŒ–</title>
    <link href="/2022/12/29/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E4%BC%98%E5%8C%96/"/>
    <url>/2022/12/29/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E4%BC%98%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–</h1><h2 id="å¼€å¤´">å¼€å¤´</h2><p>æœ¬æ–‡æ˜¯æ•°æ®å¯è§†åŒ–å¼€å§‹çš„å¼€å‘ç»†èŠ‚ç¬¬å››ç« ã€‚å…³äºé¡¹ç›®æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–ã€‚<br>è™½ç„¶å†…å®¹ä¼¼ä¹ä¸åº”è¯¥æŒ‰è¿™ä¸ªé¡ºåºäº§å‡ºï¼Œä¸è¿‡å› ä¸ºæœ€è¿‘çš„è¿­ä»£ä¸­çªç„¶æœ‰æ¶‰åŠåˆ°è¿™ä¸ªæ–¹é¢ï¼Œæ•…å°±è¶è¿™ä¸ªæ—¶æœºèµ¶ç´§å…ˆè®°ä¸‹æ¥ã€‚</p><blockquote><p>ç®€å•å£°æ˜<br>æœ¬äººåªæ˜¯ä¸€ä¸ªèœé¸¡ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰ä»€ä¹ˆæ–°çš„ä¸œè¥¿ï¼Œåªæ˜¯æŠŠç½‘ä¸Šç¢°åˆ°çš„ä¸€äº›ç‚¹ç»™ç»Ÿä¸€å¤„ç†äº†ä¸‹ã€‚</p></blockquote><h2 id="å¼€å§‹">å¼€å§‹</h2><p>å¤§å±æ˜¯åŸºäº<a href="https://v3.umijs.org/zh-CN">umi</a>è¿›è¡Œå¼€å‘çš„ï¼Œå…³äºæ­¤åº“ç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œåªéœ€å¾ˆå°‘çš„é…ç½®å³å¯å¼€å§‹ç ”å‘ã€‚</p><p>ä½†æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œé¡¹ç›®çš„ä»£ç é‡è¶Šæ¥è¶Šå¤§ï¼Œæ‰“åŒ…å‡ºæ¥çš„äº§ç‰©ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œè¿™ä¸ªæ—¶å€™ä¾¿éœ€è¦åšä¸€äº›ä¼˜åŒ–é…ç½®ã€‚</p><p>ä½“ç§¯ä¼˜åŒ–æ˜¯åœ¨å¼€å‘<code>1.17</code>ç‰ˆæœ¬çš„æ—¶å€™ï¼Œé¦–å…ˆæ˜¯ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æ‰“åŒ…è¯¦æƒ…ã€‚<br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/ä¹‹å‰çš„ç‰ˆæœ¬æ‰“åŒ….jpg" /><br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/é¦–é¡µåŠ è½½ä¹‹å‰.jpg" /></p><p>ç„¶åæ˜¯å½“å‰ä¼˜åŒ–åçš„æ‰“åŒ…è¯¦æƒ…ã€‚<br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/ç°åœ¨çš„ç‰ˆæœ¬æ‰“åŒ….jpg" /><br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/é¦–é¡µåŠ è½½ä¹‹å.jpg" /></p><p>æœ¬æ–‡è¯´å¾—æ›´æ˜ç™½äº›ï¼Œåº”è¯¥è¯´æ˜¯<strong>ä¸»æ–‡ä»¶</strong>çš„ä½“ç§¯ä¼˜åŒ–ï¼Œæ•´ä½“çš„æ€è·¯ï¼šæ‹†åˆ†ä¸»æ–‡ä»¶ã€æŒ‰éœ€åŠ è½½ã€å‹ç¼©ã€‚</p><h3 id="umié…ç½®ä¼˜åŒ–">umié…ç½®ä¼˜åŒ–</h3><h4 id="dynamicImport">dynamicImport</h4><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>umi</code>æ‰“åŒ…åªä¼šç”Ÿæˆä¸€ä¸ª<code>umi.js</code>ï¼Œç®€å•é¡¹ç›®è¿™æ ·ä¹Ÿå¾ˆç®€æ´ï¼Œä½†æ˜¯é¡¹ç›®å¤§çš„æ—¶å€™ï¼Œç½‘ç»œåŠ è½½é€Ÿåº¦å°±ä¼šå˜æ…¢ï¼Œæ­¤æ—¶å°±éœ€è¦æŒ‰ç…§é€»è¾‘è¿›è¡Œæ‹†åˆ†ã€‚<br>å¯ä»¥çœ‹ä¸‹å®˜ç½‘çš„<a href="https://v3.umijs.org/zh-CN/docs/load-on-demand">æŒ‰éœ€åŠ è½½</a>ï¼Œå¼€å¯æŒ‰éœ€åŠ è½½åï¼Œ<code>umi</code>å°±ä¼šå°†é¡¹ç›®æŒ‰æ¨¡å—è¿›è¡Œæ‹†åˆ†ã€‚</p><h4 id="targets"><a href="https://v3.umijs.org/zh-CN/config#targets">targets</a></h4><p>æ ¹æ®å®é™…æƒ…å†µï¼Œé’ˆå¯¹é¡¹ç›®åº”ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬èŒƒå›´ï¼ŒæŒ‰éœ€å¼•å…¥<code>polyfill</code>ï¼Œå¯ä»¥å¾ˆå¥½çš„å‡å°‘äº§å‡ºä»£ç ä½“ç§¯ã€‚<br>å¦‚æœé¡¹ç›®åªä¼šåº”ç”¨äºé«˜ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œå°±å¯ä»¥è®¾ç½®æˆé«˜ç‰ˆæœ¬æµè§ˆå™¨çš„é…ç½®ï¼Œå‡å°‘<code>polyfill</code>ã€‚</p><h4 id="externals"><a href="https://v3.umijs.org/zh-CN/config#externals">externals</a></h4><p>å³æ˜¯<code>webpack</code>çš„<code>externals</code>ï¼ŒæŠŠä¸€äº›æ¨¡å—ä»æ‰“åŒ…é¡¹ä¸­ç›´æ¥ç»™å»é™¤æ‰ï¼Œé‡‡ç”¨<code>cdn</code>çš„å½¢å¼å¼•å…¥ã€‚</p><ul><li>ps<br>æœ¬æ¥æ˜¯å‡†å¤‡æ‰“ç®—å°†<code>echarts</code>é‡‡ç”¨<code>cdn</code>å½¢å¼å¼•å…¥çš„ï¼Œå¥ˆä½•è¿˜ä¾èµ–äº†<strong>è¯äº‘</strong>å’Œ<strong>æ°´çƒ</strong>ç»„ä»¶ï¼Œåˆ é™¤äº†<code>echarts</code>çš„<code>npm</code>åï¼ŒæŠ¥é”™äº†ï¼Œæ•…æ²¡æœ‰åšè¿™ä¸ªé€‰æ‹©ã€‚</li></ul><h4 id="ignoreMomentLocale"><a href="https://v3.umijs.org/zh-CN/config#ignoremomentlocale">ignoreMomentLocale</a></h4><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸šåŠ¡é¡¹ç›®åŸºæœ¬éƒ½æ²¡æœ‰å¤šè¯­è¨€çš„éœ€æ±‚ï¼ŒæŠŠ<a href="http://momentjs.cn/">moment</a>çš„è¯­è¨€åŒ…ç»™å»é™¤ã€‚</p><p>å½“ç„¶æ›´å¥½çš„åŠæ³•æ˜¯æŠŠ<code>moment</code>æ›¿æ¢æˆ<a href="https://dayjs.gitee.io/zh-CN/">dayjs</a>ï¼Œæ¯•ç«Ÿå…¶å®å¹³æ—¶æ²¡æœ‰å¤ªå¤šæ—¶é—´è½¬æ¢çš„éœ€æ±‚ï¼Œé‡‡ç”¨æ›´è½»é‡çš„åº“æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p><h4 id="splitChunks"><a href="https://v3.umijs.org/zh-CN/config#chainwebpack">splitChunks</a></h4><p>æ ¹æ®ä¸Šé¢çš„<code>dynamicImport</code>æ‹†åˆ†äº†æ¨¡å—åï¼Œæ¨¡å—å½“ä¸­çš„ç¬¬ä¸‰æ–¹å¼•å…¥å´è¢«åŒæ—¶æ‰“è¿›äº†ä¸åŒçš„æ¨¡å—ä¸­ï¼Œé‡å¤æ‰“åŒ…ã€‚</p><p>ä½¿ç”¨<code>webpack</code>çš„<a href="https://webpack.docschina.org/plugins/split-chunks-plugin/">splitChunks</a>é…ç½®ï¼Œå°†ä¸€äº›æ¯”è¾ƒå¤§çš„ï¼Œå¸¸ç”¨çš„ç¬¬ä¸‰æ–¹ä¾èµ–å•ç‹¬æŠ½ç¦»ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘åŒ…ä½“ç§¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-attr">chunks</span>: [<span class="hljs-string">&#x27;antdesigns&#x27;</span>, <span class="hljs-string">&#x27;vendors&#x27;</span>, <span class="hljs-string">&#x27;commons&#x27;</span>, <span class="hljs-string">&#x27;umi&#x27;</span>],<br>  <span class="hljs-function"><span class="hljs-title">chainWebpack</span>(<span class="hljs-params">config: any</span>)</span> &#123;<br>    config.merge(&#123;<br>      <span class="hljs-attr">optimization</span>: &#123;<br>        <span class="hljs-attr">minimize</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">splitChunks</span>: &#123;<br>          <span class="hljs-attr">chunks</span>: <span class="hljs-string">&#x27;all&#x27;</span>,<br>          <span class="hljs-attr">minSize</span>: <span class="hljs-number">30000</span>,<br>          <span class="hljs-attr">minChunks</span>: <span class="hljs-number">1</span>,<br>          <span class="hljs-attr">automaticNameDelimiter</span>: <span class="hljs-string">&#x27;.&#x27;</span>,<br>          <span class="hljs-attr">cacheGroups</span>: &#123;<br>            <span class="hljs-attr">antdesigns</span>: &#123;<br>              <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;antdesigns&#x27;</span>,<br>              <span class="hljs-attr">chunks</span>: <span class="hljs-string">&#x27;all&#x27;</span>,<br>              <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/](antd|@ant-design)/</span>,<br>              priority: <span class="hljs-number">10</span>,<br>            &#125;,<br>            <span class="hljs-attr">echarts</span>: &#123;<br>              <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;echarts&#x27;</span>,<br>              <span class="hljs-attr">chunks</span>: <span class="hljs-string">&#x27;async&#x27;</span>,<br>              <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/](echarts|zrender)/</span>,<br>              priority: <span class="hljs-number">10</span>,<br>            &#125;,<br>            <span class="hljs-attr">vendors</span>: &#123;<br>              <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;vendors&#x27;</span>,<br>              <span class="hljs-attr">chunks</span>: <span class="hljs-string">&#x27;all&#x27;</span>,<br>              <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/](lodash|moment|react|dva)/</span>,<br>              priority: <span class="hljs-number">10</span>,<br>            &#125;,<br>            <span class="hljs-attr">commons</span>: &#123;<br>              <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;commons&#x27;</span>,<br>              <span class="hljs-comment">// å…¶ä½™åŒæ­¥åŠ è½½åŒ…</span><br>              <span class="hljs-attr">chunks</span>: <span class="hljs-string">&#x27;all&#x27;</span>,<br>              <span class="hljs-attr">minChunks</span>: <span class="hljs-number">2</span>,<br>              <span class="hljs-attr">priority</span>: <span class="hljs-number">1</span>,<br>              <span class="hljs-attr">enforce</span>: <span class="hljs-literal">true</span>,<br>            &#125;,<br>          &#125;,<br>        &#125;,<br>      &#125;);<br>    &#125;<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ³¨æ„çš„åœ°æ–¹">æ³¨æ„çš„åœ°æ–¹</h5><p><code>splitChunks</code>ä¸­è¿˜æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚</p><ul><li>priority<br>æ‹†åˆ†çš„<strong>ä¼˜å…ˆçº§</strong>ï¼Œå½“ä¸€ä¸ªåŒ…åŒæ—¶è¢«å¤šä¸ª<code>cacheGroups</code>ä¸­çš„<code>test</code>åŒ¹é…ä¸Šæ—¶ï¼Œä¼šå°†åŒ…<strong>æ‹†</strong>åˆ°<code>priority</code>æœ€é«˜çš„é‚£ä¸ª<code>cacheGroups</code>ä¸­ã€‚</li><li>minSize<br>åŒ…è¢«å‹ç¼©å‰çš„ä½“ç§¯è¶…è¿‡<code>minSize</code>æ‰ä¼šè¢«æ‹†åŒ…ã€‚</li><li>chunksï¼ˆä¸ªäººç†è§£ï¼‰<br><code>umi</code>é…ç½®ä¸­çš„<code>chunks</code>ï¼Œè¡¨ç¤ºé¢„å…ˆéœ€è¦åŠ è½½çš„<code>cacheGroups</code>ï¼Œæ¯”å¦‚ä¸Šé¢çš„<code>echarts</code>æ¨¡å—ä¸éœ€è¦ä¸€å¼€å§‹å°±åŠ è½½ï¼Œåˆ™ä¸éœ€è¦æ·»åŠ åˆ°<code>chunks</code>ä¸­ã€‚</li></ul><h3 id="æŒ‰éœ€åŠ è½½">æŒ‰éœ€åŠ è½½</h3><p>è¿™é‡Œè¯´çš„æŒ‰éœ€åŠ è½½ï¼Œè¯´çš„æ˜¯ä»£ç çš„æŒ‰éœ€åŠ è½½ã€‚<br>æ¯”å¦‚åœ¨åŠ è½½é¦–é¡µçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸éœ€è¦åŠ è½½ä¸ªäººä¸­å¿ƒçš„é¡µé¢ä»£ç ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§åŠ å¿«é¦–é¡µåŠ è½½çš„é€Ÿåº¦ã€‚</p><p>æ­¤æ—¶å°±å¯ä»¥ç”¨åˆ°<code>React</code>çš„è¯­æ³•æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼ˆå…¶å®å®Œå…¨å¯ä»¥ä½¿ç”¨<code>umi</code>çš„<code>dynamic</code>ï¼Œä½†æ˜¯ä¸ä¸çŸ¥é“ä¸ºå•¥æŠ¥é”™äº†ï¼‰ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> React, &#123; lazy, Suspense &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><br><span class="hljs-comment">// ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç»„ä»¶</span><br><span class="hljs-keyword">const</span> HugeComponent = lazy(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;Chunk_Name&quot; */</span> <span class="hljs-string">&#x27;./path/to/component&#x27;</span>)<br>&#125;)<br><br><span class="hljs-keyword">const</span> App = <span class="hljs-function">() =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">div</span>&gt;</span>loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#125;&gt;</span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">HugeComponent</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span></span><br>  )<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>æŒ‰éœ€åŠ è½½ç»„ä»¶ï¼Œåªæœ‰ä½¿ç”¨åˆ°ç»„ä»¶çš„æ—¶å€™æ‰è¿›è¡ŒåŠ è½½ï¼Œ<code>lazy</code>æ”¯æŒä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªç»„ä»¶ï¼Œ<code>Suspense</code>ç»„ä»¶çš„<code>children</code>ä¸ºä¸€äº›æ‡’åŠ è½½çš„ç»„ä»¶ï¼Œåœ¨æœªåŠ è½½å®Œæˆæ—¶ï¼Œä¼šæ˜¾ç¤º<code>fallback</code>çš„åŠ è½½å†…å®¹ã€‚</p><p>å¤§å±è®¾è®¡å™¨å½“ä¸­æœ‰éå¸¸å¤šçš„ä¾èµ–ï¼Œä¸”ä½“ç§¯å·¨å¤§ï¼Œé€šè¿‡æ­¤æ–¹æ³•ï¼Œå®ç°äº†ä¸€ä¸ªéå¸¸ä¸é”™çš„æ•ˆæœã€‚<br>æ¯”å¦‚ç»å¸¸ä½¿ç”¨çš„ä»£ç ç¼–è¾‘å™¨<a href="https://github.com/microsoft/monaco-editor">monaco-editor</a>ã€‚<br>è¿˜æœ‰æ¯ä¸€ä¸ª<strong>å›¾è¡¨ç»„ä»¶</strong>ï¼Œé»˜è®¤éƒ½ä¸è¿›è¡ŒåŠ è½½ï¼Œåªæœ‰å½“æ‹–æ‹½åˆ°ç”»å¸ƒå½“ä¸­æ—¶ï¼Œæ‰ä¼šçœŸæ­£å»åŠ è½½å›¾è¡¨ã€‚</p><h3 id="å…¶ä»–ä¼˜åŒ–">å…¶ä»–ä¼˜åŒ–</h3><h4 id="gzip">gzip</h4><p>ä¹‹å‰çš„ä¼˜åŒ–æ•ˆæœè™½ç„¶æ˜¾è‘—ï¼Œä½†æ˜¯å½“å¼€å¯äº†<code>gzip</code>ä¹‹åï¼Œç»™é¡¹ç›®æœ€åçš„æ•ˆæœæ¥äº†ä¸€ä¸ªè´¨çš„æå‡ã€‚</p><p>è¿™æ˜¯å‹ç¼©å‰å’Œå‹ç¼©åçš„ä¸¤ä¸ªå¯¹æ¯”ï¼Œæ•ˆæœéå¸¸æ˜æ˜¾ã€‚<br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/gzipå‰.jpg" /><br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/gzipå.jpg" /></p><ul><li><p>å®‰è£…ä¾èµ–<br><code>yarn add compression-webpack-plugin@5.0.1 -D</code><br>ä¸ºä»€ä¹ˆå®‰è£…è¿™ä¸ª<a href="https://blog.csdn.net/yolo_link/article/details/125255862">ç‰ˆæœ¬</a>ï¼Ÿ<br>é¡¹ç›®ä½¿ç”¨çš„æ˜¯<code>umi3</code>ï¼Œè€Œæ’ä»¶çš„æœ€æ–°ç‰ˆæœ¬æ˜¯<code>10.0.0</code>ï¼Œæ‰“åŒ…å‘ç°æŠ¥é”™<code>Cannot read properties of undefined (reading â€˜tapPromiseâ€˜)</code><br>å¤§æ¦‚ç‡æ˜¯<code>webpack</code>ç‰ˆæœ¬ä¸åŒ¹é…ï¼ŒæŸ¥çœ‹æ’ä»¶<code>package.json</code>å‘ç°å…¶ä¾èµ–çš„<code>webpack</code>ç‰ˆæœ¬ä¸º<code>5</code>ã€‚<br>æ•…é€‰æ‹©äº†æ’ä»¶<code>5.0.1</code>ç‰ˆæœ¬ï¼ˆ<code>webpack</code>å¯ä¸º<code>4</code>ï¼‰ã€‚</p></li><li><p>é…ç½®</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> CompressionPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;compression-webpack-plugin&#x27;</span>;<br><span class="hljs-keyword">const</span> config = &#123;<br>  <span class="hljs-function"><span class="hljs-title">chainWebpack</span>(<span class="hljs-params">config: any</span>)</span> &#123;<br>    <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒé…ç½®</span><br>    <span class="hljs-keyword">if</span> (REACT_APP_ENV === <span class="hljs-string">&#x27;prod&#x27;</span>) &#123;<br>      config.plugin(<span class="hljs-string">&#x27;compression-webpack-plugin&#x27;</span>).use(CompressionPlugin, [<br>        &#123;<br>          <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(js|css|html)$/i</span>, <span class="hljs-comment">// åŒ¹é…</span><br>          threshold: <span class="hljs-number">102400</span>, <span class="hljs-comment">// è¶…è¿‡10kçš„æ–‡ä»¶å‹ç¼©</span><br>          <span class="hljs-attr">deleteOriginalAssets</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ä¸åˆ é™¤æºæ–‡ä»¶</span><br>        &#125;,<br>      ]);<br>    &#125;<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>nginxé…ç½®<br>å½“ç„¶åªå®Œæˆæ‰“åŒ…è¿˜ä¸å¤Ÿï¼Œéœ€è¦æœåŠ¡ç«¯ä¹Ÿæ”¯æŒ<code>gzip</code>ã€‚<br>åªéœ€è¦ç®€å•çš„åœ¨<code>nginx</code>é…ç½®å½“ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œé‡å¯ï¼Œå³å¯ã€‚</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">gzip_static on;<br></code></pre></td></tr></table></figure><h3 id="å‰©ä½™å¾…ä¼˜åŒ–">å‰©ä½™å¾…ä¼˜åŒ–</h3><h4 id="ç»„ä»¶ä¼˜åŒ–">ç»„ä»¶ä¼˜åŒ–</h4><p>ç°åœ¨å„ä¸ªå›¾è¡¨ç»„ä»¶çš„<strong>é…ç½®</strong>å’Œ<strong>æ¸²æŸ“</strong>å·²å®ŒæˆæŒ‰éœ€åŠ è½½ï¼Œä½†æ˜¯æ¯ä¸ªç»„ä»¶çš„<strong>é»˜è®¤é…ç½®</strong>æ•°æ®ä»ç„¶æ˜¯åŒæ­¥å…¨é‡åŠ è½½ã€‚<br>å› ä¸ºä»£ç é€»è¾‘åŸå› å¯èƒ½éœ€è¦ä¸€ç•ªå¤§ä¿®æ”¹ï¼Œæ•…åœ¨ä¹‹åå®Œå–„ã€‚</p><h4 id="å›¾ç‰‡ä¼˜åŒ–">å›¾ç‰‡ä¼˜åŒ–</h4><p>å›¾ç‰‡ç°åœ¨ä¹Ÿæ˜¯å…¨é‡åŠ è½½ï¼Œå¾…ä¼˜åŒ–ã€‚</p><h4 id="ä¾èµ–åŒ…æ›¿æ¢">ä¾èµ–åŒ…æ›¿æ¢</h4><p>æœ‰ç›¸å½“å¤šçš„ä¾èµ–åŒ…åªæ˜¯ç®€å•ä½¿ç”¨ï¼Œä½†å ç”¨ä½“ç§¯å·¨å¤§ï¼Œè€ƒè™‘ä½¿ç”¨åŒåŠŸèƒ½çš„å°åŒ…è¿›è¡Œæ›¿æ¢ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><p>é¡ºä¾¿åœ¨ä¸‹é¢é™„ä¸Šç›¸å…³çš„é“¾æ¥ã€‚</p><blockquote><p><a href="http://47.97.27.23/api/backend/screen/index.html">è¯•ç”¨åœ°å€</a><br><a href="https://github.com/food-billboard/create-chart/issues/2">è¯•ç”¨è´¦å·</a><br><a href="http://47.97.27.23/api/backend/create-chart-docs/index.html">æ“ä½œæ–‡æ¡£</a><br><a href="https://github.com/food-billboard/create-chart">ä»£ç åœ°å€</a></p></blockquote><p>å‚è€ƒé“¾æ¥</p><blockquote><p><a href="https://juejin.cn/post/7081453829375393823">https://juejin.cn/post/7081453829375393823</a><br><a href="https://blog.csdn.net/moozixiao/article/details/115791524">https://blog.csdn.net/moozixiao/article/details/115791524</a><br><a href="https://juejin.cn/post/7103831294013865992">https://juejin.cn/post/7103831294013865992</a><br><a href="https://juejin.cn/post/7155652261660590116">https://juejin.cn/post/7155652261660590116</a><br><a href="https://juejin.cn/post/6844903728374546445">https://juejin.cn/post/6844903728374546445</a><br><a href="https://juejin.cn/post/6844904183917871117">https://juejin.cn/post/6844904183917871117</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>å¤§å±</category>
      
    </categories>
    
    
    <tags>
      
      <tag>lowcode react chart</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-å³é”®èœå•æ“ä½œ</title>
    <link href="/2022/12/21/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95%E6%93%8D%E4%BD%9C/"/>
    <url>/2022/12/21/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h1>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-å³é”®èœå•æ“ä½œ</h1><h2 id="å¼€å¤´">å¼€å¤´</h2><p>æœ¬æ–‡æ˜¯æ•°æ®å¯è§†åŒ–å¼€å§‹çš„å¼€å‘ç»†èŠ‚ç¬¬ä¸‰ç« ã€‚å…³äºå¤§å±ä¸­ç»„ä»¶çš„ä¸€äº›æ“ä½œï¼Œæ¯”å¦‚æˆç»„ã€å¤åˆ¶ç²˜è´´ã€å±‚çº§æ§åˆ¶ã€å¤åˆ¶æ ·å¼ã€ç»„ä»¶åˆ‡æ¢ã€å‰è¿›åé€€ç­‰ç­‰ã€‚<br>æœ¬æ–‡å°±é’ˆå¯¹å„ä¸ªæ“ä½œé€ä¸€è®²è§£å…¶å®ç°æ€è·¯ã€‚</p><h2 id="å¼€å§‹ä¹‹å‰">å¼€å§‹ä¹‹å‰</h2><p>åœ¨æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œå…ˆé¢„å…ˆä»‹ç»ä¸€ä¸‹ç›¸å…³çš„ä¿¡æ¯ã€‚</p><p>ä»¥ä¸‹è®²è§£å‡åªæ¶‰åŠ<strong>PCç«¯</strong>çš„é€»è¾‘ã€‚</p><p>ä¸‹é¢æ‰€è¯´çš„<strong>å…ƒç´ </strong>è¡¨ç¤ºçš„æ˜¯<strong>ç»„æˆ–è€…ç»„ä»¶</strong>çš„ç®€ç§°ã€‚</p><p>å› ä¸ºæœ¬æ–‡è¯´çš„æ˜¯å³é”®èœå•ï¼Œæ‰€ä»¥è‚¯å®šæ— æ³•é¿å…äºŒæ¬¡æ“ä½œã€‚æ¯”å¦‚å…ˆè¿›è¡Œå¤åˆ¶ï¼Œç„¶åè¿›è¡Œç²˜è´´ï¼Œæ‰€ä»¥ä¸€èˆ¬è®¤ä¸ºäºŒæ¬¡æ“ä½œæ‰€é€‰ä¸­çš„å…ƒç´ ä¸ºæœ€ç»ˆå¯èƒ½éœ€è¦æ“ä½œçš„ä½ç½®ï¼ˆæ¯”å¦‚å¤åˆ¶äº†ç»„å†…çš„å…ƒç´ ï¼Œç„¶åå³é”®ç²˜è´´é€‰æ‹©çš„å…ƒç´ åœ¨ç»„å¤–ï¼Œé‚£ä¹ˆç›®æ ‡å…ƒç´ å°±ä¼šè¢«ç²˜è´´åˆ°ç»„å¤–ï¼‰ã€‚</p><h3 id="ç»„ä»¶æ•´ä½“çš„æ•°æ®ç»“æ„ã€‚">ç»„ä»¶æ•´ä½“çš„æ•°æ®ç»“æ„ã€‚</h3><p>ç»„ä»¶åœ¨ç”»å¸ƒä¸­çš„å­˜åœ¨å½¢å¼æ˜¯ä¸€ä¸ª<strong>æ ‘</strong>çš„ç»“æ„ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ•°ç»„å½¢å¼ï¼Œå½“ç„¶å¹¶ä¸åªæ˜¯ä¸€ä¸ªä¸€å±‚ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ·±å±‚åµŒå¥—çš„ç»“æ„ã€‚<br>ç±»ä¼¼äºä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> Components = &#123;<br>  <span class="hljs-comment">// ç»„ä»¶id</span><br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span><br>  <span class="hljs-comment">// çˆ¶çº§çš„ç»„ä»¶id </span><br>  parent?: <span class="hljs-built_in">string</span> <br>  <span class="hljs-comment">// å…ƒç´ æ ‡è¯† ç»„æˆ–è€…ç»„ä»¶</span><br>  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;component&#x27;</span> | <span class="hljs-string">&#x27;group&#x27;</span><br>  <span class="hljs-comment">// å­å…ƒç´ </span><br>  <span class="hljs-attr">components</span>: Components[]<br>  <span class="hljs-comment">// ...another config </span><br>&#125;[]<br></code></pre></td></tr></table></figure><ul><li>id<br>å…ƒç´ çš„id</li><li>parent<br>çˆ¶çº§çš„idï¼Œå¦‚æœä¸ºæœ€ä¸Šå±‚çš„å…ƒç´ åˆ™ä¸å­˜åœ¨</li><li>type<br>æ ‡è®°å½“å‰å…ƒç´ æ˜¯ç»„è¿˜æ˜¯ç»„ä»¶</li><li>components<br>å½“å‰ç»„çš„ä¸‹å±‚å…ƒç´ </li></ul><p>ç»„å¯ä»¥åµŒå¥—ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥åµŒå¥—ç»„ï¼Œç»„ä»¶ä¸ºæœ€ä¸‹å±‚ã€‚<br>å…ƒç´ é€šè¿‡<code>parent</code>æ¥è¾¾åˆ°ä¸çˆ¶çº§çš„å…³è”ã€‚<br>å¦‚æ­¤å½¢æˆä¸€ä¸ªæ— é™å‘ä¸‹åµŒå¥—çš„ç»“æ„ã€‚</p><h3 id="å¹³æ»‘ç»“æ„">å¹³æ»‘ç»“æ„</h3><p>è™½ç„¶ä¸Šè¿°çš„ç»“æ„å¯ä»¥å¾ˆå¥½çš„æè¿°å’Œç›´è§‚çš„çœ‹åˆ°æ•´ä¸ªå¤§å±çš„å…¨è²Œï¼Œä½†æ˜¯æœ‰æ—¶å€™æ“ä½œèµ·æ¥ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æœ‰ç‚¹ä¸æ–¹ä¾¿ã€‚<br>æ­¤æ—¶å°±éœ€è¦ä¸€ä¸ªä¸´æ—¶çš„å¹³æ»‘çš„<strong>å•å±‚æ¬¡ç»“æ„</strong>æ¥åº”å¯¹ä¸šåŠ¡ä¸­çš„ä¸€äº›é€»è¾‘æ“ä½œã€‚<br>å½“å‰çš„æƒ³æ³•æ˜¯ä»¥<strong>å¯¹è±¡</strong>çš„å½¢å¼æ¥è¡¨è¾¾ã€‚<br>ç±»ä¼¼äºä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> ComponentPath = &#123;<br>  [key: <span class="hljs-built_in">string</span>]: &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;<br>    path: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-comment">// ...another info </span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>é”®å<br>keyå³ä¸ºå…ƒç´ çš„id</li><li>id<br>ä¸é”®ååŒæ„</li><li>path<br>è¿™ä¸ªæ˜¯æ­¤ç»“æ„çš„å…³é”®ï¼Œå®ƒæ˜¯å½“å‰å…ƒç´ åœ¨<strong>æ ‘</strong>ç»“æ„ä¸­çš„è·¯å¾„ï¼Œå…³äºä»–çš„æ ¼å¼å¯ä»¥å‚è€ƒ<a href="https://www.lodashjs.com/docs/lodash.get">lodashçš„getæ–¹æ³•</a><br>æ¯”å¦‚<code>0.components.2</code>è¡¨ç¤ºè·å–ç¬¬ä¸€ä¸ªç»„çš„ç¬¬äºŒä¸ªå­å…ƒç´ ã€‚</li></ul><h2 id="å¼€å§‹">å¼€å§‹</h2><blockquote><p>é¦–å…ˆè®²ä¸€ä¸‹æœ¬æ–‡æ‰€æ¶‰åŠçš„æ‰€æœ‰æ“ä½œï¼š<br>æˆç»„/å–æ¶ˆæˆç»„ã€å¤åˆ¶/ç²˜è´´ã€å±‚çº§æ§åˆ¶ï¼ˆç½®é¡¶/ç½®åº•/ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªï¼‰ã€åˆ é™¤ã€ç»„ä»¶åˆ‡æ¢ã€å¤åˆ¶ç»„ä»¶æ ·å¼ã€éšè—ã€é”å®šã€æ¢å¤é»˜è®¤é…ç½®ã€å‰è¿›åé€€ã€‚</p></blockquote><p>å…¶å®æœ¬æ¥å¯¹äºä¸Šè¿°çš„æ“ä½œï¼Œå®ç°é€»è¾‘å¹¶ä¸å¤æ‚ï¼Œä½†æ˜¯å› ä¸ºè®¾è®¡å™¨å½“ä¸­å­˜åœ¨<strong>å¤šé€‰</strong>æ“ä½œçš„é€»è¾‘ï¼Œä»¥åŠ<strong>æˆç»„</strong>çš„é€»è¾‘ï¼Œå¯¼è‡´ä¸Šé¢çš„æ“ä½œå®ç°èµ·æ¥å¹¶æ²¡æœ‰çœ‹ä¸Šå»é‚£ä¹ˆç®€å•ã€‚</p><h3 id="æˆç»„-å–æ¶ˆæˆç»„">æˆç»„/å–æ¶ˆæˆç»„</h3><p>ä¸€ä¸Šæ¥å°±æ˜¯æœ€å¤æ‚çš„é€»è¾‘ğŸ¤·ğŸ»â€â™€ï¸ ã€‚</p><p>å…ˆè®²æˆç»„æ˜¯å› ä¸ºå®ƒå¯¹åé¢çš„é€»è¾‘æˆ–å¤šæˆ–å°‘ä¼šäº§ç”Ÿä¸€å®šçš„å½±å“ã€‚<br>å¹¶ä¸”æˆç»„æ˜¯æ‰€æœ‰æ“ä½œå½“ä¸­ï¼Œ<strong>æœ€éš¾</strong>å®ç°çš„éƒ¨åˆ†ã€‚</p><p><strong>ç»„</strong>å³æ˜¯å°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ è¿›è¡ŒåŒ…è£¹ï¼Œç»„å†…å…ƒç´ çš„<strong>å®šä½</strong>å°†ä¸å†åŸºäºç”»å¸ƒï¼Œè€Œæ˜¯åŸºäºç»„ã€‚<br>å› ä¸ºå¤šä¸ªå…ƒç´ æˆç»„åï¼Œå…ä¸äº†å¯¹ç»„è¿›è¡Œ<strong>å¤§å°</strong>ã€<strong>ä½ç½®</strong>è°ƒæ•´ç­‰ã€‚<br><strong>ä½ç½®</strong>è°ƒæ•´ç›¸å¯¹æ¥è¯´å½±å“ä¸å¤§ï¼Œå› ä¸ºå†…éƒ¨å…ƒç´ å‡åŸºäºç»„æ¥è¿›è¡Œå®šä½ã€‚<br>è€Œ<strong>å¤§å°</strong>çš„å˜åŠ¨ä¼šå¯¹å†…éƒ¨çš„å…ƒç´ å½±å“éå¸¸å¤§ã€‚</p><blockquote><p>æ¯”å¦‚ï¼Œåˆå§‹ç»„çš„å®½åº¦ä¸º<code>200px</code>ï¼Œç»„å†…çš„ä¸€ä¸ªç»„ä»¶çš„å®½åº¦ä¸º<code>50px</code>ï¼Œä¹‹åå°†ç»„è°ƒæ•´ä¸º<code>400px</code>ï¼Œé‚£ä¹ˆç»„ä»¶çš„å®½åº¦åº”è¯¥è°ƒæ•´ä¸ºå¤šå°‘ï¼Ÿ<br>ç»„çš„å®½åº¦æ”¾å¤§äº†<code>2å€</code>ï¼Œæ‰€ä»¥ç»„ä»¶çš„å®½åº¦åŒæ—¶ä¹Ÿæ”¾å¤§<code>2å€</code>ï¼Œå˜ä¸º<code>100px</code>ã€‚<br>åŒæ—¶è¿˜è¦æ³¨æ„ï¼Œç»„ä»¶çš„ä½ç½®åŒæ ·ä¹Ÿéœ€è¦è°ƒæ•´ï¼Œå¦‚ä¸Šè¿°çš„ï¼Œè¯´æ˜ç»„ä»¶çš„<code>left</code>ä¹Ÿè¦æ”¾å¤§<code>2å€</code>ã€‚</p></blockquote><p>å¦‚æ­¤è¿›è¡Œä¸Šè¿°çš„è®¡ç®—è°ƒæ•´ï¼Œç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒè€—è´¹æ€§èƒ½çš„ï¼Œå› ä¸ºä»–ä¸ä»…ä»…æ˜¯åªæœ‰ä¸€å±‚çš„ç»“æ„ã€‚</p><p>æœ€ç»ˆé€‰æ‹©çš„æ–¹æ¡ˆæ˜¯ï¼Œé€šè¿‡å¯¹æ¯ä¸€ä¸ªå…ƒç´ æ— å·®åˆ«å¸¦ä¸Š<code>scale</code>é…ç½®ï¼š<code>scaleX</code>å’Œ<code>scaleY</code>ï¼Œé»˜è®¤ä¸º<code>1</code>ã€‚<br>å¯¹äºç»„ä»¶çš„æ“ä½œï¼Œæ— é¡»ä¿®æ”¹<code>scale</code>é…ç½®ï¼Œè€Œç»„çš„å¤§å°è°ƒæ•´æ—¶ï¼Œä¿®æ”¹å°ºå¯¸å’Œ<code>scale</code>é…ç½®å³å¯ã€‚<br><code>const newScaleX = (newWidth / width) * (scaleX || 1)</code>ï¼Œå¦‚æ­¤å¯ä»¥è®¡ç®—å‡ºæ–°çš„<code>scaleX</code>ã€‚</p><p>è€Œå†…éƒ¨çš„å…ƒç´ åœ¨å®é™…æ¸²æŸ“å‰ï¼Œåªéœ€è¦å°†çˆ¶çº§çš„<code>scale</code>è¿›è¡Œè®¡ç®—å³å¯ã€‚<br><code>const componentWidth = width * parentScaleX</code><br>è€Œç»„å†…ç»„çš„è¯ï¼Œåˆ™æ˜¯éœ€è¦å°†è‡ªå·±çš„<code>scale</code>ä¸çˆ¶çº§çš„<code>scale</code>è¿›è¡Œç›¸ä¹˜ï¼Œå› ä¸ºç»„å†…ç»„ä¹‹ä¸‹è¿˜æœ‰ç»„ä»¶ï¼Œæ˜¯ç›¸äº’å½±å“çš„ã€‚</p><h4 id="æˆç»„">æˆç»„</h4><p>æˆç»„çš„å…ƒç´ æœ‰ä¸¤ç§æƒ…å†µï¼šåŒçº§æˆç»„å’ŒéåŒçº§æˆç»„ã€‚</p><p>é¦–å…ˆéœ€è¦è®¡ç®—å‡ºå¯¹åº”çš„å…ƒç´ ç›¸å¯¹äºç”»å¸ƒçš„ä½ç½®å’Œå°ºå¯¸ã€‚ï¼ˆä¸Šé¢å·²ç»è¯´è¿‡ï¼Œç»„å†…å…ƒç´ æ˜¯æ ¹æ®çˆ¶çº§ç»„æ¥è¿›è¡Œå®šä½çš„ï¼Œå°ºå¯¸ä¹Ÿå—åˆ°äº†<code>scale</code>é…ç½®çš„å½±å“ï¼‰<br>å¦‚æœæ˜¯ç»„çš„è¯ä¹Ÿè¦å°†<code>scale</code>é…ç½®è®¡ç®—å‡ºæ¥ã€‚</p><p>æ¥ç€è·å–åˆ°å¯¹åº”çš„æˆç»„ä½ç½®çš„çˆ¶çº§å…ƒç´ çš„ä¿¡æ¯ï¼ˆå¯ä»¥é€šè¿‡ä¸Šé¢è¯´çš„<code>parent</code>é…ç½®ï¼Œç”¨å¹³æ»‘ç»“æ„è·å–åˆ°å…ƒç´ é…ç½®ï¼‰ã€‚</p><p>åˆ›å»ºæ–°ç»„å¹¶æ ¹æ®å­å…ƒç´ ä¿¡æ¯é‡æ–°è®¡ç®—å®½é«˜åŠä½ç½®ã€‚</p><p>æ¥ç€é€’å½’å»ä¿®æ”¹å­ç»„å†…çš„å­å…ƒç´ ï¼ˆå› ä¸ºå­ç»„åœ¨æ ‘å†…çš„ç»“æ„å¯èƒ½å‘ç”Ÿäº†å˜åŒ–ï¼‰ï¼Œæœ€é‡è¦çš„æ˜¯å­å…ƒç´ çš„<code>parent</code>é…ç½®ï¼Œéœ€è¦æŒ‡å‘å½“å‰çš„çˆ¶å…ƒç´ ã€‚</p><h4 id="å–æ¶ˆæˆç»„">å–æ¶ˆæˆç»„</h4><p>æˆç»„çš„åå‘æ“ä½œã€‚</p><p>ç›¸å¯¹äº<strong>æˆç»„</strong>æ¥è¯´ï¼Œç®€å•ä¸€äº›ï¼Œåªéœ€è¦å»æ‰å¤–å±‚åŒ…è£¹çš„ç»„çš„ä¸€äº›é…ç½®ï¼Œæ¯”å¦‚<code>scale</code>é…ç½®ï¼Œå®šä½é…ç½®ï¼Œ<code>parent</code>é…ç½®ã€‚<br>å› ä¸ºç°åœ¨æ˜¯ç›¸å¯¹äºåŸçˆ¶ç»„çš„å†ä¸Šä¸€å±‚çˆ¶ç»„è¿›è¡Œå®šä½ï¼Œæ‰€ä»¥è¦å°†åŸçˆ¶ç»„çš„é…ç½®åˆå¹¶åˆ°å¯¹åº”çš„å­å…ƒç´ ä¸Šé¢ã€‚</p><h4 id="å…¶ä»–">å…¶ä»–</h4><p>å…·ä½“çš„ä»£ç è¯·æŸ¥çœ‹<a href="https://github.com/food-billboard/create-chart/blob/main/src/utils/Assist/Group/index.ts">è¿™é‡Œ</a>ã€‚<br>å½“å‰ç‰ˆæœ¬è¿˜å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šç»„å†…å…ƒç´ çš„å®½é«˜é€šè¿‡å³ä¾§é…ç½®è¿›è¡Œä¿®æ”¹ï¼Œå¤–å±‚ç»„çš„å°ºå¯¸æœªåŒæ­¥ã€‚é¢„è®¡åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬è¿›è¡Œå¤„ç†ã€‚</p><h3 id="å±‚çº§">å±‚çº§</h3><p>å±‚çº§æ§åˆ¶åŒ…å«å››ä¸ªæ“ä½œï¼šç½®é¡¶ã€ç½®åº•ã€ä¸Šä¸€ä¸ªã€ä¸‹ä¸€ä¸ªã€‚<br>å±‚çº§æ˜¯æŒ‡å…ƒç´ åœ¨ç”»å¸ƒå½“ä¸­æ˜¾ç¤ºçš„å±‚çº§é¡ºåºã€‚<br>è™½ç„¶<strong>PCç«¯</strong>å’Œ<strong>H5ç«¯</strong>æ˜¾ç¤ºçš„é€»è¾‘ä¸ä¸€æ ·ï¼Œä½†æ˜¯ä¹Ÿå¤§å·®ä¸å·®ã€‚</p><blockquote><p>PCç«¯ä¸­ç”»å¸ƒçš„å…ƒç´ ï¼Œé‡‡ç”¨çš„æ˜¯ç»å¯¹å®šä½çš„å¸ƒå±€ï¼Œé‚£ä¹ˆå±‚çº§å³æ˜¯å…ƒç´ çš„<code>zIndex</code>æ ·å¼<br>H5ç«¯ä¸­ç”»å¸ƒçš„å…ƒç´ ï¼Œé‡‡ç”¨æ™®é€šçš„æµå¼å¸ƒå±€ï¼Œé‚£ä¹ˆå±‚çº§å°±æ˜¯å…ƒç´ åœ¨æ•°ç»„ä¸­çš„<strong>ç´¢å¼•</strong>é¡ºåºã€‚</p></blockquote><p>å±‚çº§åˆ†æˆ3ç§ï¼š1(ç½®åº•ï¼‰ã€2(æ­£å¸¸)ã€3(ç½®é¡¶)ã€‚<br>å…ƒç´ åœ¨htmlçš„ç»“æ„ä¸­ä¹Ÿæ˜¯æŒ‰é¡ºåºè¿›è¡Œæ¸²æŸ“çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ å’Œç¬¬äºŒä¸ªå…ƒç´ è™½ç„¶<code>zIndex</code>éƒ½æ˜¯2ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªå…ƒç´ è¿˜æ˜¯ä¼šåœ¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä¸Šé¢ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;position: relative;width:200px;height:100px;&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;position: absolute;left: 0;top: 0;background-color: red;width: 200px;height: 100px;&quot;</span>&gt;</span><br>      ç¬¬ä¸€ä¸ªå…ƒç´ <br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;position: absolute;left: 80px;top: 0;background-color: yellow;width: 100px;height: 100px;&quot;</span>&gt;</span><br>      ç¬¬äºŒä¸ªå…ƒç´ <br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><div style="position: relative;width:200px;height:100px;">  <div style="position: absolute;left: 0;top: 0;background-color: red;width: 200px;height: 100px;">      ç¬¬ä¸€ä¸ªå…ƒç´   </div>  <div style="position: absolute;left: 80px;top: 0;background-color: yellow;width: 100px;height: 100px;">      ç¬¬äºŒä¸ªå…ƒç´   </div></div><p>æ‰€ä»¥é€»è¾‘å°±å¾ˆç®€å•äº†ï¼š</p><ul><li>ç½®é¡¶<br>å°†å…ƒç´ çš„<code>zIndex</code>ä¿®æ”¹ä¸º3ã€‚</li><li>ç½®åº•<br>å°†å…ƒç´ çš„<code>zIndex</code>ä¿®æ”¹1ã€‚</li><li>ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ª<br>ä¿®æ”¹å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä½ç½®ã€‚</li></ul><p>å› ä¸ºç»„æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œæ‰€ä»¥å¯¹äºæ­¤éƒ¨åˆ†çš„é€»è¾‘ï¼ŒåŸºæœ¬å¤„ç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>å½“å¤šé€‰äº†å¤šä¸ªå…ƒç´ æ—¶ï¼Œä¸ºäº†æ“ä½œæ–¹ä¾¿ï¼Œç»Ÿä¸€æ˜¾ç¤ºçš„éƒ½æ˜¯ä¸€ä¸ªçŠ¶æ€ã€‚<br>æ¯”å¦‚<strong>ç½®é¡¶</strong>ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ å·²ç»ç½®é¡¶äº†ï¼Œé‚£ä¹ˆæ“ä½œæŒ‰é’®æ˜¾ç¤ºçš„æ˜¯<strong>å–æ¶ˆç½®é¡¶</strong>ï¼Œæ ¹æ®ä¸Šé¢çš„é€»è¾‘ï¼Œå¤šä¸ªå…ƒç´ åŒæ—¶æ“ä½œæ—¶ï¼Œæ“ä½œæŒ‰é’®ç»Ÿä¸€æ˜¾ç¤ºæˆ<strong>ç½®é¡¶</strong>ã€‚</p><h3 id="åˆ é™¤">åˆ é™¤</h3><p>åˆ é™¤æ“ä½œå°±å¾ˆç®€å•äº†ï¼Œå•çº¯çš„ä»æ•°æ®ç»“æ„ä¸­ï¼Œåˆ é™¤å¯¹åº”çš„å…ƒç´ å³å¯ã€‚</p><p>è€Œåœ¨å¤§å±ä¸­ï¼Œéœ€è¦å¼¹å‡ºç¡®è®¤æç¤ºï¼šæ˜¯å¦åˆ é™¤xxxã€xxxç­‰ç»„ä»¶ã€‚å¦‚æœä»<strong>æ ‘</strong>ç»“æ„ä¸­å¯»æ‰¾ï¼Œéš¾å…æ˜¾å¾—éº»çƒ¦ã€‚<br>æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„å¹³æ»‘ç»“æ„æ¥è¿›è¡Œæ“ä½œï¼Œåªéœ€è¦ç®€å•çš„æ‹¿åˆ°å¯¹åº”å…ƒç´ çš„<code>path</code>è·¯å¾„ï¼Œæ¥ç€æ‹¿åˆ°ä»–çš„çˆ¶çº§ï¼Œåˆ é™¤å³å¯ğŸ‘ ã€‚</p><h3 id="éšè—">éšè—</h3><p>éšè—æ“ä½œå³æ˜¯å°†ç»„ä»¶åœ¨ç”»å¸ƒå½“ä¸­éšè—ã€‚<br>æ­¤æ“ä½œä¹Ÿååˆ†ç®€å•ï¼Œè®¾ç½®ç»„ä»¶çš„æ ·å¼å³å¯ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯<code>visibility</code>æ ·å¼æ¥æ§åˆ¶ï¼Œå®è·µä¸­å› ä¸º<code>display</code>å¯èƒ½ä¼šä½¿éƒ¨åˆ†ç»„ä»¶çš„<strong>å®½é«˜</strong>è®¡ç®—å‡ºç°é—®é¢˜ï¼Œæ•…ä½¿ç”¨<code>visibility</code>ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ å› ä¸º<code>visibility</code>çš„ç‰¹æ€§ï¼Œå¯èƒ½ä¼šä½¿å¾—é¼ æ ‡å¤šé€‰æ—¶è¿˜æ˜¯èƒ½é€‰ä¸­è¯¥å…ƒç´ ï¼Œæ‰€ä»¥éœ€è¦ç‰¹åˆ«å¤„ç†ã€‚</p><h3 id="é”å®š">é”å®š</h3><p>é”å®šæ“ä½œä¸éšè—æ“ä½œç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯é”å®šæ˜¯<strong>æ­£å¸¸æ˜¾ç¤º</strong>å…ƒç´ çš„ï¼Œä½†æ˜¯æ— æ³•å¯¹å…¶è¿›è¡Œç›¸åº”çš„æ“ä½œç½¢äº†ï¼Œæ¯”å¦‚é€‰ä¸­ã€ä¿®æ”¹é…ç½®ç­‰ã€‚<br>è¿™æ˜¯ä¸ºäº†é˜²æ­¢æœ‰äººè¯¯æ“ä½œï¼Œå¯¼è‡´ç›¸å…³å·²ç»å®Œæˆè®¾è®¡çš„å…ƒç´ è¢«ä¿®æ”¹ï¼Œå› ä¸ºæ•´ä½“æ•°æ®æ˜¯å®æ—¶ä¿å­˜çš„ã€‚</p><h3 id="ç»„ä»¶åˆ‡æ¢">ç»„ä»¶åˆ‡æ¢</h3><p>ç»„ä»¶åˆ‡æ¢ä¸ºæ ¹æ®<strong>æ•°æ®</strong>è¿›è¡Œç»„ä»¶åˆ‡æ¢ã€‚<br>æ¯”å¦‚å½“åœ¨è®¾è®¡å®Œæˆä¸€ä¸ªç»„ä»¶æ—¶ï¼Œçªç„¶æƒ³æ¢æˆå¦å¤–ä¸€ç§å‘ˆç°å½¢å¼ï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡ç»„ä»¶åˆ‡æ¢è¾¾åˆ°ç›®çš„ã€‚<br>å½“ç„¶è¦æ±‚æ˜¯è¢«åˆ‡æ¢çš„ç»„ä»¶å’Œåˆ‡æ¢ç»„ä»¶çš„æ•°æ®æ ¼å¼æ˜¯ç›¸åŒçš„ã€‚</p><p>å…³äºæ•°æ®æ ¼å¼ï¼Œå³å¯¹åº”ç»„ä»¶æ‰€éœ€è¦çš„æ•°æ®çš„ç±»å‹ï¼ŒåŠå­—æ®µã€‚<br>æ¯”å¦‚<strong>æŸ±å½¢å›¾</strong>ï¼Œä»–çš„æ•°æ®æ ¼å¼ä¸ºï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> BarData = &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-built_in">string</span> <br>  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span> <br>  s?: <span class="hljs-built_in">string</span> <br>&#125;[]<br></code></pre></td></tr></table></figure><p><strong>æŠ˜çº¿å›¾</strong>çš„æ•°æ®æ ¼å¼åŒæ ·ä¹Ÿæ˜¯ä¸Šé¢çš„å½¢å¼ã€‚<br>æ‰€ä»¥è¯´æ˜æŸ±å½¢å›¾å’ŒæŠ˜çº¿å›¾æ˜¯å¯ä»¥è¿›è¡Œç›¸äº’åˆ‡æ¢çš„ã€‚</p><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/ç»„ä»¶åˆ‡æ¢æ“ä½œ.jpg" /><h3 id="å¤åˆ¶ç»„ä»¶æ ·å¼">å¤åˆ¶ç»„ä»¶æ ·å¼</h3><p>å¤åˆ¶ç»„ä»¶æ ·å¼ç±»ä¼¼äºå¤åˆ¶æ“ä½œï¼Œå½“ç„¶ä»–æ˜¯æŠŠå¤åˆ¶å’Œç²˜è´´æ“ä½œè¿›è¡Œäº†åˆå¹¶ã€‚<br>å’Œåç§°ä¸€æ ·ï¼Œå¤åˆ¶çš„æ˜¯ç»„ä»¶çš„<strong>æ ·å¼</strong>é…ç½®ï¼Œå¯¹äºç»„ä»¶çš„<strong>æ•°æ®</strong>å’Œ<strong>äº¤äº’</strong>ç­‰ï¼Œå‡ä¸ºç»„ä»¶çš„åˆå§‹å€¼ã€‚</p><p>é€»è¾‘å³ç®€å•ä½¿ç”¨<code>lodash</code>çš„<code>mergeWith</code>å°†ç»„ä»¶é…ç½®å’Œé»˜è®¤é…ç½®è¿›è¡Œåˆå¹¶å³å¯ã€‚</p><h3 id="æ¢å¤é»˜è®¤é…ç½®">æ¢å¤é»˜è®¤é…ç½®</h3><p>æ¢å¤é»˜è®¤é…ç½®ï¼Œå°†ç»„ä»¶çš„é…ç½®æ¢å¤æˆåˆå§‹å€¼ï¼Œç®€å•è¦†ç›–å³å¯ã€‚</p><h3 id="å‰è¿›åé€€">å‰è¿›åé€€</h3><p>å‰è¿›å’Œåé€€ï¼Œå…è®¸æ“ä½œå¯ä»¥å‰è¿›å’Œåé€€ã€‚<br>æ¯”å¦‚å°†ä¸€ä¸ªç»„ä»¶å³ç§»<code>100px</code>ï¼Œåé€€æ“ä½œå¯ä»¥å°†ç»„ä»¶å›åˆ°åŸæ¥çš„ä½ç½®ã€‚</p><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯è‡ªå·±å®ç°çš„ç±»åº“<a href="https://github.com/food-billboard/react-undo-component">react-undo-component</a>ã€‚<br>ä»–å¯ä»¥è®©<code>class</code>ç»„ä»¶æˆ–è€…<code>function</code>ç»„ä»¶ï¼Œåœ¨å†…éƒ¨è®°å½•<code>state</code>çš„ä¸€ç³»åˆ—æ“ä½œè®°å½•ï¼Œæ–¹ä¾¿è¿›è¡Œå‰è¿›å’Œåé€€ã€‚<br>æ¯”å¦‚<code>function</code>ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨<code>useUndo</code>æ–¹æ³•ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; useUndo &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-undo-component&#x27;</span><br><br><span class="hljs-keyword">const</span> UndoComponent = <span class="hljs-function">() =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">const</span> [ counter, setCounter, &#123;<br>    undo<br>  &#125; ] = useUndo&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>)<br><br>  <span class="hljs-keyword">const</span> handleAdd = <span class="hljs-function">() =&gt;</span> &#123;<br>    setCounter(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>)<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> handleUndo = <span class="hljs-function">() =&gt;</span> &#123;<br>    undo()<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>counter: &#123;counter&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleAdd&#125;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleUndo&#125;</span>&gt;</span>undo<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>&#125;<br></code></pre></td></tr></table></figure><p>å†…éƒ¨å³æ˜¯ç®€å•æ‹¦æˆªäº†<code>useState</code>æ–¹æ³•æ¥è®°å½•<code>state</code>å˜åŒ–ã€‚<br>å› ä¸ºè®¾è®¡å™¨ä½¿ç”¨çš„æ˜¯<code>dva</code>ï¼Œæ‰€ä»¥ä¸èƒ½ç®€å•ä½¿ç”¨ä¸Šè¿°çš„æ–¹æ³•ï¼Œä½†æ˜¯ä»–åŒæ ·å¯¼å‡ºäº†å†…éƒ¨classçš„<code>Histroy</code>å¯ä»¥è‡ªè¡Œå®ç°å¯¹åº”ç»†èŠ‚ã€‚<br>å…·ä½“çš„å®ç°ä»£ç å¯ä»¥æŸ¥çœ‹<a href="https://github.com/food-billboard/create-chart/blob/main/src/utils/Assist/History/index.ts">è¿™é‡Œ</a></p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ä»¥ä¸Šé€»è¾‘å‡ä¸ºæœ¬äººè‡ªå·±çš„æƒ³æ³•ï¼Œå¦‚æœ‰é—®é¢˜æˆ–é”™è¯¯å¯æŒ‡æ­£ğŸ™ğŸ» ã€‚</p><p>ç»“æŸğŸ”šã€‚</p><p>é¡ºä¾¿åœ¨ä¸‹é¢é™„ä¸Šç›¸å…³çš„é“¾æ¥ã€‚</p><blockquote><p><a href="http://47.97.27.23/api/backend/screen/index.html">è¯•ç”¨åœ°å€</a><br><a href="https://github.com/food-billboard/create-chart/issues/2">è¯•ç”¨è´¦å·</a><br><a href="http://47.97.27.23/api/backend/create-chart-docs/index.html">æ“ä½œæ–‡æ¡£</a><br><a href="https://github.com/food-billboard/create-chart">ä»£ç åœ°å€</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>å¤§å±</category>
      
    </categories>
    
    
    <tags>
      
      <tag>lowcode react chart</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»£ç åº“è®°å½•</title>
    <link href="/2022/12/20/%E4%BB%A3%E7%A0%81%E5%BA%93%E8%AE%B0%E5%BD%95/"/>
    <url>/2022/12/20/%E4%BB%A3%E7%A0%81%E5%BA%93%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»£ç åº“è®°å½•">ä»£ç åº“è®°å½•</h2><p>æœ¬æ–‡æ˜¯è®°å½•å¹³æ—¶çœ‹åˆ°çš„ä¸€äº›å®ç”¨çš„åº“ï¼Œæ–¹ä¾¿åç»­æœ‰éœ€æ±‚ã€‚</p><h3 id="å¼€å§‹">å¼€å§‹</h3><ul><li>react-rnd<br>å…ƒç´ æ‹–æ‹½</li><li>react-color<br>é¢œè‰²é€‰æ‹©</li><li>html2canvas<br>htmlè½¬canvas</li><li>dom-to-image<br>htmlè½¬canvas</li><li>gif.js<br>å¤šå¼ å›¾ç‰‡è½¬gif</li><li>file-saver<br>æ–‡ä»¶ä¸‹è½½</li><li>postmate<br>é¡µé¢ä¿¡æ¯ä¼ é€’ï¼Œç±»ä¼¼äºpostmessage</li><li>fast-json-stringify<br>é«˜æ•ˆjsonè½¬å­—ç¬¦ä¸²</li><li>koa-compress<br>æœåŠ¡ç«¯å‹ç¼©</li><li>node-images<br>æœåŠ¡ç«¯å›¾ç‰‡å¤„ç†</li><li>vimejs<br>è§†é¢‘æ’­æ”¾</li><li>clipboard<br>å¤åˆ¶å‰ªåˆ‡æ¿</li><li>jieba<br>ä¸­æ–‡åˆ†è¯-å…³é”®å­—æŠ½å–</li><li><a href="http://css.gg">css.gg</a><br>å›¾æ ‡</li><li>lottie-web<br>å¸§åŠ¨ç”»</li><li>cropperjs<br>å›¾ç‰‡è£å‰ª</li><li>viewerjs<br>å›¾ç‰‡é¢„è§ˆ</li><li>animnxyz<br>é€šç”¨åŠ¨ç”»åº“</li><li>d3<br>é«˜åº¦å¯å®šåˆ¶å¯è§†åŒ–åº“</li><li>xterm.js<br>webç»ˆç«¯</li><li>semantic-release<br>githubæŒç»­é›†æˆ</li><li>react-use<br>react hooks</li><li>color.js<br>é¢œè‰²å¤„ç†</li><li>jscover<br>ä»£ç è¦†ç›–ç‡</li><li>benchmark<br>åŸºå‡†æµ‹è¯•</li><li>grunt<br>æ„å»ºå·¥å…·</li><li>node-inspector<br>nodeè°ƒè¯•</li><li>fabric.js<br>å›¾åƒå¤„ç†</li><li>globby.js<br>æ–‡ä»¶è¯»å–</li><li>execa<br>å‘½ä»¤è¡Œ</li><li>brackets<br>ä»£ç ç¼–è¾‘å™¨</li><li>turndown<br>html2markdown</li><li>jsdom<br>æœåŠ¡ç«¯domæ¨¡æ‹Ÿ</li><li>np<br>npm publish</li><li>rc-steps<br>æ­¥éª¤æ¡</li><li>dexie.js<br>å‰ç«¯ç¦»çº¿æ•°æ®å­˜å‚¨</li><li>react-datasheet<br>å‰ç«¯ç±»excelç»„ä»¶</li><li>chatui<br>èŠå¤©ui</li><li>react-flow<br>æµç¨‹å›¾ç»˜åˆ¶</li><li>react-router-cache-router<br>é¡µé¢ç¼“å­˜</li><li>tailwindcss<br>css in js</li><li>cypress<br>æµè§ˆå™¨ç«¯æµ‹è¯•</li><li>rxdb<br>å‰ç«¯è·¨å¹³å°æ•°æ®åº“</li><li>immutabiluty-helper<br>å¤æ‚æ•°æ®æ›´æ–°</li><li>hammer.js<br>ç§»åŠ¨ç«¯æ‰‹æŒ‡äº‹ä»¶ï¼ˆæ¯”è¾ƒè€ï¼‰</li><li>webpack-chain<br>é“¾å¼webpacké…ç½®</li><li>nanoid<br>uuid</li><li>redux-undo<br>reduxå‰è¿›åé€€</li><li>chart.css<br>css chart å›¾è¡¨</li><li>swiper<br>pc h5 è½®æ’­å›¾</li><li>rrweb<br>å‰ç«¯é¡µé¢å½•åˆ¶</li><li>eva.js<br>å‰ç«¯æ¸¸æˆæ¸²æŸ“å¼•æ“</li><li>winbox<br>å‰ç«¯å°çª—</li><li>vue-i18n<br>vueå›½é™…åŒ–</li><li>node-util<br>é€šç”¨å·¥å…·åº“</li><li>yeoman<br>é€šç”¨è„šæ‰‹æ¶</li><li>webfunny<br>å‰ç«¯ç›‘æ§</li><li>helmet<br>nodeå®‰å…¨æ ¡éªŒ</li><li>jszip<br>å‰ç«¯æ–‡ä»¶è§£å‹ç¼©</li><li>node-stream-zip<br>nodeæ–‡ä»¶è§£å‹ç¼©</li><li>plopjs<br>æ¨¡æ¿ä»£ç ç”Ÿæˆ</li><li>sharp<br>nodeå›¾ç‰‡å¤„ç†</li><li>colorthief<br>è·å–å›¾ç‰‡ä¸»é¢˜è‰²</li><li>gocr.js<br>å›¾ç‰‡æ–‡å­—è¯†åˆ«</li><li>css3d-engine<br>css 3d</li><li>tween.js<br>ç¼“åŠ¨åŠ¨ç”»</li><li>stats.js<br>three fpsæ˜¾ç¤º</li><li>hover.css<br>hoveræ ·å¼</li><li>squoosh<br>å›¾ç‰‡å‹ç¼©</li><li>nativefier<br>webé¡µé¢è½¬æ¡Œé¢app</li><li>lowdb<br>è½»é‡å‰ç«¯jsonæ–‡ä»¶æ•°æ®åº“</li><li>eruda<br>ç§»åŠ¨ç«¯è°ƒè¯•</li><li>ts-toolbelt<br>typescriptå·¥å…·ç±»å‹</li><li>emoji-mart<br>è¡¨æƒ…</li><li>tracking.js<br>äººè„¸æ£€æµ‹</li><li>react-sortable-hoc<br>åˆ—è¡¨æ‹–æ‹½æ’åº</li><li>is-mobile<br>æ˜¯å¦æ˜¯æ‰‹æœºæµè§ˆå™¨</li><li>sjcl<br>æ•°æ®åŠ å¯†</li><li>browser-fs-access<br>æ–‡ä»¶ä¸‹è½½</li><li>reveal.js<br>ppt</li><li>grapesjs<br>ä½ä»£ç </li><li>fuse.js<br>å‰ç«¯æ•°æ®æ£€ç´¢</li><li>hoist-non-react-statics<br>æ‹·è´ç»„ä»¶é™æ€å±æ€§</li><li>tesseract.js<br>æ–‡å­—è¯†åˆ«</li><li>countup<br>æ•°å­—åŠ¨ç”»</li><li>ua-parse-js<br>è·å–ç”¨æˆ·uaä¿¡æ¯</li><li>leaflet<br>ç§»åŠ¨ç«¯åœ°å›¾</li><li>react95<br>å¤å¤ç»„ä»¶åº“</li><li>wired-elements<br>æ‰‹ç»˜é£æ ¼ç»„ä»¶åº“</li><li>signature-pad<br>æ‰‹å†™ç­¾å</li><li>tui.editor<br>markdownç¼–è¾‘å™¨</li><li>tui.image-editor<br>å›¾ç‰‡ç¼–è¾‘å™¨</li><li>unlock-music<br>æµè§ˆå™¨è§£é”åŠ å¯†éŸ³ä¹æ–‡ä»¶</li><li>csshake<br>cssæŠ–åŠ¨æ•ˆæœ</li><li>schema-typed<br>æ•°æ®æ ¡éªŒ</li><li>model-viewer<br>3dæ¨¡å‹å±•ç¤º</li><li>waypoints<br>æ»šåŠ¨ç›‘å¬</li><li>omi<br>è·¨ç«¯ç»„ä»¶åº“</li><li>ffcreator<br>nodeç«¯å¯è§†åŒ–åˆ¶ä½œ</li><li>zx.js<br>javascriptå†™shellè„šæœ¬</li><li>heti<br>ä¸­æ–‡æ’ç‰ˆ</li><li>tvlist-awesome-m3u-m3u8<br>ç”µè§†èŠ‚ç›®ç›´æ’­æºåœ°å€</li><li>urlcat<br>urlåœ°å€ç”Ÿæˆ</li><li>shepherd.js<br>å¼•å¯¼é¡µ</li><li>react-pdf<br>pdfç”Ÿæˆ</li><li>chonky<br>æ–‡ä»¶ç›®å½•é¢„è§ˆ</li><li>remotion<br>reactè§†é¢‘ç”Ÿæˆ</li><li>lax.js<br>æ»šåŠ¨åŠ¨ç”»</li><li>tinykeys<br>é”®ç›˜äº‹ä»¶ç›‘å¬</li><li>mantine<br>æ„Ÿè§‰ç»„ä»¶æ¯”è¾ƒå¤šçš„ç»„ä»¶åº“</li><li>capture-website<br>æˆªå–å±å¹•æˆªå›¾</li><li>filpper.js<br>ç§»åŠ¨ç«¯è°ƒè¯•</li><li>react-image-crop<br>å›¾ç‰‡è£å‰ª</li><li>rainEffect<br>é›¨æ»´æ•ˆæœ</li><li>multiscroll.js<br>å¤åˆæ»šåŠ¨æ•ˆæœ</li><li>midnight.js<br>ç‚«é…·å›ºå®šå¤´éƒ¨</li><li>typed.js<br>æ‰“å­—æœºæ•ˆæœ</li><li>favico.js<br>ä¸ªæ€§åŒ–ç½‘ç«™å›¾æ ‡</li><li>particles.js<br>ç²’å­æ•ˆæœ</li><li>lexical<br>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</li><li>automerge<br>å¤šäººåä½œå¯å¤åˆ¶æ•°æ®ç±»å‹</li><li>party.js<br>çƒŸèŠ±ç‰¹æ•ˆ</li><li>whirl<br>loadingç‰¹æ•ˆ</li><li>gitleaks<br>gité™æ€å®‰å…¨åˆ†æ</li><li>node-notifier<br>ç”µè„‘ç«¯æ¶ˆæ¯æç¤ºæ¡†</li><li>css-doodle<br>gridå¸ƒå±€</li><li>pannellumjs<br>å…¨æ™¯æŸ¥çœ‹å™¨</li><li>rough<br>æ‰‹ç»˜é£æ ¼å›¾å½¢ç»˜åˆ¶</li><li>use-gesture<br>åŠ¨ç”»æ¯”è¾ƒå¥½çš„æ‹–æ‹½</li><li>lit<br>web component æ„å»ºè„šæ‰‹æ¶</li><li>turn.js<br>jqueryç¿»ä¹¦æ•ˆæœ</li><li>nodegui<br>jså†™æ¡Œé¢ç«¯</li><li>react-toastify<br>å…¨å±€å¼¹å‡ºæ¡†æç¤ºç»„ä»¶</li><li>pannellum<br>å…¨æ™¯æŸ¥çœ‹å™¨</li><li>watching-you<br>çœ¼ç›è·Ÿè¸ªé¼ æ ‡æˆ–ç‰©ä½“ç§»åŠ¨</li><li>shine.js<br>é˜´å½±æ•ˆæœ</li><li>tauri<br>æ¡Œé¢åº”ç”¨æ¡†æ¶</li><li>vite<br>webæ„å»ºå·¥å…·</li><li>qwik<br>ç±»reactï¼Œä½†æ˜¯ä½“ç§¯åº”è¯¥æ›´å°</li><li>zustand<br>reactçš„hookå‹çŠ¶æ€ç®¡ç†</li><li>react-useportal<br>reactçš„createPortal</li><li>hamburger-react<br>èœå•å±•å¼€æ”¶èµ·å›¾æ ‡</li><li>ui-button<br>å„ç§æ ·å¼çš„æŒ‰é’®</li><li>proton<br>å„ç§ç²’å­ç‰¹æ•ˆ</li><li>phytouch<br>éå¸¸ä¸æ»‘çš„æ‰‹æŒ‡touch</li><li>twemoji<br>emoji</li><li>satori<br>htmlå’Œcssè½¬svg</li><li>floating-ui<br>tooltipç»„ä»¶</li><li>fast-average-color<br>è·å–å›¾ç‰‡å¹³å‡è‰²</li></ul><h3 id="ç»“æŸ">ç»“æŸ</h3><p>æŒç»­æ›´æ–°ä¸­ã€‚ã€‚ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>frontend</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2022å¹´ç»ˆæ€»ç»“</title>
    <link href="/2022/12/12/2022%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    <url>/2022/12/12/2022%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h2 id="2022å¹´ç»ˆæ€»ç»“">2022å¹´ç»ˆæ€»ç»“</h2><p>ä»å¤§å­¦æ¯•ä¸šåˆ°å¦‚ä»Šå·²ç»ä¸¤å¹´äº†ï¼Œé¥æƒ³å½“åˆåˆšæ¯•ä¸šæ—¶çš„è‡ªå·±ï¼Œæ— æ•°ä¸ªæ™šä¸Šæƒ³è¦æ”¾å¼ƒè‡ªå·±å‘å¾€çš„å‰ç«¯è¡Œä¸šã€‚</p><blockquote><p>ç®€å•ä»‹ç»ä¸‹è‡ªå·±çš„æƒ…å†µ<br>ä¸‰æœ¬å¤§å­¦+éæœ¬ä¸“ä¸šã€‚<br>å¤§ä¸‰å¶ç„¶çš„ä¸€æ¬¡æœºä¼šæ¥è§¦äº†å‰ç«¯ï¼Œè‡ªæ­¤å¼€å§‹äº†å­¤ç‹¬çš„è‡ªå­¦ä¹‹è·¯ã€‚</p></blockquote><p>æƒ³æƒ³è¿™ä¸€è·¯èµ°æ¥ï¼Œè¾›é…¸åªæœ‰è‡ªå·±çŸ¥é“ã€‚</p><h3 id="æ›¾ä»Šçš„è‡ªå·±">æ›¾ä»Šçš„è‡ªå·±</h3><h4 id="å¤§å­¦">å¤§å­¦</h4><p>å¤§å­¦çš„ä¸“ä¸šæ˜¯ç”µå­å•†åŠ¡ï¼Œä»ä¸€è¿›å…¥å­¦æ ¡ï¼Œå¼€å§‹ç¬¬ä¸€é—¨è¯¾ç¨‹æ—¶ï¼Œå°±å‘ç°äº†è‡ªå·±å¹¶ä¸å–œæ¬¢è¿™ä¸ªä¸“ä¸šï¼Œå°±è¿™æ ·æ··ç€æ··ç€åˆ°äº†å¤§ä¸‰ã€‚<br>å› ä¸ºå­¦ä¹ çš„è¯¾ç¨‹éå¸¸æ‚ï¼ŒåŒ…å«éå¸¸å¤šç§ç±»çš„è¯¾ç¨‹ï¼šä¼šè®¡å­¦ã€ç»Ÿè®¡å­¦ã€ç»æµå­¦ã€è®¡ç®—æœºã€‚<br>åœ¨å¤§ä¸‰æ¥è§¦åˆ°<code>Java</code>æ—¶ï¼Œæ‰å½»åº•å†³å®šäº†ä»¥åçš„æ–¹å‘ï¼ˆå…¶å®è‡ªå·±ä¹Ÿä¸çŸ¥é“ä¸ºå•¥å´é€‰æ‹©äº†å‰ç«¯ï¼‰ã€‚</p><p>ä¹‹åå°±æ˜¯æ‹¼å‘½çš„å­¦ä¹ ï¼ˆğŸ§  ç¬¨ï¼Œä½†ç›¸ä¿¡å‹¤èƒ½è¡¥æ‹™ï¼‰ï¼Œæ—©ä¸Š8ç‚¹èµ·åºŠï¼ŒåŸºæœ¬é™¤äº†ä¸Šè¯¾æ—¶é—´ï¼Œéƒ½åœ¨å®¿èˆè‡ªå­¦ï¼Œçœ‹æ•™å­¦è§†é¢‘ã€åšç»ƒä¹ ï¼ˆè½®æ’­å›¾ã€èœå•ã€æ‰«é›·ã€è´ªåƒè›‡ã€2048ã€åˆ«è¸©ç™½å—ğŸ™‚ ğŸ™‚ ğŸ™‚ ï¼‰ã€‚ã€‚ã€‚</p><p>æ¯•ä¸šçš„è®ºæ–‡ä¹Ÿé€‰æ‹©äº†åšæ¯•è®¾ï¼ˆåšæ¯•è®¾çš„åœ¨å­¦æ ¡é‡ŒåŸºæœ¬æ˜¯åªæœ‰ä¸ªä½æ•°ğŸ˜“ ï¼Œæ¯•ç«Ÿæ˜¯ä¸ªè´¢ç»ç±»çš„å¤§å­¦ï¼‰ã€‚</p><h4 id="åˆå…¥ç¤¾ä¼š">åˆå…¥ç¤¾ä¼š</h4><p>19å¹´æå®šäº†å­¦æ ¡æ‚ä¸ƒæ‚å…«ä¸€å †äº‹æƒ…åï¼Œå›äº†æ­å·å¼€å§‹äº†è‡ªå·±çš„æ‰¾å·¥ä½œä¹‹æ—…ï¼Œå­¦ç€äººå®¶åˆ·é¢˜ï¼ˆç”¨äº†ğŸ‚ å®¢ï¼‰ï¼Œè™½ç„¶å¤§éƒ¨åˆ†å…¬å¸éƒ½è¢«è‡ªå·±çš„å­¦å†åŠé€€ï¼Œå¥½åœ¨è¿˜æ˜¯å¾—åˆ°äº†å‡ ä¸ªç¬”è¯•çš„æœºä¼šï¼Œæœ€æœ‰å¸Œæœ›çš„ä¸¤ä¸ªhuashuå’Œtonghuashunï¼Œèµ°åˆ°æœ€åçš„é¢è¯•ï¼Œå¥ˆä½•è‡ªå·±çš„æ°´å¹³å®åœ¨å¤ªå·®ï¼Œæœ€ç»ˆè¿˜æ˜¯å€’åœ¨äº†é—¨å£ï¼Œæ²¡æœ‰æŠŠè„šè¿ˆè¿›å»ã€‚</p><p>æ­£å½“è‡ªå·±å‡†å¤‡æ‰“é€€å ‚é¼“çš„æ—¶å€™ï¼Œä¸€å®¶å…¬å¸çš„è€æ¿æ‰“æ¥äº†ç”µè¯ï¼Œå¹¶ä¸”åœ¨ç”µè¯å½“ä¸­åšäº†ç®€å•çš„é¢è¯•ï¼Œé—®çš„éƒ½æ˜¯ä¸€äº›jsçš„åŸºç¡€é—®é¢˜ï¼Œç®—æ˜¯è€ƒå¯Ÿè‡ªå·±çš„åŸºç¡€çŸ¥è¯†å§ã€‚<br>å…¬å¸å¾ˆå°ï¼Œå°åˆ°é™¤äº†è€æ¿é™¤äº†æˆ‘ï¼Œåªæœ‰ä¸€ä¸ªå‘˜å·¥ï¼Œä½†æ˜¯ä»–å´ç»™äº†æˆ‘è«å¤§çš„å¸®åŠ©ã€‚<br>ä¸¤ä¸ªè€æ¿ï¼Œä¸€ä¸ªåšå‰ç«¯ï¼Œä¸€ä¸ªåšåç«¯ï¼Œè™½ç„¶è‡ªå·±å¹³å¸¸å·¥ä½œç©ºé—²ï¼Œä½†æ˜¯ä»–ä»¬å´å¾ˆå¿™ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œä»–ä¹Ÿä¸å¿˜ç»™æˆ‘åšå¾ˆå¤šçš„ç§‘æ™®ï¼Œ<code>git</code>ä½¿ç”¨ã€<code>react</code>å…¥é—¨ã€<code>typescript</code>çš„å¥½å¤„ï¼Œ<code>vue</code>çš„æŠ€å·§ï¼ˆå› ä¸ºæœ¬äººæ˜¯vueèµ·æ­¥ï¼Œä½†æ˜¯å…¬å¸ä¸»è¦ä½¿ç”¨<code>react</code>ï¼Œä¸€å¼€å§‹èŠ±äº†å¤§åŠŸå¤«å­¦ä¹ çš„<code>react</code>ï¼‰ï¼Œè€Œä¸”ä»–ä¼š<code>review</code>æˆ‘çš„ä»£ç ï¼Œå‘Šè¯‰æˆ‘ä¸€äº›æŠ€å·§ä»¥åŠä»£ç ä¹¦å†™çš„è§„èŒƒç­‰ç­‰ï¼Œä»–å¯¹æˆ‘çš„ä¸€äº›æŒ‡å¯¼å¯¹æˆ‘å¦‚ä»Šä¹Ÿæ˜¯ç›¸å½“å—ç›Šï¼Œè®©æˆ‘åœ¨ä¹‹åçš„è¿›æ­¥å½“ä¸­ï¼Œå°‘èµ°äº†å¾ˆå¤šçš„å¼¯è·¯ï¼Œæ›´æ˜¯æ‹“å®½äº†è‡ªå·±çš„è§†é‡ï¼ˆåœ¨è¿™é‡Œç”±è¡·çš„æ„Ÿè°¢ğŸ™ğŸ» ï¼‰ã€‚</p><p>å¥½æ™¯ä¸é•¿ï¼Œ2020å¹´ç–«æƒ…å¦‚æœŸè€Œè‡³ï¼Œåœ¨å®¶å‘éœ‰äº†å¥½å‡ ä¸ªæœˆï¼Œå­¦æ ¡ä¹Ÿå¼€å§‹å‚¬ä¿ƒæˆ‘çš„å°±ä¸šè®¡åˆ’ï¼ˆå› ä¸ºè¯¥å…¬å¸æ²¡æœ‰éå¸¸å®Œå–„çš„æ‰‹ç»­ï¼Œå¯¼è‡´å­¦æ ¡é‚£è¾¹å¯èƒ½ä¼šè®¤å®šè‡ªå·±æ˜¯éå°±ä¸šçŠ¶æ€ï¼Œæ— å¥ˆåªå¾—ç¦»å¼€äº†é‚£é‡Œï¼‰ã€‚<br>å› ä¸ºç¤¾ä¼šå½¢åŠ¿çš„å‹åŠ›ï¼Œæœ€ç»ˆåœ¨ç°åœ¨çš„å…¬å¸å®šå±…ï¼Œä¸€å®šå°±æ˜¯åˆ°ç°åœ¨ã€‚ã€‚ã€‚</p><h3 id="2022çš„è‡ªå·±">2022çš„è‡ªå·±</h3><p>åºŸè¯è®²äº†è¿™ä¹ˆå¤šï¼Œè¯¥è¿›å…¥æ­£é¢˜äº†ã€‚</p><h4 id="å·¥ä½œä¸Šçš„è‡ªå·±">å·¥ä½œä¸Šçš„è‡ªå·±</h4><p>å·¥èµ„ä¸ç®—é«˜ï¼Œä¸€å¹´1kå‘ä¸Šè¿›æ­¥ã€‚<br>å·¥ä½œä¸ç®—éš¾ï¼ŒåŸºæœ¬éƒ½èƒ½å®Œæˆã€‚<br>å·¥ä½œä¸ç®—å¿™ï¼ŒåŸºæœ¬åˆ°ç‚¹éƒ½ä¸‹ç­ã€‚</p><blockquote><p>ä»Šå¹´çš„å·¥ä½œä»»åŠ¡ï¼ŒåŸºæœ¬éƒ½æ˜¯æŒ‰æœŸå®Œæˆã€‚</p></blockquote><p>å…¬å¸åˆ†æˆä¸¤ä¸ªæŠ€æœ¯ç»„ï¼Œä¸€ç»„ä¸»è¥ä¸šåŠ¡æ˜¯å¯¹å¤–çš„cç«¯ä¸šåŠ¡ä»¥åŠå¤§é‡é•¿æœŸè¿­ä»£çš„bç«¯ä¸šåŠ¡ï¼Œæ‰€ä»¥ç»å¸¸çœ‹åˆ°ä»–ä»¬é¢‘ç¹çš„å¼€ä¼šä»¥åŠåŠ ç­ã€‚<br>è€Œæˆ‘å¹¸è¿çš„æ¥åˆ°äº†äºŒç»„ï¼ŒåŸºæœ¬ä¿æŒä¸€ç§ç¼“æ…¢çš„è¿›åº¦åœ¨æŒç»­è¿­ä»£ä¸€ä¸ªéå¸¸å¤§å‹çš„é¡¹ç›®ï¼Œä½†æ˜¯å¯èƒ½åªæ˜¯é’ˆå¯¹åç«¯ã€‚</p><p>å½“ç„¶ä¹Ÿè¿˜ç®—æ˜¯æœ‰æ‰€æ”¶è·ï¼š</p><ol><li>å¸®åŠ©ä¸€ç»„å®Œæˆäº†ä¸€ä¸ªè‰è‰çš„å•æ®çš„å¯è§†åŒ–è®¾è®¡å™¨ã€‚</li><li>å®Œæˆäº†é’ˆå¯¹å…¬å¸ä¸šåŠ¡åµŒå…¥çš„å¯è§†åŒ–æ•°æ®å¤§å±è®¾è®¡å™¨ã€‚</li><li>åŸºäº<code>antd</code>äºŒæ¬¡å¼€å‘äº†ç¬¦åˆå…¬å¸è§„èŒƒçš„ç»„ä»¶åº“ã€‚</li><li>å‚åŠ äº†å…¬å¸ä¸¤æ¬¡æŠ€æœ¯åˆ†äº«æ´»åŠ¨ï¼ˆæ–‡ä»¶ä¸Šä¼ +diffç®—æ³•ç®€æï¼‰ã€‚</li><li>ç¬¬ä¸€æ¬¡æ¥æ‰‹äº†å…¬å¸ç»´æŠ¤å·²ä¹…ä¸”ç»Näººä¹‹æ‰‹çš„è¶…çº§è¾£é¸¡ä»£ç ã€‚</li><li>ç¬¬ä¸€æ¬¡åŠ äº†ä¸€ä¸ª11ç‚¹çš„ç­ï¼ˆç»“æœç¬¬äºŒå¤©æ˜¯å‘¨æœ«ï¼Œæ²¡æœ‰è°ƒä¼‘ğŸ˜¤ ï¼‰ã€‚</li><li>ç¬¬ä¸€æ¬¡åˆä½œäº†ä¸€ä¸ªè¶…çº§å¢¨è¿¹çš„tongshiï¼ˆå»¶æœŸä¸€ä¸ªæœˆï¼Œå·®ç‚¹éª‚äººï¼‰ã€‚</li></ol><p>è¿™ä¸€å¹´èµ°æ¥ï¼Œå®ƒè®©æˆ‘æ¸æ¸çš„èå…¥äº†å‰ç«¯è¿™ä¸ªè¡Œä¸šã€‚<br>å½“åˆçš„è‡ªå·±åªçŸ¥é“é—·å¤´å¹²ï¼Œç°åœ¨ä¹ŸçŸ¥é“äº†ç”¨æˆ·ä½“éªŒçš„é‡è¦æ€§ï¼Œä¸ºäº†å®Œæˆä¸€ä¸ªéœ€æ±‚ï¼ŒèŠ±è´¹ä¸€å¤©æ—¶é—´ï¼Œå»æ‘¸ç´¢ï¼ˆç™¾åº¦ï¼‰ï¼Œå»å‚è€ƒï¼ˆcopyï¼‰åˆ«äººçš„æ„è§ã€‚<br>æ˜é‡‘ä»¥åŠ<code>github</code>ä¹Ÿè®©æˆ‘æ…¢æ…¢å¼€å§‹å…³æ³¨ä¸€äº›æ–°å¥‡çš„ä¸œè¥¿ï¼Œå¹³å¸¸é€›é€›æ˜é‡‘ã€çœ‹çœ‹é˜®ä¸€å³°çš„<code>weekly</code>ã€çœ‹çœ‹<code>github</code>çš„å¤§ç¥éƒ½å…³æ³¨äº†å•¥ä¸œè¥¿ï¼Œ<a href="https://juejin.cn/user/1574156384091320">HelloGitHub</a>ä¹Ÿèƒ½çœ‹åˆ°æœ€è¿‘æœ‰å“ªäº›ä¼˜è´¨çš„é¡¹ç›®ï¼ˆæ„Ÿè°¢ğŸ™ğŸ»ï¼‰ï¼Œè®©è‡ªå·±ä¸å†æ‹˜æ³¥äºåªæœ‰çœ¼å‰å·¥ä½œçš„ä¸œè¥¿ã€‚</p><p>æ›¾ç»çš„æ‰‹å†™ç¬”è®°ä¹Ÿå˜æˆäº†åšå®¢ç¬”è®°ï¼Œè™½ç„¶è¾“å‡ºé‡ä¸é«˜ï¼Œä¹Ÿç®—æ˜¯å¯¹è‡ªå·±è¿›æ­¥çš„è‚¯å®šå§ï¼Œå„ä½æœ‰å…´è¶£ä¹Ÿå¯ä»¥è¿‡æ¥<a href="https://food-billboard.github.io/">å‚è§‚ä¸€ä¸‹</a>ï¼ˆä¸ç®—æ˜¯é«˜æ·±å†…å®¹ï¼Œéƒ½æ˜¯å¹³å¸¸å†™ä¸œè¥¿æ—¶ç¢°åˆ°çš„é—®é¢˜ï¼‰ã€‚</p><h4 id="å·¥ä½œä¹‹å¤–çš„è‡ªå·±">å·¥ä½œä¹‹å¤–çš„è‡ªå·±</h4><p>æ‚„æ‚„æ¥è¯´ï¼Œå…¶å®è¿™ä¸€å¹´æ¥ï¼Œé™¤äº†å·¥ä½œå¤–ï¼Œå¤§éƒ¨åˆ†çš„æ—¶é—´è‡ªå·±éƒ½æ´»è·ƒåœ¨<code>github</code>å½“ä¸­ã€‚<br><img src="/images/æ¯æ—¥è¿›æ­¥å°è®°/æäº¤è®°å½•.jpg" /><br>åšäº†å¥½å¤šä¸ªç®€å•çš„å°é¡¹ç›®ï¼Œä¹Ÿç®—æ˜¯å½“åšé”»ç‚¼è‡ªå·±çš„æŠ€æœ¯å§ã€‚</p><p>ä»å¼€å§‹å·¥ä½œåˆ°ç°åœ¨ï¼Œæ­£ç»åšè¿­ä»£çš„é¡¹ç›®çš„è¯ï¼Œå¤§æ¦‚ä¹Ÿæœ‰ä¸ª10ä¸ªé¡¹ç›®å§ï¼Œç°åœ¨è¿˜åœ¨æŒç»­ç»´æŠ¤çš„å¯èƒ½ä¸€ä¸ªæ‰‹æŒ‡å¤´ä¹Ÿæ•°çš„è¿‡æ¥äº†å§ã€‚</p><ol><li><a href="https://github.com/food-billboard/create-chart">create-chart</a><br>è¿™ä¸ªåœ¨å‰é¢çš„æ–‡ç« ä¸­ä¹Ÿæœ‰ä»‹ç»åˆ°ï¼Œä¸€ä¸ªå¯è§†åŒ–å¤§å±çš„è®¾è®¡å™¨ã€‚<br>ç®—æ˜¯è¢«<code>star</code>æ•°é‡æœ€å¤šçš„é¡¹ç›®äº†ï¼ˆ10â­ï¸ï¼‰ï¼Œè™½ç„¶æœ‰å‡ ä¸ªæ˜¯pengyouç»™ç‚¹çš„ğŸ˜ ï¼Œè¿˜æœ‰2ä¸ª<code>fork</code>ã€‚<br>- 2021å¹´åº•~è‡³ä»Š</li><li><a href="https://github.com/food-billboard/create-chart-docs">create-chart-docs</a><br>ä¸Šé¢å¯è§†åŒ–å¤§å±é¡¹ç›®çš„æ“ä½œæ–‡æ¡£ã€‚<br>- 2022å¹´ä¸­~è‡³ä»Š</li><li><a href="https://github.com/food-billboard/bomber-man">bomber-man</a><br>FCæ¸¸æˆç‚¸å¼¹äººå¤åˆ»ã€‚<br>è¿™ä¸ªä¸æ˜¯ä¸€ä¸ªæŒç»­è¿­ä»£çš„é¡¹ç›®ï¼ˆå› ä¸ºå‰æ®µæ—¶é—´åœ¨<strong>ç ä¸ŠæŒ‘æˆ˜</strong>æ‹¿äº†ä¼˜ç§€å¥–ğŸ˜ ï¼Œç®€å•è®°å½•ä¸‹ï¼‰ã€‚<br><a href="https://code.juejin.cn/pen/7162350895340978189">æ¸¸æˆåœ°å€</a><br>- 2022-11~2022-11</li><li><a href="https://github.com/food-billboard/movie-weapp">movie-weapp</a><br>ä¸€ä¸ªç”µå½±æ¨èçš„<code>Taro</code>é¡¹ç›®ã€‚<br>è¿™æ˜¯æœ€æ—©å¼€å§‹çš„ä¸€ä¸ªé¡¹ç›®ï¼Œè™½ç„¶æœ€è¿‘å·²ç»æ²¡æœ‰æ¥ç€è¿­ä»£äº†ï¼Œç®€ç®€å•å•è®°å½•ä¸‹è‡ªå·±çœ‹è¿‡çš„ç”µå½±ï¼Œä¹Ÿè¿˜ä¸é”™ã€‚<br>- 2020~2021å¹´åº•</li><li><a href="https://github.com/food-billboard/mini-app-management">mini-app-management </a><br>å‰é¢çš„<code>create-chart</code>å’Œ<code>movie-weapp</code>é¡¹ç›®çš„æ•°æ®ç®¡ç†åå°ï¼Œç”¨äºç®¡ç†ç›¸å…³çš„æ•°æ®ï¼Œä»¥åŠç”¨æˆ·æ•°æ®è¿˜æœ‰åª’ä½“èµ„æºæ•°æ®ç­‰ç­‰ã€‚<br>- 2021~è‡³ä»Š</li><li><a href="https://github.com/food-billboard/node-server">node-server</a><br>åŒ…å«äº†å‰é¢å¤§å±ã€ç”µå½±æ¨èä»¥åŠç®¡ç†åå°çš„æ‰€æœ‰æ¥å£æœåŠ¡ï¼Œä»¥åŠæ–‡ä»¶èµ„æºçš„ç®¡ç†æœåŠ¡ã€‚<br>- 2020~è‡³ä»Š</li><li><a href="https://github.com/food-billboard/chunk-file-load">chunk-file-load</a><br>æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ çš„å‰ç«¯å®ç°ï¼Œå¤šåŠ äº†ç‚¹å°åŠŸèƒ½ï¼Œæ¯”å¦‚æ”¯æŒå…¶ä»–çš„ç±»å‹ï¼ˆblobã€fileã€arraybufferï¼‰ï¼Œæ”¯æŒå°ç¨‹åºç«¯åˆ†ç‰‡ä¸Šä¼ ã€‚<br>- 2020~2022å¹´ä¸­</li><li><a href="https://github.com/food-billboard/react-undo-component">react-undo-component</a><br><code>react</code>çš„<code>state</code>ç®¡ç†ï¼Œæ”¯æŒ<code>class</code>ç»„ä»¶å…¨é‡ç›‘å¬ä»¥åŠå•ä¸ªç›‘å¬ï¼Œä»¥åŠ<code>function</code>ç»„ä»¶ç›‘å¬ã€‚<br>- 2021-12~2021-12</li><li><a href="https://github.com/food-billboard/food-billboard.github.io">food-billboard.github.io</a><br>å½“ç„¶è¿˜æœ‰è‡ªå·±çš„åšå®¢ï¼ŒåŸºäº<code>hexo</code>å’Œ<code>fluid</code>é£æ ¼çš„åšå®¢ã€‚<br>- 2121~è‡³ä»Š</li></ol><p>å…¶å®ä¹Ÿä¸éš¾çœ‹å‡ºï¼Œè¿›æ­¥çš„æ¥æºè¿˜æ˜¯åœ¨äºä¸æ–­çš„å°è¯•å’Œç»ƒä¹ ã€‚<br>å› ä¸ºè¦ç‹¬ç«‹å®Œæˆä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼Œä¸å¾—ä¸å»å­¦ä¹ ä¸€ä¸‹<code>node</code>ã€‚<br>å› ä¸ºè¦å†™åç«¯ï¼Œä¸å¾—ä¸å»å­¦ä¹ ä¸€ä¸‹æ•°æ®åº“ã€redisã€‚<br>å› ä¸ºè¦éƒ¨ç½²ï¼Œä¸å¾—ä¸å»å­¦ä¹ äº†ä¸€ä¸‹æœåŠ¡å™¨ç›¸å…³çš„æ¦‚å¿µã€‚<br>ä¹‹åè¡ç”Ÿçš„å„ç§éœ€æ±‚ï¼šæ–‡ä»¶ä¸Šä¼ ã€dockerã€è‡ªåŠ¨åŒ–éƒ¨ç½²<code>github action</code>ã€‚<br>æœ‰æ—¶å› ä¸ºä¾èµ–åŒ…åŠŸèƒ½ä¸éœ€æ±‚ä¸ç¬¦ï¼Œä¹Ÿéœ€è¦å»æŸ¥çœ‹æºç ã€‚</p><blockquote><p>ä»Šå¹´çš„å°è¿›æ­¥<br>é•¿æœŸæ´»è·ƒåœ¨<code>github</code>ï¼Œç»ˆäºåœ¨ä»Šå¹´å¹´åº•ï¼Œå®Œæˆäº†ä¸€æ¬¡å¯¹å¼€æºé¡¹ç›®çš„ä»£ç è´¡çŒ®ğŸ˜ ã€‚<br>åœ¨å¼€å‘å¤§å±è®¾è®¡å™¨æ—¶ï¼Œå‘ç°äº†<code>antd</code>çš„<code>rc-input</code>æœ‰ä¸€ä¸ª<code>bug</code>ï¼ŒæˆåŠŸæäº¤<code>pr</code>ã€‚<br><img src="/images/æ¯æ—¥è¿›æ­¥å°è®°/è´¡çŒ®åˆ—è¡¨.jpg" /></p></blockquote><blockquote><p>ä»Šå¹´çš„å°æ‹“å±•<br>ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œçªç„¶æƒ³å»æä¸€æè‡ªåŠ¨åŒ–äº¤æ˜“ï¼Œå¯èƒ½æ˜¯ä¸€å¹´è¢«å‰²äº†å¤ªå¤šçš„éŸ­èœï¼Œå¯èƒ½ä¸æƒ³å†åŠªåŠ›äº†ï¼Œå¯èƒ½æƒ³æ‹“ä¸ªå‰¯ä¸šã€‚ã€‚ã€‚<br>å°è¯•ç€å»çœ‹äº†å‡ æœ¬ä¹¦ï¼Œæ¢¦æƒ³ç€ä¸€æ­¥ç™»å¤©ï¼ˆæµ·é¾Ÿçš„äº¤æ˜“æ³•åˆ™ã€æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æï¼Œä¹Ÿå»å­¦ä¹ äº†Pythonï¼Œçœ‹äº†ä¸€äº›è§†é¢‘ï¼‰ã€‚<br>è™½ç„¶åˆ°ç°åœ¨éƒ½è¿˜æ²¡æœ‰æ­£å¼å¼€å§‹ï¼Œå“ˆå“ˆå“ˆã€‚<br>ç›¸ä¿¡æœ‰ä¸€å¤©èƒ½é è‡ªå·±çš„çŸ¥è¯†ï¼Œå˜æˆçœŸæ­£çš„èººç€èµšé’±ï¼ˆéŸ­èœä¹‹ç‹ï¼‰ã€‚</p></blockquote><h3 id="å‘å¾€çš„è‡ªå·±">å‘å¾€çš„è‡ªå·±</h3><p>å›é¦–èµ°è¿‡æ¥çš„è¿™ä¸€å¹´ï¼Œè™½ç„¶æœ‰è¿›æ­¥ï¼Œä½†æ€»è®©è‡ªå·±è§‰å¾—ä¼¼ä¹è¿˜ä¸å¤Ÿï¼Œæ˜æ˜æœ‰é‚£ä¹ˆå¤šçš„æ—¶é—´ï¼Œå´ä¹Ÿæ˜¯ä¸¾æ­¥ç»´è‰°ã€‚<br>å¥½å¤šä¸œè¥¿æ˜æ˜åº”è¯¥å­¦ä¹ ï¼Œåº”è¯¥äº†è§£çš„ï¼Œå´å§‹ç»ˆæ²¡æœ‰å®Œæˆä»»åŠ¡ã€‚</p><p>å¸Œæœ›ä»Šåçš„è‡ªå·±èƒ½åšåˆ°ç¢°åˆ°é—®é¢˜å°±è§£å†³é—®é¢˜ï¼Œä¸è¦å†æ‹–å»¶äº†ã€‚<br>ä¸è¦å¥½é«˜éª›è¿œï¼Œç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œä¹Ÿä¸è¦å¿˜è®°ä½å¤´çœ‹çœ‹ã€‚<br>å­¦ä¹ å­¦ä¹ ç®—æ³•ï¼Œæ•°æ®ç»“æ„ã€‚<br>å¤šçœ‹çœ‹å¤§ä½¬å†™çš„ä»£ç ã€‚<br>å¤šçœ‹çœ‹å¤§ä½¬çœ‹çš„æ–‡ç« ã€‚<br>å¤šé€›é€›æ˜é‡‘ğŸ˜ ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ€»ç»“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>review</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°</title>
    <link href="/2022/11/28/%E6%8A%80%E6%9C%AF%E4%BA%A4%E6%98%93%E7%B3%BB%E7%BB%9F%E6%96%B0%E6%A6%82%E5%BF%B5%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/11/28/%E6%8A%80%E6%9C%AF%E4%BA%A4%E6%98%93%E7%B3%BB%E7%BB%9F%E6%96%B0%E6%A6%82%E5%BF%B5%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1>æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°</h1><h2 id="ä»‹ç»">ä»‹ç»</h2><p>æœ¬æ–‡æ˜¯æœ¬äººåœ¨é˜…è¯»äº†ã€ŠæŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µã€‹æ‰€ä½œçš„ç¬”è®°ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="ç›®å½•">ç›®å½•</h3><p>è®°å½•ä¸€ä¸‹ç›®å½•ï¼š</p><blockquote></blockquote><p>ç¬¬ä¸€ç«  åŸºæœ¬æ¦‚å¿µ<br>ç¬¬äºŒç«  æŠ›ç‰©å¼æ—¶é—´/ä»·æ ¼äº¤æ˜“ç³»ç»Ÿ<br>ç¬¬ä¸‰ç«  æ³¢åŠ¨äº¤æ˜“ç³»ç»Ÿ<br>ç¬¬å››ç«  åŠ¨å‘æŒ‡æ ‡<br>ç¬¬äº”ç«  åŠ¨é‡æ¦‚å¿µ-è¶‹åŠ¿å¹³è¡¡ç‚¹äº¤æ˜“ç³»ç»Ÿ<br>ç¬¬å…­ç«  ç›¸å¯¹å¼ºå¼±æŒ‡æ•°<br>ç¬¬ä¸ƒç«  è¶‹åŠ¿-å›è°ƒäº¤æ˜“ç³»ç»Ÿ<br>ç¬¬å…«ç«  æ‘†åŠ¨æŒ‡æ ‡-çŸ­çº¿äº¤æ˜“ç³»ç»Ÿ<br>ç¬¬ä¹ç«  æœŸè´§å“ç§é€‰æ‹©æŒ‡æ ‡CSI<br>ç¬¬åç«  èµ„é‡‘ç®¡ç†</p><h3 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h3><p>è¿™é‡Œç”¨åˆ°çš„ä¸€äº›æ¦‚å¿µä¼šè´¯ç©¿æ‰€æœ‰ç« èŠ‚ä½¿ç”¨ï¼Œéœ€è¦æå‰è®°å¥½ã€‚</p><h4 id="LOP-HIP">LOP | HIP</h4><ul><li>LOP<br>å…¶ç›¸é‚»çš„ä¸¤æ ¹Kçº¿çš„æœ€ä½ä»·éƒ½é«˜äºå…¶æœ€ä½ä»·</li><li>HIP<br>å…¶ç›¸é‚»çš„ä¸¤æ ¹Kçº¿çš„æœ€é«˜ä»·å‡ä½äºå…¶æœ€é«˜ä»·</li></ul><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/åŸºæœ¬æ¦‚å¿µ-LOP-HIP.png" /><h4 id="SIP-HI-SIP-LO-SIP">SIP(HI SIP | LO SIP)</h4><p>ç®€å•æ¥è¯´åº”è¯¥å°±æ˜¯æœ€é«˜å’Œæœ€ä½ä»·æ ¼çš„æ„æ€å§ã€‚</p><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/åŸºæœ¬æ¦‚å¿µ-SIP.png" /><h4 id="SIC">SIC</h4><p>è¡¨ç¤ºäº¤æ˜“ä¸­æœ€æœ‰åˆ©çš„<strong>æ”¶ç›˜ä»·</strong>ã€‚<br>å¤šå¤´è¡¨ç¤ºæœ€é«˜ä»·ã€‚<br>ç©ºå¤´è¡¨ç¤ºæœ€ä½ä»·ã€‚</p><h4 id="SAR">SAR</h4><p>åœæ­¢åè½¬ç‚¹ï¼Œè¡¨ç¤ºåœæ­¢ç°æœ‰å¤´å¯¸ï¼Œåæ–¹å‘æ“ä½œã€‚</p><h4 id="TR">TR</h4><p>çœŸå®ä»·æ ¼èŒƒå›´<br>å»ä¸‹åˆ—å€¼ä¸­çš„æœ€å¤§å€¼</p><ol><li>æœ€é«˜ä»·ä¸æœ€ä½ä»·çš„å·®</li><li>æœ€é«˜ä»·ä¸æ˜¨æ—¥æ”¶ç›˜ä»·çš„å·®</li><li>æœ€ä½ä»·ä¸æ˜¨æ—¥æ”¶ç›˜ä»·çš„å·®</li></ol><h4 id="MOCKæ¨¡æ¿">MOCKæ¨¡æ¿</h4><p>è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹<code>javascript</code>å®ç°çš„ä¸€ä¸ªä»£ç ä»»åŠ¡è¿è¡Œæ¨¡æ¿ï¼ˆå…¶å®å°±æ˜¯æ€•è‡ªå·±å¿˜è®°ğŸ˜ ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-keyword">const</span> DATA_SOURCE = []<br><br><span class="hljs-comment">// è·å–æŒ‡å®šæ—¶é—´é—´éš”çš„å†å²æ•°æ®</span><br><span class="hljs-comment">// mock </span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHistoryData</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">return</span> [&#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    <span class="hljs-attr">date</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;date.getFullYear()&#125;</span>-<span class="hljs-subst">$&#123;date.getMonth() + <span class="hljs-number">1</span>&#125;</span>-<span class="hljs-subst">$&#123;date.getDate()&#125;</span>`</span><br>  &#125;]<br>&#125;<br><br><span class="hljs-comment">// è·å–çœŸå®ä»·æ ¼èŒƒå›´</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTR</span>(<span class="hljs-params">currentData, yestodayData</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> abs = <span class="hljs-built_in">Math</span>.abs<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(abs(currentData.high - currentData.low), abs(currentData.high - yestodayData.close), abs(currentData.low - yestodayData.close))<br>&#125;<br><br><span class="hljs-comment">// å®šæ—¶ä»»åŠ¡æ‰§è¡Œ</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dailyFunction</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æŠ›ç‰©å¼æ—¶é—´-ä»·æ ¼äº¤æ˜“ç³»ç»Ÿ">æŠ›ç‰©å¼æ—¶é—´/ä»·æ ¼äº¤æ˜“ç³»ç»Ÿ</h3><p>ä¸ªäººè®¤ä¸ºï¼š<br>éå¸¸åå‘æ•°å­¦æ–¹æ³•çš„è¶‹åŠ¿è·Ÿè¸ªç³»ç»Ÿã€‚<br>åªè¦è®°ä½ä»–çš„è®¡ç®—åŠŸèƒ½ï¼Œå°±éå¸¸å®¹æ˜“å®Œæˆæ•´ä¸ªç³»ç»Ÿã€‚<br>é©¬ä¸Šå°±å¯ä»¥å°è¯•ä½¿ç”¨ä»£ç å®Œæˆç³»ç»Ÿã€‚</p><p>è®°ä½å‡ ä¸ªå…³é”®çš„å‚æ•°ï¼š</p><ul><li>AF<br>åŠ é€Ÿå› å­[0.02-0.2]<br>å½“æ—¥åˆ›ä¸‹ä»·æ ¼æ–°é«˜åˆ™<code>AF+0.02</code>(å¤šå¤´ä¸ºæ–°é«˜ï¼Œç©ºå¤´ä¸ºæ–°ä½)</li><li>SAR<br>åœæ­¢åè½¬ç‚¹</li><li>SIP<br>ä»·æ ¼æå€¼</li><li>EP<br>æ­¤æ¬¡äº¤æ˜“å¼€å§‹çš„æœ€æå€¼ï¼ˆå¤šå¤´ä¸ºæœ€é«˜ï¼Œç©ºå¤´ä¸ºæœ€ä½ï¼‰ã€‚</li></ul><p><code>æ˜æ—¥SAR = ä»Šæ—¥SAR + AF(ä»Šæ—¥æœ€é«˜ä»· - ä»Šæ—¥SAR)</code></p><h4 id="è§„åˆ™">è§„åˆ™</h4><ul><li>å…¥å¸‚æ—¶æœº<br>ä»·æ ¼çªç ´<code>SAR</code></li><li>å»ºä»“ç¬¬ä¸€å¤©<br>SAR = å‰ä¸€æ¬¡äº¤æ˜“SIP</li><li>ç¬¬ä¸€å¤©ä¹‹å<br>å¤šå¤´ï¼š<code>æ˜æ—¥SAR = ä»Šæ—¥SAR + AF(æœ€é«˜ä»· - ä»Šæ—¥SAR)</code><br>ç©ºå¤´ï¼š<code>æ˜æ—¥SAR = ä»Šæ—¥SAR - AF(æœ€ä½ä»· - ä»Šæ—¥SAR)</code></li><li>SARä¸å…è®¸å‡ºç°åœ¨å‰ä¸€æ—¥æˆ–ä»Šæ—¥ä»·æ ¼åŒºåŸŸ<br>å¤šå¤´ï¼šæ˜æ—¥SARä¸èƒ½å¤§äºæ˜¨æ—¥æˆ–ä»Šæ—¥æœ€ä½ä»·ï¼Œå¤§äºåˆ™<code>æ˜æ—¥SAR = min(ä»Šæ—¥æœ€ä½ä»·ï¼Œæ˜æ—¥æœ€ä½ä»·)</code><br>ç©ºå¤´ï¼šæ˜æ—¥SARä¸èƒ½å°äºæ˜¨æ—¥æˆ–ä»Šæ—¥æœ€é«˜ä»·ï¼Œå°äºåˆ™<code>æ˜æ—¥SAR = max(ä»Šæ—¥æœ€é«˜ä»·ï¼Œæ˜æ—¥æœ€é«˜ä»·)</code></li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> DATASOURCE: &#123;<br>  <span class="hljs-attr">state</span>: <span class="hljs-number">1</span> | -<span class="hljs-number">1</span> <span class="hljs-comment">// 1 å¤šå¤´ -1 ç©ºå¤´</span><br>  <span class="hljs-attr">dailyData</span>: &#123; <span class="hljs-comment">// æ¯æ—¥çš„äº¤æ˜“æ•°æ®</span><br>    <span class="hljs-attr">date</span>: <span class="hljs-built_in">string</span> <span class="hljs-comment">// æ—¥æœŸ</span><br>    <span class="hljs-attr">open</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// å¼€ç›˜ä»·</span><br>    <span class="hljs-attr">high</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// æœ€é«˜ä»·</span><br>    <span class="hljs-attr">low</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// æœ€ä½ä»·</span><br>    <span class="hljs-attr">close</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// æ”¶ç›˜ä»·</span><br>    <span class="hljs-attr">SAR</span>: <span class="hljs-built_in">number</span> <br>    <span class="hljs-attr">EP</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// æ­¤æ¬¡äº¤æ˜“çš„æå€¼</span><br>    <span class="hljs-attr">EP_SAR</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// EP+-SAR å½“å‰æœ€é«˜ä»·å’Œä»Šæ—¥SAR çš„å·®å€¼</span><br>    <span class="hljs-attr">AF</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// åŠ é€Ÿå› å­</span><br>    <span class="hljs-attr">AF_DIFF</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// EP_SAR * AF  </span><br>  &#125;[]<br>&#125; = []<br><br><span class="hljs-comment">// æ¨¡æ‹Ÿäº¤æ˜“</span><br><span class="hljs-comment">// ç”¨äºä¸‹é¢çš„é¦–æ¬¡å…¥å¸‚å‰çš„å‡†å¤‡å·¥ä½œ</span><br><span class="hljs-keyword">let</span> MOCK_DATASOURCE = []<br><br><span class="hljs-comment">// è·å–æŒ‡å®šæ—¶é—´é—´éš”çš„å†å²æ•°æ®</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHistoryData</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">return</span> [&#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    <span class="hljs-attr">date</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;date.getFullYear()&#125;</span>-<span class="hljs-subst">$&#123;date.getMonth() + <span class="hljs-number">1</span>&#125;</span>-<span class="hljs-subst">$&#123;date.getDate()&#125;</span>`</span><br>  &#125;]<br>&#125;<br><br><span class="hljs-comment">// ä¹‹å‰ä»æœªåšè¿‡äº¤æ˜“</span><br><span class="hljs-comment">// éœ€è¦å…ˆæ‰¾å‡ºå‰å‡ å‘¨å‰çš„ æœ€é«˜|æœ€ä½ ç‚¹  </span><br><span class="hljs-comment">// åŸºäºæ˜¯ä¸Šå‡è¿˜æ˜¯ä¸‹è·Œè¶‹åŠ¿  </span><br><span class="hljs-comment">// å½“å‰è®¾ç½®ä¸º3å‘¨å‰  </span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBeforeWeekPeak</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>  <span class="hljs-comment">// è·å–3å‘¨çš„æ—¶é—´é—´éš”</span><br>  <span class="hljs-keyword">let</span> startDate<br>  <span class="hljs-keyword">let</span> endDate <br><br>  <span class="hljs-comment">// ç¬¬ä¸€å¤©å¯ç”¨ç¨‹åº</span><br>  <span class="hljs-keyword">if</span>(!MOCK_DATASOURCE.length) &#123;<br>    <span class="hljs-keyword">const</span> historyData = getHistoryData()<br>    <span class="hljs-comment">// TODO </span><br>    <span class="hljs-comment">// åˆ¤æ–­å‰å‡ å‘¨çš„è¶‹åŠ¿</span><br>    <br>    <span class="hljs-keyword">let</span> peakData <br>    <span class="hljs-keyword">let</span> peakIndex <br>    <span class="hljs-comment">// å¦‚æœæ˜¯ä¸Šå‡</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-literal">true</span>) &#123;<br>      <span class="hljs-comment">// æ‰¾å‡ºå‰ä¸‰å‘¨çš„æœ€é«˜ç‚¹</span><br>      historyData.forEach(<span class="hljs-function">(<span class="hljs-params">history, index</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span>(!peakData || history.high &gt; peakData.high) &#123;<br>          peakData = history <br>          peakIndex = index <br>        &#125;<br>      &#125;)<br>      <span class="hljs-comment">// æ‰¾å‡ºæœ€é«˜ç‚¹å4å¤©çš„æœ€ä½ç‚¹</span><br>      <span class="hljs-comment">// ä½œä¸ºå…¥å¸‚ç‚¹</span><br>      <span class="hljs-keyword">const</span> enterDate = historyData.slice(peakIndex, peakIndex + <span class="hljs-number">4</span>)<br>      <span class="hljs-keyword">const</span> SAR = peakData.high<br>      <span class="hljs-keyword">const</span> EP = enterDate.low<br>      <span class="hljs-keyword">const</span> EP_SAR = <span class="hljs-built_in">Math</span>.abs(SAR - EP)<br>      MOCK_DATASOURCE.push(&#123;<br>        <span class="hljs-attr">state</span>: -<span class="hljs-number">1</span>,<br>        <span class="hljs-attr">dailyData</span>: [<br>          date: enterDate.date,<br>          <span class="hljs-attr">open</span>: enterDate.open,<br>          <span class="hljs-attr">high</span>: enterDate.high,<br>          <span class="hljs-attr">low</span>: enterDate.low,<br>          <span class="hljs-attr">close</span>: enterDate.close,<br>          SAR, <br>          EP,<br>          EP_SAR,<br>          <span class="hljs-attr">AF</span>: <span class="hljs-number">0.02</span>,<br>          <span class="hljs-attr">AF_DIFF</span>: EP_SAR * <span class="hljs-number">0.02</span><br>        ]<br>      &#125;)<br>    &#125;<br>    <span class="hljs-comment">// ä¸‹è·Œ</span><br>    <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// æ‰¾å‡ºå‰ä¸‰å‘¨çš„æœ€ä½ç‚¹</span><br>      historyData.forEach(<span class="hljs-function">(<span class="hljs-params">history, index</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span>(!peakData || history.low &lt; peakData.low) &#123;<br>          peakData = history <br>          peakIndex = index <br>        &#125;<br>      &#125;)<br>      <span class="hljs-comment">// æ‰¾å‡ºæœ€ä½ç‚¹å4å¤©çš„æœ€é«˜ç‚¹</span><br>      <span class="hljs-comment">// ä½œä¸ºå…¥å¸‚ç‚¹</span><br>      <span class="hljs-keyword">const</span> enterDate = historyData.slice(peakIndex, peakIndex + <span class="hljs-number">4</span>)<br><br>      <span class="hljs-keyword">const</span> SAR = peakData.low<br>      <span class="hljs-keyword">const</span> EP = enterDate.high<br>      <span class="hljs-keyword">const</span> EP_SAR = <span class="hljs-built_in">Math</span>.abs(SAR - EP)<br>      MOCK_DATASOURCE.push(&#123;<br>        <span class="hljs-attr">state</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">dailyData</span>: [<br>          date: enterDate.date,<br>          <span class="hljs-attr">open</span>: enterDate.open,<br>          <span class="hljs-attr">high</span>: enterDate.high,<br>          <span class="hljs-attr">low</span>: enterDate.low,<br>          <span class="hljs-attr">close</span>: enterDate.close,<br>          SAR, <br>          EP,<br>          EP_SAR,<br>          <span class="hljs-attr">AF</span>: <span class="hljs-number">0.02</span>,<br>          <span class="hljs-attr">AF_DIFF</span>: EP_SAR * <span class="hljs-number">0.02</span><br>        ]<br>      &#125;)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// TODO </span><br>  <span class="hljs-comment">// æŒç»­è¿›è¡Œæ¨¡æ‹Ÿè®°å½•æ•°æ®</span><br>  <span class="hljs-comment">// ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ç‚¹è¿˜æ²¡æœ‰å¼„æ¸…æ¥š</span><br>  <span class="hljs-comment">// å…ˆæš‚æ—¶å¡ç€å§</span><br><br>&#125;<br><br><span class="hljs-comment">// æ¯æ—¥éœ€è¦æ‰§è¡Œçš„å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dailyFunction</span>(<span class="hljs-params">options=&#123;</span></span><br><span class="hljs-params"><span class="hljs-function">  mock: <span class="hljs-literal">false</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  date: <span class="hljs-literal">null</span> </span></span><br><span class="hljs-params"><span class="hljs-function">&#125;</span>) </span>&#123;<br><br>  <span class="hljs-keyword">const</span> &#123; mock, date &#125; = options <br>  <span class="hljs-keyword">const</span> _DATASOURCE = mock ? MOCK_DATASOURCE : DATASOURCE<br><br>  <span class="hljs-comment">// åˆå§‹åŒ–ä»Šæ—¥æ•°æ®</span><br>  <span class="hljs-keyword">const</span> todayData = getHistoryData(date, date)<br>  <span class="hljs-keyword">const</span> newDailyData = &#123;<br>    ...todayData,<br>  &#125;<br><br>  <span class="hljs-comment">// ä¹‹å‰æœªåšè¿‡äº¤æ˜“</span><br>  <span class="hljs-comment">// å¯ä»¥é€‰æ‹©ä»¥ä¸‹æ–¹æ³•</span><br>  <span class="hljs-comment">// ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨åé¢è¯´åˆ°çš„ç¬¬å››ç« çš„æ–¹æ³•ï¼ˆåŠ¨å‘æŒ‡æ•°ï¼‰</span><br>  <span class="hljs-keyword">if</span>(!_DATASOURCE.length) &#123;<br>    <span class="hljs-keyword">return</span> getBeforeWeekPeak()<br>  &#125;<br><br>  <span class="hljs-comment">// æ˜¯å¦ä»Šæ—¥å¼€å¯äº¤æ˜“</span><br>  <span class="hljs-keyword">const</span> lastTradeNote = _DATASOURCE[_DATASOURCE.length - <span class="hljs-number">2</span>]<br>  <span class="hljs-keyword">const</span> currentTradeNote = _DATASOURCE[_DATASOURCE.length - <span class="hljs-number">1</span>]<br>  <span class="hljs-keyword">const</span> &#123; dailyData, state &#125; = currentTradeNote<br><br>  <span class="hljs-comment">// ç¬¬ä¸€å¤©</span><br>  <span class="hljs-keyword">if</span>(!dailyData.length) &#123;<br>    <span class="hljs-comment">// ä¹‹å‰å­˜åœ¨äº¤æ˜“</span><br>    <span class="hljs-keyword">if</span>(!!lastTradeNote &amp;&amp; <span class="hljs-built_in">Array</span>.isArray(lastTradeNote.dailyData) &amp;&amp; lastTradeNote.dailyData.length) &#123;<br>      <span class="hljs-keyword">const</span> &#123; dailyData, state &#125; = lastTradeNote<br>      <span class="hljs-comment">// å¤šå¤´åˆ™è·å–å‰ä¸€æ¬¡äº¤æ˜“çš„æœ€ä½ä»·</span><br>      <span class="hljs-comment">// ç©ºå¤´åˆ™è·å–å‰ä¸€æ¬¡äº¤æ˜“çš„æœ€é«˜ä»·</span><br>      <span class="hljs-comment">// è¿™é‡Œåªéœ€è¦å–å‰ä¸€æ¬¡äº¤æ˜“çš„æœ€åä¸€å¤©çš„æå€¼EPå³å¯</span><br>      newDailyData.SAR = dailyData[dailyData.length - <span class="hljs-number">1</span>].EP<br>      newDailyData.EP = state === <span class="hljs-number">1</span> ? newDailyData.high : newDailyData.low<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// éç¬¬ä¸€å¤©</span><br>  <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">// å‰ä¸€å¤©çš„æ•°æ®</span><br>    <span class="hljs-keyword">const</span> yestodayData = dailyData[dailyData.length - <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">const</span> beforeYestodayData = dailyData[dailyData.length - <span class="hljs-number">2</span>] || &#123;<br>      <span class="hljs-attr">low</span>: <span class="hljs-number">999999</span>,<br>      <span class="hljs-attr">high</span>: -<span class="hljs-number">1</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">if</span>(state === <span class="hljs-number">1</span>) &#123;<br>      newDailyData.SAR = yestodayData.SAR + yestodayData.AF_DIFF<br>      <span class="hljs-comment">// å¤šå¤´ SAR ä¸å¾—å¤§äºå‰ä¸€æ—¥æˆ–ä»Šæ—¥æœ€ä½ä»·ï¼Œå¤§äºåˆ™é€‰æ‹©å½“æ—¥æˆ–æ˜¨æ—¥æœ€ä½ä»·</span><br>      <span class="hljs-keyword">const</span> lessThenPrize = <span class="hljs-built_in">Math</span>.min(yestodayData.low, beforeYestodayData.low)<br>      newDailyData.SAR = newDailyData.SAR === <span class="hljs-built_in">Math</span>.min(lessThenPrize, newDailyData.SAR) ? newDailyData.SAR : lessThenPrize<br><br>      newDailyData.EP = <span class="hljs-built_in">Math</span>.max(yestodayData.EP, newDailyData.high)<br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>      newDailyData.SAR = yestodayData.SAR - yestodayData.AF_DIFF<br>      <span class="hljs-comment">// ç©ºå¤´ SAR ä¸å¾—å°äºå‰ä¸€æ—¥æˆ–ä»Šæ—¥æœ€é«˜ä»·ï¼Œå°äºåˆ™é€‰æ‹©å…šæ—¥æˆ–æ˜¨æ—¥æœ€é«˜ä»·</span><br>      <span class="hljs-keyword">const</span> greatThenPrize = <span class="hljs-built_in">Math</span>.max(yestodayData.high, beforeYestodayData.high)<br>      newDailyData.SAR = newDailyData.SAR === <span class="hljs-built_in">Math</span>.max(lessThenPrize, newDailyData.SAR) ? newDailyData.SAR : lessThenPrize<br><br>      newDailyData.EP = <span class="hljs-built_in">Math</span>.min(yestodayData.EP, newDailyData.low)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// è·å– EP å’Œ SAR çš„å·®å€¼</span><br>  newDailyData.EP_SAR = <span class="hljs-built_in">Math</span>.abs(newDailyData.SAR - newDailyData.EP)<br>  newDailyData.AF = newDailyData.AF || <span class="hljs-number">0.02</span> <br>  <span class="hljs-comment">// åˆ›æ–°é«˜æˆ–æ–°ä½åˆ™å¢åŠ AFå€¼</span><br>  <span class="hljs-keyword">if</span>(state === <span class="hljs-number">1</span>) &#123;<br>    newDailyData.AF += newDailyData.high &gt; newDailyData.EP ? <span class="hljs-number">0.02</span> : <span class="hljs-number">0</span><br>  &#125;<span class="hljs-keyword">else</span> &#123;<br>    newDailyData.AF += newDailyData.low &lt; newDailyData.EP ? <span class="hljs-number">0.02</span> : <span class="hljs-number">0</span><br>  &#125;<br>  newDailyData.AF = <span class="hljs-built_in">Math</span>.min(<span class="hljs-number">0.2</span>, newDailyData.AF)<br>  newDailyData.AF_DIFF = newDailyData.AF * newDailyData.EP_SAR<br><br>  <span class="hljs-comment">// å¤šå¤´å‘ç”Ÿä»·æ ¼çªç ´</span><br>  <span class="hljs-keyword">const</span> isMultiBreak = state === <span class="hljs-number">1</span> &amp;&amp; newDailyData.low &lt; newDailyData.SAR<br>  <span class="hljs-comment">// ç©ºå¤´å‘ç”Ÿä»·æ ¼çªç ´</span><br>  <span class="hljs-keyword">const</span> isEmptyBreak = state === -<span class="hljs-number">1</span> &amp;&amp; newDailyData.high &gt; newDailyData.SAR<br><br>  <span class="hljs-keyword">if</span>(isMultiBreak || isEmptyBreak) &#123;<br>    newDailyData.AF = <span class="hljs-number">0.02</span> <br>    newDailyData.SAR = newDailyData.EP <br>    newDailyData.EP = state === <span class="hljs-number">1</span> ? newDailyData.low : newDailyData.high <br>    newDailyData.EP_SAR = <span class="hljs-built_in">Math</span>.abs(newDailyData.SAR - newDailyData.EP)<br>    newDailyData.AF_DIFF = newDailyData.EP_SAR * newDailyData.AF<br><br>    <span class="hljs-built_in">console</span>.log((state === <span class="hljs-number">1</span> ? <span class="hljs-string">&#x27;å¤šå¤´&#x27;</span> : <span class="hljs-string">&#x27;ç©ºå¤´&#x27;</span>) + <span class="hljs-string">&#x27;ä»·æ ¼å‘ç”Ÿçªç ´&#x27;</span>)<br><br>    _DATASOURCE.push(&#123;<br>      <span class="hljs-attr">state</span>: -<span class="hljs-number">1</span>,<br>      <span class="hljs-attr">dailyData</span>: [<br>        &#123;<br>          ...newDailyData,<br>        &#125;<br>      ]<br>    &#125;)<br>  &#125;<br>  <span class="hljs-comment">// è®°å½•ä»Šæ—¥æ•°æ®</span><br>  <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;ä»Šæ—¥ä»·æ ¼æ•°æ®:&#x27;</span> + <span class="hljs-built_in">JSON</span>.stringify(newDailyData))<br>    _DATASOURCE[_DATASOURCE.length - <span class="hljs-number">1</span>].dailyData.push(newDailyData)<br>  &#125;<br><br>&#125;<br><br><span class="hljs-comment">// æ•°æ®æ¸…ç©º</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearData</span>(<span class="hljs-params"></span>) </span>&#123;<br>  DATASOURCE = &#123;<br>    <span class="hljs-attr">state</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">dailyData</span>: []<br>  &#125;<br>  MOCK_DATASOURCE = &#123;<br>    <span class="hljs-attr">state</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">dailyData</span>: []<br>  &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h3 id="æ³¢åŠ¨äº¤æ˜“ç³»ç»Ÿ">æ³¢åŠ¨äº¤æ˜“ç³»ç»Ÿ</h3><p>ä¹Ÿæ˜¯ä¸€ä¸ªè¶‹åŠ¿è·Ÿè¸ªçš„ç³»ç»Ÿã€‚<br>æ ¹æ®å¸‚åœºçš„æ³¢åŠ¨æ€§æ¥ä½œå‡ºç›¸åº”çš„æ“ä½œã€‚</p><ul><li><code>ATR</code>è®¡ç®—<br><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/æ³¢åŠ¨äº¤æ˜“ç³»ç»Ÿ-ATR.jpg" /></li></ul><p><code>ATR_t</code>æ˜¯å½“æ—¥å¹³å‡çœŸå®ä»·æ ¼èŒƒå›´ï¼Œ<code>ATR_p</code>æ˜¯å‰ä¸€æ—¥çš„å¹³å‡çœŸå®ä»·æ ¼èŒƒå›´ã€‚<br><code>TR</code>æ˜¯å½“æ—¥çœŸå®ä»·æ ¼èŒƒå›´ã€‚</p><p>ä¸Šè¿°è®¡ç®—æ˜¯æ ¹æ®ä¸ƒä¸ªäº¤æ˜“æ—¥ä¸ºæ ‡çš„åšçš„è®¡ç®—ã€‚<br><code>ATR_p</code>å³å°†åŠ ä¸Šä»Šæ—¥ä»¥åŠå‰6ä¸ªäº¤æ˜“æ—¥çš„çœŸå®ä»·æ ¼èŒƒå›´ç›¸åŠ ï¼Œå¹¶é™¤7å¾—å‡ºçš„ï¼Œä¹‹åæ¯ä¸€æ—¥çš„è®¡ç®—åªè¦ç®€å•å¾—å°†<strong>å‰ä¸€æ—¥çš„å¹³å‡çœŸå®ä»·æ ¼èŒƒå›´</strong>å¸¦å…¥ä¸Šè¿°å…¬å¼å³å¯ã€‚</p><ul><li><p>ARC<br><code>ARC = ATR * C</code><br>Cæ˜¯ä¸€ä¸ª[2.8, 3.1]ä¹‹é—´çš„å¸¸æ•°ï¼ˆä¸€èˆ¬ä¸º3ï¼‰ã€‚</p></li><li><p>ç³»ç»Ÿäº¤æ˜“è§„åˆ™</p><p>è®¡ç®—å‡ºä¸ƒå¤©çš„<code>ARC</code>ï¼Œæ‰¾å‡ºä¸ƒå¤©æœ€é«˜æ”¶ç›˜ä»·<code>SIC</code>ï¼Œ<code>SAR = SIC - ARC</code><br>è‹¥ç¬¬äºŒæ—¥çš„æ”¶ç›˜ä»·ä½äº<code>SAR</code>ï¼Œå¹³ä»“å»ºç«‹ç©ºå¤´ã€‚</p></li></ul><h4 id="çœŸå®ä»·æ ¼èŒƒå›´">çœŸå®ä»·æ ¼èŒƒå›´</h4><p>å–ä»¥ä¸‹ä¸‰ç§çš„æœ€å¤§å€¼ã€‚</p><ol><li>å½“æ—¥æœ€é«˜ä»·åˆ°å½“æ—¥æœ€ä½ä»·çš„èŒƒå›´ã€‚</li><li>æ˜¨æ—¥æ”¶ç›˜ä»·åˆ°å½“æ—¥æœ€é«˜ä»·çš„èŒƒå›´ã€‚</li><li>æ˜¨æ—¥æ”¶ç›˜ä»·åˆ°å½“æ—¥æœ€ä½ä»·çš„èŒƒå›´ã€‚</li></ol><h4 id="ä»£ç å®ç°">ä»£ç å®ç°</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><br><span class="hljs-comment">// å¸¸æ•°C </span><br><span class="hljs-keyword">const</span> C = <span class="hljs-number">3</span> <span class="hljs-comment">// [2.8, 3]</span><br><br><span class="hljs-keyword">const</span> DATA_SOURCE: &#123;<br>  <span class="hljs-attr">state</span>: <span class="hljs-number">1</span> | -<span class="hljs-number">1</span> <span class="hljs-comment">// å½“å‰æ˜¯ç©ºå¤´(-1)è¿˜æ˜¯å¤šå¤´(1)</span><br>  <span class="hljs-attr">TR</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// å½“æ—¥çš„çœŸå®ä»·æ ¼èŒƒå›´</span><br>  <span class="hljs-attr">ATR</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// å½“æ—¥çš„å¹³å‡çœŸå®ä»·æ ¼èŒƒå›´</span><br>  <span class="hljs-attr">ARC</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// ATR * C</span><br>  <span class="hljs-attr">SAR</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// åœæ­¢åè½¬ç‚¹  </span><br>  <span class="hljs-attr">SIC</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// æœ€ä½æ”¶ç›˜ä»·</span><br>  <span class="hljs-attr">high</span>: <span class="hljs-built_in">number</span> <br>  <span class="hljs-attr">close</span>: <span class="hljs-built_in">number</span> <br>  <span class="hljs-attr">low</span>: <span class="hljs-built_in">number</span> <br>  <span class="hljs-attr">open</span>: <span class="hljs-built_in">number</span> <br>  <span class="hljs-attr">date</span>: <span class="hljs-built_in">string</span> <br>&#125; = []<br><br><span class="hljs-comment">// è·å–æŒ‡å®šæ—¶é—´é—´éš”çš„å†å²æ•°æ®</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHistoryData</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">return</span> [&#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    <span class="hljs-attr">date</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;date.getFullYear()&#125;</span>-<span class="hljs-subst">$&#123;date.getMonth() + <span class="hljs-number">1</span>&#125;</span>-<span class="hljs-subst">$&#123;date.getDate()&#125;</span>`</span><br>  &#125;]<br>&#125;<br><br><span class="hljs-comment">// è·å–çœŸå®ä»·æ ¼èŒƒå›´</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTR</span>(<span class="hljs-params">currentData, yestodayData</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> abs = <span class="hljs-built_in">Math</span>.abs<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(abs(currentData.high - currentData.low), abs(currentData.high - yestodayData.close), abs(currentData.low - yestodayData.close))<br>&#125;<br><br><span class="hljs-comment">// æ¯æ—¥å®šæ—¶æ‰§è¡Œæ–¹æ³•</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dailyFunction</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>  <span class="hljs-keyword">const</span> currentDateData = getHistoryData()<br><br>  <span class="hljs-comment">// ä¹‹å‰æœªåšè¿‡ä»»ä½•äº¤æ˜“</span><br>  <span class="hljs-keyword">if</span>(DATA_SOURCE.length &lt; <span class="hljs-number">7</span>) &#123;<br>    <span class="hljs-comment">// ç®€å•ä»ç©ºå¤´ä½ç½®å¼€å§‹å‡†å¤‡è¿›å…¥å¸‚åœº</span><br>    <span class="hljs-keyword">if</span>(DATA_SOURCE.length &lt; <span class="hljs-number">6</span>) &#123;<br>      DATA_SOURCE.push(&#123;<br>        ...currentDateData,<br>        <span class="hljs-attr">TR</span>: getTR()<br>      &#125;)<br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">const</span> TR = getTR()<br>      <span class="hljs-keyword">const</span> ATR = DATA_SOURCE.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.TR).reduce(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> acc + cur, <span class="hljs-number">0</span>) / <span class="hljs-number">7</span><br>      DATA_SOURCE.push(&#123;<br>        ...currentDateData,<br>        TR,<br>        ATR,<br>        <span class="hljs-attr">ARC</span>: ATR * C<br>      &#125;)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> [lastDayData] = DATA_SOURCE.slice(-<span class="hljs-number">1</span>)<br><br>  <span class="hljs-keyword">const</span> todayTR = getTR(currentDateData, lastDayData)<br>  <span class="hljs-keyword">const</span> todayATR = (<span class="hljs-number">6</span> * lastDayData.ATR + todayTR) / <span class="hljs-number">7</span><br>  <span class="hljs-keyword">const</span> ARC = todayATR * C<br>  <span class="hljs-keyword">let</span> SIC <br>  <span class="hljs-keyword">let</span> SAR <br>  <span class="hljs-keyword">let</span> state <br>  <span class="hljs-comment">// ç©ºå¤´</span><br>  <span class="hljs-keyword">if</span>(lastDayData.state == -<span class="hljs-number">1</span>) &#123;<br>    SIC = <span class="hljs-built_in">Math</span>.min(lastDayData.SIC, currentDateData.close)<br>    SAR = lastDayData.SIC + lastDayData.ARC<br>    <span class="hljs-comment">// æ”¶ç›˜ä»·ä¸Šç©¿SAR å˜ä¸ºå¤šå¤´</span><br>    state = currentDateData.close &gt; SAR ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span><br>    <span class="hljs-comment">// å˜ä¸ºå¤šå¤´æ›´æ”¹SICä¸ºå½“æ—¥æ”¶ç›˜ä»·</span><br>    <span class="hljs-keyword">if</span>(state === <span class="hljs-number">1</span>) &#123;<br>      SIC = currentDateData.close<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// å¤šå¤´</span><br>  <span class="hljs-keyword">else</span> &#123;<br>    SIC = <span class="hljs-built_in">Math</span>.max(lastDayData.SIC, currentDateData.close)<br>    SAR = lastDayData.SIC - lastDayData.ARC<br>    <span class="hljs-comment">// æ”¶ç›˜ä»·ä¸‹ç©¿SAR å˜ä¸ºç©ºå¤´</span><br>    state = currentDateData.close &lt; SAR ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span><br>    <span class="hljs-comment">// å˜ä¸ºç©ºå¤´æ›´æ”¹SICä¸ºå½“æ—¥æ”¶ç›˜ä»·</span><br>    <span class="hljs-keyword">if</span>(state === <span class="hljs-number">1</span>) &#123;<br>      SIC = currentDateData.close<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> newData = &#123;<br>    ...currentDateData,<br>    <span class="hljs-attr">TR</span>: todayTR,<br>    <span class="hljs-attr">ATR</span>: todayATR,<br>    ARC,<br>    SIC,<br>    SAR,<br>    state<br>  &#125;<br><br>  <span class="hljs-comment">// ä¸Šé¢stateæ”¹å˜åˆ™è§¦å‘äº¤æ˜“æ“ä½œ</span><br>  DATA_SOURCE.push(newData)<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="åŠ¨å‘æŒ‡æ ‡">åŠ¨å‘æŒ‡æ ‡</h3><p>æ ¹æ®ä¸€ä¸ª<code>0-100</code>çš„æŒ‡æ ‡æ¥è·Ÿè¸ªäº§å“è¶‹åŠ¿ã€‚</p><h4 id="å‡ ä¸ªæŒ‡æ ‡æ¦‚å¿µ">å‡ ä¸ªæŒ‡æ ‡æ¦‚å¿µ</h4><h5 id="DMå’Œ-DM">+DMå’Œ-DM</h5><p>ä»Šæ—¥çš„ä»·æ ¼èŒƒå›´ä¸æ˜¨æ—¥ä»·æ ¼è¿”å›çš„å·®å€¼<br>æ¯”å¦‚ï¼šæ˜¨å¤©çš„ä»·æ ¼èŒƒå›´æ˜¯<code>[100 200]</code>ï¼Œä»Šæ—¥çš„ä»·æ ¼èŒƒå›´æ˜¯<code>[150, 300]</code>ï¼Œåˆ™ä½¿ç”¨<code>+DM</code>è¡¨ç¤ºä¸º<code>300 - 200 = 100</code><br><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/åŠ¨å‘æŒ‡æ ‡-DM.jpg" /></p><p>å½“ä»Šæ—¥ä¸æ˜¨æ—¥æ˜¯<strong>åŒ…å«</strong>å…³ç³»æ—¶ï¼ŒDMä¸º<code>0</code>ã€‚<br><code>+DM</code>å’Œ<code>-DM</code>å§‹ç»ˆæ˜¯<strong>æ­£æ•°</strong>ã€‚</p><blockquote><p>è®¡ç®—è§„åˆ™<br>å…šæ—¥ä»·æ ¼èŒƒå›´è¶…å‡ºæ˜¨æ—¥ä»·æ ¼èŒƒå›´ä¸­çš„è¾ƒå¤§éƒ¨åˆ†ã€‚</p></blockquote><h5 id="DIå’Œ-DI">+DIå’Œ-DI</h5><p>æ–¹å‘æŒ‡æ•°ï¼Œç›¸å¯¹äºçœŸå®ä»·æ ¼èŒƒå›´ï¼Œå˜åŠ¨çš„ç™¾åˆ†æ¯”ã€‚<br><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/åŠ¨å‘æŒ‡æ ‡-DI.jpg" /></p><p>ä»·æ ¼<strong>ä¸Šæ¶¨</strong>ç”¨<code>+DI</code>ï¼Œ<strong>ä¸‹è·Œ</strong>ç”¨<code>-DI</code>ã€‚</p><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/åŠ¨å‘æŒ‡æ ‡-DI14.png" />  <blockquote><p>æ±‚å‡º<code>14</code>å¤©çš„å¹³å‡å€¼æ¥ä½œä¸ºæŒ‡æ ‡ï¼Œ<br>è®¡ç®—å‡º14å¤©çš„å€¼ä»¥åä¾¿å¯ä»¥ç”¨ç®€ä¾¿æ–¹æ³•è¿›è¡Œè®¡ç®—ã€‚</p></blockquote><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/åŠ¨å‘æŒ‡æ ‡-DI14-next.jpg" />  <h5 id="DX">DX</h5><p>åŠ¨å‘æŒ‡æ ‡<br><code>DX = DIDiff / DISum</code>ï¼ˆå‚æ•°è¯¦è§ä¸‹è¡¨ï¼‰<br><code>DX</code>å€¼è¶Šå¤§ï¼Œè¿åŠ¨è¶Š<strong>å¼º</strong>ï¼›<code>DX</code>å€¼æœˆé”€ï¼Œè¿åŠ¨è¶Š<strong>å¼±</strong>ã€‚<br>æ— è®ºä»·æ ¼å‘ä¸Šæˆ–å‘ä¸‹è¿åŠ¨ï¼Œä¸ä¼šå½±å“æ•°å€¼ï¼Œå³å‘ä¸Šæˆ–å‘ä¸‹è¿åŠ¨å¹…åº¦å¤§ï¼Œé‚£ä¹ˆä»–çš„å€¼éƒ½å¾ˆ<strong>å¤§</strong>ã€‚</p><h5 id="ADX">ADX</h5><p>14å¤©<code>DX</code>çš„å¹³å‡å€¼</p><h5 id="ADXR">ADXR</h5><p>æ–¹å‘è¿åŠ¨çš„åæ ‡ç³»ä¸Šç”¨äºé‡åº¦æœŸè´§ã€è´§å¸ã€è‚¡ç¥¨ç­‰ç­‰çš„ä»·æ ¼å˜åŒ–çš„ä¸€ä¸ªæŒ‡æ ‡<br><code>ADXR = (å½“æ—¥ADX + 14å¤©å‰çš„ADX14) / 2</code></p><h5 id="CSI-K">CSI &amp; K</h5><ul><li>CSI<br>æ ¹æ®ç›¸å…³å…³è”å‚æ•°è®¡ç®—è€Œå¾—æ¥çš„äº§å“é€‰æ‹©æŒ‡æ ‡</li><li>K<br>ä¸<code>CIS</code>ç›¸å…³çš„å¸¸é‡ç³»æ•°</li></ul><h4 id="æ•°æ®è®°å½•">æ•°æ®è®°å½•</h4><table><thead><tr><th>date</th><th>open</th><th>high</th><th>low</th><th>close</th><th>TR</th><th>DMHigh</th><th>DMLow</th><th>TR14</th><th>DI14High</th><th>DI14Low</th><th>DIDiff</th><th>DISum</th><th>DX</th><th>ADX</th></tr></thead><tbody><tr><td>æ—¥æœŸ</td><td>å¼€ç›˜ä»·</td><td>æœ€é«˜ä»·</td><td>æœ€ä½ä»·</td><td>æ”¶ç›˜ä»·</td><td>çœŸå®ä»·æ ¼èŒƒå›´</td><td>+DM</td><td>-DM</td><td>TR14</td><td>+DI14</td><td>-DI14</td><td>+DI14 - (-DI14)</td><td>+DI14 + (-DI14)</td><td>DIDiff / DISum</td><td>14å¤©DXçš„å¹³å‡å€¼</td></tr></tbody></table><h4 id="jså®ç°">jså®ç°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/*</span><br><span class="hljs-comment">  &#123;</span><br><span class="hljs-comment">    // æ—¥æœŸ</span><br><span class="hljs-comment">    date: &#x27;2022-02-25&#x27;,</span><br><span class="hljs-comment">    // å¼€ç›˜ä»·</span><br><span class="hljs-comment">    open: 100,</span><br><span class="hljs-comment">    // æœ€é«˜ä»·</span><br><span class="hljs-comment">    high: 100,</span><br><span class="hljs-comment">    // æœ€ä½ä»·</span><br><span class="hljs-comment">    low: 100,</span><br><span class="hljs-comment">    // æ”¶ç›˜ä»·</span><br><span class="hljs-comment">    close: 100,</span><br><span class="hljs-comment">    // TR  </span><br><span class="hljs-comment">    TR: 10,</span><br><span class="hljs-comment">    // +DM </span><br><span class="hljs-comment">    DMHigh: 10, </span><br><span class="hljs-comment">    // -DM  </span><br><span class="hljs-comment">    DMLow: 0,</span><br><span class="hljs-comment">    // TR14  </span><br><span class="hljs-comment">    TR14: 14,</span><br><span class="hljs-comment">    // DMHigh14</span><br><span class="hljs-comment">    DMHigh14: 10,</span><br><span class="hljs-comment">    // DMLow14</span><br><span class="hljs-comment">    DMLow14: 10,</span><br><span class="hljs-comment">    // +DI14 </span><br><span class="hljs-comment">    DI14High: 10,</span><br><span class="hljs-comment">    // -DI14</span><br><span class="hljs-comment">    DI14Low: 10,</span><br><span class="hljs-comment">    // +DI14å’Œ-DI14çš„å·®å€¼  </span><br><span class="hljs-comment">    DIDiff: 10,</span><br><span class="hljs-comment">    // +DI14å’Œ-DI14çš„å’Œ</span><br><span class="hljs-comment">    DISum: 10,</span><br><span class="hljs-comment">    // ä¸Šé¢ä¸¤ä¸ªå€¼çš„æ¯”å€¼ åŠ¨å‘æŒ‡æ ‡</span><br><span class="hljs-comment">    DX: 10,</span><br><span class="hljs-comment">    // 14æ—¥DXçš„å¹³å‡å€¼</span><br><span class="hljs-comment">    ADX: 30,</span><br><span class="hljs-comment">    // å¹³å‡åŠ¨å‘æŒ‡æ ‡æ¯”ç‡</span><br><span class="hljs-comment">    ADXR: 30,</span><br><span class="hljs-comment">    // å¹³å‡14å¤©çœŸå®ä»·æ ¼èŒƒå›´</span><br><span class="hljs-comment">    ATR14: 20,</span><br><span class="hljs-comment">    // æœŸè´§å“ç§é€‰æ‹©æŒ‡æ ‡</span><br><span class="hljs-comment">    CSI: 20,</span><br><span class="hljs-comment">    // æ‰‹ç»­è´¹</span><br><span class="hljs-comment">    charge: 20 </span><br><span class="hljs-comment">  &#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">const</span> DATA_SOURCE = []<br><span class="hljs-comment">// å½“å‰çš„äº¤æ˜“ä¿¡æ¯</span><br><span class="hljs-keyword">const</span> TRADE_INFO = &#123;<br>  <span class="hljs-comment">// -1 åˆå§‹åŒ– 0 ç©ºå¤´ 1 å¤šå¤´</span><br>  <span class="hljs-attr">status</span>: -<span class="hljs-number">1</span>,<br>  <span class="hljs-comment">// DI14å’Œ-DI14äº¤å‰æ—¶çš„æç«¯ä»·ä½ï¼Œç”¨äºæ¶ˆé™¤ä»·æ ¼æ³¢åŠ¨å™ªå£°  </span><br>  <span class="hljs-attr">limit</span>: -<span class="hljs-number">1</span>,<br>&#125;<br><br><span class="hljs-comment">// æ—¶é—´è·¨åº¦ 14 å¤©</span><br><span class="hljs-keyword">const</span> RANGE_DAY_COUNT = <span class="hljs-number">14</span> <br><br><span class="hljs-comment">// è·å–æŒ‡å®šæ—¶é—´é—´éš”çš„å†å²æ•°æ®</span><br><span class="hljs-comment">// mock </span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHistoryData</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">return</span> [&#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    <span class="hljs-attr">date</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;date.getFullYear()&#125;</span>-<span class="hljs-subst">$&#123;date.getMonth() + <span class="hljs-number">1</span>&#125;</span>-<span class="hljs-subst">$&#123;date.getDate()&#125;</span>`</span>,<br>    charge,<br>  &#125;]<br>&#125;<br><br><span class="hljs-comment">// è·å–DMå€¼ </span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDMData</span>(<span class="hljs-params">currentData, yestodayData</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> &#123;  <br>    <span class="hljs-attr">high</span>: currHigh,<br>    <span class="hljs-attr">low</span>: currLow<br>  &#125; = currentData <br>  <span class="hljs-keyword">const</span> &#123;  <br>    high,<br>    low<br>  &#125; = yestodayData <br>  <span class="hljs-keyword">let</span> DMHigh = <span class="hljs-number">0</span> <br>  <span class="hljs-keyword">let</span> DMLow = <span class="hljs-number">0</span> <br><br>  <span class="hljs-keyword">const</span> condition1 = currHigh - high <br><br>  <span class="hljs-keyword">const</span> condition2 = low - currLow <br><br>  <span class="hljs-comment">// å¦‚æœæ˜¯åŒ…å«å…³ç³»å°±éƒ½ä¸º0 </span><br>  <span class="hljs-keyword">if</span>(condition1 &gt; <span class="hljs-number">0</span> || condition2 &gt; <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-comment">// å‘ä¸Šè¿åŠ¨æ›´å¤š</span><br>    <span class="hljs-keyword">if</span>(condition1 &gt; condition2) &#123;<br>      DMHigh = condition1<br>    &#125;<br>    <span class="hljs-comment">// å‘ä¸‹è¿åŠ¨æ›´å¤š</span><br>    <span class="hljs-keyword">else</span> &#123;<br>      DMLow = condition2<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> &#123;<br>    DMHigh,<br>    DMLow<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// è·å–çœŸå®ä»·æ ¼èŒƒå›´</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTR</span>(<span class="hljs-params">currentData, yestodayData</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> abs = <span class="hljs-built_in">Math</span>.abs<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(abs(currentData.high - currentData.low), abs(currentData.high - yestodayData.close), abs(currentData.low - yestodayData.close))<br>&#125;<br><br><span class="hljs-comment">// å®šæ—¶ä»»åŠ¡æ‰§è¡Œ</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dailyFunction</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>  <span class="hljs-keyword">const</span> currentData = getHistoryData() <br>  <span class="hljs-keyword">const</span> &#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    date,<br>    charge<br>  &#125; = currentData <br>  <span class="hljs-keyword">const</span> newData = &#123;<br>    date,<br>    high,<br>    open,<br>    close,<br>    low,<br>    charge<br>  &#125; <br><br>  <span class="hljs-comment">// ä¸æ˜¯ç¬¬ä¸€å¤©ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€å¤©åªéœ€è¦ç®€å•è®°å½•æ•°æ®å°±å¯ä»¥äº†</span><br>  <span class="hljs-keyword">if</span>(!DATA_SOURCE.length) &#123;<br>    <span class="hljs-keyword">const</span> yestoday = DATA_SOURCE[DATA_SOURCE.length - <span class="hljs-number">1</span>]<br><br>    <span class="hljs-comment">// DM</span><br>    <span class="hljs-keyword">const</span> &#123; DMHigh, DMLow &#125; = getDMData(newData, yestoday)<br>    newData.DMHigh = DMHigh<br>    newData.DMLow = DMLow<br><br>    <span class="hljs-comment">// TR  </span><br>    <span class="hljs-keyword">const</span> tr = getTR(newData, yestoday)<br>    newData.TR = tr <br><br>    <span class="hljs-comment">// å¤§äºæœ€çŸ­æ—¶é—´å‘¨æœŸï¼ˆ14å¤©ï¼‰ï¼Œæ»¡è¶³æ‰€æœ‰æ•°æ®çš„è®¡ç®—æ¡ä»¶</span><br>    <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= (RANGE_DAY_COUNT - <span class="hljs-number">1</span>)) &#123;<br>      <br>      <span class="hljs-comment">// å¦‚æœæ˜¯åˆšå¥½æ»¡è¶³æ¡ä»¶ï¼Œéœ€è¦åšç´¯è®¡è®¡ç®—</span><br>      <span class="hljs-keyword">if</span>(DATA_SOURCE.length == (RANGE_DAY_COUNT - <span class="hljs-number">1</span>)) &#123;<br>        <span class="hljs-keyword">const</span> previousData = DATA_SOURCE.slice(DATA_SOURCE.length - RANGE_DAY_COUNT - <span class="hljs-number">1</span>)<br><br>        <span class="hljs-comment">// tr14 </span><br>        newData.TR14 = tr + previousData.reduce(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> &#123;<br>          acc += cur.TR<br>          <span class="hljs-keyword">return</span> acc <br>        &#125;, <span class="hljs-number">0</span>)<br><br>        <span class="hljs-comment">// dmhigh14 </span><br>        newData.DMHigh14 = DMHigh + previousData.reduce(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> &#123;<br>          acc += (cur.DMHigh || <span class="hljs-number">0</span>)<br>          <span class="hljs-keyword">return</span> acc <br>        &#125;, <span class="hljs-number">0</span>)<br>        <span class="hljs-comment">// dmlow14</span><br>        newData.DMLow14 = DMLow + previousData.reduce(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> &#123;<br>          acc += (cur.DMLow || <span class="hljs-number">0</span>)<br>          <span class="hljs-keyword">return</span> acc <br>        &#125;, <span class="hljs-number">0</span>)<br><br>      &#125;<br>      <span class="hljs-comment">// è¶…è¿‡æ¡ä»¶åªè¦ç®€å•ä½¿ç”¨æ˜¨æ—¥æ•°æ®è¿›è¡Œè®¡ç®—å³å¯</span><br>      <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">const</span> &#123; TR14, DMHigh14, DMLow14 &#125; = yestoday<br><br>        <span class="hljs-comment">// tr14</span><br>        newData.TR14 = TR14 - TR14 / RANGE_DAY_COUNT + tr <br>        <span class="hljs-comment">// dmhigh14 </span><br>        newData.DMHigh14 = DMHigh14 - DMHigh14 / RANGE_DAY_COUNT + DMHigh <br>        <span class="hljs-comment">// dmlow14 </span><br>        newData.DMLow14 = DMLow14 - DMLow14 / RANGE_DAY_COUNT + DMLow <br><br>      &#125;<br><br>      <span class="hljs-comment">// ATR14</span><br>      newData.ATR14 = newData.TR14 / <span class="hljs-number">14</span> <br>      <span class="hljs-comment">// +DI14</span><br>      newData.DI14High = newData.DMHigh14 / newData.TR14 * <span class="hljs-number">100</span> <br>      <span class="hljs-comment">// -DI14</span><br>      newData.DI14Low = newData.DMLow14 / newData.TR14 * <span class="hljs-number">100</span><br>      <span class="hljs-comment">// DIDiff </span><br>      newData.DIDiff = <span class="hljs-built_in">Math</span>.abs(newData.DI14High - newData.DI14Low)<br>      <span class="hljs-comment">// DISum</span><br>      newData.DISum = newData.DI14High + newData.DI14Low<br>      <span class="hljs-comment">// DX  </span><br>      newData.DX = newData.DIDiff / newData.DISum * <span class="hljs-number">100</span><br><br>      <span class="hljs-comment">// è¶…è¿‡28å¤©å¯ä»¥å¼€å§‹è®¡ç®—ADX</span><br>      <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= (RANGE_DAY_COUNT * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>)) &#123;<br>        <span class="hljs-comment">// å¦‚æœæ˜¯åˆšå¥½æ»¡è¶³æ¡ä»¶ï¼Œéœ€è¦åšç´¯è®¡è®¡ç®—</span><br>        <span class="hljs-keyword">if</span>(DATA_SOURCE.length == (RANGE_DAY_COUNT * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>)) &#123;<br>          <span class="hljs-keyword">const</span> previousData = DATA_SOURCE.slice(DATA_SOURCE.length - RANGE_DAY_COUNT - <span class="hljs-number">1</span>)<br><br>          <span class="hljs-comment">// adx </span><br>          newData.ADX = (newData.DX + previousData.reduce(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> &#123;<br>            acc += cur.DX<br>            <span class="hljs-keyword">return</span> acc <br>          &#125;, <span class="hljs-number">0</span>)) / RANGE_DAY_COUNT<br><br>        &#125;<br>        <span class="hljs-comment">// è¶…è¿‡æ¡ä»¶åªè¦ç®€å•ä½¿ç”¨æ˜¨æ—¥æ•°æ®è¿›è¡Œè®¡ç®—å³å¯</span><br>        <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">const</span> &#123; ADX &#125; = yestoday<br><br>          <span class="hljs-comment">// adx</span><br>          newData.ADX = (ADX * (RANGE_DAY_COUNT - <span class="hljs-number">1</span>) + newData.DX) / RANGE_DAY_COUNT<br><br>        &#125;<br>      &#125;<br><br>      <span class="hljs-comment">// è¶…è¿‡14 * 3 å¤©å¼€å§‹è®¡ç®—ADXR</span><br>      <span class="hljs-comment">// å› ä¸º28å¤©åæ‰èƒ½è®¡ç®—ADX</span><br>      <span class="hljs-comment">// ADXRè®¡ç®—éœ€è¦14å¤©å‰çš„ADX</span><br>      <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= RANGE_DAY_COUNT * <span class="hljs-number">3</span>) &#123;<br>        newData.ADXR = (newData.ADX + newData[newData.length - RANGE_DAY_COUNT]) / <span class="hljs-number">2</span><br>        newData.CSI = newData.ADXR * newData.ATR14 * ( <span class="hljs-number">100</span> / <span class="hljs-number">1</span> * (<span class="hljs-number">1</span> / <span class="hljs-number">150</span> + newData.charge) ) * <span class="hljs-number">100</span> <br>      &#125;<br><br>    &#125;<br><br>  &#125;<br><br>  <span class="hljs-comment">// ---å…·ä½“çš„äº¤æ˜“æ“ä½œ---</span><br>  <span class="hljs-comment">// è®¡ç®—å‡ºADXRæ‰ç®—èƒ½å¼€å§‹çœŸæ­£çš„äº¤æ˜“</span><br>  <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= RANGE_DAY_COUNT * <span class="hljs-number">3</span>) &#123;<br><br>    <span class="hljs-comment">// ADXRè¶…è¿‡25è¡¨ç¤ºæœ‰åˆ©å¯å›¾</span><br>    <span class="hljs-comment">// CSIè¶Šé«˜è¶Šå¥½</span><br>    <span class="hljs-comment">// å…³äºCSIçš„å¤§å°æ ‡å‡†è¿˜æœ‰å¾…è€ƒè¯</span><br>    <span class="hljs-keyword">if</span>(newData.ADXR &gt; <span class="hljs-number">25</span> &amp;&amp; newData.CSI &gt; <span class="hljs-number">400</span>) &#123;<br><br>      <span class="hljs-comment">// DI14 &lt; -DI14 æ—¶å¤šå¤´</span><br>      <span class="hljs-comment">// DI14 &gt; -DI14 æ—¶ç©ºå¤´</span><br>      <span class="hljs-comment">// ADX &lt; (DI14&amp;-DI14) æ—¶ç©ºå¤´</span><br>      <span class="hljs-comment">// DI14 == -DI14</span><br><br><br>      <span class="hljs-comment">// ç©ºå¤´ ADX &lt; (DI14&amp;-DI14)</span><br>      <span class="hljs-keyword">if</span>(newData.ADX &lt; newData.DI14High &amp;&amp; newData.ADX &lt; newData.DI14Low) &#123;<br>        <span class="hljs-keyword">if</span>(TRADE_INFO.status === <span class="hljs-number">1</span>) &#123;<br>          TRADE_INFO.status = <span class="hljs-number">0</span><br>          TRADE_INFO.limit = newData.high <br>        &#125;<br>      &#125;<br>      <span class="hljs-comment">// ç©ºå¤´</span><br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(newData.DI14High &gt; newData.DI14Low) &#123;<br>        <span class="hljs-comment">// åˆå§‹åŒ–æˆ–è€…å½“æ—¥æœ€ä½ä»· ä½äº äº¤å‰æ—¶çš„æœ€ä½ä»·</span><br>        <span class="hljs-comment">// æ”¹åŠ¨ä¸ºç©ºå¤´</span><br>        <span class="hljs-keyword">if</span>(TRADE_INFO.status === -<span class="hljs-number">1</span> || newData.low &lt; TRADE_INFO.limit) &#123;<br>          <span class="hljs-comment">// èµ‹å€¼å½“å‰çš„ä¹°å–ä¿¡æ¯ï¼Œä¸ºä¸‹æ¬¡åšå‡†å¤‡</span><br>          TRADE_INFO.status = <span class="hljs-number">1</span> <br>          TRADE_INFO.limit = newData.high<br>        &#125;<br>      &#125;<br>      <span class="hljs-comment">// å¤šå¤´</span><br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(newData.DI14High &lt; newData.DI14Low) &#123;<br>        <span class="hljs-comment">// åˆå§‹åŒ–æˆ–è€…å½“æ—¥æœ€é«˜ä»· é«˜äº äº¤å‰æ—¶çš„æœ€é«˜ä»·</span><br>        <span class="hljs-comment">// æ”¹åŠ¨ä¸ºå¤šå¤´</span><br>        <span class="hljs-keyword">if</span>(TRADE_INFO.status === -<span class="hljs-number">1</span> || newData.high &gt; TRADE_INFO.limit) &#123;<br>          TRADE_INFO.status = <span class="hljs-number">0</span> <br>          TRADE_INFO.limit = newData.low <br>        &#125;<br>      &#125;<br><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// ---å…·ä½“çš„äº¤æ˜“æ“ä½œ---</span><br><br>  DATA_SOURCE.push(newData)<br><br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>å­˜åœ¨é—®é¢˜</p></blockquote><ol><li>ä¸Šé¢<code>ADXR</code>è¶…è¿‡25æ‰æ˜¯æœ‰åˆ©å¯å›¾ï¼Œä½†æ˜¯å¦‚æœåœ¨äº§å“çš„<code>ADXR</code>è¶…è¿‡25æ—¶ä¹°å…¥ï¼Œä½†æ˜¯ä¹‹åé™ä½åˆ°äº†25ä»¥ä¸‹ï¼Œæ­¤æ—¶ï¼Œå…¥å¸‚çš„èµ„é‡‘è¯¥å¦‚ä½•å¤„ç†ã€‚</li><li>å¤§è¶‹åŠ¿ä¸‹ï¼Œå¦‚æŒç»­ä¸Šæ¶¨ï¼Œæ˜¯å¦éœ€è¦å¯¹æŒç»­<strong>DIäº¤å‰</strong>åšæ›´å¤šçš„èµ„é‡‘ä¹°å…¥ã€‚</li><li>å…·ä½“çš„äº¤æ˜“æ“ä½œè¿˜å¯ä»¥æ ¹æ®<strong>ADX</strong>æ¥è¿›è¡Œæ›´ç»†è‡´çš„åˆ¤æ–­ï¼Œæ›´å¤šç»†èŠ‚æœ‰å¾…æ¥ç€ç ”ç©¶ï¼ˆ55é¡µï¼‰ã€‚</li><li>ä¸Šè¿°ä»£ç éœ€è¦ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡æ ‡<code>CSI</code>ï¼Œå¯èƒ½åœ¨ç¬¬ä¹ç« æœ‰è®²åˆ°ï¼Œå¾…é˜…è¯»ğŸ˜ ï¼ˆç»è¿‡é˜…è¯»ï¼Œä¹ç« ä¸­å¯¹äº<code>CSI</code>çš„å®šä¹‰æ˜¯è¶Šé«˜è¶Šå¥½ï¼Œä½†æ˜¯åšçš„æ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒï¼Œå¹¶æ²¡æœ‰æ˜ç¡®è¯´æ˜é«˜äºæŸä¸€ä¸ªå€¼è¡¨ç¤ºæœ‰åˆ©å¯å›¾ï¼Œå¾…è€ƒè¯ï¼‰ã€‚</li></ol><h3 id="æœŸè´§å“ç§é€‰æ‹©æŒ‡æ ‡CSI">æœŸè´§å“ç§é€‰æ‹©æŒ‡æ ‡CSI</h3><p>ä¸ºä»€ä¹ˆå…ˆå†™è¿™ä¸€ç« ï¼Œå› ä¸ºä»–è·Ÿå‰é¢ç¬¬å››ç« æœ‰å…³ï¼ˆä½†æ˜¯ä¹Ÿæ²¡æœ‰é‚£ä¹ˆæœ‰å…³ï¼‰ã€‚</p><blockquote><p>ps<br>å› ä¸ºæœ¬äººå¹¶æ²¡æœ‰æƒ³å»åšæœŸè´§ç­‰ç›¸å…³çš„äº¤æ˜“ï¼Œæ‰€ä»¥å¯èƒ½å¯¹äºæœ¬ç« ï¼Œä½œç”¨ä¸å¤§ï¼Œç®€å•å¸¦è¿‡ã€‚</p></blockquote><h4 id="å…¬å¼">å…¬å¼</h4>  <img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/æœŸè´§å“ç§é€‰æ‹©æŒ‡æ ‡CSI-CSIå…¬å¼.jpg" />  <ol><li>ADXR<br>ç¬¬å››ç« ä¸­æåˆ°çš„åŠ¨å‘æŒ‡æ ‡ã€‚</li><li>ATR14<br>14å¤©çš„å¹³å‡çœŸå®ä»·æ ¼èŒƒå›´ã€‚<br>æ ¹æ®å‰é¢åŸºæœ¬æ¦‚å¿µä¸­æåˆ°çš„<code>TR</code>è®¡ç®—è€Œæ¥ã€‚</li><li>V<br>æ¯è¿åŠ¨1åˆ†ï¼ˆè´§å¸å•ä½ï¼‰ã€å®é™…ä»£è¡¨çš„ä»·å€¼ï¼ˆå³ä»¥è´§å¸å•ä½è®¡é‡çš„ATR14çš„åŸºæœ¬å¢å¹…ï¼‰<br>ç¬”è€…ç†è§£çš„æ„æ€åº”è¯¥å°±æ˜¯å¸‚åœºæ¯è¿åŠ¨ä¸€ä¸ªè´§å¸å•ä½æ—¶ï¼Œæ¯ä»½åˆçº¦æ‰€å‘ç”Ÿçš„ä»·æ ¼å˜åŠ¨ï¼ˆé‚£åœ¨è‚¡ç¥¨ä¸­æ˜¯ä¸æ˜¯å°±æ˜¯<strong>ä¸€æ‰‹</strong>çš„æ„æ€ï¼‰ã€‚</li><li>M<br>ä¿è¯é‡‘æ•°é‡</li><li>C<br>æ‰‹ç»­è´¹</li></ol><h4 id="æ€»ç»“">æ€»ç»“</h4><pre><code>æ ¹æ®ä¸Šé¢çš„å…¬å¼ä»¥åŠä¹¦ä¸­çš„ä»‹ç»ï¼Œ`CSI`è¶Šé«˜ï¼Œè¯´æ˜äº¤æ˜“è¶Šæœ‰åˆ©ï¼Œå¹¶ä¸”å¯èƒ½é£é™©ä¹Ÿæ›´å°ã€‚  ï¼ˆæœ¬äººå› ä¸ºå¯èƒ½äº¤æ˜“çš„æ˜¯è‚¡ç¥¨ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä¿è¯é‡‘å¹¶ä¸å­˜åœ¨ï¼‰ã€‚  </code></pre><h3 id="åŠ¨é‡æ¦‚å¿µ-è¶‹åŠ¿å¹³è¡¡ç‚¹äº¤æ˜“ç³»ç»Ÿ">åŠ¨é‡æ¦‚å¿µ-è¶‹åŠ¿å¹³è¡¡ç‚¹äº¤æ˜“ç³»ç»Ÿ</h3><h4 id="å‡ ä¸ªæ¦‚å¿µ">å‡ ä¸ªæ¦‚å¿µ</h4><h5 id="MF">MF</h5><p>åŠ¨é‡å› å­ï¼Œæè¿°ä»·æ ¼å˜åŒ–çš„åŠ é€Ÿåº¦ï¼Œæ¯”å¦‚æ˜¨å¤©æ¯”å‰å¤©å¢åŠ äº†1å—ï¼Œä»Šå¤©æ¯”æ˜¨å¤©å¤šå¢åŠ 1å—çš„è¯ï¼ŒåŠ¨é‡å› å­ä¸º0ï¼Œå› ä¸ºåŠ é€Ÿåº¦æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚<br><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/åŠ¨é‡æ¦‚å¿µ-è¶‹åŠ¿å¹³è¡¡ç‚¹äº¤æ˜“ç³»ç»Ÿ-åŠ¨é‡å› å­.jpg" /></p><ul><li>è®¡ç®—<br>å½“æ—¥æ”¶ç›˜ä»· - å‰å¤©çš„æ”¶ç›˜ä»·</li></ul><h5 id="TBP">TBP</h5><p>è¶‹åŠ¿å¹³è¡¡ç‚¹</p><h5 id="AverageX">AverageX</h5><p>æœ€é«˜ä»·ã€æœ€ä½ä»·ã€æ”¶ç›˜ä»·çš„å¹³å‡å€¼</p><h5 id="ProtectStop">ProtectStop</h5><p>é˜²å¾¡åœæŸç‚¹<br>æŒ‡å®šå½“ä»·æ ¼è¾¾åˆ°ç‚¹æ—¶<strong>åœæ­¢å¤´å¯¸</strong>ã€‚</p><ul><li>ç©ºå¤´ï¼š<code>ProtectStop = AverageX + TR</code></li><li>å¤šå¤´ï¼š<code>ProtectStop = AverageX - TR</code></li></ul><h5 id="TargetPoint">TargetPoint</h5><p>ç›®æ ‡ä»·ä½<br>æŒ‡å®šå½“ä»·æ ¼åˆ°è¾¾æŒ‡å®šè·åˆ©ä½ç½®æ—¶<strong>åœæ­¢å¤´å¯¸</strong></p><ul><li>ç©ºå¤´ï¼š<code>2 * AverageX - H</code></li><li>å¤šå¤´ï¼š<code>2 * AverageX - L</code><br><code>L &amp; H</code>è¡¨ç¤ºæœ€ä½å’Œæœ€é«˜ä»·</li></ul><h4 id="äº¤æ˜“è¿‡ç¨‹">äº¤æ˜“è¿‡ç¨‹</h4><ol><li>å½“æ—¥MF &gt; æ˜¨æ—¥MF &amp;&amp; å½“æ—¥MF &gt; å‰å¤©MF<br><strong>å¤šå¤´</strong></li><li>å½“æ—¥MF &lt; æ˜¨æ—¥MF &amp;&amp; å½“æ—¥MF &lt; å‰å¤©MF<br><strong>ç©ºå¤´</strong></li><li><strong>ç›®æ ‡ä»·ä½</strong>äº†ç»“ï¼Œä¸åš<strong>åå‘</strong>äº¤æ˜“</li><li><strong>åœæ­¢ç‚¹</strong>ç»“æŸäº¤æ˜“ï¼Œä¸åš<strong>åå‘</strong>äº¤æ˜“</li><li>äº†ç»“åå†æ¬¡è¿›å…¥éµå¾ª<code>1ã€2</code>è§„åˆ™</li></ol><h4 id="jså®ç°-2">jså®ç°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/*</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">  // æ—¥æœŸ</span><br><span class="hljs-comment">  date: &#x27;2022-02-25&#x27;,</span><br><span class="hljs-comment">  // å¼€ç›˜ä»·</span><br><span class="hljs-comment">  open: 100,</span><br><span class="hljs-comment">  // æœ€é«˜ä»·</span><br><span class="hljs-comment">  high: 100,</span><br><span class="hljs-comment">  // æœ€ä½ä»·</span><br><span class="hljs-comment">  low: 100,</span><br><span class="hljs-comment">  // æ”¶ç›˜ä»·</span><br><span class="hljs-comment">  close: 100,</span><br><span class="hljs-comment">  // åŠ¨é‡å› å­</span><br><span class="hljs-comment">  MF: 20,</span><br><span class="hljs-comment">  // è¶‹åŠ¿å¹³è¡¡ç‚¹</span><br><span class="hljs-comment">  TBP: 20,</span><br><span class="hljs-comment">  // TR </span><br><span class="hljs-comment">  TR: 20,</span><br><span class="hljs-comment">  // æœ€é«˜ æœ€ä½ æ”¶ç›˜ä»·çš„å¹³å‡å€¼</span><br><span class="hljs-comment">  AverageX: 20,</span><br><span class="hljs-comment">  // é˜²å¾¡åœæŸç‚¹</span><br><span class="hljs-comment">  ProtectStop: 20,</span><br><span class="hljs-comment">  // ç›®æ ‡ä»·ä½</span><br><span class="hljs-comment">  TargetPoint: 20 </span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">const</span> DATA_SOURCE = []<br><span class="hljs-comment">// å½“å‰çš„äº¤æ˜“ä¿¡æ¯</span><br><span class="hljs-keyword">const</span> TRADE_INFO = &#123;<br>  <span class="hljs-comment">// -1 åˆå§‹åŒ– 0 ç©ºå¤´ 1 å¤šå¤´</span><br>  <span class="hljs-attr">status</span>: -<span class="hljs-number">1</span>,<br>&#125;<br><br><span class="hljs-comment">// è·å–çœŸå®ä»·æ ¼èŒƒå›´</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTR</span>(<span class="hljs-params">currentData, yestodayData</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> abs = <span class="hljs-built_in">Math</span>.abs<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(abs(currentData.high - currentData.low), abs(currentData.high - yestodayData.close), abs(currentData.low - yestodayData.close))<br>&#125;<br><br><span class="hljs-comment">// è·å–æŒ‡å®šæ—¶é—´é—´éš”çš„å†å²æ•°æ®</span><br><span class="hljs-comment">// mock </span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHistoryData</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">return</span> [&#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    <span class="hljs-attr">date</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;date.getFullYear()&#125;</span>-<span class="hljs-subst">$&#123;date.getMonth() + <span class="hljs-number">1</span>&#125;</span>-<span class="hljs-subst">$&#123;date.getDate()&#125;</span>`</span><br>  &#125;]<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dailyFunction</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> currentData = getHistoryData() <br>  <span class="hljs-keyword">const</span> &#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    date,<br>    charge<br>  &#125; = currentData <br>  <span class="hljs-keyword">const</span> newData = &#123;<br>    date,<br>    high,<br>    open,<br>    close,<br>    low,<br>    charge,<br>    <span class="hljs-attr">AverageX</span>: (high + low + close) / <span class="hljs-number">3</span><br>  &#125; <br><br>  <span class="hljs-comment">// è¶…è¿‡1å¤©å¯ä»¥è®¡ç®—TR </span><br>  <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= <span class="hljs-number">1</span>) &#123;<br>    newData.TR = getTR(newData, DATA_SOURCE[DATA_SOURCE.length - <span class="hljs-number">1</span>])<br>  &#125;<br><br>  <span class="hljs-comment">// è¶…è¿‡2å¤©æ‰èƒ½è®¡ç®—åŠ¨é‡å› å­</span><br>  <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= <span class="hljs-number">2</span>) &#123;<br>    <span class="hljs-keyword">const</span> [beforeYestoday, yestoday] = DATA_SOURCE.slice(-<span class="hljs-number">2</span>)<br>    newData.MF = newData.close - beforeYestoday.close<br><br><br>    <span class="hljs-comment">// è¶…è¿‡4å¤©æ‰èƒ½è¿›è¡Œäº¤æ˜“åˆ¤æ–­</span><br>    <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= <span class="hljs-number">4</span>) &#123;<br>      <br>      <span class="hljs-comment">// é€€å‡ºå¸‚åœºåˆ¤æ–­</span><br>      <span class="hljs-keyword">if</span>(<br>        <span class="hljs-comment">// åœ¨å¸‚ä¸”è¾¾åˆ°é˜²å¾¡åœæŸç‚¹ å°±é€€å‡ºå¸‚åœº</span><br>        (TRADE_INFO == <span class="hljs-number">1</span> &amp;&amp; newData.close &lt; yestoday.ProtectStop) <br>        || <br>        (TRADE_INFO == -<span class="hljs-number">1</span> &amp;&amp; newData.close &gt; yestoday.ProtectStop)<br>        ||<br>        <span class="hljs-comment">// åœ¨å¸‚ä¸”è¾¾åˆ°ç›®æ ‡ä»·ä½</span><br>        (TRADE_INFO == <span class="hljs-number">1</span> &amp;&amp; newData.close &gt; yestoday.TargetPoint) <br>        || <br>        (TRADE_INFO == -<span class="hljs-number">1</span> &amp;&amp; newData.close &lt; yestoday.TargetPoint)<br>      ) &#123;<br>        <span class="hljs-comment">// é€€å‡ºå¸‚åœº</span><br>        TRADE_INFO.status = -<span class="hljs-number">1</span> <br>      &#125;<br>      <span class="hljs-comment">// ä»Šæ—¥MF å¤§äº å‰ä¸¤å¤©MF å¤šå¤´</span><br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(newData.MF &gt; beforeYestoday.MF &amp;&amp; newData.MF &gt; yestoday.MF) &#123;<br>        <span class="hljs-keyword">if</span>(TRADE_INFO.status !== <span class="hljs-number">1</span>) &#123;<br>          TRADE_INFO.status = <span class="hljs-number">1</span><br>        &#125;<br>      &#125;<br>      <span class="hljs-comment">// ä»Šæ—¥MF å°äº å‰ä¸¤å¤©MF ç©ºå¤´</span><br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(newData.MF &lt; beforeYestoday.MF &amp;&amp; newData.MF &lt; yestoday.MF) &#123;<br>        <span class="hljs-keyword">if</span>(TRADE_INFO.status !== <span class="hljs-number">0</span>) &#123;<br>          TRADE_INFO.status = <span class="hljs-number">0</span><br>        &#125;<br>      &#125;<br>      <br>      <span class="hljs-keyword">if</span>(TRADE_INFO.status === <span class="hljs-number">1</span>) &#123;<br>        newData.ProtectStop = newData.AverageX - newData.TR<br>        newData.TargetPoint = <span class="hljs-number">2</span> * newData.AverageX - newData.low<br>      &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(TRADE_INFO.status === <span class="hljs-number">0</span>) &#123;<br>        newData.ProtectStop = newData.AverageX + newData.TR<br>        newData.TargetPoint = <span class="hljs-number">2</span> * newData.AverageX - newData.high<br>      &#125;<br><br>    &#125;<br>  &#125;<br><br>  DATA_SOURCE.push(newData)<br><br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>å­˜åœ¨é—®é¢˜</p></blockquote><ol><li>å…³äºä¸Šé¢çš„äº†ç»“å¤´å¯¸çš„è¯´æ³•ï¼Œå¯¹äºç©ºå¤´å’Œå¤šå¤´æ¥è¯´ï¼Œä¸å¤ªèƒ½ç†è§£ï¼Œç©ºå¤´å’Œé€€å‡ºå¸‚åœºçš„åŒºåˆ«åœ¨å“ªé‡Œã€‚</li></ol><h3 id="ç›¸å¯¹å¼ºå¼±æŒ‡æ•°">ç›¸å¯¹å¼ºå¼±æŒ‡æ•°</h3><p>é€šè¿‡ä¸€ä¸ªç›¸å¯¹æŒ‡æ ‡æ¦‚å¿µæ¥æè¿°æ‰€æœ‰äº§å“çš„ä»·æ ¼éœ‡è¡æƒ…å†µã€‚<br>é€šè¿‡æè¿°è¯¥æŒ‡æ ‡å¯ä»¥çœ‹åˆ°å“ªä¸ªäº§å“çš„ä»·æ ¼å˜åŠ¨æ˜¯æœ‰åˆ©å¯å›¾</p><h4 id="å‡ ä¸ªæ¦‚å¿µ-2">å‡ ä¸ªæ¦‚å¿µ</h4><h5 id="RSI">RSI</h5><p>ç›¸å¯¹å¼ºå¼±æŒ‡æ•°<br><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/ç›¸å¯¹å¼ºå¼±æŒ‡æ•°-RSI.jpg" /><br>70ä»¥ä¸Šæˆ–è€…30ä»¥ä¸‹è¡¨ç¤ºå¸‚åœºçš„é¡¶éƒ¨æˆ–åº•éƒ¨ï¼Œå³å°†<strong>åè½¬</strong>çš„ä¿¡å·ã€‚</p><h4 id="jså®ç°-3">jså®ç°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs js">  <span class="hljs-comment">/*</span><br><span class="hljs-comment">  &#123;</span><br><span class="hljs-comment">    // æ—¥æœŸ</span><br><span class="hljs-comment">    date: &#x27;2022-02-25&#x27;,</span><br><span class="hljs-comment">    // å¼€ç›˜ä»·</span><br><span class="hljs-comment">    open: 100,</span><br><span class="hljs-comment">    // æœ€é«˜ä»·</span><br><span class="hljs-comment">    high: 100,</span><br><span class="hljs-comment">    // æœ€ä½ä»·</span><br><span class="hljs-comment">    low: 100,</span><br><span class="hljs-comment">    // æ”¶ç›˜ä»·</span><br><span class="hljs-comment">    close: 100,</span><br><span class="hljs-comment">    // ä¸Šæ¶¨äº¤æ˜“æ—¥å¹³å‡å¢å¹…</span><br><span class="hljs-comment">    riseAverage: 20,</span><br><span class="hljs-comment">    // ä¸‹è·Œäº¤æ˜“æ—¥å¹³å‡å‡è´Ÿ</span><br><span class="hljs-comment">    fallAverage: 20,</span><br><span class="hljs-comment">    // ä¸Šæ¶¨äº¤æ˜“æ—¥å¢å¹…</span><br><span class="hljs-comment">    rise: 20,</span><br><span class="hljs-comment">    // ä¸‹è·Œäº¤æ˜“æ—¥å¢å¹…</span><br><span class="hljs-comment">    fall: 20,</span><br><span class="hljs-comment">    // ä¸Šæ¶¨äº¤æ˜“æ—¥å¢å¹… / ä¸‹è·Œäº¤æ˜“æ—¥å‡å¹…</span><br><span class="hljs-comment">    RS: 20,</span><br><span class="hljs-comment">    // ç›¸å¯¹å¼ºå¼±æŒ‡æ•°</span><br><span class="hljs-comment">    RSI: 20,</span><br><span class="hljs-comment">    // æ‰‹ç»­è´¹</span><br><span class="hljs-comment">    charge: 20 </span><br><span class="hljs-comment">  &#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">const</span> DATA_SOURCE = []<br><span class="hljs-comment">// å½“å‰çš„äº¤æ˜“ä¿¡æ¯</span><br><span class="hljs-keyword">const</span> TRADE_INFO = &#123;<br>  <span class="hljs-comment">// -1 åˆå§‹åŒ– 0 ç©ºå¤´ 1 å¤šå¤´</span><br>  <span class="hljs-attr">status</span>: -<span class="hljs-number">1</span>,<br>&#125;<br><br><span class="hljs-comment">// è·å–æŒ‡å®šæ—¶é—´é—´éš”çš„å†å²æ•°æ®</span><br><span class="hljs-comment">// mock </span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHistoryData</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">return</span> [&#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    <span class="hljs-attr">date</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;date.getFullYear()&#125;</span>-<span class="hljs-subst">$&#123;date.getMonth() + <span class="hljs-number">1</span>&#125;</span>-<span class="hljs-subst">$&#123;date.getDate()&#125;</span>`</span>,<br>    charge,<br>  &#125;]<br>&#125;<br><br>  <span class="hljs-comment">// å®šæ—¶ä»»åŠ¡æ‰§è¡Œ</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dailyFunction</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>  <span class="hljs-keyword">const</span> currentData = getHistoryData() <br>  <span class="hljs-keyword">const</span> &#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    date,<br>    charge<br>  &#125; = currentData <br>  <span class="hljs-keyword">const</span> newData = &#123;<br>    date,<br>    high,<br>    open,<br>    close,<br>    low,<br>    charge<br>  &#125; <br><br>  <span class="hljs-keyword">if</span>(!!DATA_SOURCE.length) &#123;<br>    <span class="hljs-keyword">const</span> [ yestodayData ] = DATA_SOURCE.slice(-<span class="hljs-number">1</span>)<br>    <span class="hljs-comment">// ä¸Šæ¶¨</span><br>    <span class="hljs-keyword">if</span>(newData.close &gt; yestodayData.close) &#123;<br>      newData.rise = newData.close - yestodayData.close<br>    &#125;<br>    <span class="hljs-comment">// ä¸‹è·Œ</span><br>    <span class="hljs-keyword">else</span> &#123;<br>      newData.fall = yestodayData.close - newData.close<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// è¶…è¿‡14å¤©æ‰èƒ½è®¡ç®—RSå’ŒRSI </span><br>  <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= <span class="hljs-number">14</span>) &#123;<br>    <span class="hljs-comment">// ç¬¬ä¸€å¤©è®¡ç®—éœ€è¦ç»“åˆå‰14å¤©çš„æ•°æ®</span><br>    <span class="hljs-keyword">if</span>(DATA_SOURCE.length === <span class="hljs-number">14</span>) &#123;<br>      <span class="hljs-keyword">const</span> &#123; rise, fall &#125; = DATA_SOURCE.reduce(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> &#123;<br>        acc.rise += (cur.rise || <span class="hljs-number">0</span>)<br>        acc.fall += (cur.fall || <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> acc <br>      &#125;, &#123;<br>        <span class="hljs-attr">rise</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">fall</span>: <span class="hljs-number">0</span><br>      &#125;)<br>      newData.riseAverage = rise / <span class="hljs-number">14</span> <br>      newData.fallAverage = fall / <span class="hljs-number">14</span> <br>      newData.RS = newData.riseAverage / newData.fallAverage<br>      newData.RSI = <span class="hljs-number">100</span> - (<span class="hljs-number">100</span> / (<span class="hljs-number">1</span> + newData.RS))<br>    &#125;<br>    <span class="hljs-comment">// åé¢åªéœ€è¦å‰ä¸€å¤©çš„æ•°æ®å³å¯</span><br>    <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">const</span> [ yestodayData ] = DATA_SOURCE.slice(-<span class="hljs-number">1</span>)<br>      <span class="hljs-comment">// ä¸Šæ¶¨</span><br>      <span class="hljs-keyword">if</span>(newData.close &gt; yestodayData.close) &#123;<br>        newData.rise = newData.close - yestodayData.close<br>      &#125;<br>      <span class="hljs-comment">// ä¸‹è·Œ</span><br>      <span class="hljs-keyword">else</span> &#123;<br>        newData.fall = yestodayData.close - newData.close<br>      &#125;<br>      newData.riseAverage = (yestodayData.riseAverage * <span class="hljs-number">13</span> + (yestodayData.rise || <span class="hljs-number">0</span>)) / <span class="hljs-number">14</span> <br>      newData.fallAverage = (yestodayData.fallAverage * <span class="hljs-number">13</span> + (yestodayData.fall || <span class="hljs-number">0</span>)) / <span class="hljs-number">14</span> <br>      newData.RSI = <span class="hljs-number">100</span> - (<span class="hljs-number">100</span> / (<span class="hljs-number">1</span> + newData.RS))<br>    &#125;<br><br>    <span class="hljs-comment">// TODO </span><br>    <span class="hljs-comment">// å…·ä½“çš„åˆ¤æ–­äº¤æ˜“é€»è¾‘</span><br><br>  &#125;<br><br>  DATA_SOURCE.push(newData)<br><br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å­˜åœ¨é—®é¢˜</p></blockquote><ol><li>æ–‡ä¸­æ‰€è¯´çš„å„ç§å›¾è¡¨å½¢æ€ï¼Œå¦‚<strong>å¤´è‚©é¡¶|åº•</strong>ï¼Œ<strong>æ——å½¢</strong>ï¼Œåªæ˜¯ç®€å•çš„ä½¿ç”¨<strong>å›¾ä¾‹æ ‡è¯†</strong>ä½•æ—¶ä¹°å…¥å–å‡ºï¼Œå¹¶æ²¡æœ‰çœŸæ­£è§£é‡Šè®¡ç®—çš„æ–¹æ³•ï¼Œæš‚æ—¶è¿˜æ— æ³•å®Œå–„æ•´ä¸ªäº¤æ˜“æµç¨‹ã€‚</li></ol>  <img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/ç›¸å¯¹å¼ºå¼±æŒ‡æ•°-RSIé¡¶éƒ¨.jpg" />    <img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/ç›¸å¯¹å¼ºå¼±æŒ‡æ•°-RSIåº•éƒ¨.png" />  <h3 id="æ‘†åŠ¨æŒ‡æ•°-çŸ­çº¿äº¤æ˜“ç³»ç»Ÿ">æ‘†åŠ¨æŒ‡æ•°-çŸ­çº¿äº¤æ˜“ç³»ç»Ÿ</h3><p>é¡¾åæ€ä¹‰æ˜¯åšçŸ­æœŸäº¤æ˜“æˆ–é«˜é¢‘äº¤æ˜“çš„ï¼Œä¸ªäººè®¤ä¸ºå¯¹äºçŸ­çº¿äº¤æ˜“æ¥è¯´ï¼Œéœ€è¦å…³æ³¨åˆ°æ›´å¤šçš„ç»†èŠ‚ï¼Œæ¯•ç«Ÿåœ¨çŸ­æ—¶é—´å†…åšå¤šæ¬¡äº¤æ˜“ï¼Œéœ€è¦ä»˜å‡ºæ›´å¤šçš„æ‰‹ç»­è´¹ã€‚</p><h4 id="å‡ ä¸ªæ¦‚å¿µ-3">å‡ ä¸ªæ¦‚å¿µ</h4><ul><li><p>Cnã€Lnã€Hnã€On<br>ç¬¬nå¤©çš„æ”¶ç›˜ä»·ã€æœ€ä½ä»·ã€æœ€é«˜ä»·ã€å¼€ç›˜ä»·</p></li><li><p>SI<br>æ‘†åŠ¨å› å­<br><img src="/images/æŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µç¬”è®°/æ‘†åŠ¨æŒ‡æ•°-çŸ­çº¿äº¤æ˜“ç³»ç»Ÿ-SI.jpg" /><br><strong>L</strong>è¡¨ç¤ºæé™è¿åŠ¨å€¼å¸¸é‡ï¼ˆæ¯”å¦‚3ï¼‰</p><p><strong>K</strong>è¡¨ç¤ºä¸‹åˆ—ä¸¤æ•°å€¼çš„æœ€å¤§å€¼ï¼ˆ<strong>ç»å¯¹å€¼æœ€å¤§</strong>ï¼‰</p><ul><li><code>H2 - C1</code></li><li><code>L2 - C1</code></li></ul><p><strong>R</strong>ä¸ºä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€</p><ol><li>æ±‚å‡ºä¸‹åˆ—ä¸‰ä¸ªæ¡ä»¶ä¸­çš„æœ€å¤§å€¼ï¼ˆ<strong>ç»å¯¹å€¼æœ€å¤§</strong>ï¼‰<br>1. <code>H2 - C1</code><br>2. <code>L2 - C1</code><br>3. <code>H2 - L2</code></li><li>æ ¹æ®ä¸Šé¢çš„æœ€å¤§å€¼æ¥å®šä¹‰<strong>R</strong><br>1. <code>R = (H2 - C1) - 0.5 * (L2 - C1) + 0.25 * (C1 - O1)</code><br>2. <code>R = (L2 - C1) - 0.5 * (H2 - C1) + 0.25 * (C1 - O1)</code><br>3. <code>R = (H2 - L2) + 0.25 * (C1 - O1)</code></li></ol></li><li><p>ASI<br>ç´¯è®¡æ‘†åŠ¨æŒ‡æ ‡<br><code>ASI = ä»Šæ—¥SI + å‰ä¸€æ—¥ASI</code><br>å®ƒå¯ä»¥æ˜¯æ­£æ•°ä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°<br>é•¿æœŸä¸Šå‡å¯èƒ½æ˜¯æ­£æ•°ï¼Œä¸‹é™å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œæ‘†åŠ¨å¯èƒ½æ˜¯æ­£è´Ÿäº¤æ›¿</p></li><li><p>HSP<br>é«˜ä½æ‘†åŠ¨ç‚¹<br>æ˜¯ç”±ASIå®šä¹‰çš„äº¤æ˜“æ—¥ï¼Œè¯¥äº¤æ˜“æ—¥çš„ASIå€¼<strong>é«˜äº</strong>ç›¸é‚»çš„å‰åä¸¤ä¸ªäº¤æ˜“æ—¥çš„ASIå€¼ã€‚</p></li><li><p>LSP<br>ä½ä½æ‘†åŠ¨ç‚¹<br>æ˜¯ç”±ASIå®šä¹‰çš„äº¤æ˜“æ—¥ï¼Œè¯¥äº¤æ˜“æ—¥çš„ASIå€¼<strong>ä½äº</strong>ç›¸é‚»çš„å‰åä¸¤ä¸ªäº¤æ˜“æ—¥çš„ASIå€¼ã€‚</p></li></ul><h4 id="è§„åˆ™-2">è§„åˆ™</h4><ul><li>åˆå…¥å¸‚<br>ASIè¶…è¿‡å‰ä¸€ä¸ªé«˜ä½æ‘†åŠ¨ç‚¹çš„ASIï¼Œæ¬¡æ—¥å»ºç«‹å¤šå¤´<br>ASIè·Œç ´å‰ä¸€ä¸ªä½ä½æ‘†åŠ¨ç‚¹çš„ASIï¼Œæ¬¡æ—¥å»ºç«‹ç©ºå¤´</li><li>æŒ‡æ ‡åœæŸåè½¬ç‚¹<ul><li>å¤šå¤´<ol><li>SAR = å‰ä¸€ä¸ªLSP</li><li>æ–°çš„HSPå½¢æˆåï¼ŒSAR = ä¸‹ä¸€ä¸ªLSP</li></ol></li><li>ç©ºå¤´<ol><li>SAR = å‰ä¸€ä¸ªHSP</li><li>æ–°çš„LSPå½¢æˆåï¼ŒSAR = ä¸‹ä¸€ä¸ªHSP</li></ol></li></ul></li><li>æŒ‡æ ‡å°¾éšåœæŸç‚¹<ul><li>å¤šå¤´<br>æœ€é«˜HSPä¸(ASI - 60)ä¹‹é—´çš„äº¤æ˜“æ—¥çš„æ”¶ç›˜ä»·ä¸­çš„æœ€ä½ä»·</li><li>ç©ºå¤´<br>æœ€ä½LSPä¸(ASI + 60)ä¹‹é—´çš„äº¤æ˜“æ—¥çš„æ”¶ç›˜ä»·ä¸­çš„æœ€é«˜ä»·</li></ul></li></ul><h4 id="jså®ç°-4">jså®ç°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><code class="hljs js">  <span class="hljs-comment">/*</span><br><span class="hljs-comment">  &#123;</span><br><span class="hljs-comment">    // æ—¥æœŸ</span><br><span class="hljs-comment">    date: &#x27;2022-02-25&#x27;,</span><br><span class="hljs-comment">    // å¼€ç›˜ä»·</span><br><span class="hljs-comment">    open: 100,</span><br><span class="hljs-comment">    // æœ€é«˜ä»·</span><br><span class="hljs-comment">    high: 100,</span><br><span class="hljs-comment">    // æœ€ä½ä»·</span><br><span class="hljs-comment">    low: 100,</span><br><span class="hljs-comment">    // æ”¶ç›˜ä»·</span><br><span class="hljs-comment">    close: 100,</span><br><span class="hljs-comment">    // æ‰‹ç»­è´¹</span><br><span class="hljs-comment">    charge: 20,</span><br><span class="hljs-comment">    // æ‘†åŠ¨å› å­</span><br><span class="hljs-comment">    SI: 20,</span><br><span class="hljs-comment">    // ç´¯è®¡æ‘†åŠ¨æŒ‡æ ‡</span><br><span class="hljs-comment">    ASI: 20,</span><br><span class="hljs-comment">  &#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">const</span> DATA_SOURCE = []<br><span class="hljs-comment">// å½“å‰çš„äº¤æ˜“ä¿¡æ¯</span><br><span class="hljs-keyword">const</span> TRADE_INFO = &#123;<br>  <span class="hljs-comment">// -1 åˆå§‹åŒ– 0 ç©ºå¤´ 1 å¤šå¤´</span><br>  <span class="hljs-attr">status</span>: -<span class="hljs-number">1</span>,<br>&#125;<br><span class="hljs-comment">// æé™è¿åŠ¨å€¼å¸¸é‡</span><br><span class="hljs-keyword">const</span> L = <span class="hljs-number">3</span> <br><span class="hljs-comment">// æœ€è¿‘ä¸€æ¬¡çš„HSP  </span><br><span class="hljs-keyword">let</span> CURRENT_HSP = <span class="hljs-number">0</span> <br><span class="hljs-comment">// æœ€è¿‘ä¸€æ¬¡çš„LSP  </span><br><span class="hljs-keyword">let</span> CURRENT_LSP = <span class="hljs-number">0</span> <br><span class="hljs-comment">// æœ€è¿‘ä¸€æ¬¡çš„HIP </span><br><span class="hljs-keyword">let</span> CURRENT_HIP = <span class="hljs-number">0</span> <br><span class="hljs-comment">// æœ€è¿‘ä¸€æ¬¡çš„LOP  </span><br><span class="hljs-keyword">let</span> CURRENT_LOP = <span class="hljs-number">0</span> <br><span class="hljs-comment">// éœ€è¦è¿›å…¥çš„çŠ¶æ€</span><br><span class="hljs-comment">// å› ä¸ºåœ¨æ£€æµ‹åˆ°éœ€è¦è½¬å˜çŠ¶æ€æ—¶ï¼Œéœ€è¦ç­‰å¾…ä»·æ ¼åˆ°è¾¾ç›®æ ‡ä»·ä½æ‰èƒ½è¿›å…¥æˆ–é€€å‡ºå¸‚åœºï¼Œæ‰€ä»¥åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹çŠ¶æ€</span><br><span class="hljs-comment">// -1 ç­‰å¾… 0 ç©ºå¤´ 1 å¤šå¤´</span><br><span class="hljs-keyword">let</span> NEXT_NEED_STEP = -<span class="hljs-number">1</span> <br><span class="hljs-comment">// åœæŸç‚¹</span><br><span class="hljs-keyword">let</span> SAR = <span class="hljs-number">0</span> <br><br><span class="hljs-comment">// è·å–æŒ‡å®šæ—¶é—´é—´éš”çš„å†å²æ•°æ®</span><br><span class="hljs-comment">// mock </span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHistoryData</span>(<span class="hljs-params">start, end</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">return</span> [&#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    <span class="hljs-attr">date</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;date.getFullYear()&#125;</span>-<span class="hljs-subst">$&#123;date.getMonth() + <span class="hljs-number">1</span>&#125;</span>-<span class="hljs-subst">$&#123;date.getDate()&#125;</span>`</span>,<br>    charge,<br>    <span class="hljs-comment">// å½“å‰ä»·æ ¼</span><br>    current,<br>  &#125;]<br>&#125;<br><br><span class="hljs-comment">// å®æ—¶ç›‘å¬å½“å‰çš„å¸‚åœºä»·æ ¼</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">requestDailyInfoLoop</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> currentData = getHistoryData() <br>    <span class="hljs-keyword">const</span> &#123; current &#125; = currentData<br>    <span class="hljs-comment">// éœ€è¦è¿›è¡Œæ“ä½œ</span><br>    <span class="hljs-keyword">if</span>(!!~NEXT_NEED_STEP) &#123;<br>      <span class="hljs-comment">// éœ€è¦è¿›å…¥ç©ºå¤´</span><br>      <span class="hljs-keyword">if</span>(NEXT_NEED_STEP === <span class="hljs-number">0</span> &amp;&amp; current &lt; CURRENT_LOP) &#123;<br>        <span class="hljs-comment">// æ“ä½œè¿›å…¥ç©ºå¤´</span><br>        TRADE_INFO.status = <span class="hljs-number">0</span><br>        SAR = CURRENT_HIP<br>      &#125;<br>      <span class="hljs-comment">// éœ€è¦è¿›å…¥å¤šå¤´</span><br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(NEXT_NEED_STEP === <span class="hljs-number">1</span> &amp;&amp; current &gt; CURRENT_HIP) &#123;<br>        TRADE_INFO.status = <span class="hljs-number">1</span><br>        SAR = CURRENT_LOP<br>      &#125;<br>      NEXT_NEED_STEP = -<span class="hljs-number">1</span> <br>    &#125;<br><br>    requestDailyInfoLoop()<br>  &#125;, <span class="hljs-number">1000</span>)<br>&#125;<br><br>  <span class="hljs-comment">// å®šæ—¶ä»»åŠ¡æ‰§è¡Œ</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dailyFunction</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>  <span class="hljs-keyword">const</span> currentData = getHistoryData() <br>  <span class="hljs-keyword">const</span> &#123;<br>    high,<br>    open,<br>    low,<br>    close,<br>    date,<br>    charge<br>  &#125; = currentData <br>  <span class="hljs-keyword">const</span> newData = &#123;<br>    date,<br>    high,<br>    open,<br>    close,<br>    low,<br>    charge<br>  &#125; <br><br>  <span class="hljs-comment">// è¶…è¿‡ä¸€å¤©æ‰èƒ½è®¡ç®—SI</span><br>  <span class="hljs-keyword">if</span>(!!DATA_SOURCE.length) &#123;<br>    <span class="hljs-keyword">const</span> [yestoday] = DATA_SOURCE.slice(-<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">close</span>: yesClose, <span class="hljs-attr">open</span>: yesOpen, <span class="hljs-attr">low</span>: yesLow, <span class="hljs-attr">high</span>: yesHigh, <span class="hljs-attr">SI</span>: yesSI, <span class="hljs-attr">ASI</span>: yesASI &#125; = yestoday<br>    <span class="hljs-comment">// åˆ†å­</span><br>    <span class="hljs-keyword">const</span> N = close - yesClose + <span class="hljs-number">0.5</span> * (close - open) + <span class="hljs-number">0.25</span> * (yesClose - yesOpen)<br>    <span class="hljs-comment">// K </span><br>    <span class="hljs-keyword">const</span> K = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">Math</span>.abs(high - yesClose), <span class="hljs-built_in">Math</span>.abs(low - yesClose))<br>    <span class="hljs-comment">// R </span><br>    <span class="hljs-keyword">const</span> RCondition = [<span class="hljs-built_in">Math</span>.abs(high, yesClose), <span class="hljs-built_in">Math</span>.abs(low - yesClose), <span class="hljs-built_in">Math</span>.abs(high - low)]<br>    <span class="hljs-keyword">const</span> maxRCondition = <span class="hljs-built_in">Math</span>.max(...RCondition)<br>    <span class="hljs-keyword">const</span> maxRConditionIndex = RCondition.indexOf(maxRCondition)<br>    <span class="hljs-keyword">const</span> RMap = [<br>      (high - yesClose) - <span class="hljs-number">0.5</span> * (low - yesClose) + <span class="hljs-number">0.25</span> * (yesClose - yesOpen),<br>      (low - yesClose) - <span class="hljs-number">0.5</span> * (high - yesClose) + <span class="hljs-number">0.25</span> * (yesClose - yesOpen),<br>      (high - low) + <span class="hljs-number">0.25</span> * (yesClose - yesOpen)<br>    ]<br>    <span class="hljs-keyword">const</span> R = RMap[maxRConditionIndex]<br>    <span class="hljs-comment">// SI </span><br>    <span class="hljs-keyword">const</span> SI = <span class="hljs-number">50</span> * (N / R) * (K / L)<br>    newData.SI = SI <br>    newData.ASI = SI + (yesASI || <span class="hljs-number">0</span>)<br><br>    <span class="hljs-comment">// è¶…è¿‡ä¸¤å¤©æ‰èƒ½è®¡ç®—HIPå’ŒLOP</span><br>    <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= <span class="hljs-number">2</span>) &#123;<br>      <span class="hljs-comment">// HIP  </span><br>      <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.max(theDayBeforeYestoday.high, yestoday.high, newData.high) === yestoday.high) &#123;<br>        CURRENT_HIP = yestoday.high <br>      &#125;<br><br>      <span class="hljs-comment">// LOP </span><br>      <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.min(theDayBeforeYestoday.low, yestoday.low, newData.low) === yestoday.low) &#123;<br>        CURRENT_LOP = yestoday.low <br>      &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// è¶…è¿‡ä¸‰å¤©æ‰èƒ½è®¡ç®—HSPå’ŒLSP  </span><br>    <span class="hljs-keyword">if</span>(DATA_SOURCE.length &gt;= <span class="hljs-number">3</span>) &#123;<br>      <span class="hljs-keyword">const</span> [ theDayBeforeYestoday, yestoday ] = DATA_SOURCE.slice(-<span class="hljs-number">2</span>)<br>      <span class="hljs-comment">// HSP</span><br>      <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.max(theDayBeforeYestoday.ASI, yestoday.ASI, newData.ASI) === yestoday.ASI) &#123;<br>        CURRENT_HSP = yestoday.ASI <br>        <span class="hljs-comment">// å¤šå¤´</span><br>        NEXT_NEED_STEP = <span class="hljs-number">1</span><br>      &#125;<br>      <span class="hljs-comment">// LSP </span><br>      <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.min(theDayBeforeYestoday.ASI, yestoday.ASI, newData.ASI) === yestoday.ASI) &#123;<br>        CURRENT_LSP = yestoday.ASI <br>        <span class="hljs-comment">// ç©ºå¤´</span><br>        NEXT_NEED_STEP = <span class="hljs-number">0</span><br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  DATA_SOURCE.push(newData)<br><br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>å­˜åœ¨é—®é¢˜</p></blockquote><ol><li>èƒ½åŠ›æœ‰é™ï¼Œè¿™ä¸€ç« èŠ‚çš„å†…å®¹çš„ä»£ç å®ç°æœªèƒ½å…¨éƒ¨å®ŒæˆğŸ˜“ã€‚</li><li>æ€»å¾—æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªçŸ­çº¿æ“ä½œç³»ç»Ÿã€‚</li></ol><h3 id="èµ„é‡‘ç®¡ç†">èµ„é‡‘ç®¡ç†</h3><p>ç›¸ä¿¡åœ¨æ¥å—åˆ°äº¤æ˜“çš„ç›¸å…³æ¦‚å¿µçš„æ´—ç¤¼åï¼Œå¯¹è¿™ä¸€ç« èŠ‚çš„é‡è¦æ€§éƒ½åº”è¯¥æœ‰ä¸€å®šçš„ç†è§£äº†ã€‚<br>è¿™é‡Œå°±ç›´æ¥å®šä¹‰ä¹¦ä¸­çš„ç»“è®ºã€‚</p><blockquote><ol><li>ä»»ä½•ä¸€ç§æœŸè´§ï¼Œå…¶ä¿è¯é‡‘ä¸è¦è¶…è¿‡æ€»èµ„é‡‘æ•°é‡çš„<strong>15%</strong></li><li>ä»»ä½•æ—¶å€™ï¼Œä¿è¯é‡‘ä¸è¦è¶…è¿‡æ€»èµ„é‡‘æ•°é‡çš„<strong>60%</strong>()</li></ol></blockquote><p>ä¸Šè¿°çš„ä¿è¯é‡‘ä¹Ÿå¯ä»¥è¯´æ˜¯æŠ•å…¥çš„èµ„é‡‘é‡</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ä»¥ä¸Šå°±æ˜¯ä¹¦ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå½“ç„¶è¿˜æœ‰æŒºå¤šå¯ä»¥å®Œå–„çš„åœ°æ–¹ï¼Œä¸Šé¢çš„ä»£ç åªæ˜¯ä¸€ä¸ªç®€å•çš„<code>demo</code>ï¼Œåç»­å¯ä»¥ç»§ç»­å®Œå–„ğŸ’ªğŸ»ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>äº¤æ˜“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>trade finance</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°</title>
    <link href="/2022/11/25/%E6%9C%9F%E8%B4%A7%E5%B8%82%E5%9C%BA%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/11/25/%E6%9C%9F%E8%B4%A7%E5%B8%82%E5%9C%BA%E6%8A%80%E6%9C%AF%E5%88%86%E6%9E%90%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°">æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°</h2><p>å†æ—¶å‡ ä¸ªæœˆï¼ˆ9-14 ~ 11-25ï¼‰ï¼Œç»ˆäºç²—ç•¥çœ‹å®Œäº†æ•´æœ¬ä¹¦ğŸ˜Šã€‚</p><h2 id="ä»‹ç»">ä»‹ç»</h2><p>æœ¬æ–‡æ˜¯æœ¬äººåœ¨é˜…è¯»ğŸ“šã€ŠæœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æã€‹çš„è¯»ä¹¦ç¬”è®°ï¼Œè®°å½•ğŸ“å½“ä¸­çš„ä¸€äº›äº¤æ˜“æ–¹æ³•ï¼ŒæŒ‡æ ‡ç­‰ç­‰ã€‚<br>ä½œä¸ºä¸€ä¸ªä¸“ä¸šçš„ç¨‹åºçŒ¿ğŸ’ï¼Œå½“ç„¶æ˜¯è¦é€šè¿‡ä»£ç æ¥å®ç°äº¤æ˜“è‡ªåŠ¨åŒ–ğŸŒ¶ã€‚<br>è™½ç„¶æœ¬äººçš„åˆè¡·æ˜¯åšè‚¡ç¥¨çš„è‡ªåŠ¨åŒ–äº¤æ˜“ï¼Œä½†æ˜¯æ®è¯´æ˜¯ä¸¤è€…æƒ³é€šï¼Œå¯ä»¥ç”¨æ¥å€Ÿé‰´ï¼Œæ‰€ä»¥å°±å½“æ˜¯å¤šå­¦ä¹ ä¸€ç‚¹ç›¸å…³çš„çŸ¥è¯†å§ğŸ‘ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><p>å…ˆè®°å½•ä¸‹ç›®å½•ï¼š</p><blockquote><p>å‰è¨€<br>è¯‘è€…çš„è¯â€”â€”æˆ‘çœ‹æŠ€æœ¯åˆ†æ<br>è‡´è°¢<br>ç¬¬ä¸€ç«  æŠ€æœ¯åˆ†æçš„ç†è®ºåŸºç¡€<br>ç¬¬äºŒç«  é“æ°ç†è®º<br>ç¬¬ä¸‰ç«  å›¾è¡¨ç®€ä»‹<br>ç¬¬å››ç«  è¶‹åŠ¿çš„åŸºæœ¬æ¦‚å¿µ<br>ç¬¬äº”ç«  ä¸»è¦åè½¬å½¢æ€<br>ç¬¬å…­ç«  æŒç»­å½¢æ€<br>ç¬¬ä¸ƒç«  äº¤æ˜“é‡å’ŒæŒä»“å…´è¶£<br>ç¬¬å…«ç«  é•¿æœŸå›¾è¡¨å’Œå•†å“æŒ‡æ•°<br>ç¬¬ä¹ç«  ç§»åŠ¨å¹³å‡çº¿<br>ç¬¬åç«  æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§<br>ç¬¬åä¸€ç«  æ—¥å†…ç‚¹æ•°å›¾<br>ç¬¬åäºŒç«  ä¸‰ç‚¹è½¬å‘å’Œä¼˜åŒ–ç‚¹æ•°å›¾<br>ç¬¬åä¸‰ç«  è‰¾ç•¥ç‰¹æ³¢æµªç†è®º<br>ç¬¬åå››ç«  æ—¶é—´å‘¨æœŸ<br>ç¬¬åäº”ç«  è®¡ç®—æœºå’Œäº¤æ˜“ç³»ç»Ÿ<br>ç¬¬åå…­ç« èµ„é‡‘ç®¡ç†å’Œäº¤æ˜“ç­–ç•¥<br>å…¨ä¹¦å¤§ä¼šä¸²â€”â€”ä¸€å¼ æ¸…å•<br>é™„å½•ä¸€ å·®ä»·äº¤æ˜“å’Œç›¸å¯¹åŠ›åº¦çš„æ¦‚å¿µ<br>é™„å½•äºŒæœŸæƒäº¤æ˜“<br>é™„å½•ä¸‰ WÂ·DÂ·æ±Ÿæ©ï¼šå‡ ä½•è§’åº¦å’Œç™¾åˆ†æ¯”ä¾‹<br>å‚è€ƒèµ„æ–™<br>ç´¢å¼•<br>å…³äºæœ¬ä¹¦</p></blockquote><p>å½“ä¸­æœ‰ä¸€äº›åŸºç¡€æ˜“æ‡‚çš„å†…å®¹ï¼Œå°±ä¸è®°å½•äº†ğŸ˜Šã€‚</p><h3 id="é“å¼ç†è®º">é“å¼ç†è®º</h3><ul><li>å¸‚åœºçš„è¶‹åŠ¿åˆ†ä¸ºä¸‰ç§ï¼š<strong>ä¸»è¦è¶‹åŠ¿</strong>ï¼ˆä¸€å¹´æˆ–å‡ å¹´ï¼‰ã€<strong>æ¬¡è¦è¶‹åŠ¿</strong>ï¼ˆå‡ ä¸ªæ˜ŸæœŸæˆ–å‡ ä¸ªæœˆï¼‰ã€<strong>çŸ­æš‚è¶‹åŠ¿</strong>ï¼ˆä¸åˆ°ä¸‰ä¸ªæ˜ŸæœŸï¼‰</li></ul><h4 id="ä¿¡å·">ä¿¡å·</h4><blockquote><p>åªè¦ç›¸ç»§çš„ä¸Šå†²åŠ ä¸ªæ³¢å³°å’Œæ³¢è°·éƒ½å¯¹åº”çš„é«˜è¿‡å‰ä¸€ä¸ªæ³¢å³°ã€æ³¢è°·ï¼Œé‚£ä¹ˆå¸‚åœºå°±å¤„åœ¨ä¸€ä¸ªä¸Šå‡è¶‹åŠ¿ä¹‹ä¸­ã€‚</p></blockquote><p>ç®€å•è¯´å°±æ˜¯å½“å‰ä»·æ ¼è¶…è¿‡å‰ä¸€ä¸ªæ³¢å³°æˆ–æ³¢è°·ï¼Œåˆ™è§¦å‘äº†å¯¹åº”çš„ä¹°å…¥å–å‡ºä¿¡å·ã€‚<br>å¹¶ä¸”éœ€è¦çš„æ˜¯å¸‚åœºçš„<strong>æ•´ä½“ä»·æ ¼</strong>å¤„åœ¨åŒä¸€ä¸ªè¶‹åŠ¿ä¸­ï¼Œæ‰ç®—æ˜¯çœŸæ­£çš„è¶‹åŠ¿å‘ç”Ÿã€‚è¿™å¤§æ¦‚æ„æ€å°±æ˜¯éœ€è¦æ¯”è¾ƒå¸‚åœºå†…çš„å¤šåªç›®æ ‡è‚¡æ¥è¿›è¡Œåˆ¤æ–­ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/é“å¼ç†è®º-1.jpg" /><h3 id="è¶‹åŠ¿çš„åŸºæœ¬æ¦‚å¿µ">è¶‹åŠ¿çš„åŸºæœ¬æ¦‚å¿µ</h3><ul><li>è¶‹åŠ¿çš„ä¸‰ç§çŠ¶æ€ï¼š<strong>ä¸Šå‡</strong>ã€<strong>ä¸‹é™</strong>ã€<strong>æ¨ªå‘å»¶ä¼¸ï¼ˆéœ‡è¡ï¼‰</strong></li></ul><h4 id="æ”¯æ’‘å’Œé˜»æŒ¡">æ”¯æ’‘å’Œé˜»æŒ¡</h4><p>ä»·æ ¼è¶‹åŠ¿å‘ä¸Šæ—¶ï¼Œå½¢æˆ<strong>é˜»æŒ¡</strong>ç‚¹<br>ä»·æ ¼è¶‹åŠ¿å‘ä¸‹æ—¶ï¼Œå½¢æˆ<strong>æ”¯æ’‘</strong>ç‚¹<br>å½“ä»·æ ¼çªç ´å‰é¢çš„<strong>æ”¯æ’‘</strong>å’Œ<strong>é˜»æŒ¡</strong>ç‚¹æ—¶ï¼Œè§¦å‘ä¿¡å·ã€‚</p><h4 id="è¶‹åŠ¿çº¿">è¶‹åŠ¿çº¿</h4><ul><li>ç¡®è®¤è¶‹åŠ¿æ˜¯å¦å­˜åœ¨</li></ul><blockquote><p>è¶‹åŠ¿ä¸Šå‡ï¼š<br>è‡³å°‘éœ€è¦ä¸¤ä¸ªæœ‰æ•ˆçš„å‘ä¸Šåå¼¹ä½ç‚¹ï¼Œå¹¶ä¸”åè€…é«˜äºå‰è€…ï¼Œå¹¶éªŒè¯ï¼ˆç¬¬ä¸‰æ¬¡è§¦åŠè¯¥çº¿å¹¶åå¼¹ï¼‰ã€‚</p></blockquote><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è¶‹åŠ¿çš„åŸºæœ¬æ¦‚å¿µ-è¶‹åŠ¿åˆ¤æ–­.jpg" />  <img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è¶‹åŠ¿çš„åŸºæœ¬æ¦‚å¿µ-è¶‹åŠ¿çº¿ä¹°å–ä¿¡å·.jpg" /><h5 id="ps">ps</h5><p>ä»¥ä¸‹å‡è¯´çš„æ˜¯<strong>ä¸Šå‡è¶‹åŠ¿</strong>çš„æƒ…å†µï¼Œä¸‹é™åˆ™ç›¸åã€‚</p><ol><li>å­˜åœ¨<strong>æ—¥å†…</strong>çŸ­æš‚çªç ´<strong>è¶‹åŠ¿çº¿</strong>ï¼Œè€Œååœ¨æ”¶ç›˜æ—¶åˆå›åˆ°è¶‹åŠ¿çº¿ä¹‹ä¸Šã€‚<br>è¿™é‡Œé€‰æ‹©çš„æ˜¯ï¼š</li></ol><ul><li>ç»˜åˆ¶ä¸€æ¡ç©¿è¿‡è¯¥ä½ç‚¹çš„<strong>è¾…åŠ©è¶‹åŠ¿çº¿</strong>ã€‚</li><li>åœ¨ä¹‹åéªŒè¯å…¶åˆç†æ€§ï¼ˆè¿™é‡Œç†è§£çš„æ˜¯åœ¨ä¹‹åçš„è¿ç»­ä¸¤ä¸ªä½ç‚¹è§¦åŠè¯¥çº¿å¹¶åå¼¹ï¼‰ã€‚</li><li>åˆç†åˆ™è½¬è€Œä½¿ç”¨è¯¥<strong>è¾…åŠ©è¶‹åŠ¿çº¿</strong>ä½œä¸º<strong>è¶‹åŠ¿çº¿</strong>ã€‚</li></ul><ol start="2"><li>æœ‰æ•ˆçªç ´<br>å­˜åœ¨ä»·æ ¼çªç ´ä½†æ˜¯çªç ´ä¸å¤šçš„æƒ…å†µï¼Œè¿™é‡Œçš„é€‰æ‹©æ˜¯ï¼š</li></ol><ul><li>é€šå¸¸ä»·æ ¼éœ€è¦çªç ´è¶‹åŠ¿çº¿è‡³å°‘<strong>3%</strong>ï¼Œå¹¶ä¸”è‡³å°‘è¿ç»­<strong>2å¤©</strong>ï¼Œå®šä¹‰ä¸ºæœ‰æ•ˆçªç ´ï¼ˆæ™®éé€‚ç”¨ï¼Œä½†æ˜¯ä¸å®Œå…¨é€‚ç”¨æ‰€æœ‰å¸‚åœºï¼‰ã€‚</li></ul><h4 id="ç®¡é“çº¿">ç®¡é“çº¿</h4><ol><li>åŸºæœ¬æ¦‚å¿µ</li></ol><ul><li>ç”¨<strong>è¶‹åŠ¿çº¿</strong>åšä¸€æ¡åŸºæœ¬çº¿ã€‚</li><li>ä»è¯¥èµ·ç‚¹å‡ºç°çš„ç¬¬ä¸€ä¸ªæ³¢å³°å¤„ï¼Œç»˜åˆ¶ä¸€æ¡ä¸è¶‹åŠ¿çº¿<strong>å¹³è¡Œ</strong>çš„çº¿ã€‚</li><li>éªŒè¯ï¼šåˆ°è¾¾<em>å¹³è¡Œçº¿</em>å<strong>åå¼¹</strong>ï¼Œè€Œååˆå›åˆ°è¶‹åŠ¿çº¿çš„ä½ç½®ã€‚</li><li>åŸºç¡€è¶‹åŠ¿çº¿<em>å¼€å¤šå¤´</em>ï¼Œå¹³è¡Œçº¿<em>å¹³ä»“</em>ã€‚</li><li>å½“ä»·æ ¼æœª<em>æ— æ³•è§¦åŠ</em>å¹³è¡Œçº¿ï¼Œåˆ™æ˜¯å¸‚åœº<strong>è½¬å‘</strong>çš„ä¿¡å·ã€‚</li></ul><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è¶‹åŠ¿çš„åŸºæœ¬æ¦‚å¿µ-ç®¡é“çº¿.jpg" />  <h4 id="å›æ’¤">å›æ’¤</h4><p>å¸‚åœºåœ¨ä¸Šå‡æˆ–ä¸‹é™è¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨çŸ­æš‚çš„é€†å¸‚åœºæ–¹å‘çš„æƒ…å†µï¼Œç§°ä¸º<strong>å›æ’¤</strong>ï¼Œä¸€èˆ¬å›æ’¤çš„å¤§å°ä¸ä¼šè¶…è¿‡<strong>ä¸‰åˆ†ä¹‹äºŒ</strong>ï¼Œå¦åˆ™æ˜¯å¸‚åœºè½¬å‘çš„ä¿¡å·ã€‚</p><h4 id="é€Ÿåº¦çº¿">é€Ÿåº¦çº¿</h4><p>ä»è¶‹åŠ¿èµ·ç‚¹å¼€å§‹åˆ°å½“å‰ä»·æ ¼é«˜ç‚¹ç»˜åˆ¶ä¸‰ç­‰åˆ†çº¿ï¼Œå½“ä»·æ ¼å›æ’¤è¶…è¿‡å…¶ä¸­é—´ç­‰åˆ†çº¿æ—¶ï¼Œä¸ºå¸‚åœºè½¬å‘ä¿¡å·ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è¶‹åŠ¿çš„åŸºæœ¬æ¦‚å¿µ-é€Ÿåº¦çº¿.jpg" /><h4 id="è·³ç©º">è·³ç©º</h4><p>å½“å‰æœ€ä½ï¼ˆé«˜ï¼‰ä»·é«˜ï¼ˆä½ï¼‰äºå‰ä¸€æ—¥ï¼ˆå‘¨ã€æœˆï¼‰çš„æœ€é«˜ï¼ˆä½ï¼‰ä»·ï¼Œç§°ä¸ºè·³ç©ºã€‚<br>åœ¨<strong>å‘¨ã€æœˆ</strong>ä¸­ä¸ºéå¸¸é‡è¦çš„ä¿¡å·ã€‚</p><h5 id="å››ç§è·³ç©º">å››ç§è·³ç©º</h5><p>æ™®é€šè·³ç©º -&gt; çªç ´è·³ç©º -&gt; ä¸­ç»§è·³ç©º -&gt; è¡°ç«­è·³ç©º -&gt; åè½¬<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è¶‹åŠ¿çš„åŸºæœ¬æ¦‚å¿µ-è·³ç©º.jpg" /></p><h3 id="ä¸»è¦åè½¬å½¢æ€">ä¸»è¦åè½¬å½¢æ€</h3><h4 id="å¤´è‚©å½¢åè½¬å½¢æ€">å¤´è‚©å½¢åè½¬å½¢æ€</h4><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/ä¸»è¦åè½¬å½¢æ€-å¤´è‚©å½¢åè½¬å½¢æ€.jpg" />  <p>æ­¤çŠ¶æ€å½¢æˆçš„å…³é”®å°±åœ¨äºï¼Œ<strong>å³è‚©</strong>çš„é«˜ç‚¹æ— æ³•è¶…è¶Šå‰ä¸€ä¸ªé«˜ç‚¹ã€‚<br>å¹¶ä¸”æœ€é«˜ç‚¹ä¸‹çš„å›æ’¤å·²ç»ä½äºäº†å‰ä¸€ä¸ªé«˜ç‚¹ï¼ˆAï¼Œå‰é¢è¯´è¿‡ï¼Œä¸Šå‡è¶‹åŠ¿çš„å‰ä¸€ä¸ªçªç ´é«˜ç‚¹ä¼šåœ¨ä¹‹åå½¢æˆ<strong>æ”¯æ’‘</strong>æ•ˆæœï¼‰ã€‚</p><blockquote><p>å½¢æ€ä¸äº¤æ˜“é‡æ¯æ¯ç›¸å…³<br>å½“è¿˜æœªåˆ°æœ€é«˜ç‚¹æ—¶ï¼Œå·¦è‚©çš„ä¸Šå‡è¶‹åŠ¿ä¸€èˆ¬éƒ½ä¼´éšç€é«˜äº¤æ˜“é‡ï¼Œè€Œå›æ’¤å½“ç„¶ä¹Ÿä¼šéšä¹‹å‡å°‘äº¤æ˜“é‡ã€‚<br>å½“å¼€å§‹å†²å‡»æœ€é«˜ç‚¹æ—¶ï¼Œäº¤æ˜“é‡å·²ç»å¼€å§‹æœ‰æ‰€å‡å°‘ï¼Œä¹Ÿè¯´æ˜äº¤æ˜“å…´è¶£å¼€å§‹å‡å°‘ï¼Œä¸Šå‡é˜»æŒ¡æ•ˆæœå¼€å§‹å¢å¤§ã€‚</p></blockquote><h5 id="é¢ˆçº¿">é¢ˆçº¿</h5><p>æ ¹æ®<strong>å·¦è‚©</strong>çš„ä½ç‚¹å’Œ<strong>å¤´</strong>çš„ä½ç‚¹è¿çº¿è€Œæˆçš„çº¿ï¼ˆå¦‚ä¸Šå›¾ã€Šå¤´è‚©å½¢åè½¬å½¢æ€ã€‹ï¼‰ã€‚</p><h5 id="åæ‰‘">åæ‰‘</h5><p>å­˜åœ¨ç”±ä¸Šè¿°è¿‡ç¨‹åä¸‹è·Œï¼Œå‡ºç°åå‘<strong>ä¸Šå‡</strong>çš„æƒ…å†µï¼Œç®€å•çš„åˆ¤æ–­æ¡ä»¶æ˜¯ï¼Œæ ¹æ®<strong>äº¤æ˜“é‡</strong>çš„å¤§å°ï¼Œ<strong>å°</strong>çš„äº¤æ˜“é‡è¡¨æ˜å¯èƒ½å‡ºç°æœ‰æ•ˆçš„ä¸Šå‡è¶‹åŠ¿ï¼Œåä¹‹åˆ™ä¸ç„¶ã€‚</p><h4 id="å€’å¤´è‚©å½¢">å€’å¤´è‚©å½¢</h4><p>ä¸å¤´è‚©å½¢æ­£å¥½ç›¸åã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/ä¸»è¦åè½¬å½¢æ€-å€’å¤´è‚©å½¢.jpg" />  <h4 id="ä¸‰é‡é¡¶ï¼ˆåº•ï¼‰">ä¸‰é‡é¡¶ï¼ˆåº•ï¼‰</h4><p>å­˜åœ¨å¤šä¸ªç›¸åŒé«˜åº¦çš„å³°ï¼Œå…³é”®åœ¨äºå…¶é€æ¸ä¸‹é™çš„äº¤æ˜“é‡ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/ä¸»è¦åè½¬å½¢æ€-ä¸‰é‡é¡¶ï¼ˆåº•ï¼‰.jpg" />  <h4 id="åŒé‡é¡¶ï¼ˆåº•ï¼‰">åŒé‡é¡¶ï¼ˆåº•ï¼‰</h4><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/ä¸»è¦åè½¬å½¢æ€-åŒé‡é¡¶ï¼ˆåº•ï¼‰.jpg" />  <p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„å˜ä½“ï¼Œåœ¨å®ç›˜ä¸­ç»å¸¸å‡ºç°ã€‚<br>åˆ¤æ–­çš„æ¡ä»¶ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œä»¥ä¸Šå‡åè½¬ä¸ºä¾‹ï¼Œç¬¬ä¸€ä¸ªé¡¶çš„äº¤æ˜“é‡å¿…ç„¶é«˜äºç¬¬äºŒä¸ªé¡¶çš„äº¤æ˜“é‡ã€‚</p><h4 id="åœ†é¡¶ï¼ˆåº•ï¼‰">åœ†é¡¶ï¼ˆåº•ï¼‰</h4><p>ä¸ªäººè®¤ä¸ºï¼Œè¿™ç§æƒ…å½¢åªæ˜¯ä¸€ä¸ªæ¯”è¾ƒåœ†æ»‘çš„é€æ­¥ä¸Šå‡æˆ–ä¸‹é™çš„æƒ…å†µã€‚</p><h4 id="Vå½¢">Vå½¢</h4><p>ä¸ªäººè®¤ä¸ºï¼Œè¾ƒä¸ºé™¡å³­çš„å³° + <code>é«˜</code>äº¤æ˜“é‡ + <code>å¤š</code>è·³ç©ºã€‚</p><h4 id="ps-2">ps</h4><p>æœ¬ç« çœ‹åˆ°çš„æœ€å¤šçš„ä¸€ç‚¹å°±æ˜¯ï¼š<strong>äº¤æ˜“çš„å½¢æ€å’Œäº¤æ˜“é‡å…³ç³»éå¸¸å¯†åˆ‡</strong></p><ul><li><strong>æ•°æ®è¿‡æ»¤</strong><br>å®ç›˜å¸¸è§çš„ä¸€äº›æ¯”è¾ƒç±»ä¼¼çš„æƒ…å½¢å¯èƒ½å½¢æˆè¶‹åŠ¿ï¼Œä½†æ˜¯å¯èƒ½å¹¶ä¸æ˜¯ã€‚<br>é€šè¿‡æ·»åŠ ä¸€äº›é™åˆ¶æ¡ä»¶æ¥é™ä½å‡ºé”™çš„æ¬¡æ•°ã€‚æ¯”å¦‚ï¼š</li></ul><ol><li>æ·»åŠ çªç ´å¤§å°ï¼Œå‘ä¸Šæˆ–å‘ä¸‹çªç ´ä¸€å®š<strong>ç™¾åˆ†æ¯”</strong>å®šä¹‰ä¸ºè¶‹åŠ¿å½¢æˆã€‚</li><li>æ—¥å†…çªç ´ä¸æ”¶ç›˜çªç ´ç›¸ç»“åˆåˆ¤æ–­ã€‚</li><li>åŒæ—¥çªç ´ï¼Œ<strong>è¿ç»­ä¸¤å¤©</strong>çªç ´æ‰å®šè®ºã€‚</li></ol><h3 id="æŒç»­å½¢æ€">æŒç»­å½¢æ€</h3><h4 id="ä¸‰è§’å½¢">ä¸‰è§’å½¢</h4><p>ä»·æ ¼èµ°åŠ¿å½¢æˆäº†ä¸€ä¸ªä¸‰è§’å½¢çš„å½¢æ€ã€‚<br>ä¸‰è§’å½¢åˆ†åˆ«æœ‰<code>å¯¹ç§°ä¸‰è§’å½¢</code>ã€<code>ä¸Šå‡ä¸‰è§’å½¢</code>ã€<code>ä¸‹é™ä¸‰è§’å½¢</code>ã€‚<br><code>6</code>ä¸ªè½¬æŠ˜ç‚¹ç¡®å®šä¸€ä¸ªä¸‰è§’å½¢ã€‚<br>ä¸€èˆ¬åœ¨ä¸‰è§’å½¢æ¨ªå‘è·ç¦»çš„<code>ä¸€åŠåˆ°ä¸‰åˆ†ä¹‹äºŒ</code>å‘ç”Ÿçªç ´ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æŒç»­å½¢æ€-ä¸‰è§’å½¢.jpg" /><p>è®¡ç®—è¶‹åŠ¿æ–¹å¼å‡ä¸ºï¼š</p><blockquote><p>ä»çªç ´ç‚¹å¼€ç›´çº¿çªç ´ä¸€ä¸ªä¸‰è§’å½¢åº•è¾¹çš„è·ç¦»ã€‚<br>äº¤æ˜“é‡ä¸€èˆ¬éšç€ä¸‰è§’å½¢ä¸¤è¾¹é—´è·çš„å‡å°è€Œå‡å°‘ï¼Œè€Œååœ¨çªç ´ä¹‹åå¤§å¹…å¢åŠ ã€‚</p></blockquote><p>å¦‚ä¸‹å›¾ä¸Šå‡ä¸‰è§’å½¢è®¡ç®—ç¤ºä¾‹<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æŒç»­å½¢æ€-ä¸‰è§’å½¢.jpg" /></p><h4 id="å–‡å­å½¢-é’»çŸ³è¡Œ">å–‡å­å½¢&amp;é’»çŸ³è¡Œ</h4><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æŒç»­å½¢æ€-å–‡å­å½¢.jpg" title="å–‡å­å½¢" /><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æŒç»­å½¢æ€-é’»çŸ³å½¢.jpg" title="é’»çŸ³å½¢" /><p>æ–‡ä¸­æåˆ°ä¸å¸¸ç¢°åˆ°ï¼Œè¿™é‡Œå°±æš‚æ—¶ä¸è€ƒè™‘ã€‚</p><h4 id="æ——å½¢-ä¸‰è§’æ——å½¢">æ——å½¢&amp;ä¸‰è§’æ——å½¢</h4><p>å½¢æˆå½¢æ€æ˜¯ï¼šä¸€æ®µæ¿€å¢çš„äº¤æ˜“é‡å½¢æˆçš„é™¡å³­å¡ï¼Œè¡¨ç¤ºæ——æ†ï¼Œæ¥ç€è¯•ä¸€æ®µäº¤æ˜“é‡é€æ¸å‡å°çš„æ³¢åŠ¨äº¤æ˜“ï¼Œä¹‹åæ˜¯çªç ´å‹çš„åˆæ˜¯æ¿€å¢çš„äº¤æ˜“é‡å®Œæˆæ•´ä¸ªå½¢æ€ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æŒç»­å½¢æ€-æ——å½¢.jpg" title="æ——å½¢" /><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æŒç»­å½¢æ€-ä¸‰è§’æ——å½¢.jpg" title="ä¸‰è§’æ——å½¢" /><h5 id="è®¡ç®—">è®¡ç®—</h5><p>å…³äºè®¡ç®—æ²¡æœ‰éå¸¸çš„ç†è§£ï¼Œå¤§è‡´ç†è§£æ˜¯çªç ´ç‚¹ä»¥ä¸Šæ•´ä¸ªæ——å­çš„ä¸€åŠé«˜åº¦ã€‚</p><h4 id="æ¥”å½¢">æ¥”å½¢</h4><p>ç±»ä¼¼äºä¸‰è§’å½¢ï¼Œä½†æ˜¯ä¸¤æ¡è¾¹éƒ½ä¸æ°´å¹³ã€‚</p><p>ä¸Šæ¶¨å€¾æ–œå‘ä¸‹ï¼Œä¸‹è·Œå€¾æ–œå‘ä¸Šã€‚<br>ä¸€èˆ¬éœ‡è¡éœ€è¦è¶…è¿‡ä¸‰è§’å½¢é¡¶ç‚¹çš„<strong>ä¸‰åˆ†ä¹‹äºŒæˆ–è€…é¡¶ç‚¹</strong>æ‰ä¼šå‘ç”Ÿçªç ´ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æŒç»­å½¢æ€-æ¥”å½¢.jpg" title="æ¥”å½¢" /><h4 id="çŸ©å½¢">çŸ©å½¢</h4><p>å¤§æ¦‚å°±æ˜¯æ°´å¹³éœ‡è¡çš„æ„æ€å§ã€‚</p><p>åˆ¤æ–­å…¶æ˜¯ä¸Šæ¶¨è¿˜æ˜¯ä¸‹è·Œçš„æ ‡å‡†æ˜¯ï¼šæŸ¥çœ‹å…¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šçš„<strong>äº¤æ˜“é‡</strong>ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æŒç»­å½¢æ€-çŸ©å½¢.jpg" title="çŸ©å½¢" /><h4 id="ps-3">ps</h4><p>ä¸åŒçš„å¸‚åœºä¸­ç»å¸¸ä¼šæœ‰ä¸åŒçš„å€¾å‘ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®å…·ä½“çš„å¸‚åœºåšç›¸åº”çš„å…·ä½“å›¾è¡¨åˆ†ææ–¹æ³•ã€‚<br>æŠŠä¸åŒçš„æŒ‡æ ‡ç›¸äº’åº”ç”¨éªŒè¯å¯¹åº”çš„ç­–ç•¥ï¼Œå¦‚æœç›¸äº’éªŒè¯åˆ™è¯´æ˜åˆ¤æ–­è¶‹åŠ¿æ˜¯æ­£ç¡®çš„ï¼Œå¦‚æœç›¸èƒŒç¦»ï¼Œåˆ™æ˜¯å¸‚åœºè½¬å‘çš„ä¸€ä¸ªè­¦å‘Šâš ï¸ã€‚</p><h3 id="äº¤æ˜“é‡å’ŒæŒä»“å…´è¶£">äº¤æ˜“é‡å’ŒæŒä»“å…´è¶£</h3><p>ä¸Šä¸€ç« ä¹Ÿæœ‰æåˆ°ï¼Œäº¤æ˜“é‡æ˜¯éå¸¸é‡è¦çš„æŒ‡æ ‡ï¼Œé…åˆä½¿ç”¨å¯ä»¥è¾¾åˆ°éå¸¸å¥½çš„æ•ˆæœã€‚</p><h4 id="å®šä¹‰">å®šä¹‰</h4><ul><li>äº¤æ˜“é‡</li></ul><blockquote><p>æŒ‡å®šæ—¶é—´å•ä½å†…æˆäº¤çš„åˆçº¦æ€»é¢ã€‚</p></blockquote><ul><li>æŒä»“å…´è¶£</li></ul><blockquote><p>æŸæ”¶å¸‚æ—¶é—´ä¸ºæ­¢ï¼Œæ‰€æœ‰æœªå¹³ä»“äº†ç»“çš„åˆçº¦çš„æ€»æ•°ã€‚</p></blockquote><h5 id="å…³è”">å…³è”</h5><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/äº¤æ˜“é‡å’ŒæŒä»“å…´è¶£-å…³è”.jpg" title="å…³è”" /><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/äº¤æ˜“é‡å’ŒæŒä»“å…´è¶£-å…³è”2.jpg" title="å…³è”2" /><h4 id="OBVå’ŒVA">OBVå’ŒVA</h4><p>OBVæ³•å°†æ¯æ—¥çš„äº¤æ˜“é‡ç®€å•çš„è¿›è¡Œè¿çº¿ï¼Œè¿™æ ·æŸ¥çœ‹è®¡ç®—æ›´æ–¹ä¾¿ã€‚</p><p>VAæ³•åˆ™æ˜¯å¯¹<strong>äº¤æ˜“é‡</strong>å’Œ<strong>æŒä»“å…´è¶£</strong>è¿›è¡Œäº†æƒé‡åˆ’åˆ†ã€‚</p><p><code>VA = &#123; [(C - L) - (H - C)] / (H - L) &#125; x V</code></p><p>H = å½“æ—¥æœ€é«˜ä»·<br>C = æ”¶ç›˜ä»·<br>L = æœ€ä½ä»·<br>V = äº¤æ˜“é‡</p><h3 id="é•¿æœŸå›¾è¡¨å’Œå•†å“æŒ‡æ•°">é•¿æœŸå›¾è¡¨å’Œå•†å“æŒ‡æ•°</h3><p>å½“ä¸­ä»‹ç»äº†ä¸€äº›å…³äºæœŸè´§ç‰¹æœ‰çš„çŸ¥è¯†ç‚¹ï¼Œè¿™é‡Œæš‚æ—¶ç”¨ä¸åˆ°ï¼Œå°±å…ˆä¸è®°å½•äº†ğŸ™ğŸ»ã€‚</p><blockquote><p>é•¿æœŸå›¾è¡¨çš„ç ”ç©¶èƒ½å‘ç°æ›´å¤šçš„ä¿¡æ¯ã€‚</p></blockquote><h3 id="ç§»åŠ¨å¹³å‡çº¿">ç§»åŠ¨å¹³å‡çº¿</h3><p>è®¡ç®—<code>10å¤©</code>çš„å¹³å‡å€¼<br><code>[10, 15, 20, 9, 8, 6, 11, 10, 15, 20]</code></p><p><strong>ç®€å•å¹³å‡çº¿</strong><code>(10 + 15 + 20 + 9 + 8 + 6 + 11 + 10 + 15 + 20) / 10</code>ã€<br><strong>çº¿æ€§åŠ æƒå¹³å‡çº¿</strong><code>(10 * 1 + 15 * 2 + 20 * 3 + 9 * 4 + 8 * 5 + 6 * 6 + 11 * 7 + 10 * 8 + 15 * 9 + 20 * 10) / (1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10)</code>ã€<br><strong>æŒ‡æ•°åŠ æƒå¹³å‡çº¿</strong>(æ¯”è¾ƒå¤æ‚)</p><p>çŸ­æœŸå‡çº¿æ¯”é•¿æœŸå‡çº¿æ›´åŠ æ•æ„Ÿï¼Œå½“ä»·æ ¼å‘ç”Ÿå˜åŠ¨ï¼Œä¼šæ›´å¿«ååº”å‡ºæ¥ã€‚<br>ä¸€èˆ¬çš„æ—¶é—´ä¸º<code>5ã€10ï¼Œ 20ï¼Œ 40ï¼Œ 60</code><br>å‡çº¿åœ¨å¸‚åœºå­˜åœ¨<strong>è¶‹åŠ¿</strong>çš„æ—¶å€™æ›´æœ‰ä½œç”¨ï¼Œä½†åœ¨<strong>éœ‡è¡</strong>å¸‚åœºä¸‹ï¼Œæ•ˆæœä¸å¥½ã€‚</p><h4 id="å…³äºå™ªå£°çš„æ§åˆ¶">å…³äºå™ªå£°çš„æ§åˆ¶</h4><ol><li>ä»·æ ¼ä¸Šç©¿æˆ–ä¸‹ç©¿å‡çº¿æ—¶ï¼Œå¿…é¡»ä¿è¯<code>å…¨æ—¥</code>ä»·æ ¼å…¨éƒ½ç©¿è¶Šã€‚</li><li>ä»·æ ¼ç©¿è¶Šéœ€è¦åˆ°è¾¾ä¸€å®šçš„ç¨‹åº¦ã€‚</li></ol><h4 id="åŒå‡çº¿">åŒå‡çº¿</h4><p>æ€»ä½“æ¥è¯´ï¼Œå¯èƒ½åŒå‡çº¿å¯¹äºå¸¸è§„äº¤æ˜“æ›´æœ‰ç”¨ã€‚<br>ä¸€æ¡é•¿æœŸå‡çº¿ + ä¸€æ¡çŸ­æœŸå‡çº¿ã€‚</p><blockquote><p>çŸ­ä¸Šç©¿é•¿ï¼Œä¹°å…¥ã€‚<br>çŸ­ä¸‹ç©¿é•¿ï¼Œå–å‡ºã€‚</p></blockquote><h4 id="å‘¨è§„åˆ™">å‘¨è§„åˆ™</h4><ul><li>å››å‘¨è§„åˆ™<ol><li>ä»·æ ¼è¶…è¿‡å‰å››ä¸ªæ—¥å†å‘¨çš„æœ€é«˜ä»·ï¼Œå¤šå¤´ã€‚</li><li>ä»·æ ¼ä½è¿‡å‰å››ä¸ªæ—¥å†å‘¨çš„æœ€ä½ä»·ï¼Œç©ºå¤´ã€‚</li><li>åœ¨ä¸€å‘¨æˆ–äºŒå‘¨å‡ºç°ä¸Šè¿°ä¿¡å·ï¼Œå³è¿›è¡Œäº¤æ˜“ï¼ˆè‡ªå·±æ ¹æ®æ–‡é™„åŠ çš„ï¼‰ã€‚</li><li>åœ¨å››å‘¨å‡ºç°ä¿¡å·æ—¶ï¼Œè€ƒå¯Ÿä¸€å‘¨æˆ–äºŒå‘¨æ˜¯å¦ä¹Ÿå‡ºç°ä¿¡å·ï¼ˆè‡ªå·±æ ¹æ®æ–‡é™„åŠ çš„ï¼‰ã€‚</li></ol></li></ul><h4 id="ps-4">ps</h4><p>å…³äºç§»åŠ¨å¹³å‡çº¿ï¼Œåœ¨<code>ã€Šæµ·é¾Ÿçš„äº¤æ˜“æ³•åˆ™ã€‹</code>ä¹¦ä¸­ä¹Ÿæœ‰å¯¹åº”çš„åº”ç”¨æ–¹å¼ï¼Œå¯¹äºè¯¥æ–¹æ³•çš„ç»†èŠ‚ï¼Œåœ¨åé¢åšè¡¥å……å§ã€‚<br>ç§»åŠ¨å‡çº¿ä¸ä»…ä»…å¯ä»¥ä½¿ç”¨åœ¨ä»·æ ¼ä¸Šï¼ŒåŒ…æ‹¬<code>äº¤æ˜“é‡</code>ã€<code>æŒä»“å…´è¶£</code>ç­‰å‡å¯ä½¿ç”¨å‡çº¿æ¥æŸ¥çœ‹å…¶è¶‹åŠ¿ã€‚</p><h3 id="æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§">æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§</h3><h4 id="æ‘†åŠ¨æŒ‡æ•°">æ‘†åŠ¨æŒ‡æ•°</h4><p>å°†ä»·æ ¼å˜åŒ–å±€é™äºä¸€ä¸ªåŒºé—´ä¸­ï¼ŒåŒ…å«ä¸€æ¡é›¶çº¿ã€‚</p><ol><li>å½“æŒ‡æ•°æ¥è¿‘<strong>ä¸Šä¸‹è¾¹ç•Œ</strong>ï¼ˆè¶…ä¹°è¶…å–ï¼‰ï¼Œæ˜¯å¸‚åœºå³å°†è½¬å‘çš„ä¿¡å·ã€‚</li><li>å½“æŒ‡æ•°å¤„äºæé™ä½ç½®å¹¶ä¸ä»·æ ¼æ–¹å‘ç›¸èƒŒç¦»æ—¶ï¼ŒåŒæ ·æ˜¯è­¦è®¯ã€‚</li><li>å½“æŒ‡æ•°ä¸Šä¸‹ç©¿è¶Šé›¶çº¿ï¼Œåˆ™æ˜¯ä¹°å–ä¿¡å·ã€‚</li></ol><h4 id="åŠ¨åŠ›æŒ‡æ•°">åŠ¨åŠ›æŒ‡æ•°</h4><p>ä½¿ç”¨å½“å‰æ”¶ç›˜ä»·å‡å»æŒ‡å®šå¤©æ•°å‰çš„æ”¶ç›˜ä»·ï¼Œå¾—åˆ°çš„å·®å€¼ã€‚<br><code>M = V - Vx</code><br><code>M</code>è¿æˆçš„çº¿å³ä¸ºæ‘†åŠ¨æŒ‡æ•°ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-åŠ¨åŠ›æŒ‡æ•°.jpg" title="åŠ¨åŠ›æŒ‡æ•°" /><p>ä½†æ˜¯è¯¥æŒ‡æ ‡ç¼ºä¹è¾¹ç•Œå€¼ï¼Œå³æ— æ³•ç•Œå®š<code>æ­¢æŸç‚¹</code>ã€‚</p><h4 id="å˜åŒ–é€Ÿåº¦æŒ‡æ•°ï¼ˆROCï¼‰">å˜åŒ–é€Ÿåº¦æŒ‡æ•°ï¼ˆROCï¼‰</h4><p><code>ROC = 100 * (V / Vx)</code></p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-ROC.jpg" title="ROC" /><h4 id="ç§»åŠ¨å¹³å‡çº¿æ„é€ æ‘†åŠ¨æŒ‡æ•°">ç§»åŠ¨å¹³å‡çº¿æ„é€ æ‘†åŠ¨æŒ‡æ•°</h4><p>åˆ©ç”¨<strong>çŸ­æœŸ</strong> / <strong>é•¿æœŸ</strong>çš„å€¼ä½œä¸ºæ‘†åŠ¨æŒ‡æ•°ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-ç§»åŠ¨å¹³å‡çº¿æ‘†åŠ¨æŒ‡æ•°.jpg" title="ç§»åŠ¨å¹³å‡çº¿æ‘†åŠ¨æŒ‡æ•°" /><h4 id="æ‘†åŠ¨æŒ‡æ•°çš„ä¸´ç•Œå€¼">æ‘†åŠ¨æŒ‡æ•°çš„ä¸´ç•Œå€¼</h4><p>å½“å½“å‰æŒ‡æ•°è¾¾åˆ°ä¸Šä¸‹çš„ä¸´ç•Œå€¼æ—¶ï¼Œæ˜¯é‡è¦çš„ä¿¡å·ï¼Œæ„å‘³ç€å¸‚åœºå­˜åœ¨<code>è¶…ä¹°è¶…å–</code>çš„æƒ…å†µã€‚<br>æ¯”å¦‚å‡è®¾ä¸´ç•Œå€¼ä¸º<code>0-100</code>ï¼Œåˆ™åœ¨ä¸Šå‡åˆ°<code>70</code>æˆ–ä¸‹é™åˆ°<code>30</code>æ—¶ï¼Œä¾¿æ˜¯é‡è¦çš„ä¿¡å·ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-ä¸´ç•Œå€¼.jpg" title="ä¸´ç•Œå€¼" /><h4 id="ç›¸äº’èƒŒç¦»">ç›¸äº’èƒŒç¦»</h4><p>å½“ä»·æ ¼é¡ºåº”è¶‹åŠ¿è€Œè¡ŒåŠ¨æ—¶ï¼Œå¦‚æœå‡ºç°æ‘†åŠ¨æŒ‡æ•°ä¸ä»·æ ¼ç›¸<strong>èƒŒç¦»</strong>çš„è¿åŠ¨æ—¶ï¼Œè¯´æ˜æ˜¯å¸‚åœºå³å°†<strong>åè½¬</strong>çš„ä¿¡å·ã€‚</p><h4 id="ç›¸å¯¹åŠ›åº¦æŒ‡æ•°-RSI">ç›¸å¯¹åŠ›åº¦æŒ‡æ•°(RSI)</h4><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-RSI.jpg" title="RSI" /><p>æ­¤æŒ‡æ•°èƒ½é¢„é˜²ä»·æ ¼çŸ­æ—¶é—´å¤§å¹…å˜åŠ¨è€Œä¸è¢«å¯Ÿè§‰çš„æƒ…å†µï¼Œå¹¶ä¸”å…¶ä¸éœ€è¦å»åŠ¨æ€è®¡ç®—ä¸Šä¸‹è¾¹ç•Œã€‚<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-RSIå…¬å¼.jpg" title="RSIå…¬å¼" /></p><p>ä¸Šæ¶¨ï¼ˆä¸‹è·Œï¼‰æ”¶ç›˜ä»·å¹³å‡å€¼å°±æ˜¯å‰<code>x</code>å¤©å†…ä¸Šæ¶¨ï¼ˆä¸‹è·Œï¼‰çš„æ”¶ç›˜ä»·ç›¸åŠ çš„å’Œå†é™¤ä»¥<code>x</code></p><p>é€šå¸¸<code>x</code>çš„ä½¿ç”¨å¤©æ•°ï¼Œä¸€èˆ¬æ˜¯<code>14</code>æˆ–è€…<code>9</code>ï¼Œæ—¶é—´è¶ŠçŸ­ï¼Œå¯¹ä»·æ ¼çš„å˜åŒ–è¶Šæ•æ„Ÿã€‚<br>ä¸Šä¸‹è¾¹ç•Œä¹Ÿå˜æˆäº†å›ºå®šçš„<code>0-100</code>ã€‚<br>æ‰€ä»¥å…¶ä¸´ç•Œå€¼ä¹Ÿå˜æˆäº†<code>(30, 70)</code>æˆ–è€…<code>(20, 80)</code></p><ul><li>å½“ç„¶æŒ‡æ•°ä¹Ÿæ”¯æŒå‰é¢æ‰€è¯´çš„é‚£äº›<code>è¶‹åŠ¿è·Ÿè¸ª</code>çš„è®¡ç®—æ–¹æ³•ã€‚<br>å¦‚ï¼š<br>å½“æŒ‡æ•°åœ¨ä¸Šä¸‹è¾¹ç•Œ<strong>ä»¥å¤–</strong>çš„æ—¶å€™ï¼Œä¸”ä»·æ ¼ä¸æŒ‡æ•°æ–¹å‘ç›¸èƒŒç¦»æ—¶ï¼Œä¾¿æ˜¯éå¸¸é‡è¦çš„è­¦è®¯ã€‚</li><li>é¡ºä¾¿é™„ä¸Šä½œè€…çš„ä¸€æ®µç»“è®ºã€‚</li></ul><blockquote><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-RSIä½œè€…ç»“è®º.jpg" title="RSIä½œè€…ç»“è®º" />  </blockquote><h4 id="éšæœºæŒ‡æ•°ï¼ˆK-Dï¼‰">éšæœºæŒ‡æ•°ï¼ˆK%Dï¼‰</h4><p>å…¬å¼ï¼š<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-éšæœºæŒ‡æ•°K-D-K.jpg" title="éšæœºæŒ‡æ•°ï¼ˆK%Dï¼‰-K" /></p><blockquote><p>C = å…šæ—¥çš„æ”¶ç›˜ä»·<br>Lx = å‰xå¤©çš„æœ€ä½ä»·<br>Hx = å‰xå¤©çš„æœ€é«˜ä»·<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-éšæœºæŒ‡æ•°K-D-D.jpg" title="éšæœºæŒ‡æ•°ï¼ˆK%Dï¼‰-D" /><br>Hx = (C - Lx) æ€»å’Œ<br>Lx = (Hx - Lx) æ€»å’Œ</p></blockquote><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ‘†åŠ¨æŒ‡æ•°å’Œç›¸åæ„è§-éšæœºæŒ‡æ•°K-D.jpg" title="éšæœºæŒ‡æ•°ï¼ˆK%Dï¼‰" /> <h3 id="æ—¥å†…ç‚¹æ•°å›¾">æ—¥å†…ç‚¹æ•°å›¾</h3><p>æ—¥å†…å›¾ç›¸å¯¹æ¥è¯´å¯¹äºä»·æ ¼çš„å˜åŒ–æ›´åŠ çµæ•ï¼Œå¹¶ä¸”èƒ½çœ‹åˆ°é•¿çº¿å›¾æ‰€çœ‹ä¸åˆ°çš„è¶‹åŠ¿ã€‚<br>æ¯”å¦‚åœ¨æ—¥å†…ä»·æ ¼çš„<code>çªç ´</code>ï¼Œä»¥åŠ<code>äº¤æ˜“é‡</code>çš„çŸ­æœŸå˜åŒ–ã€‚</p><p>å…³äºç»˜åˆ¶çš„åŠæ³•ï¼Œå› ä¸ºç¯‡å¹…é•¿ï¼Œå…ˆåœ¨è¿™é‡Œä»¥å›¾ç‰‡è®°å½•ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ—¥å†…ç‚¹æ•°å›¾-ç”»æ³•.jpg" title="ç”»æ³•" />  <img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ—¥å†…ç‚¹æ•°å›¾-ç”»æ³•-2.jpg" title="ç”»æ³•-2" /> <p>æ¥è‡ª<a href="https://jingyan.baidu.com/article/fcb5aff77e9818edaa4a7138.html">åº¦å¨˜</a>çš„ç­”æ¡ˆã€‚</p><h4 id="å¯†é›†åŒº">å¯†é›†åŒº</h4><blockquote><p>åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œä»·æ ¼æ°´å¹³ï¼ˆæ¨ªå‘ï¼‰ä¼¸å±•ã€‚</p></blockquote><p>å¯†é›†åŒºå¦‚æœå‡ºç°åœ¨é¡¶éƒ¨ï¼Œåˆ™è¡¨ç¤ºæ˜¯å–å‡ºçš„æœºä¼šã€‚<br>å¯†é›†åŒºå¦‚æœå‡ºç°åœ¨åº•éƒ¨ï¼Œåˆ™è¡¨ç¤ºæ˜¯ä¹°å…¥çš„æœºä¼šã€‚</p><h4 id="ä»·æ ¼ç›®æ ‡">ä»·æ ¼ç›®æ ‡</h4><p>è®¡ç®—æ³¢åŠ¨å¹…åº¦çš„å‚ç›´é«˜åº¦ï¼Œç„¶åå‘ä¸Šæˆ–å‘ä¸‹æŠ•å°„ç›¸åŒçš„è·ç¦»ã€‚</p><h4 id="ps-5">ps</h4><p>å…¶å®å¯¹äºæ—¥å†…ç‚¹æ•°å›¾ä¸ä»…ä»…å¯ä»¥åšçŸ­æœŸäº¤æ˜“ï¼Œä¹Ÿå¯ä»¥ç”¨äºé•¿æœŸäº¤æ˜“ã€‚<br>ä¸ªäººè®¤ä¸ºï¼Œå¯ä»¥åœ¨è¿›è¡Œé•¿æœŸäº¤æ˜“æ—¶ï¼Œå¯¹ä¿¡å·è¿›è¡Œ<strong>éªŒè¯</strong>ã€‚</p><h3 id="ä¸‰ç‚¹è½¬å‘å’Œä¼˜åŒ–ç‚¹æ•°å›¾">ä¸‰ç‚¹è½¬å‘å’Œä¼˜åŒ–ç‚¹æ•°å›¾</h3><p>è¿™æ˜¯ç‚¹æ•°å›¾çš„ä¸€ä¸ªå˜ç§ï¼Œæœ€å¤§ä¼˜ç‚¹å°±æ˜¯æ•°æ®è·å–æ–¹ä¾¿ï¼Œå®ƒåªéœ€è¦æ¯å¤©çš„<strong>æœ€é«˜ä»·</strong>å’Œ<strong>æœ€ä½ä»·</strong>ã€‚</p><p>å…³äºç”»æ³•ï¼Œè¿™é‡Œä¹Ÿåªèƒ½ç®€å•åšä¸ªå›¾ç‰‡ä»‹ç»äº†ã€‚</p><blockquote><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/ä¸‰ç‚¹è½¬å‘å’Œä¼˜åŒ–ç‚¹æ•°å›¾-ç”»æ³•.jpg" title="ç”»æ³•" />  </blockquote><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/ä¸‰ç‚¹è½¬å‘å’Œä¼˜åŒ–ç‚¹æ•°å›¾-ç”»æ³•-2.jpg" title="ç”»æ³•-2" />  <h4 id="ps-6">ps</h4><p>å…³äºæœ¬ç« å’Œä¸Šä¸€ç« ï¼Œè¿˜æœ‰å¾ˆå¤šåœ°æ–¹æ²¡æœ‰å¼„æ‡‚ï¼Œæœ‰å¾…å¤è¯»ğŸ™ğŸ»ã€‚</p><h3 id="è‰¾ç•¥ç‰¹æ³¢æµªç†è®º">è‰¾ç•¥ç‰¹æ³¢æµªç†è®º</h3><h4 id="ç†è®º">ç†è®º</h4><p>å¸‚åœºéµå¾ªè§„å¾‹ï¼Œ<strong>5</strong>æµªä¸Šæ¶¨ï¼Œ<strong>3</strong>æµªä¸‹è·Œã€‚<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è‰¾ç•¥ç‰¹æ³¢æµªç†è®º-åŸºç¡€.jpg" title="åŸºç¡€" /></p><p>å…¶ä¸­<code>2</code>æµªå’Œ<code>4</code>æµªæ˜¯<code>1</code>å’Œ<code>3</code>æµªçš„è°ƒæ•´ã€‚<br><code>1ã€3ã€5</code>æµªä¸ºä¸»æµªã€‚<br>æœ€å<code>aã€bã€c</code>æµªä¸ºè°ƒæ•´æµªã€‚</p><p>å¹¶ä¸”æµªå¯ä»¥å‘ä¸‹æˆ–è€…å‘ä¸Šç¼©å°æˆ–è€…æ‰©å¤§è§„æ¨¡ã€‚<br>ä¸€æµªä¹Ÿå¯ä»¥æ‹†åˆ†æˆæ›´å°çš„5æµªã€‚<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è‰¾ç•¥ç‰¹æ³¢æµªç†è®º-ç¼©æ”¾.jpg" title="ç¼©æ”¾" /></p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è‰¾ç•¥ç‰¹æ³¢æµªç†è®º-8æµª.jpg" title="8æµª" /> <h4 id="ä¸€äº›Tips">ä¸€äº›Tips</h4><ol><li>ä¸‰ä¸ªä¸»æµªåªæœ‰ä¸€ä¸ªä¸»æµªå»¶é•¿ï¼Œå¦å¤–ä¸¤ä¸ªæ—¶é—´å’Œå¹…åº¦ç›¸ç­‰ã€‚</li><li>1æµª ä¹˜ <code>1.618</code> åŠ  2æµªåº•ç‚¹ = 3æµªç›®æ ‡ã€‚</li><li>1æµª ä¹˜ 2 * 1.618ï¼ŒåŠ ä¸Šé¡¶ æˆ– åº• = 5æµªçš„åŒºé—´ã€‚</li><li>å¦‚æœ1æµªå’Œ3æµªå¤§è‡´ç›¸ç­‰ï¼Œé¢„æœŸ5æµªå»¶é•¿ã€‚ç›®æ ‡åŠ ä¸ª=(1æµªåº•ç‚¹+3æµªé¡¶ç‚¹çš„è·ç¦») * 1.618 + 4æµªåº•ç‚¹ã€‚</li><li>è°ƒæ•´æµªä¸­ï¼Œå¦‚æœæ˜¯5-3-5é”¯è¡Œè°ƒæ•´ï¼Œé‚£ä¹ˆcæµªå¸¸å¸¸ä¸aæµªç›¸ç­‰ã€‚</li><li>cæµª=aæµªé•¿åº¦*0.618 - aæµªçš„åº•ã€‚</li><li>åœ¨3-3-5å¹³å°è¡Œè°ƒæ•´ï¼Œbæµªå¯èƒ½æ‰“åˆ°ç”šè‡³è¶…è¿‡aæµªçš„é¡¶ç‚¹ï¼Œé‚£ä¹ˆï¼Œcæµªé•¿åº¦ç­‰äºaæµªé•¿åº¦çš„1.618å€ã€‚</li><li>åœ¨å¯¹ç§°ä¸‰è§’å½¢ä¸­ï¼Œæ¯ä¸ªåç»­æµªéƒ½çº¦ç­‰äºå‰ä¸€æµªçš„0.618å€ã€‚</li></ol><ul><li>åœ¨è‚¡å¸‚ä¸­å¸¸å¸¸æ˜¯<code>3æµª</code>å»¶é•¿ã€‚</li><li>åœ¨è‚¡å¸‚ä¸­<code>4</code>æµªä¸å¯ä¸<code>1</code>æµªé‡å ã€‚</li></ul><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è‰¾ç•¥ç‰¹æ³¢æµªç†è®º-æ€»ç»“.jpg" title="æ€»ç»“" /> <h3 id="æ—¶é—´å‘¨æœŸ">æ—¶é—´å‘¨æœŸ</h3><p>ä»·æ ¼æ€»æ˜¯æŒ‰ç…§ä¸€å®šçš„å‘¨æœŸè§„å¾‹å¾ªç¯å‘ç”Ÿå˜åŒ–ã€‚</p><p>å‘¨æœŸè¡¨ç°ä¸ºä¸‰ä¸ªç‰¹å¾ï¼š<strong>æ³¢å¹…</strong>ã€<strong>å‘¨æœŸé•¿åº¦</strong>ã€<strong>ç›¸ä½</strong></p><ul><li>æ³¢å¹…<br>è¡¨ç¤ºå‘¨æœŸçš„é«˜åº¦ï¼Œä¹Ÿå°±æ˜¯æ³¢è°·åˆ°æ³¢å³°çš„è·ç¦»</li><li>å‘¨æœŸé•¿åº¦<br>è¡¨ç¤ºè°·åˆ°è°·ä¹‹é—´çš„è·ç¦»ã€‚<br>å³°ä¸å³°ä¹‹é—´çš„è·ç¦»ä¸å¯é ï¼Œæ‰€ä»¥ä½¿ç”¨è°·ã€‚</li><li>ç›¸ä½<br>æ³¢è°·çš„æ—¶é—´ä½ç½®ã€‚<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ—¶é—´å‘¨æœŸ-ç›¸ä½.jpg" title="ç›¸ä½" /></li></ul><h4 id="å‘¨æœŸç†è®º">å‘¨æœŸç†è®º</h4><h5 id="å åŠ åŸç†">å åŠ åŸç†</h5><p>å¸‚åœºä»·æ ¼å˜æ¢ä¸€èˆ¬éƒ½æ˜¯ç”±å¤šä¸ªå‘¨æœŸçš„ç®€å•ç›¸åŠ å¾—å‡ºçš„ã€‚</p><h5 id="è°æ³¢åŸç†">è°æ³¢åŸç†</h5><p>ç›¸é‚»å‘¨æœŸçš„é•¿åº¦ä¸€èˆ¬éƒ½å­˜åœ¨å€æ•°å…³ç³»ã€‚<br>æ¯”å¦‚ä¸Šä¸€ä¸ªå‘¨æœŸé•¿åº¦ä¸º20å¤©ï¼Œåˆ™ä¸‹ä¸€ä¸ªè¾ƒçŸ­å‘¨æœŸå¯èƒ½æ˜¯10å¤©ã€‚</p><h5 id="åŒæ­¥åŸç†">åŒæ­¥åŸç†</h5><p>ä¸åŒé•¿åº¦çš„å‘¨æœŸç»å¸¸åœ¨åŒä¸€æ—¶åˆ»åˆ°è¾¾æ³¢è°·ã€‚<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ—¶é—´å‘¨æœŸ-å‘¨æœŸç†è®º.jpg" title="å‘¨æœŸç†è®º" /></p><h5 id="æ¯”ä¾‹åŸç†">æ¯”ä¾‹åŸç†</h5><p>å‘¨æœŸé•¿åº¦ä¸æ³¢å¹…å­˜åœ¨æ¯”ä¾‹å…³ç³»ï¼Œå‘¨æœŸè¶Šé•¿æ³¢å¹…è¶Šé•¿ã€‚</p><h4 id="æ³¢å³°å·¦ç§»å³ç§»">æ³¢å³°å·¦ç§»å³ç§»</h4><p>æ³¢å³°çš„å·¦ç§»å³ç§»é¢„ç¤ºäº†å¸‚åœºçš„è¶‹åŠ¿ã€‚<br>æ­£å¸¸æ³¢å³°åº”è¯¥å¤„äºä¸¤è°·ä¹‹é—´çš„ä¸­ç‚¹ï¼Œå³ç§»åˆ™ä¸ºå¸‚åœºä¸Šæ¶¨ï¼Œå·¦ç§»ä¸ºå¸‚åœºä¸‹è·Œã€‚<br>ç®€å•æ¥è¯´ï¼Œå¸‚åœºä¸Šæ¶¨åˆ™ä¸Šæ¶¨å¤©æ•°å¤šäºä¸‹è·Œå¤©æ•°ï¼Œåˆ™å³ç§»ã€‚</p><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/æ—¶é—´å‘¨æœŸ-æ³¢å³°å·¦ç§»å³ç§».jpg" title="æ³¢å³°å·¦ç§»å³ç§»" /> <h3 id="è®¡ç®—æœºå’Œäº¤æ˜“ç³»ç»Ÿ">è®¡ç®—æœºå’Œäº¤æ˜“ç³»ç»Ÿ</h3><h4 id="éŸ¦å°”æ–¯-ç‹å°”å¾·çš„æŠ›ç‰©çº¿å’Œæ–¹å‘æ€§è¿åŠ¨ç³»ç»Ÿ">éŸ¦å°”æ–¯-ç‹å°”å¾·çš„æŠ›ç‰©çº¿å’Œæ–¹å‘æ€§è¿åŠ¨ç³»ç»Ÿ</h4><ul><li>æŠ›ç‰©çº¿ç³»ç»Ÿï¼ˆSARï¼‰</li><li>æ–¹å‘æ€§è¿åŠ¨ç³»ç»Ÿï¼ˆDMIï¼‰<br>åˆ©ç”¨<code>ADXR</code>çº¿ï¼ŒæŒ‰ç…§<code>0-100</code>è¿›è¡Œè¯„çº§ï¼Œæ•°å€¼è¶Šé«˜è¡¨ç¤ºè¶‹åŠ¿è¶Šå¼ºã€‚<br>è¶…è¿‡<strong>20</strong>å³è¡¨ç¤ºå­˜åœ¨è¶‹åŠ¿ã€‚</li><li>å•†å“é€‰æ‹©æŒ‡æ•°ï¼ˆCSIï¼‰</li></ul><p>å…³äºæ­¤æ¦‚å¿µæ–‡ç« æ²¡æœ‰è¿‡å¤šä»‹ç»ï¼Œä¸ªäººè®¤ä¸ºå¯¹å¸‚åœºåˆ†ææä¸ºæœ‰ç”¨ï¼Œæ•…åæœŸä¼šç»§ç»­é˜…è¯»<a href="https://book.douban.com/subject/30600413/">ã€ŠæŠ€æœ¯äº¤æ˜“ç³»ç»Ÿæ–°æ¦‚å¿µã€‹</a>ã€‚</p><h4 id="æŒ‡æ ‡å·¥å…·åˆ†ç±»">æŒ‡æ ‡å·¥å…·åˆ†ç±»</h4><p>è¿™é‡Œåšä¸€ä¸ªè®°å½•ğŸ˜Šã€‚<br><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/è®¡ç®—æœºå’Œäº¤æ˜“ç³»ç»Ÿ-æŠ€æœ¯æŒ‡æ ‡åˆ—è¡¨.jpg" title="æŠ€æœ¯æŒ‡æ ‡åˆ—è¡¨" /></p><h4 id="å…¶ä»–">å…¶ä»–</h4><p>è¿™é‡Œæœ€åè®°å½•ä¸‹<strong>æŸ¥å°”æ–¯-å¸•ç‰¹å°”</strong>çš„<code>ã€Šå•†å“å’Œè‚¡ç¥¨çš„æŠ€æœ¯æ€§äº¤æ˜“ç³»ç»Ÿã€‹</code>å¬è¯´ä¹Ÿä¸é”™ï¼Œå…³äºè‡ªåŠ¨åŒ–äº¤æ˜“ç­–ç•¥ï¼Œä½†æ˜¯ç™¾åº¦äº†æ²¡æ‰¾åˆ°ğŸ¤·ğŸ»â€â™€ï¸ã€‚</p><h3 id="èµ„é‡‘ç®¡ç†å’Œäº¤æ˜“ç­–ç•¥">èµ„é‡‘ç®¡ç†å’Œäº¤æ˜“ç­–ç•¥</h3><p>å®Œæ•´çš„äº¤æ˜“æµç¨‹åŒ…å«ä¸‰æ–¹é¢ï¼šç¡®è®¤æ–¹å‘ï¼Œç¡®è®¤æ—¶æœºï¼Œç¡®è®¤èµ„é‡‘ã€‚</p><p>ç®¡æ§èµ„é‡‘çš„é…ç½®æ˜¯ä¸€ä¸ªæˆåŠŸäº¤æ˜“çš„å…³é”®ã€‚<br>åˆç†åˆ†é…èµ„é‡‘èƒ½è®©æˆ‘ä»¬åœ¨å¸‚åœºçš„å„ç§æƒ…å†µä¸‹éƒ½æ¸¸åˆƒæœ‰ä½™ã€‚</p><h4 id="èµ„é‡‘åˆ†é…">èµ„é‡‘åˆ†é…</h4><ol><li>æ€»äº¤æ˜“èµ„é‡‘æ§åˆ¶åœ¨ä¸ªäººæ€»èµ„äº§çš„**50%**ä»¥å†…ã€‚<br>å‰©ä½™èµ„é‡‘å¯ç”¨äºè´­ä¹°ä½é£é™©ã€ç¨³å®šå›æŠ¥çš„äº§å“ã€‚</li><li><strong>å•ä¸ªå¸‚åœº</strong>èµ„é‡‘æŠ•å…¥é™åˆ¶åœ¨<strong>æ€»æŠ•å…¥èµ„é‡‘</strong>çš„<strong>10%-15%</strong>ã€‚</li><li><strong>å•ä¸ªå¸‚åœº</strong>æœ€å¤§äºæŸé™åˆ¶åœ¨<strong>æ€»æŠ•å…¥èµ„é‡‘</strong>çš„<strong>5%</strong>ã€‚</li><li>ä»»ä½•å¸‚åœºä¸ŠæŠ•å…¥ä¿è¯é‡‘æ€»é¢ä¸èƒ½è¶…è¿‡æ€»æŠ•å…¥èµ„é‡‘çš„20%-25%ï¼ˆä¸ªäººè®¤ä¸ºåº”è¯¥æ˜¯é’ˆå¯¹æœŸè´§å¸‚åœºçš„ï¼‰ã€‚</li></ol><h4 id="å¤´å¯¸åˆ†é…">å¤´å¯¸åˆ†é…</h4><p>é‡‡ç”¨ä¸Šè¿°èµ„é‡‘åˆ†é…çš„<code>10%</code>ä¸ºæ ‡å‡†ï¼Œå‡è®¾è´¦æˆ·èµ„é‡‘ä¸º<code>100000</code>ï¼Œé»„é‡‘æ¯è‚¡ä¸º<code>100</code>ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨äºä¹°å…¥é»„é‡‘çš„èµ„é‡‘ä¸º<code>100000 * 0.1 = 10000</code>ã€‚<br>è€Œè‚¡ç¥¨è‡³å°‘éœ€è¦ä¹°ä¸€æ‰‹ï¼Œé‚£ä¹ˆå¯ä»¥ä¹°å…¥é»„é‡‘çš„è‚¡æ•°ä¸º<code>10000 / 100 = 100</code>ï¼Œåªèƒ½ä¹°100è‚¡ã€‚</p><h4 id="åˆ†æ•£æŠ•èµ„ä¸é›†ä¸­æŠ•èµ„">åˆ†æ•£æŠ•èµ„ä¸é›†ä¸­æŠ•èµ„</h4><p>æˆ‘ä»¬å¯ä»¥å°†èµ„é‡‘æŠ•å…¥å‡ ä¸ªä¸åŒçš„ã€æ¯«ä¸ç›¸å…³çš„å¸‚åœºä¸­ï¼Œè¿™æ ·å¯ä»¥å°†é£é™©é™ä½ï¼Œé¿å…å‡ºç°åœ¨ä¸€æ£µæ ‘ä¸ŠåŠæ­»çš„æƒ…å†µã€‚<br>ä½†ä¹Ÿåº”å½“é¿å…<strong>è¿‡åˆ†</strong>åˆ†æ•£ã€‚<br>æ­£å¸¸é€‰æ‹©<strong>4-6</strong>ä¸ªå¸‚åœºã€‚</p><h4 id="è®¾ç½®ä¿æŠ¤æ€§æ­¢æŸæŒ‡ä»¤">è®¾ç½®ä¿æŠ¤æ€§æ­¢æŸæŒ‡ä»¤</h4><p><strong>åŠæ—¶æ­¢æŸï¼ï¼ï¼ï¼</strong><br>æ§åˆ¶ä¸€æ¬¡ç›ˆåˆ©=ä¸‰æ¬¡äºæŸã€‚</p><h4 id="å¤åˆå¤´å¯¸">å¤åˆå¤´å¯¸</h4><p>å°†äº¤æ˜“åˆ°å¸‚åœºä¸­çš„èµ„é‡‘åˆ†ä¸º<strong>è·ŸåŠ¿å¤´å¯¸</strong>å’Œ<strong>äº¤æ˜“å¤´å¯¸</strong>ã€‚</p><ul><li>è·ŸåŠ¿å¤´å¯¸<br>ä¸“é—¨ç”¨æ¥è·Ÿè¸ªé•¿æœŸçš„è¶‹åŠ¿ï¼Œè®¾ç½®è¾ƒé•¿çš„æ­¢æŸå‘½ä»¤ã€‚</li><li>äº¤æ˜“å¤´å¯¸<br>ä¸“é—¨ç”¨æ¥åœ¨çŸ­æœŸçš„è¶‹åŠ¿ä¸­ï¼Œé¢‘ç¹çš„åšäº¤æ˜“ã€‚</li></ul><h4 id="äº¤æ˜“ç­–ç•¥">äº¤æ˜“ç­–ç•¥</h4><ul><li>çªç ´ä¿¡å·<br>å¯ä»¥é€‰æ‹©åœ¨çªç ´ä¿¡å·å‰ã€ä¸­ã€ååˆ†åˆ«è¿›å…¥å¸‚åœºã€‚</li><li>æ”¯æ’‘ã€é˜»æŒ¡<br>è¶‹åŠ¿é€¼è¿‘æ”¯æ’‘æˆ–é˜»æŒ¡ä½æ—¶ï¼Œæ˜¯é‡è¦ä¿¡å·ã€‚</li></ul><h4 id="æŠ€æœ¯å› ç´ ç»“åˆèµ„é‡‘ç®¡ç†">æŠ€æœ¯å› ç´ ç»“åˆèµ„é‡‘ç®¡ç†</h4><p>ç»“åˆä¸Šé¢çš„å¤´å¯¸é…ç½®ã€‚<br>å‡å®šè¿˜æ˜¯ä¹°å…¥é»„é‡‘ï¼Œä¹°å…¥èµ„é‡‘ä¸º<code>100000</code>ï¼Œä¹°å…¥ä»·æ ¼ä¸º<code>100</code>ï¼Œåˆ™å¯ä»¥ä¹°å…¥<code>1000</code>è‚¡ã€‚<br>åŠ ä¸Šé£é™©å› ç´ ã€‚<br>æœ€è¿‘çš„æ”¯æ’‘ä½ç½®ä¸º<code>90</code>ï¼Œåˆ™æœ€å¤§äºæŸé‡‘é¢ä¸º<code>10 * 1000 = 10000</code>ã€‚<br>è€Œè®¾ç½®çš„æœ€å¤§æ‰¿å—é£é™©ä¸ºèµ„é‡‘çš„<code>5%</code>ï¼Œä¸º<code>0.05 * 100000 = 5000</code>ã€‚<br>åˆ™æˆ‘ä»¬ä¸å¯ä»¥ç›´æ¥ä¹°å…¥<code>1000</code>è‚¡ï¼Œå› ä¸ºæˆ‘ä»¬æ‰¿å—çš„é£é™©å·²ç»è¶…è¿‡äº†é¢„æœŸçš„é£é™©ã€‚</p><h4 id="äº¤æ˜“æŒ‡ä»¤">äº¤æ˜“æŒ‡ä»¤</h4><p>åä¸‰ä¸ªæŒ‡ä»¤æœªæ›¾å¬è¯´è¿‡ï¼Œå…ˆæš‚æ—¶ä¸ç®¡ã€‚</p><h5 id="å¸‚ä»·å•">å¸‚ä»·å•</h5><p>é‡‡ç”¨å¸‚åœºçš„å½“å‰ä»·æ ¼è¿›è¡Œä¹°å–ã€‚<br>ä»–èƒ½è®©è®¢å•å¿«é€Ÿæˆäº¤ã€‚</p><h5 id="é™ä»·å•">é™ä»·å•</h5><p>è‡ªå®šä¹‰ä»·æ ¼è¿›è¡Œä¹°å–ã€‚<br>ä¹°å…¥ä»·ä¸€èˆ¬ä½äºå¸‚åœºä»·ã€‚<br>å–å‡ºä»·ä¸€èˆ¬é«˜äºå¸‚åœºä»·ã€‚<br>ä¸€èˆ¬æ˜¯åœ¨å¸‚åœºæœªå‘ç”Ÿæ˜æ˜¾åŠ¨å‘æ—¶ï¼Œå‘å‡ºçš„è®¢å•ï¼Œåœ¨ä»–äººæœªå‘ç°æƒ…å†µæ—¶ã€‚</p><h5 id="æ­¢æŸå•">æ­¢æŸå•</h5><h5 id="æ­¢æŸé™ä»·å•">æ­¢æŸé™ä»·å•</h5><h5 id="è§¦å¸‚æŒ‡ä»¤">è§¦å¸‚æŒ‡ä»¤</h5><h4 id="èµ„é‡‘ç®¡ç†è¦é¢†å’Œäº¤æ˜“ç­–ç•¥ä¸¾è¦">èµ„é‡‘ç®¡ç†è¦é¢†å’Œäº¤æ˜“ç­–ç•¥ä¸¾è¦</h4><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/èµ„é‡‘ç®¡ç†å’Œäº¤æ˜“ç­–ç•¥-èµ„é‡‘ç®¡ç†è¦é¢†å’Œäº¤æ˜“ç­–ç•¥ä¸¾è¦.jpg" title="èµ„é‡‘ç®¡ç†è¦é¢†å’Œäº¤æ˜“ç­–ç•¥ä¸¾è¦" /> <h3 id="å…¨ä¹¦å¤§ä¼šä¸²">å…¨ä¹¦å¤§ä¼šä¸²</h3><h4 id="æŠ€æœ¯åˆ†ææ¸…å•">æŠ€æœ¯åˆ†ææ¸…å•</h4><img src="/images/æœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°/å…¨ä¹¦å¤§ä¼šä¸²-æŠ€æœ¯åˆ†ææ¸…å•.jpg" title="å…¨ä¹¦å¤§ä¼šä¸²-æŠ€æœ¯åˆ†ææ¸…å•" /> ## å…¶ä»–<p>è¿™æ˜¯ç¬¬ä¸€æ¬¡å…¨éƒ¨çœ‹å®Œæœ¬ä¹¦ï¼Œå¯èƒ½è¿˜éœ€è¦é‡å¤é˜…è¯»æ‰èƒ½ç†è§£é€å½»å½“ä¸­çš„ç†è®ºï¼Œæ¯”å¦‚<code>æ—¥å†…ç‚¹æ•°å›¾</code>å’Œ<code>è‰¾ç•¥ç‰¹æ³¢æµªç†è®º</code>ï¼Œç›¸å¯¹æ¥è¯´å¯èƒ½æœ‰ç‚¹éš¾äºç†è§£ï¼Œåé¢å†çœ‹ä¸€æ¬¡å§ğŸ‘ã€‚</p><blockquote><p>æœ¬äººä¸æ˜¯ä¸“ä¸šçš„äº¤æ˜“æ‰‹ï¼Œåªæ˜¯å•çº¯çš„å…´è¶£ï¼Œå¦‚æœç†è§£é”™è¯¯è¯·è§è°…ğŸ™ğŸ»ã€‚</p></blockquote><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ä»¥ä¸Šå°±æ˜¯å¯¹ã€ŠæœŸè´§å¸‚åœºæŠ€æœ¯åˆ†æç¬”è®°ã€‹ä¹¦æœ¬çš„ç®€å•ç¬”è®°ï¼Œå¹¶ä¸”ä»–ä¹Ÿå€¼å¾—è‡ªå·±å¤šæ¬¡ç¿»çœ‹é˜…è¯»ç†è§£ï¼<br>EndğŸ”šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>äº¤æ˜“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>trade finance</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-å®æ—¶ä¿å­˜</title>
    <link href="/2022/11/23/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E5%AE%9E%E6%97%B6%E4%BF%9D%E5%AD%98/"/>
    <url>/2022/11/23/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E5%AE%9E%E6%97%B6%E4%BF%9D%E5%AD%98/</url>
    
    <content type="html"><![CDATA[<h1>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-å®æ—¶ä¿å­˜</h1><h2 id="å¼€å¤´">å¼€å¤´</h2><p>æœ¬æ–‡æ˜¯æ•°æ®å¯è§†åŒ–å¼€å§‹çš„å¼€å‘ç»†èŠ‚ç¬¬äºŒç« ã€‚å…³äºå¤§å±è®¾è®¡æ—¶ï¼Œæ•°æ®çš„å®æ—¶ä¿å­˜é—®é¢˜ã€‚<br>åœ¨æˆ‘ä»¬ä½¿ç”¨åœ¨çº¿<code>excel</code>æ—¶å°±ä¼šå‘ç°ï¼Œæ¯ä¸€æ¬¡ä½ çš„æ“ä½œéƒ½æ˜¯ä¼šè¢«ä¿å­˜çš„ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼Œé¿å…äº†åœ¨ä¿®æ”¹å¤§é‡æ•°æ®ä¹‹åï¼Œä¸å°å¿ƒå…³é—­é¡µé¢æˆ–è€…æ–­ç½‘çš„æƒ…å†µï¼Œå¯¼è‡´ä¿®æ”¹å†…å®¹æ¶ˆå¤±çš„æƒ…å†µå‘ç”Ÿã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><p>å®æ—¶ä¿å­˜ä¹Ÿæœ‰å¾ˆå¤šçš„æ–¹æ¡ˆã€‚</p><h3 id="ç®€å•æ¥è¯´">ç®€å•æ¥è¯´</h3><p>ç®€å•æ¥è¯´ï¼Œå¼€å¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå®šæ—¶å°†å‰ç«¯çš„æ•°æ®ä¿å­˜åˆ°åå°ï¼Œä½†æ˜¯è¿™æ ·ä¼šé€ æˆèµ„æºçš„æµªè´¹ï¼Œæœ‰æ—¶å€™å¯èƒ½æˆ‘ä»¬å®Œå…¨æ²¡æœ‰å»æ“ä½œï¼Œåªæ˜¯å•çº¯çš„åœ¨é¡µé¢ä¸­åœç•™ï¼Œè¿™æ ·è¿˜å»é¢‘ç¹çš„è°ƒç”¨ä¿å­˜æ¥å£å®Œå…¨æ²¡æœ‰å¿…è¦ã€‚</p><h3 id="æ”¹è¿›ä¸€ä¸‹">æ”¹è¿›ä¸€ä¸‹</h3><ol><li>step-1</li></ol><p>ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åªåœ¨æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰è°ƒç”¨ä¿å­˜æ¥å£ã€‚<br>é‚£ä¹ˆæ€ä¹ˆæ‰èƒ½åšåˆ°ä¸Šé¢çš„æ–¹æ³•å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªæ–‡æœ¬æ¡†çš„å†…å®¹ï¼Œä¸å¯èƒ½æ¯è¾“å…¥ä¸€ä¸ªå­—å°±è°ƒä¸€æ¬¡ä¿å­˜ï¼Œè¿™æ ·åè€Œæ›´åŠ é¢‘ç¹è°ƒç”¨æ¥å£ã€‚<br>è¿™æ—¶å€™å°±ä¸åº”è¯¥å»ç›‘å¬è¡¨å•çš„<code>onChange</code>äº‹ä»¶ï¼Œè€Œæ˜¯å»ç›‘å¬å®ƒçš„<code>onBlur</code>äº‹ä»¶ï¼Œè¿™æ ·å°±è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> Form = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function">() =&gt;</span> &#123;&#125;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;handleChange&#125;</span> /&gt;</span></span><br>  )<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šè§£å†³äº†è°ƒç”¨é¢‘ç¹çš„é—®é¢˜ã€‚</p><ol start="2"><li>step-2</li></ol><p>ä½†æ˜¯åˆå­˜åœ¨äº†æ–°çš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬åªç›‘å¬äº†<code>onBlur</code>ï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨å¤–éƒ¨å—æ§çš„æ–¹æ³•æ¥è®¾ç½®<code>value</code>ï¼Œå¯¼è‡´æ•°æ®å›å¡«ä¼šå‡ºç°é—®é¢˜ã€‚<br>æ‰€ä»¥é€‰æ‹©åœ¨<strong>ç»„ä»¶å†…éƒ¨</strong>æ§åˆ¶ä¸€ä»½çŠ¶æ€ï¼ŒåŒæ—¶ç›‘å¬å¤–éƒ¨çŠ¶æ€çš„æ”¹å˜ï¼Œå¦‚æœæ”¹å˜äº†åˆ™å°†å†…éƒ¨çŠ¶æ€ä¸å¤–éƒ¨çŠ¶æ€è¿›è¡ŒåŒæ­¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> Form = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> &#123; value, onChange, defaultValue &#125; = props <br>  <span class="hljs-keyword">const</span> [ internalState, setInternalState ] = useState(value || defaultValue)<br><br>  <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function">() =&gt;</span> &#123;<br>    onChange(internalState)<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> onInternalChange = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    setInternalState(e.target.value)<br>  &#125;<br><br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    setInternalState(value)<br>  &#125;, [value])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;internalState&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;onInternalChange&#125;</span> <span class="hljs-attr">onBlur</span>=<span class="hljs-string">&#123;handleChange&#125;</span> /&gt;</span></span><br>  )<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¼˜åŒ–ä¸€ä¸‹">ä¼˜åŒ–ä¸€ä¸‹</h3><p>ä¸Šé¢å®Œæˆäº†æ¥å£è°ƒç”¨é¢‘ç¹çš„é—®é¢˜ï¼Œè¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–ã€‚<br>å› ä¸ºè®¾è®¡å™¨æ‰€è®¾è®¡çš„å¤§å±åŒ…å«å¤§é‡çš„é…ç½®ï¼Œå¦‚æœæ¯ä¸€æ¬¡éƒ½æ˜¯å°†æ‰€æœ‰æ•°æ®ä¸€èµ·åŒæ­¥åˆ°åç«¯ï¼Œè‚¯å®šä¼šè®©æ¥å£çš„è°ƒç”¨é€Ÿåº¦å˜æ…¢ã€‚<br>è€Œä¸”è®¾è®¡é˜¶æ®µï¼Œå¯¹äºä¿å­˜çš„æ“ä½œåˆæ˜¯éå¸¸çš„é¢‘ç¹ï¼Œè¿™æ ·è‚¯å®šä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚</p><p>è§£å†³çš„åŠæ³•å°±æ˜¯åªå°†ä¿®æ”¹çš„æ•°æ®ä¿å­˜åˆ°åç«¯ï¼Œè¿™æ ·æ¥å£è¯·æ±‚é€Ÿåº¦ä¸€å®šä¸ä¼šæ…¢ï¼Œè€Œå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿ<br>æˆ‘ä»¬å¯ä»¥é¢„å…ˆå®šä¹‰ä¸€ç³»åˆ—çš„<strong>æ“ä½œç±»å‹</strong>ï¼Œå¯¹æ¯ä¸€ä¸ªæ“ä½œç±»å‹è®¾ç½®ä¸åŒçš„æ“ä½œæ–¹æ³•ï¼Œå› ä¸ºåç«¯å’Œå‰ç«¯çš„æ•°æ®æ ¼å¼éƒ½æ˜¯ä¸€ä¸ª<code>json</code>ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åšåˆ°å‰åç«¯åŒæ­¥ã€‚<br>åªæ˜¯å¦‚æœå‰ç«¯å’Œåç«¯åˆ†å¼€ä¸¤å¥—ä»£ç å®ç°åŒä¸€ä¸ªé€»è¾‘ï¼Œé‚£æœ‰ç‚¹å¾—ä¸å¿å¤±ã€‚<br>å½“ç„¶åç«¯æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½¿ç”¨<code>node</code>æ¥è¿›è¡Œå¼€å‘ï¼Œå®Œæˆç›¸å…³é€»è¾‘ï¼ŒåŒæ—¶å¯¹å¤§å±æ“ä½œçš„æ–¹æ³•å•ç‹¬æŠ½ç¦»æˆä¸€ä¸ª<code>npm</code>åŒ…ï¼Œæ¯•ç«Ÿæœ¬èº«å®ƒå¹¶æœ‰ä¾èµ–äºå¤§å±çš„ä»»ä½•ä¸œè¥¿ã€‚</p><p>æ¯”å¦‚åƒä¸‹é¢è¿™æ ·çš„ä¿å­˜å‚æ•°ä¾‹å­ğŸŒ°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> requestParams = &#123;<br>  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;update&#x27;</span>, <span class="hljs-comment">// add delete merge...</span><br>  <span class="hljs-attr">value</span>: &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;xxxx&#x27;</span>,<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;xxxx&#x27;</span>,<br>    <span class="hljs-attr">data</span>: &#123;<br>      <span class="hljs-attr">path</span>: &#123;<br>        <span class="hljs-attr">to</span>: &#123;<br>          <span class="hljs-attr">updateData</span>: <span class="hljs-string">&#x27;xxxx&#x27;</span><br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“æ‹¿åˆ°è¿™ä»½æ•°æ®æ—¶ï¼Œæˆ‘ä»¬åªéœ€ç®€å•çš„ä¸å¤§å±æ•°æ®è¿›è¡Œåˆå¹¶å³å¯ã€‚</p><h3 id="å®Œå–„ä¸€ä¸‹">å®Œå–„ä¸€ä¸‹</h3><p>ä¸Šé¢çš„æ–¹æ³•åŸºæœ¬è¾¾åˆ°äº†å®æ—¶ä¿å­˜çš„è¦æ±‚ï¼Œä½†æ˜¯è¿˜å¯ä»¥è¿›è¡Œå®Œå–„ã€‚<br>å› ä¸ºè®¾è®¡å¤§å±çš„æ—¶å€™ï¼Œç»å¸¸å‘ç”Ÿé¢‘ç¹ä¿®æ”¹é…ç½®çš„æƒ…å†µï¼Œè™½ç„¶åšäº†<code>onBlur</code>çš„å¤„ç†ï¼Œä¸è¿‡æœ‰æ—¶å€™è°ƒç”¨çš„é¢‘ç‡è¿˜æ˜¯ä¼šå¾ˆé«˜ï¼Œå¦‚æœåˆåœ¨ç½‘ç»œçŠ¶å†µä¸å¥½çš„ç¯å¢ƒä¸‹ï¼Œé‚£ç»å¸¸å°±ä¼šå‘ç”Ÿé”™è¯¯ã€‚<br>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„è¯·æ±‚è¿›è¡Œ<strong>åˆå¹¶</strong>ã€‚</p><p>æœ¬èº«å…¶å®ä¹Ÿåªæ˜¯ä¸€ä¸ªä¸ªä¿®æ”¹å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®è¯·æ±‚æ ¼å¼æ›´æ”¹ä¸º<strong>æ•°ç»„</strong>ï¼Œåç«¯æŒ‰é¡ºåºéå†æ•°ç»„ï¼ŒåŒæ ·å¯ä»¥è¾¾åˆ°ä¿®æ”¹çš„æ•ˆæœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> requestParamsList = [<br>  &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;update&#x27;</span>, <span class="hljs-comment">// add delete merge...</span><br>    <span class="hljs-attr">value</span>: &#123;<br>      <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;xxxx&#x27;</span>,<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;xxxx&#x27;</span>,<br>      <span class="hljs-attr">data</span>: &#123;<br>        <span class="hljs-attr">path</span>: &#123;<br>          <span class="hljs-attr">to</span>: &#123;<br>            <span class="hljs-attr">updateData</span>: <span class="hljs-string">&#x27;xxxx&#x27;</span><br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">// ...</span><br>]<br></code></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬åœ¨å‰ç«¯å¼€å¯ä¸€ä¸ªè¯·æ±‚æ± ï¼Œè¿™é‡Œå‘½åæˆ<code>REQUEST_POOL</code>ï¼Œä¸€ä¸ªç­‰å¾…æ± ï¼Œå‘½åä¸º<code>PENDING_POOL</code>ã€‚<br>å½“å‘ç”Ÿæ–°çš„ä¿®æ”¹æ—¶ã€‚<br>å…ˆåˆ¤æ–­<code>PENDING_POOL</code>æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™ç›´æ¥å°†è¯·æ±‚æ”¾å…¥<code>REQUEST_POOL</code>ï¼Œå¦åˆ™æ”¾å…¥<code>PENDING_POOL</code>ã€‚<br>å¦‚æœä¸Šè¿°æ”¾å…¥çš„<code>REQUEST_POOL</code>ï¼Œå¹¶ä¸”åœ¨çŸ­æ—¶é—´å†…æ²¡æœ‰æ–°è¿›å…¥çš„è¯·æ±‚æˆ–è€…<code>REQUEST_POOL</code><strong>å·²æ»¡</strong>ï¼Œåˆ™å°†<code>REQUEST_POOL</code>å†…çš„è¯·æ±‚å‚æ•°åˆå¹¶å‘é€ã€‚<br><code>REQUEST_POOL</code>å®Œæˆè¯·æ±‚åï¼Œç»§ç»­å°†<code>PENDING_POOL</code>ä¸­çš„è¯·æ±‚åŠ å…¥åˆ°å…¶ä¸­ï¼Œ<code>PENDING_POOL</code>ä¸ºç©ºåˆ™åœæ­¢ã€‚</p><blockquote><p>æç¤º<br>è¿™ä¸€æ­¥éª¤çš„åŠŸèƒ½ç›®å‰æœªå®ç°åˆ°å¤§å±å½“ä¸­ï¼Œè¿˜åªæ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚</p></blockquote><blockquote><p>ä¸‹ä¸€ä¸ªæç¤º<br>å…³äºä¸Šé¢å®æ—¶ä¿å­˜ï¼Œè¿˜æœ‰ä¸€ä¸ªæœ€é‡è¦çš„ç‚¹ï¼šå‘é€è¯·æ±‚åï¼Œåç«¯åº”ç»™äºˆå‰ç«¯æ­£ç¡®ä¸”æ˜ç¡®çš„åé¦ˆï¼Œå‘ŠçŸ¥æ­¤æ¬¡æ›´æ–°å·²ç»å®Œæˆï¼Œå¦åˆ™ä¼šå‘ç”Ÿå‰åç«¯å­˜å‚¨æ•°æ®ä¸åŒæ­¥çš„æƒ…å†µã€‚</p></blockquote><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><p>é¡ºä¾¿åœ¨ä¸‹é¢é™„ä¸Šç›¸å…³çš„é“¾æ¥ã€‚</p><blockquote><p><a href="http://47.97.27.23/api/backend/screen/index.html">è¯•ç”¨åœ°å€</a><br><a href="https://github.com/food-billboard/create-chart/issues/2">è¯•ç”¨è´¦å·</a><br><a href="http://47.97.27.23/api/backend/create-chart-docs/index.html">æ“ä½œæ–‡æ¡£</a><br><a href="https://github.com/food-billboard/create-chart">ä»£ç åœ°å€</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>å¤§å±</category>
      
    </categories>
    
    
    <tags>
      
      <tag>lowcode react chart</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dom-diffå­¦ä¹ </title>
    <link href="/2022/11/21/dom-diff%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/11/21/dom-diff%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1>dom-diffå­¦ä¹ </h1><h2 id="ä»‹ç»">ä»‹ç»</h2><p>æœ¬æ¬¡ä»‹ç»çš„æ˜¯<code>dom-diff</code>çš„é€»è¾‘ï¼Œä»–å¯¹äºæˆ‘ä»¬åœ¨ä½¿ç”¨ç›¸å…³æ¡†æ¶æ—¶ï¼Œèƒ½æ›´å¥½çš„ä¹¦å†™é€»è¾‘ï¼Œé¿å…å‡ºç°ä¸€äº›é—®é¢˜çš„å‡ºç°ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="snabbdom">snabbdom</h3><p><a href="https://github.com/snabbdom/snabbdom">snabbdom</a>æ˜¯ä¸€ä¸ªç²¾ç®€åŒ–ã€æ¨¡å—åŒ–ã€åŠŸèƒ½å¼ºå¤§ã€æ€§èƒ½å“è¶Šçš„è™šæ‹Ÿ DOM åº“ã€‚<br>å‡ ä¹åŒ…å«äº†è™šæ‹Ÿ Dom ç›¸å…³æ¨¡å—çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”ä¹Ÿæä¾›äº†è·¨ç«¯çš„æ”¯æŒã€‚<br>é€šè¿‡æŸ¥çœ‹ä»–çš„æºç å¯ä»¥æ›´å¥½çš„ç†è§£<code>diff</code>åŸç†ã€‚</p><h4 id="ä¸»è¦ç‰¹ç‚¹">ä¸»è¦ç‰¹ç‚¹</h4><ul><li>200 è¡Œ - ä½ å¯ä»¥é€šè¿‡ç®€å•åœ°é˜…è¯»æ‰€æœ‰æ ¸å¿ƒä»£ç æ¥å……åˆ†ç†è§£å…¶å·¥ä½œåŸç†</li><li>é€šè¿‡æ¨¡å—åŒ–å®ç°å¯æ‹“å±•</li><li>å¯¹äº vnode å’Œå…¨å±€æ¨¡å—éƒ½æä¾›äº† hookï¼Œä½ å¯ä»¥åœ¨ patch è¿‡ç¨‹æˆ–è€…å…¶ä»–åœ°æ–¹è°ƒç”¨ hook</li><li>æ€§èƒ½å“è¶Šï¼šSnabbdom æ˜¯ç›®å‰æœ€é«˜æ•ˆçš„è™šæ‹Ÿ DOM åº“ä¹‹ä¸€</li><li>Patch å‡½æ•°æœ‰ä¸€ä¸ªç›¸å½“äº reduce/scan å‡½æ•°çš„å‡½æ•°å£°æ˜ï¼Œè¿™å°†æ›´å®¹æ˜“é›†æˆå…¶ä»–å‡½æ•°å¼åº“</li></ul><h4 id="ä½¿ç”¨">ä½¿ç”¨</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;<br>init,<br>classModule,<br>propsModule,<br>styleModule,<br>eventListenersModule,<br>h <span class="hljs-keyword">as</span> createElement,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;snabbdom&quot;</span><br><br><span class="hljs-comment">// åˆå§‹åŒ–</span><br><span class="hljs-keyword">const</span> patch = init([<br><span class="hljs-comment">// é€šè¿‡ä¼ å…¥æ¨¡å—åˆå§‹åŒ– patch å‡½æ•°</span><br>classModule, <span class="hljs-comment">// å¼€å¯ classes åŠŸèƒ½</span><br>propsModule, <span class="hljs-comment">// æ”¯æŒä¼ å…¥ props</span><br>styleModule, <span class="hljs-comment">// æ”¯æŒå†…è”æ ·å¼åŒæ—¶æ”¯æŒåŠ¨ç”»</span><br>eventListenersModule, <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬</span><br>])<br><br><span class="hljs-comment">// å¤–å±‚å®¹å™¨ï¼Œç›¸å½“äºå°±æ˜¯reactæœ€å¤–éƒ¨çš„ #app</span><br><span class="hljs-keyword">const</span> container = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;container&quot;</span>)<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">  &lt;div id=&quot;container&quot; class=&quot;two classes&quot; onclick=&quot;someFn&quot;&gt;</span><br><span class="hljs-comment">    &lt;span style=&quot;font-weight: bold&quot;&gt;</span><br><span class="hljs-comment">      This is bold</span><br><span class="hljs-comment">    &lt;/span&gt;</span><br><span class="hljs-comment">     and this is just normal text</span><br><span class="hljs-comment">    &lt;a href=&quot;/foo&quot;&gt;I&#x27;ll take you places!&lt;/a&gt;</span><br><span class="hljs-comment">  &lt;/div&gt;</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">// åˆ›å»ºè™šæ‹ŸDom</span><br><span class="hljs-keyword">const</span> vnode = createElement(<br><span class="hljs-comment">// sel</span><br><span class="hljs-string">&quot;div#container.two.classes&quot;</span>,<br><span class="hljs-comment">// data åŒ…å«ä¸€äº›props attrs classç­‰ç­‰</span><br>&#123;<br><span class="hljs-attr">on</span>: &#123;<br><span class="hljs-attr">click</span>: someFn,<br>&#125;,<br>&#125;,<br><span class="hljs-comment">// children</span><br>[<br>createElement(<br><span class="hljs-comment">// sel</span><br><span class="hljs-string">&quot;span&quot;</span>,<br><span class="hljs-comment">// data</span><br>&#123;<br><span class="hljs-attr">style</span>: &#123;<br><span class="hljs-attr">fontWeight</span>: <span class="hljs-string">&quot;bold&quot;</span>,<br>&#125;,<br>&#125;,<br><span class="hljs-comment">// children</span><br><span class="hljs-string">&quot;This is bold&quot;</span><br>),<br><span class="hljs-comment">// children</span><br><span class="hljs-string">&quot; and this is just normal text&quot;</span>,<br>createElement(<br><span class="hljs-string">&quot;a&quot;</span>,<br>&#123;<br><span class="hljs-attr">props</span>: &#123;<br><span class="hljs-attr">href</span>: <span class="hljs-string">&quot;/foo&quot;</span>,<br>&#125;,<br>&#125;,<br><span class="hljs-string">&quot;I&#x27;ll take you places!&quot;</span><br>),<br>]<br>)<br><br><span class="hljs-comment">// ä¼ å…¥ä¸€ä¸ªç©ºçš„å…ƒç´ èŠ‚ç‚¹ - å°†äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆä¿®æ”¹è¯¥èŠ‚ç‚¹ï¼‰</span><br>patch(container, vnode)<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">  &lt;div id=&quot;container&quot; class=&quot;two classes&quot; onclick=&quot;anotherEventHandler&quot;&gt;</span><br><span class="hljs-comment">    &lt;span style=&quot;font-weight: bold;font-style: italic;&quot;&gt;</span><br><span class="hljs-comment">      This is now italic type</span><br><span class="hljs-comment">    &lt;/span&gt;</span><br><span class="hljs-comment">     and this is still just normal text</span><br><span class="hljs-comment">    &lt;a href=&quot;/bar&quot;&gt;I&#x27;ll take you places!&lt;/a&gt;</span><br><span class="hljs-comment">  &lt;/div&gt;</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">// å†æ¬¡åˆ›å»ºè™šæ‹ŸDom</span><br><span class="hljs-keyword">const</span> newVnode = createElement(<br><span class="hljs-string">&quot;div#container.two.classes&quot;</span>,<br>&#123;<br><span class="hljs-attr">on</span>: &#123;<br><span class="hljs-attr">click</span>: anotherEventHandler,<br>&#125;,<br>&#125;,<br>[<br>createElement(<br><span class="hljs-string">&quot;span&quot;</span>,<br>&#123;<br><span class="hljs-attr">style</span>: &#123;<br><span class="hljs-attr">fontWeight</span>: <span class="hljs-string">&quot;normal&quot;</span>,<br><span class="hljs-attr">fontStyle</span>: <span class="hljs-string">&quot;italic&quot;</span>,<br>&#125;,<br>&#125;,<br><span class="hljs-string">&quot;This is now italic type&quot;</span><br>),<br><span class="hljs-string">&quot; and this is still just normal text&quot;</span>,<br>createElement(<br><span class="hljs-string">&quot;a&quot;</span>,<br>&#123;<br><span class="hljs-attr">props</span>: &#123;<br><span class="hljs-attr">href</span>: <span class="hljs-string">&quot;/bar&quot;</span>,<br>&#125;,<br>&#125;,<br><span class="hljs-string">&quot;I&#x27;ll take you places!&quot;</span><br>),<br>]<br>)<br><span class="hljs-comment">// å†æ¬¡è°ƒç”¨ `patch`</span><br>patch(vnode, newVnode) <span class="hljs-comment">// å°†æ—§èŠ‚ç‚¹æ›´æ–°ä¸ºæ–°èŠ‚ç‚¹</span><br></code></pre></td></tr></table></figure><h3 id="è™šæ‹Ÿ-Dom">è™šæ‹Ÿ Dom</h3><p>è™šæ‹Ÿ Dom æ˜¯ä¸€ä¸ª javascript å¯¹è±¡ç»“æ„ã€‚<br>å¤§è‡´ä¸ºä»¥ä¸‹å½¢å¼ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> VNodeData &#123;<br>  props?: Props<br>  attrs?: Attrs<br>  <span class="hljs-class"><span class="hljs-keyword">class</span>?: <span class="hljs-title">Classes</span></span><br><span class="hljs-class">  <span class="hljs-title">style</span>?: <span class="hljs-title">VNodeStyle</span></span><br><span class="hljs-class">  <span class="hljs-title">dataset</span>?: <span class="hljs-title">Dataset</span></span><br><span class="hljs-class">  <span class="hljs-title">on</span>?: <span class="hljs-title">On</span></span><br><span class="hljs-class">  <span class="hljs-title">hero</span>?: <span class="hljs-title">Hero</span></span><br><span class="hljs-class">  <span class="hljs-title">attachData</span>?: <span class="hljs-title">AttachData</span></span><br><span class="hljs-class">  <span class="hljs-title">hook</span>?: <span class="hljs-title">Hooks</span></span><br><span class="hljs-class">  <span class="hljs-title">key</span>?: <span class="hljs-title">Key</span></span><br><span class="hljs-class">  <span class="hljs-title">ns</span>?: <span class="hljs-title">string</span> // <span class="hljs-title">for</span> <span class="hljs-title">SVGs</span></span><br><span class="hljs-class">  <span class="hljs-title">fn</span>?: () </span>=&gt; VNode <span class="hljs-comment">// for thunks</span><br>  args?: <span class="hljs-built_in">any</span>[] <span class="hljs-comment">// for thunks</span><br>  [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span> <span class="hljs-comment">// for any other 3rd party module</span><br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> Key = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">interface</span> VNode = &#123;<br>    <span class="hljs-attr">sel</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// é€‰æ‹©å™¨</span><br>    <span class="hljs-attr">data</span>: VNodeData | <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// VNodeDataä¸Šé¢å®šä¹‰çš„VNodeData</span><br>    <span class="hljs-attr">children</span>: <span class="hljs-built_in">Array</span>&lt;VNode | <span class="hljs-built_in">string</span>&gt; | <span class="hljs-literal">undefined</span>, <span class="hljs-comment">//å­èŠ‚ç‚¹,ä¸textäº’æ–¥</span><br>    <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// æ ‡ç­¾ä¸­é—´çš„æ–‡æœ¬å†…å®¹</span><br>    <span class="hljs-attr">elm</span>: Node | <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// è½¬æ¢è€Œæˆçš„çœŸå®DOM</span><br>    <span class="hljs-attr">key</span>: Key | <span class="hljs-literal">undefined</span> <span class="hljs-comment">// å­—ç¬¦ä¸²æˆ–è€…æ•°å­—</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä½œç”¨">ä½œç”¨</h4><ul><li>æ¨¡æ¿å¼•æ“å¯ä»¥ç®€åŒ–è§†å›¾æ“ä½œ,æ²¡åŠæ³•è·Ÿè¸ªçŠ¶æ€ï¼Œè™šæ‹Ÿ Dom å¯ä»¥</li><li>é€šè¿‡æ¯”è¾ƒå‰åä¸¤æ¬¡çŠ¶æ€å·®å¼‚æ›´æ–°çœŸå® DOMï¼Œå‡å°‘ Dom æ“ä½œ</li><li>å¯ä»¥è·¨å¹³å°ä½¿ç”¨</li><li>åˆ›å»ºå†…å­˜å¼€é”€å°ï¼Œæ€§èƒ½æ›´å¥½ï¼ˆå¤æ‚è§†å›¾æƒ…å†µï¼‰</li></ul><h3 id="Diff">Diff</h3><h4 id="ç®€å•æè¿°">ç®€å•æè¿°</h4><ol><li><code>init</code>åˆå§‹åŒ–ï¼Œè¿”å›<code>patch</code>å‡½æ•°ã€‚</li><li><code>h</code>å‡½æ•°åˆ›å»ºè™šæ‹Ÿ Dom å¯¹è±¡ã€‚</li><li><code>patch</code>æ¯”è¾ƒæ–°æ—§è™šæ‹Ÿ Domã€‚</li><li>å°†å‘ç”Ÿå˜åŒ–çš„ Dom æ›´æ–°åæ˜ åˆ°çœŸå® Dom æ ‘å½“ä¸­ã€‚</li></ol><h4 id="ç»†èŠ‚">ç»†èŠ‚</h4><ul><li>init</li></ul><p>é‡‡ç”¨é—­åŒ…çš„å½¢å¼ï¼Œå†…éƒ¨åˆ›å»ºå˜é‡</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">init</span>(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// æ³¨å†Œæ¨¡å—ï¼Œå°±åƒæ˜¯ä¸Šé¢ä¾‹å­é‡Œçš„ class styleæ¨¡å—ç­‰</span></span></span><br><span class="hljs-params"><span class="hljs-function">modules: <span class="hljs-built_in">Array</span>&lt;Partial&lt;Module&gt;&gt;,</span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// è·¨ç«¯ä½¿ç”¨ï¼Œé»˜è®¤æµè§ˆå™¨api</span></span></span><br><span class="hljs-params"><span class="hljs-function">domApi?: DOMAPI,</span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// é¢å¤–options</span></span></span><br><span class="hljs-params"><span class="hljs-function">options?: Options</span></span><br><span class="hljs-params"><span class="hljs-function"></span>) </span>&#123;<br><span class="hljs-comment">// cbs ä¸€äº›é’©å­å‡½æ•°ğŸ¶</span><br><br><span class="hljs-comment">// ä¸€äº›å·¥å…·æ–¹æ³•</span><br><span class="hljs-comment">// createElm addVnodes removeVnodes updateChildren patchVnode</span><br><br><span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">oldVnode, vnode</span>) </span>&#123;<br><span class="hljs-comment">// æ¯”è¾ƒæ–°æ—§vnodeå¹¶å¤„ç†</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>h</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">h</span>(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// å…ƒç´ é€‰æ‹©å™¨</span></span></span><br><span class="hljs-params"><span class="hljs-function">sel: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// data</span></span></span><br><span class="hljs-params"><span class="hljs-function">b?: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// children</span></span></span><br><span class="hljs-params"><span class="hljs-function">c?: <span class="hljs-built_in">any</span></span></span><br><span class="hljs-params"><span class="hljs-function"></span>) </span>&#123;<br><span class="hljs-comment">// ... ä¸€ç³»åˆ—çš„å‚æ•°ç»„ç»‡é€»è¾‘</span><br><span class="hljs-keyword">return</span> vnode(sel, data, children, text, <span class="hljs-literal">undefined</span>)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>vnode</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">vnode</span>(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// å…ƒç´ é€‰æ‹©å™¨</span></span></span><br><span class="hljs-params"><span class="hljs-function">sel: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// ä¸€äº›ç›¸å…³propså±æ€§é›†åˆ</span></span></span><br><span class="hljs-params"><span class="hljs-function">data: <span class="hljs-built_in">any</span> | <span class="hljs-literal">undefined</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// å­èŠ‚ç‚¹</span></span></span><br><span class="hljs-params"><span class="hljs-function">children: <span class="hljs-built_in">Array</span>&lt;VNode | <span class="hljs-built_in">string</span>&gt; | <span class="hljs-literal">undefined</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// å­—ç¬¦ä¸²å†…å®¹</span></span></span><br><span class="hljs-params"><span class="hljs-function">text: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"><span class="hljs-comment">// çœŸå®Dom</span></span></span><br><span class="hljs-params"><span class="hljs-function">elm: Element | DocumentFragment | Text | <span class="hljs-literal">undefined</span></span></span><br><span class="hljs-params"><span class="hljs-function"></span>): <span class="hljs-title">VNode</span> </span>&#123;<br><span class="hljs-keyword">const</span> key = data === <span class="hljs-literal">undefined</span> ? <span class="hljs-literal">undefined</span> : data.key<br><span class="hljs-keyword">return</span> &#123; sel, data, children, text, elm, key &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="patch">patch</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç›¸åŒvnode</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sameVnode</span>(<span class="hljs-params">vnode1: VNode, vnode2: VNode</span>): <span class="hljs-title">boolean</span> </span>&#123;<br><span class="hljs-keyword">const</span> isSameKey = vnode1.key === vnode2.key<br><span class="hljs-keyword">const</span> isSameIs = vnode1.data?.is === vnode2.data?.is<br><span class="hljs-keyword">const</span> isSameSel = vnode1.sel === vnode2.sel<br><span class="hljs-keyword">const</span> isSameTextOrFragment =<br>!vnode1.sel &amp;&amp; vnode1.sel === vnode2.sel<br>? <span class="hljs-keyword">typeof</span> vnode1.text === <span class="hljs-keyword">typeof</span> vnode2.text<br>: <span class="hljs-literal">true</span><br><br><span class="hljs-keyword">return</span> isSameSel &amp;&amp; isSameKey &amp;&amp; isSameIs &amp;&amp; isSameTextOrFragment<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">patch</span>(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">oldVnode: VNode | Element | DocumentFragment,</span></span><br><span class="hljs-params"><span class="hljs-function">vnode: VNode</span></span><br><span class="hljs-params"><span class="hljs-function"></span>): <span class="hljs-title">VNode</span> </span>&#123;<br><span class="hljs-keyword">let</span> i: <span class="hljs-built_in">number</span>, <span class="hljs-attr">elm</span>: Node, <span class="hljs-attr">parent</span>: Node<br><span class="hljs-keyword">const</span> insertedVnodeQueue: VNodeQueue = []<br><span class="hljs-comment">// preé’©å­æ‰§è¡Œ</span><br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; cbs.pre.length; ++i) cbs.pre[i]()<br><br><span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºelement(nodetype === 1)ï¼Œä¸æ˜¯å°±æŠŠä»–è½¬æˆvnode</span><br><span class="hljs-keyword">if</span> (isElement(api, oldVnode)) &#123;<br>oldVnode = emptyNodeAt(oldVnode)<br>&#125;<br><span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç©ºèŠ‚ç‚¹(nodetype === 11)</span><br><span class="hljs-comment">// æ˜¯çš„è¯è½¬æˆvnode ç©ºèŠ‚ç‚¹</span><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isDocumentFragment(api, oldVnode)) &#123;<br>oldVnode = emptyDocumentFragmentAt(oldVnode)<br>&#125;<br><br><span class="hljs-comment">// å¦‚æœæ˜¯ç›¸åŒèŠ‚ç‚¹åˆ™è¿›è¡Œæ¯”è¾ƒ</span><br><span class="hljs-comment">// å…·ä½“ç»†èŠ‚çœ‹åé¢</span><br><span class="hljs-keyword">if</span> (sameVnode(oldVnode, vnode)) &#123;<br>patchVnode(oldVnode, vnode, insertedVnodeQueue)<br>&#125;<br><span class="hljs-comment">// ä¸ç›¸åŒåˆ™ç›´æ¥æ’å…¥</span><br><span class="hljs-keyword">else</span> &#123;<br>elm = oldVnode.elm!<br>parent = api.parentNode(elm) <span class="hljs-keyword">as</span> Node<br><br><span class="hljs-comment">// å°±æ˜¯ä¸€ä¸ªé€’å½’è°ƒç”¨åˆå§‹åŒ–åˆ›å»ºdomèŠ‚ç‚¹çš„æ–¹æ³•</span><br>createElm(vnode, insertedVnodeQueue)<br><br><span class="hljs-keyword">if</span> (parent !== <span class="hljs-literal">null</span>) &#123;<br>api.insertBefore(parent, vnode.elm!, api.nextSibling(elm))<br>removeVnodes(parent, [oldVnode], <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; insertedVnodeQueue.length; ++i) &#123;<br>insertedVnodeQueue[i].data!.hook!.insert!(insertedVnodeQueue[i])<br>&#125;<br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; cbs.post.length; ++i) cbs.post[i]()<br><span class="hljs-keyword">return</span> vnode<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="patchVnode">patchVnode</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">patchVnode</span>(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">oldVnode: VNode,</span></span><br><span class="hljs-params"><span class="hljs-function">vnode: VNode,</span></span><br><span class="hljs-params"><span class="hljs-function">insertedVnodeQueue: VNodeQueue</span></span><br><span class="hljs-params"><span class="hljs-function"></span>) </span>&#123;<br><span class="hljs-keyword">const</span> hook = vnode.data?.hook<br>  <span class="hljs-comment">// é’©å­æ‰§è¡Œ </span><br>hook?.prepatch?.(oldVnode, vnode)<br><span class="hljs-keyword">const</span> elm = (vnode.elm = oldVnode.elm)!<br><span class="hljs-keyword">if</span> (oldVnode === vnode) <span class="hljs-keyword">return</span><br>  <span class="hljs-comment">// ä¸€äº›æ•°æ®çš„æ ¼å¼å¤„ç† </span><br><span class="hljs-keyword">if</span> (<br>vnode.data !== <span class="hljs-literal">undefined</span> ||<br>(isDef(vnode.text) &amp;&amp; vnode.text !== oldVnode.text)<br>) &#123;<br>vnode.data ??= &#123;&#125;<br>oldVnode.data ??= &#123;&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; cbs.update.length; ++i) cbs.update[i](oldVnode, vnode)<br>vnode.data?.hook?.update?.(oldVnode, vnode)<br>&#125;<br><br><span class="hljs-keyword">const</span> oldCh = oldVnode.children <span class="hljs-keyword">as</span> VNode[]<br><span class="hljs-keyword">const</span> ch = vnode.children <span class="hljs-keyword">as</span> VNode[]<br>  <span class="hljs-comment">// æ–°vnodeæ²¡æœ‰text</span><br><span class="hljs-keyword">if</span> (isUndef(vnode.text)) &#123;<br>    <span class="hljs-comment">// æ–°æ—§éƒ½æœ‰å­vnode</span><br><span class="hljs-keyword">if</span> (isDef(oldCh) &amp;&amp; isDef(ch)) &#123;<br>      <span class="hljs-comment">// æ›´æ–°å­vnodeï¼Œè¯¦æƒ…çš„çœ‹ä¸‹é¢</span><br><span class="hljs-keyword">if</span> (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue)<br>&#125; <br>    <span class="hljs-comment">// åªæœ‰æ–°çš„æœ‰å­vnode</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isDef(ch)) &#123;<br>      <span class="hljs-comment">// å°†textå±æ€§ç½®ä¸ºç©ºå­—ç¬¦ä¸²</span><br><span class="hljs-keyword">if</span> (isDef(oldVnode.text)) api.setTextContent(elm, <span class="hljs-string">&quot;&quot;</span>)<br>      <span class="hljs-comment">// å°†æ–°vnodeä¸‹é¢çš„å­vnodeå…¨éƒ¨æ·»åŠ åˆ°domæ ‘ä¸­</span><br>addVnodes(elm, <span class="hljs-literal">null</span>, ch, <span class="hljs-number">0</span>, ch.length - <span class="hljs-number">1</span>, insertedVnodeQueue)<br>&#125; <br>    <span class="hljs-comment">// åªæœ‰æ—§çš„æœ‰å­vnode</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isDef(oldCh)) &#123;<br>      <span class="hljs-comment">// åˆ é™¤æ—§vnodeä¸­çš„æ‰€æœ‰å­vnode</span><br>removeVnodes(elm, oldCh, <span class="hljs-number">0</span>, oldCh.length - <span class="hljs-number">1</span>)<br>&#125; <br>    <span class="hljs-comment">// æ–°æ—§éƒ½æ²¡æœ‰å­vnodeä¸”æ—§vnodeæœ‰text</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isDef(oldVnode.text)) &#123;<br>      <span class="hljs-comment">// ç®€å•ç½®ç©ºdomçš„text</span><br>api.setTextContent(elm, <span class="hljs-string">&quot;&quot;</span>)<br>&#125;<br>&#125; <br>  <span class="hljs-comment">// æ–°æ—§vnodeçš„textä¸åŒ  </span><br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oldVnode.text !== vnode.text) &#123;<br>    <span class="hljs-comment">// åŒä¸Šåˆ é™¤æ‰€æœ‰çš„å­vnode </span><br><span class="hljs-keyword">if</span> (isDef(oldCh)) &#123;<br>removeVnodes(elm, oldCh, <span class="hljs-number">0</span>, oldCh.length - <span class="hljs-number">1</span>)<br>&#125;<br>    <span class="hljs-comment">// è®¾ç½®æ–°vnodeçš„text</span><br>api.setTextContent(elm, vnode.text!)<br>&#125;<br>  <span class="hljs-comment">// é’©å­æ‰§è¡Œ</span><br>hook?.postpatch?.(oldVnode, vnode)<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="updateChildren">updateChildren</h5><ul><li><p>äº”ç§æƒ…å†µçš„å¤„ç†</p><ol><li>æ–°å¼€å§‹èŠ‚ç‚¹ vs æ—§å¼€å§‹èŠ‚ç‚¹ï¼ˆnew_start_index++, old_start_index++ï¼‰</li><li>æ–°ç»“æŸèŠ‚ç‚¹ vs æ—§ç»“æŸèŠ‚ç‚¹ï¼ˆnew_end_indexâ€“, old_end_indexâ€“ï¼‰</li><li>æ–°ç»“æŸèŠ‚ç‚¹ vs æ—§å¼€å§‹èŠ‚ç‚¹ï¼ˆnew_end_indexâ€“, old_start_index++ï¼‰</li><li>æ–°å¼€å§‹èŠ‚ç‚¹ vs æ—§ç»“æŸèŠ‚ç‚¹ï¼ˆnew_start_index++, old_end_indexâ€“ï¼‰</li><li>åœ¨ æ—§èŠ‚ç‚¹ ä¸­å¯»æ‰¾ æ–°å¼€å§‹èŠ‚ç‚¹ï¼Œæ‰¾åˆ°åˆ™ä½ç§»åˆ° æ—§å¼€å§‹èŠ‚ç‚¹ çš„ä½ç½®ï¼Œå¦åˆ™åˆ›å»ºåˆ° æ—§å¼€å§‹èŠ‚ç‚¹ çš„ä½ç½®ã€‚</li></ol><p>æ¯æ¬¡å¾ªç¯åªéœ€æ‰§è¡Œé€šè¿‡ä¸Šè¿°ä¸€ä¸ªæ¡ä»¶å³å¯ã€‚<br>å½“æ–°æˆ–è€…æ—§èŠ‚ç‚¹éå†å®Œæˆåˆ™é€€å‡ºå¾ªç¯ã€‚</p></li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateChildren</span>(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">parentElm: Node,</span></span><br><span class="hljs-params"><span class="hljs-function">oldCh: VNode[],</span></span><br><span class="hljs-params"><span class="hljs-function">newCh: VNode[],</span></span><br><span class="hljs-params"><span class="hljs-function">insertedVnodeQueue: VNodeQueue</span></span><br><span class="hljs-params"><span class="hljs-function"></span>) </span>&#123;<br><span class="hljs-keyword">let</span> oldStartIdx = <span class="hljs-number">0</span><br><span class="hljs-keyword">let</span> newStartIdx = <span class="hljs-number">0</span><br><span class="hljs-keyword">let</span> oldEndIdx = oldCh.length - <span class="hljs-number">1</span><br><span class="hljs-keyword">let</span> oldStartVnode = oldCh[<span class="hljs-number">0</span>]<br><span class="hljs-keyword">let</span> oldEndVnode = oldCh[oldEndIdx]<br><span class="hljs-keyword">let</span> newEndIdx = newCh.length - <span class="hljs-number">1</span><br><span class="hljs-keyword">let</span> newStartVnode = newCh[<span class="hljs-number">0</span>]<br><span class="hljs-keyword">let</span> newEndVnode = newCh[newEndIdx]<br><span class="hljs-keyword">let</span> oldKeyToIdx: KeyToIndexMap | <span class="hljs-literal">undefined</span><br><span class="hljs-keyword">let</span> idxInOld: <span class="hljs-built_in">number</span><br><span class="hljs-keyword">let</span> elmToMove: VNode<br><span class="hljs-keyword">let</span> before: <span class="hljs-built_in">any</span><br><br><span class="hljs-keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) &#123;<br><span class="hljs-keyword">if</span> (oldStartVnode == <span class="hljs-literal">null</span>) &#123;<br>oldStartVnode = oldCh[++oldStartIdx] <span class="hljs-comment">// Vnode might have been moved left</span><br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oldEndVnode == <span class="hljs-literal">null</span>) &#123;<br>oldEndVnode = oldCh[--oldEndIdx]<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newStartVnode == <span class="hljs-literal">null</span>) &#123;<br>newStartVnode = newCh[++newStartIdx]<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newEndVnode == <span class="hljs-literal">null</span>) &#123;<br>newEndVnode = newCh[--newEndIdx]<br>&#125; <br>    <span class="hljs-comment">// æƒ…å†µä¸€</span><br>    <span class="hljs-comment">// æ–°æ—§å¼€å§‹èŠ‚ç‚¹ç›¸åŒ</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sameVnode(oldStartVnode, newStartVnode)) &#123;<br>patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue)<br>oldStartVnode = oldCh[++oldStartIdx]<br>newStartVnode = newCh[++newStartIdx]<br>&#125; <br>    <span class="hljs-comment">// æƒ…å†µäºŒ</span><br>    <span class="hljs-comment">// æ–°æ—§ç»“æŸèŠ‚ç‚¹ç›¸åŒ</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sameVnode(oldEndVnode, newEndVnode)) &#123;<br>patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue)<br>oldEndVnode = oldCh[--oldEndIdx]<br>newEndVnode = newCh[--newEndIdx]<br>&#125; <br>    <span class="hljs-comment">// æƒ…å†µä¸‰</span><br>    <span class="hljs-comment">// æ–°ç»“æŸå’Œæ—§å¼€å§‹èŠ‚ç‚¹ç›¸åŒ</span><br>    <span class="hljs-comment">// å°†æ—§å¼€å§‹èŠ‚ç‚¹ç§»åŠ¨åˆ°æ—§ç»“æŸèŠ‚ç‚¹åé¢</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sameVnode(oldStartVnode, newEndVnode)) &#123;<br><span class="hljs-comment">// Vnode moved right</span><br>patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue)<br>api.insertBefore(<br>parentElm,<br>oldStartVnode.elm!,<br>api.nextSibling(oldEndVnode.elm!)<br>)<br>oldStartVnode = oldCh[++oldStartIdx]<br>newEndVnode = newCh[--newEndIdx]<br>&#125; <br>    <span class="hljs-comment">// æƒ…å†µå››</span><br>    <span class="hljs-comment">// æ–°å¼€å§‹èŠ‚ç‚¹å’Œæ—§ç»“æŸèŠ‚ç‚¹ç›¸åŒ</span><br>    <span class="hljs-comment">// å°†æ—§ç»“æŸèŠ‚ç‚¹ç§»åŠ¨åˆ°æ—§å¼€å§‹èŠ‚ç‚¹å‰é¢</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sameVnode(oldEndVnode, newStartVnode)) &#123;<br><span class="hljs-comment">// Vnode moved left</span><br>patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue)<br>api.insertBefore(parentElm, oldEndVnode.elm!, oldStartVnode.elm!)<br>oldEndVnode = oldCh[--oldEndIdx]<br>newStartVnode = newCh[++newStartIdx]<br>&#125; <br>    <span class="hljs-comment">// æƒ…å†µäº”</span><br><span class="hljs-comment">// å°†æ—§èŠ‚ç‚¹åˆ—è¡¨çš„æŒ‡å®šåŒºé—´å†…çš„èŠ‚ç‚¹ä¿¡æ¯è½¬æˆå¯¹è±¡mapæ ¼å¼</span><br><span class="hljs-comment">// &#123;</span><br><span class="hljs-comment">//key: index, ç»„ä»¶çš„keyï¼Œç»„ä»¶çš„indexç´¢å¼•</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">// ä»newStartIndexå¼€å§‹ä»mapä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¯¥èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-comment">// ä¸€å¼€å§‹åˆå§‹åŒ–</span><br><span class="hljs-keyword">if</span> (oldKeyToIdx === <span class="hljs-literal">undefined</span>) &#123;<br>oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx)<br>&#125;<br>idxInOld = oldKeyToIdx[newStartVnode.key <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>]<br><span class="hljs-comment">// å¦‚æœæ–°èŠ‚ç‚¹åœ¨æ—§èŠ‚ç‚¹ä¸­ä¸å­˜åœ¨</span><br><span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹æ’å…¥åˆ°æ—§å¼€å§‹èŠ‚ç‚¹å‰é¢</span><br><span class="hljs-keyword">if</span> (isUndef(idxInOld)) &#123;<br><span class="hljs-comment">// New element</span><br>api.insertBefore(<br>parentElm,<br>createElm(newStartVnode, insertedVnodeQueue),<br>oldStartVnode.elm!<br>)<br>&#125; <br><span class="hljs-comment">// æ–°èŠ‚ç‚¹åœ¨æ—§èŠ‚ç‚¹ä¸­å­˜åœ¨</span><br><span class="hljs-keyword">else</span> &#123;<br>elmToMove = oldCh[idxInOld]<br><span class="hljs-comment">// sel ä¸åŒåˆ™é‡æ–°åˆ›å»º</span><br><span class="hljs-comment">// å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°æ—§å¼€å§‹èŠ‚ç‚¹çš„å‰é¢</span><br><span class="hljs-keyword">if</span> (elmToMove.sel !== newStartVnode.sel) &#123;<br>api.insertBefore(<br>parentElm,<br>createElm(newStartVnode, insertedVnodeQueue),<br>oldStartVnode.elm!<br>)<br>&#125; <br><span class="hljs-comment">// å¦‚æœæ˜¯ç›¸åŒèŠ‚ç‚¹åˆ™è¿›è¡Œä¸‹ä¸€å±‚çº§çš„æ¯”è¾ƒ  </span><br><span class="hljs-comment">// å¹¶å°†è¯¥èŠ‚ç‚¹æ’å…¥åˆ°æ—§èŠ‚ç‚¹çš„å‰é¢</span><br><span class="hljs-keyword">else</span> &#123;<br>patchVnode(elmToMove, newStartVnode, insertedVnodeQueue)<br>oldCh[idxInOld] = <span class="hljs-literal">undefined</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span><br>api.insertBefore(parentElm, elmToMove.elm!, oldStartVnode.elm!)<br>&#125;<br>&#125;<br>newStartVnode = newCh[++newStartIdx]<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// æœ€åçš„æ”¶å°¾å·¥ä½œ</span><br><br><span class="hljs-comment">// æ–°å¼€å§‹èŠ‚ç‚¹å°äºç­‰äºæ–°ç»“æŸèŠ‚ç‚¹</span><br><span class="hljs-comment">// æ—§èŠ‚ç‚¹å·²ç»éå†å®Œæˆ</span><br><span class="hljs-comment">// beforeç”¨äºaddVnodesä¸­çš„insertBeforeçš„å‚ç…§dom</span><br><span class="hljs-comment">// å°†æ–°èŠ‚ç‚¹ä¸­æœªå¤„ç†çš„èŠ‚ç‚¹å…¨éƒ¨æ·»åŠ åˆ°beforeçš„å‰é¢  </span><br><span class="hljs-keyword">if</span> (newStartIdx &lt;= newEndIdx) &#123;<br>before = newCh[newEndIdx + <span class="hljs-number">1</span>] == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : newCh[newEndIdx + <span class="hljs-number">1</span>].elm<br>addVnodes(<br>parentElm,<br>before,<br>newCh,<br>newStartIdx,<br>newEndIdx,<br>insertedVnodeQueue<br>)<br>&#125;<br><span class="hljs-comment">// æ—§èŠ‚ç‚¹å°äºç­‰äºæ—§ç»“æŸèŠ‚ç‚¹</span><br><span class="hljs-comment">// æ–°èŠ‚ç‚¹å·²ç»éå†å®Œæˆ</span><br><span class="hljs-comment">// è¯´æ˜å­˜åœ¨éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹</span><br><span class="hljs-comment">// å°†ç´¢å¼•åŒºé—´å†…çš„æ‰€æœ‰èŠ‚ç‚¹å…¨éƒ¨åˆ é™¤</span><br><span class="hljs-keyword">if</span> (oldStartIdx &lt;= oldEndIdx) &#123;<br>removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ä¸‹é¢æ˜¯ä¸€ä¸ªåŒ…å«å‰å››ç§æƒ…å†µçš„ä¸€ä¸ªä¾‹å­</li></ul><img src="/images/dom-diffå­¦ä¹ /diff-1.jpg" /><table><thead><tr><th style="text-align:center">step</th><th style="text-align:center">new_start</th><th style="text-align:center">new_end</th><th style="text-align:center">old_start</th><th style="text-align:center">old_end</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">4</td><td style="text-align:center">0</td><td style="text-align:center">3</td></tr></tbody></table><img src="/images/dom-diffå­¦ä¹ /diff-2.jpg" /><table><thead><tr><th style="text-align:center">step</th><th style="text-align:center">new_start</th><th style="text-align:center">new_end</th><th style="text-align:center">old_start</th><th style="text-align:center">old_end</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">4</td><td style="text-align:center">0</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">4</td><td style="text-align:center">1</td><td style="text-align:center">3</td></tr></tbody></table><img src="/images/dom-diffå­¦ä¹ /diff-3.jpg" /><table><thead><tr><th style="text-align:center">step</th><th style="text-align:center">new_start</th><th style="text-align:center">new_end</th><th style="text-align:center">old_start</th><th style="text-align:center">old_end</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">4</td><td style="text-align:center">0</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">4</td><td style="text-align:center">1</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:center">2</td></tr></tbody></table><img src="/images/dom-diffå­¦ä¹ /diff-4.jpg" /><table><thead><tr><th style="text-align:center">step</th><th style="text-align:center">new_start</th><th style="text-align:center">new_end</th><th style="text-align:center">old_start</th><th style="text-align:center">old_end</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">4</td><td style="text-align:center">0</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">4</td><td style="text-align:center">1</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">2</td><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:center">1</td></tr></tbody></table><img src="/images/dom-diffå­¦ä¹ /diff-5.jpg" /><table><thead><tr><th style="text-align:center">step</th><th style="text-align:center">new_start</th><th style="text-align:center">new_end</th><th style="text-align:center">old_start</th><th style="text-align:center">old_end</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">0</td><td style="text-align:center">4</td><td style="text-align:center">0</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">1</td><td style="text-align:center">4</td><td style="text-align:center">1</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">2</td><td style="text-align:center">3</td><td style="text-align:center">1</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">3</td><td style="text-align:center">3</td><td style="text-align:center">2</td><td style="text-align:center">1</td></tr></tbody></table><img src="/images/dom-diffå­¦ä¹ /diff-6.jpg" /><p><code>while</code>å¾ªç¯è‡³æ­¤å…¨éƒ¨ç»“æŸã€‚<br>æ¥ç€å°±æ˜¯ä¸‹é¢çš„æ”¶å°¾å·¥ä½œã€‚<br>å°†å‰©ä¸‹çš„èŠ‚ç‚¹æ’å…¥åˆ°<code>newEndIndex</code>èŠ‚ç‚¹å‰ã€‚</p><ul><li>æ¥ç€æ˜¯ä¸€ä¸ªç¬¬äº”ç§æƒ…å†µçš„ä¾‹å­</li></ul><img src="/images/dom-diffå­¦ä¹ /diff-7.jpg" /><p>ä¸Šé¢çš„ä¾‹å­ï¼Œåªè¯´æ–°èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚<br>å‰é¢å››ç§æƒ…å†µéƒ½æ— æ³•æ»¡è¶³ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">if</span>(<span class="hljs-literal">false</span>) &#123;<br><span class="hljs-comment">// ...</span><br>&#125;<span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">if</span> (oldKeyToIdx === <span class="hljs-literal">undefined</span>) &#123;<br>oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);<br>&#125;<br>idxInOld = oldKeyToIdx[newStartVnode.key <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>];<br><span class="hljs-keyword">if</span> (isUndef(idxInOld)) &#123;<br>api.insertBefore(<br>parentElm,<br>createElm(newStartVnode, insertedVnodeQueue),<br>oldStartVnode.elm!<br>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>elmToMove = oldCh[idxInOld];<br><span class="hljs-keyword">if</span> (elmToMove.sel !== newStartVnode.sel) &#123;<br>api.insertBefore(<br>parentElm,<br>createElm(newStartVnode, insertedVnodeQueue),<br>oldStartVnode.elm!<br>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);<br>oldCh[idxInOld] = <span class="hljs-literal">undefined</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>;<br>api.insertBefore(parentElm, elmToMove.elm!, oldStartVnode.elm!);<br>&#125;<br>&#125;<br>newStartVnode = newCh[++newStartIdx];<br>&#125;<br></code></pre></td></tr></table></figure><p>å› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡è¿›å…¥ï¼Œæ‰€ä»¥<code>oldKeyIndex</code>ä¸º<code>undefined</code>ã€‚<br>åˆ›å»ºæ—§èŠ‚ç‚¹çš„<code>map</code>ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br><span class="hljs-attr">a</span>: <span class="hljs-number">0</span>,<br><span class="hljs-attr">b</span>: <span class="hljs-number">1</span>,<br><span class="hljs-attr">c</span>: <span class="hljs-number">2</span>,<br><span class="hljs-attr">d</span>: <span class="hljs-number">3</span><br>&#125;<br></code></pre></td></tr></table></figure><p><code>newStartVnode</code>å½“å‰ä¸ºæ–°èŠ‚ç‚¹ä¸‹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œ<code>key</code>ä¸º<code>a</code>ã€‚<br>æ‰€ä»¥<code>idxInOld</code>ä¸ä¸º<code>undefined</code>ã€‚<br>æ¥ç€æ‹¿åˆ°ç›¸å…³æ—§èŠ‚ç‚¹<code>elmToMove</code>ï¼Œä¸”<code>sel</code>ç›¸åŒã€‚<br>æœ€åæ¯”è¾ƒä¸¤ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ã€‚<br>å°†å…ƒç´ æ’å…¥åˆ°æ—§å¼€å§‹èŠ‚ç‚¹çš„å‰é¢ã€‚<br>è¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ã€‚</p><h3 id="React">React</h3><blockquote><p>ä»¥ä¸‹ä¸ºä¸ªäººç†è§£ï¼Œå¦‚æœ‰é—®é¢˜è¯·æŒ‡å‡ºã€‚</p></blockquote><p>reactçš„<code>diff</code>å’Œä¸Šé¢çš„åº“çš„é€»è¾‘åŸºæœ¬å¤§åŒå°å¼‚ï¼Œä½†æ˜¯åœ¨<strong>16</strong>ä»¥åï¼Œå°±å‘ç”Ÿäº†ä¸€ç‚¹å˜åŒ–ã€‚</p><h4 id="Fiber">Fiber</h4><p>ä¸Šé¢çš„<code>diff</code>å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨é€’å½’æ¯”è¾ƒvnodeçš„åŒæ—¶ï¼Œä¹Ÿè¿›è¡Œäº†domæ“ä½œï¼Œå½“äº§ç”Ÿå¤§é‡çš„æ›´æ–°æ—¶ï¼Œé¡µé¢è¿˜æ˜¯ä¼šå‡ºç°å¡é¡¿çš„æƒ…å†µã€‚<br>åœ¨<strong>16</strong>ä»¥åï¼Œå¼•å…¥äº†<code>fiber</code>çš„æ¦‚å¿µï¼Œå…¶æ•°æ®ç»“æ„å…¶å®å°±æ˜¯ä¸€ä¸ª<strong>é“¾è¡¨</strong>ã€‚<br><code>fiber</code>ä¸­åŒ…å«äº†å¾ˆå¤šç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬<code>sibling</code>ã€<code>child</code>ã€<code>return</code>è¿™äº›å±‚çº§å…³ç³»ï¼Œä»¥åŠ<code>effectTag</code>ã€<code>nextEffect</code>ã€<code>lastEffect</code>ç­‰ç­‰ã€‚<br>å°†æ•´ä¸ªæ›´æ–°è¿‡ç¨‹åˆ†æˆäº†å‡ ä¸ªé˜¶æ®µï¼š</p><ul><li>render<br>å°†<code>vnode</code>è½¬æ¢ä¸º<code>fiber</code>ç»“æ„ã€‚<br>å°†éœ€è¦æ›´æ–°èŠ‚ç‚¹æ‰“ä¸Š<code>effectTag</code>æ ‡è®°ã€‚<br>æ­¤è¿‡ç¨‹å¯ä»¥è¢«æ‰“æ–­ï¼ˆå­˜åœ¨ä¸€ä¸ªschedulerè¿›è¡Œè°ƒåº¦ï¼‰ï¼Œå¹¶ä¸”ä¸åŒçš„æ›´æ–°æ—¶å­˜åœ¨ä¼˜å…ˆçº§çš„ã€‚</li><li>commit<br>çœŸæ­£çš„æ›´æ–°è¿‡ç¨‹ã€‚<br>æ— æ³•è¢«ä¸­æ–­ã€‚</li></ul><h3 id="å…³äºKey">å…³äºKey</h3><p>é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œå¯ä»¥çœ‹å‡ºï¼Œ<code>key</code>å±æ€§åœ¨<code>diff</code>è¿‡ç¨‹ä¸­éå¸¸é‡è¦ã€‚</p><ul><li>ä»–å¯ä»¥ä½¿è¿‡ç¨‹å˜å¾—æ›´å¿«</li><li>ä¹Ÿå¯ä»¥é¿å…å‡ºé”™</li><li>å¹¶ä¸”ä½¿ç”¨ç´¢å¼•ä½œä¸º<code>key</code>ä¹Ÿä¼šå‘ç”ŸæœªçŸ¥çš„é”™è¯¯</li></ul><p>å‚è€ƒ<a href="https://juejin.cn/post/6919302952486174733">æ·±å…¥ç†è§£ React Diff ç®—æ³•</a>ä¸­çš„ä¾‹å­ã€‚</p><h4 id="ä¸è®¾ç½®keyçš„æƒ…å†µ">ä¸è®¾ç½®keyçš„æƒ…å†µ</h4><img src="/images/dom-diffå­¦ä¹ /diff-8.jpg" /><p>å‡è®¾æ²¡æœ‰è®¾ç½®<code>key</code>ï¼Œåœ¨ç¬¬ä¸‰æ¬¡å¾ªç¯å½“ä¸­ï¼Œå› ä¸ºè¢«åˆ¤æ–­æˆäº†æ˜¯ç›¸åŒèŠ‚ç‚¹ï¼Œå¤šäº†ä¸€æ¬¡<code>patch</code>çš„è¿‡ç¨‹ã€‚</p><img src="/images/dom-diffå­¦ä¹ /diff-9.jpg" />  <p>å½“è®¾ç½®äº†<code>key</code>çš„æƒ…å†µï¼Œåœ¨ç¬¬ä¸‰æ¬¡å¾ªç¯æ—¶ï¼Œä¼šèµ°ä¸Šé¢çš„æƒ…å†µä¸‰ï¼ˆnew_end vs old_startï¼‰ã€‚</p><h4 id="è®¾ç½®ç´¢å¼•ä¸ºkeyçš„æƒ…å†µ">è®¾ç½®ç´¢å¼•ä¸ºkeyçš„æƒ…å†µ</h4><img src="/images/dom-diffå­¦ä¹ /diff-10.jpg" />   <p>æ ¹æ®ä¸Šå›¾æ˜¾ç¤ºï¼Œå› ä¸ºä½¿ç”¨äº†ç´¢å¼•ä½œä¸º<code>key</code>ï¼Œåœ¨æ–°å¢äº†ä¸€ä¸ª<strong>èŠ‚ç‚¹d</strong>åˆ°å¼€å§‹ä½ç½®æ—¶ã€‚<br><code>diff</code>åˆ¤æ–­ä¸ºæƒ…å†µä¸€ï¼Œæ‰€ä»¥<strong>èŠ‚ç‚¹a</strong>çš„é¢œè‰²å±æ€§è¢«èµ‹å€¼åˆ°äº†<strong>èŠ‚ç‚¹d</strong>ä¸Šï¼Œå¼•å‘äº†é—®é¢˜ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><blockquote><p>å‚è€ƒ<br><a href="https://juejin.cn/post/6919302952486174733">æ·±å…¥ç†è§£ React Diff ç®—æ³•</a><br><a href="https://juejin.cn/post/7000266544181674014">DIff ç®—æ³•çœ‹ä¸æ‡‚å°±ä¸€èµ·æ¥ç æˆ‘(å¸¦å›¾)</a><br><a href="https://juejin.cn/post/7131741751152214030">å›¾è§£ React çš„ diff ç®—æ³•ï¼šæ ¸å¿ƒå°±ä¸¤ä¸ªå­— â€”â€” å¤ç”¨</a><br><a href="https://github.com/neroneroffy/react-source-code-debug">react-source-code-debug</a><br><a href="https://juejin.cn/post/6859528127010471949">React Fiber æºç è§£æ</a><br><a href="https://github.com/snabbdom/snabbdom">snabbdom</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>front</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-ä¾èµ–ä»‹ç»</title>
    <link href="/2022/11/18/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E4%BE%9D%E8%B5%96%E4%BB%8B%E7%BB%8D/"/>
    <url>/2022/11/18/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91-%E4%BE%9D%E8%B5%96%E4%BB%8B%E7%BB%8D/</url>
    
    <content type="html"><![CDATA[<h1>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘-ä¾èµ–ä»‹ç»</h1><h2 id="å¼€å¤´">å¼€å¤´</h2><p>æœ¬æ–‡æ˜¯æ•°æ®å¯è§†åŒ–å¼€å§‹çš„å¼€å‘ç»†èŠ‚ç¬¬ä¸€ç« ã€‚ä»‹ç»å…³äºå½“ä¸­ä¸€äº›ä¸»è¦ä¾èµ–åŒ…çš„ä¿¡æ¯ã€‚<br>ä¸‡äº‹å¼€å¤´éš¾ï¼Œåœ¨å¼€å§‹è‡ªå·±çš„ç è·¯å‰ï¼Œé¦–å…ˆè¦æ„æ€å¥½å¤§è‡´çš„æ¶å­å’ŒåŠŸèƒ½ã€‚</p><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="ui">ui</h3><h4 id="antd"><a href="https://github.com/ant-design/ant-design">antd</a></h4><p>è¿™ä¸ªåº”è¯¥ä¸ç”¨å¤šè¯´äº†ï¼Œå¤§å®¶åº”è¯¥éƒ½çŸ¥é“ã€‚<br>é¡ºå¸¦æä¸€å¥ï¼Œåœ¨å®ç°ç›¸å…³ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œå¶ç„¶å‘ç°äº†ä¸€ä¸ªå°<code>bug</code>ï¼Œå…³äº<code>Input</code>ä½¿ç”¨<code>prefix | suffix</code>æ—¶ï¼Œç‚¹å‡»è¾“å…¥æ¡†è¾¹æ¡†æˆ–<code>prefix | suffix</code>æ— æ³•è·å–ç„¦ç‚¹ï¼Œå¹¶ä¸”æäº¤äº†<code>PR</code>ã€‚</p><h4 id="scena-react-ruler"><a href="https://github.com/daybrush/ruler/tree/master/packages/react-ruler">@scena/react-ruler</a></h4><p>æ ‡å°ºç»„ä»¶ï¼Œå¶ç„¶åœ¨<code>github</code>ä¸Šåˆ«äººçš„é¡¹ç›®ä¸­å®ç°çš„æ ‡å°ºï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼ŒåŒ…æ‹¬ä¸‹é¢çš„<code>react-selecto</code>ï¼Œå‡æ¥è‡ªäºè¯¥<a href="https://github.com/daybrush/scenejs">é¡¹ç›®</a>ï¼Œå¹¶ä¸”å½“ä¸­è¿˜åŒ…å«äº†å¾ˆå¤šé€šç”¨çš„å·¥å…·åº“ï¼Œæ¯”å¦‚ï¼š</p><h5 id="moveable"><a href="https://github.com/daybrush/moveable">moveable</a></h5><pre><code>ç±»ä¼¼äºä¸‹é¢ä»‹ç»`react-rnd`ï¼Œä½†æ˜¯æ‹¥æœ‰æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½†æ˜¯æ— æ³•å®Œå…¨æ»¡è¶³æœ¬é¡¹ç›®ï¼Œæ•…æ”¾å¼ƒäº†ã€‚  </code></pre><h5 id="guides"><a href="https://github.com/daybrush/guides">guides</a></h5><pre><code>å¼•å¯¼çº¿ç»„ä»¶ã€‚  </code></pre><p>æœ‰å…´è¶£çš„å¯ä»¥å…³æ³¨ä¸‹<a href="https://github.com/daybrush">ä½œè€…</a></p><h4 id="react-selecto"><a href="https://github.com/daybrush/selecto/tree/master/packages/react-selecto">react-selecto</a></h4><p>å¤šé€‰æ’ä»¶ï¼Œé€šè¿‡é¼ æ ‡æ‹–æ‹½é€‰ä¸­ç›¸å…³ç›®æ ‡å…ƒç´ ï¼Œæ”¯æŒ</p><h4 id="nprogress"><a href="https://github.com/rstacruz/nprogress">nprogress</a></h4><p>é¡µé¢é¡¶éƒ¨çš„è¿›åº¦æ¡æ•ˆæœã€‚<br>ç”¨äºåœ¨æ•°æ®ä¿å­˜æ—¶çš„äº¤äº’ã€‚</p><h4 id="monaco-editor"><a href="https://github.com/microsoft/monaco-editor">monaco-editor</a></h4><p>ç½‘é¡µç«¯åœ¨çº¿ä»£ç ç¼–è¾‘å™¨ï¼Œ</p><h4 id="react-shepherd"><a href="https://github.com/shipshapecode/react-shepherd">react-shepherd</a></h4><p>ç®€å•çš„å¼•å¯¼é¡µæ•ˆæœã€‚</p><h4 id="react-spinners"><a href="https://github.com/davidhu2000/react-spinners">react-spinners</a></h4><p>å„ç§æ ·å¼ä¸é”™çš„<code>loading</code>æ•ˆæœã€‚</p><h4 id="react-tiny-fab"><a href="https://github.com/dericcain/react-tiny-fab">react-tiny-fab</a></h4><p>é¡µé¢å›ºå®šå°æŒ‰é’®ï¼Œå¹¶ä¸”æ”¯æŒå±•å¼€æ”¶èµ·æ›´å¤šå°æŒ‰é’®ã€‚</p><h4 id="react-color"><a href="https://github.com/casesandberg/react-color">react-color</a></h4><p>é¢œè‰²é€‰æ‹©å™¨ç»„ä»¶ã€‚</p><h4 id="react-json-view"><a href="https://github.com/mac-s-g/react-json-view">react-json-view</a></h4><p>é…ç½®é¡¹ä¸°å¯Œçš„<code>JSON</code>æ•°æ®æŸ¥çœ‹å™¨ã€‚</p><h4 id="animate-css"><a href="https://github.com/animate-css/animate.css">animate.css</a></h4><p>éå¸¸ä¸°å¯Œçš„css3åŠ¨ç”»ã€‚</p><h4 id="ä»¥ä¸‹æ˜¯éæœ¬é¡¹ç›®æ ¸å¿ƒçš„ä¾èµ–">ä»¥ä¸‹æ˜¯éæœ¬é¡¹ç›®æ ¸å¿ƒçš„ä¾èµ–</h4><h5 id="matter-js"><a href="https://github.com/liabru/matter-js">matter-js</a></h5><p>ç‚«é…·çš„2dç‰©ç†å¼•æ“åº“ã€‚<br>é¦–é¡µçš„å°ç»„ä»¶ä½¿ç”¨çš„å°±æ˜¯è¯¥åº“ã€‚</p><h5 id="parallax-js"><a href="https://github.com/wagerfield/parallax">parallax-js</a></h5><p>è§†å·®åŠ¨ç”»ï¼Œå®˜ç½‘åšçš„ç›¸å½“çš„ç‚«é…·ã€‚<br>æƒé™ç›¸å…³é¡µé¢çš„åŠ¨ç”»æ¥æºäºæ­¤é¡¹ç›®ã€‚</p><h5 id="css-doodle"><a href="https://github.com/css-doodle/css-doodle">css-doodle</a></h5><p>åˆ©ç”¨<code>css</code>å®ç°éå¸¸æœ‰è¶£çš„å›¾æ¡ˆï¼Œåˆ©ç”¨è‡ªå·±çš„æƒ³è±¡åŠ›å¯ä»¥å®ç°å„ç§å„æ ·çš„æ•ˆæœã€‚<br>å¹¶ä¸”å®˜ç½‘ä¹Ÿæä¾›äº†éå¸¸å¤šçš„ä¾‹å­ä¾›å‚è€ƒã€‚</p><h5 id="vivus"><a href="https://github.com/maxwellito/vivus">vivus</a></h5><p><code>svg</code>åŠ¨ç”»ï¼Œå¯ä»¥ç”¨å®ƒå®ç°ç®€å•çš„è·¯å¾„åŠ¨ç”»ã€‚</p><h3 id="ç»„ä»¶">ç»„ä»¶</h3><h4 id="echarts"><a href="https://github.com/apache/echarts">echarts</a></h4><p>éå¸¸çŸ¥åçš„å¯è§†åŒ–å›¾è¡¨åº“ï¼Œä»ä¸€ä¼—å›¾è¡¨åº“ä¸­é€‰ä¸­äº†å®ƒã€‚<br>å¹¶é™„ä¸Šç¤¾åŒºå®ç°çš„å›¾è¡¨æ•ˆæœç½‘ç«™ï¼š<a href="https://www.isqqw.com/">https://www.isqqw.com/</a>ã€‚</p><h4 id="echarts-liquidfill"><a href="https://github.com/ecomfe/echarts-liquidfill">echarts-liquidfill</a></h4><p>åŸºäº<code>Echarts</code>è‡ªå®šä¹‰å›¾è¡¨æ¨¡å—å¼€å‘çš„æ°´çƒå›¾è¡¨ã€‚</p><h4 id="echarts-wordcloud"><a href="https://github.com/ecomfe/echarts-wordcloud">echarts-wordcloud</a></h4><p>åŸºäº<code>Echarts</code>è‡ªå®šä¹‰å›¾è¡¨æ¨¡å—å¼€å‘çš„è¯äº‘å›¾è¡¨ã€‚<br>è¯¥ä½œè€…çš„<a href="http://zhangwenli.com/">ä¸ªäººä¸»é¡µ</a>åšçš„å¾ˆä¸é”™ï¼Œæ¨èçœ‹çœ‹ã€‚</p><h4 id="bootstrap-icons"><a href="https://github.com/twbs/icons">bootstrap-icons</a></h4><p>éå¸¸ä¸°å¯Œçš„å›¾æ ‡åº“ã€‚</p><h4 id="countup-js"><a href="https://github.com/inorganik/countUp.js">countup.js</a></h4><p>æ•°å­—ç¿»ç‰Œå™¨æ•ˆæœã€‚</p><h4 id="qrcode"><a href="https://github.com/soldair/node-qrcode">qrcode</a></h4><p>äºŒç»´ç ç”Ÿæˆåº“ã€‚</p><h4 id="react-fast-marquee"><a href="https://github.com/justin-chu/react-fast-marquee">react-fast-marquee</a></h4><p>ç®€å•çš„è·‘é©¬ç¯æ•ˆæœã€‚</p><h4 id="react-player"><a href="https://github.com/cookpete/react-player">react-player</a></h4><p>è§†é¢‘æ’­æ”¾å™¨ã€‚</p><h4 id="react-select"><a href="https://github.com/JedWatson/react-select">react-select</a></h4><p>ä¸°å¯Œ<code>API</code>ï¼Œå¯å®šåˆ¶æ€§å¼ºçš„ä¸‹æ‹‰é€‰æ‹©ç»„ä»¶ã€‚<br>ä¸ºä»€ä¹ˆä¸é€‰æ‹©<code>antd</code>ç»„ä»¶å°±æ˜¯å› ä¸ºæ­¤ç»„ä»¶å®šåˆ¶æ€§æ›´é«˜ã€‚</p><h4 id="react-slick"><a href="https://github.com/akiran/react-slick">react-slick</a></h4><p>æ ·å¼ä¸°å¯Œçš„è½®æ’­ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°<strong>è½®æ’­åˆ—è¡¨</strong>ã€‚</p><h4 id="react-text-loop-next"><a href="https://github.com/samarmohan/react-text-loop-next">react-text-loop-next</a></h4><p>ç®€å•çš„æ–‡å­—å‚ç›´æ»šåŠ¨è½®æ’­æ•ˆæœã€‚</p><h4 id="typed-js"><a href="https://github.com/mattboldt/typed.js">typed.js</a></h4><p>æ‰“å­—æœºæ•ˆæœã€‚</p><h4 id="DataV-React"><a href="https://github.com/DataV-Team/DataV-React">DataV-React</a></h4><p>æ­¤ä¹Ÿæ˜¯ä¸€ä¸ªå›¾è¡¨åº“ï¼Œæä¾›äº†éå¸¸å¤šç±»ä¼¼äºé˜¿é‡Œäº‘<code>datav</code>æ•ˆæœçš„å›¾è¡¨ã€‚<br>æœ¬é¡¹ç›®å¼•ç”¨äº†å®ƒå½“ä¸­çš„<code>svg</code>çš„<strong>è¾¹æ¡†</strong>å’Œ<strong>è£…é¥°</strong>ï¼Œ<code>svg</code>çš„å›¾å½¢åšåˆ°äº†å°ºå¯¸çš„è‡ªé€‚åº”ï¼Œéå¸¸é€‚åˆå¤§å±éœ€è¦é€‚åº”è®¾å¤‡å¤§å°çš„æ€§è´¨ã€‚</p><h4 id="viewerjs"><a href="https://github.com/fengyuanchen/viewerjs">viewerjs</a></h4><p>äº¤äº’è‰¯å¥½çš„å›¾ç‰‡é¢„è§ˆå·¥å…·ã€‚</p><h4 id="svgdotjs-svg-js"><a href="https://github.com/svgdotjs/svg.js">@svgdotjs/svg.js</a></h4><p>åŒæ ·æ˜¯ä¸€ä¸ª<code>svg</code>åŠ¨ç”»æ§åˆ¶åº“ï¼Œä½¿ç”¨å®ƒå®ç°äº†ç®€å•çš„è·¯å¾„åŠ¨ç”»ã€‚</p><h3 id="åŠŸèƒ½">åŠŸèƒ½</h3><h4 id="react-rnd"><a href="https://github.com/bokuweb/react-rnd">react-rnd</a></h4><p>åŒæ—¶æ‹¥æœ‰æ‹–æ‹½å’Œç¼©æ”¾çš„åº“ã€‚<br>å…¶å®å†…éƒ¨æºç å³æ˜¯åŒæ—¶ä¾èµ–äº†ç¼©æ”¾ï¼ˆre-resizableï¼‰å’Œæ‹–æ‹½ï¼ˆreact-draggableï¼‰ã€‚</p><h4 id="re-resizable"><a href="https://github.com/bokuweb/re-resizable">re-resizable</a></h4><p>æ“ä½œéå¸¸æµç•…çš„å…ƒç´ å¤§å°ç¼©æ”¾å·¥å…·ã€‚<br>ä¸ºä»€ä¹ˆå·²ç»ä½¿ç”¨äº†<code>react-rnd</code>è¿˜è¦ä½¿ç”¨æ­¤åº“ï¼Œç”µè„‘ç«¯å½“ä¸­çš„ç»„ä»¶ï¼Œé‡‡å–çš„æ˜¯ç»å¯¹å®šä½ï¼Œä½¿ç”¨<code>react-rnd</code>ï¼Œè€Œåœ¨ç§»åŠ¨ç«¯ï¼Œç»„ä»¶æ˜¯ç”±ä¸Šè€Œä¸‹çš„æµå¼å¸ƒå±€ï¼Œå†ä½¿ç”¨ç»å¯¹å®šä½çš„<code>react-rnd</code>å°±ä¸åˆé€‚äº†ï¼Œå¹¶ä¸”ç»„ä»¶ä¸éœ€è¦æ‹–æ‹½ä½ç½®çš„åŠŸèƒ½ï¼Œæ•…ä½¿ç”¨æ­¤é¡¹ç›®ã€‚</p><h4 id="react-dnd"><a href="https://github.com/react-dnd/react-dnd">react-dnd</a></h4><p>ç®€å•å¥½ç”¨çš„å…ƒç´ æ‹–æ‹½æ”¾ç½®åº“ã€‚</p><h4 id="react-sortable-hoc"><a href="https://github.com/clauderic/react-sortable-hoc">react-sortable-hoc</a></h4><p>ç®€å•çš„æ‹–æ‹½æ’åºåº“ã€‚<br>å¤§å±é¡¹ç›®ä¸­å…³äºæ•°æ®è¿‡æ»¤å™¨çš„æ‰§è¡Œé¡ºåºï¼Œä½¿ç”¨å®ƒæ¥è¿›è¡Œæ’åºã€‚</p><h4 id="ahooks"><a href="https://github.com/alibaba/hooks">ahooks</a></h4><p>æ‹¥æœ‰éå¸¸å¤šï¼ŒåŠŸèƒ½è¦†ç›–å¹¿ï¼Œå®ç”¨çš„<code>react hook</code>ã€‚<br>æ¯”å¦‚å…¶ä¸­çš„<code>useHover</code>ã€<code>useSize</code>ã€<code>useUnmount</code>ã€<code>useDebounce</code>ã€<code>useRafState</code>ã€<code>useUpdateEffect</code>ç­‰åœ¨ä¸€äº›åœºæ™¯ä¸‹é¢ç®€åŒ–äº†å¾ˆå¤šçš„ä»£ç ã€‚</p><h4 id="axios"><a href="https://github.com/axios/axios">axios</a></h4><p>è¿™ä¸ªåº“åº”è¯¥ä¸ç”¨å¤šè¯´äº†ï¼Œå¤§å®¶åº”è¯¥éƒ½çŸ¥é“ï¼Œ<code>github</code>ğŸ‘å¿«ç ´<strong>100k</strong>äº†ã€‚</p><h4 id="classnames"><a href="https://github.com/JedWatson/classnames">classnames</a></h4><p>æ–¹ä¾¿ç»„åˆç»„ä»¶çš„å¤šä¸ª<code>className</code>ï¼Œå¹¶ä¸”æ”¯æŒæ¡ä»¶æ§åˆ¶ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><h4 id="clipboard"><a href="https://github.com/zenorocha/clipboard.js">clipboard</a></h4><p>ä½¿ç”¨ç®€å•çš„å†…å®¹<strong>å¤åˆ¶ç²˜è´´</strong>åº“ã€‚</p><h4 id="color"><a href="https://github.com/Qix-/color">color</a></h4><p>ç”¨äºè½¬æ¢æˆ–è·å–å„ç§æ ¼å¼çš„é¢œè‰²æ•°æ®çš„åº“ã€‚</p><h4 id="array-move"><a href="https://github.com/sindresorhus/array-move">array-move</a></h4><p>ç”¨äºåˆ‡æ¢æ•°ç»„å½“ä¸­å…ƒç´ ä½ç½®çš„åº“ã€‚</p><h4 id="react-undo-component"><a href="https://github.com/food-billboard/react-undo-component">react-undo-component</a></h4><p>æœ¬äººè‡ªå·±å®ç°çš„<code>react</code>çŠ¶æ€ç®¡ç†åº“ï¼Œé€šè¿‡class wrapperæˆ–è€…hooksæ¥æ§åˆ¶ç»„ä»¶<code>state</code>çš„å‰è¿›åé€€ç­‰åŠŸèƒ½ã€‚<br>å¹¶ä¸”è¯¥åº“ä¹Ÿå¯¼å‡ºäº†é€šç”¨çš„çŠ¶æ€æ§åˆ¶æ–¹æ³•ï¼Œç”¨äºåœ¨åŸç”Ÿjavascriptä¸­æ§åˆ¶æ•°æ®çŠ¶æ€ã€‚</p><h4 id="chunk-file-upload"><a href="https://github.com/food-billboard/chunk-file-load">chunk-file-upload</a></h4><p>è¿™ä¸ªä¹Ÿæ˜¯æœ¬äººå®ç°çš„ä¸€ä¸ªåº“ï¼Œç”¨äºæ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ çš„åŠŸèƒ½ã€‚<br>å¤§å±é¡¹ç›®çš„åç«¯ä¹Ÿæ˜¯æœ‰è‡ªå·±å¼€å‘ï¼Œå› ä¸ºæœåŠ¡å™¨çš„èµ„æºæœ‰é™ï¼Œæ‰€ä»¥éœ€è¦æ§åˆ¶åª’ä½“èµ„æºå­˜å‚¨ï¼Œé˜²æ­¢å‡ºç°é‡å¤èµ„æºï¼Œæ•…åœ¨è¿™é‡Œå¯¹äºå›¾ç‰‡èµ„æºï¼Œä¹Ÿéœ€è¦å¯¹å…¶è¿›è¡Œ<code>md5</code>è®¡ç®—æ¥åˆ¤æ–­æ–‡ä»¶èµ„æºæ˜¯å¦åœ¨æœåŠ¡å™¨ä¸­å­˜åœ¨ã€‚</p><h4 id="eventemitter3"><a href="https://github.com/primus/eventemitter3">eventemitter3</a></h4><p>åŠŸèƒ½å¼ºå¤§çš„è‡ªå®šä¹‰äº‹ä»¶åº“ã€‚<br>å¤§å±é¡¹ç›®ä¸­ç»å¸¸å‡ºç°å‡ ä¸ªå±‚çº§ä¸åŒçš„ç»„ä»¶åŒæ—¶å­˜åœ¨ä¸€å®šçš„ä¾èµ–å…³ç³»ï¼Œé€šè¿‡è‡ªå®šä¹‰äº‹ä»¶æ¥è¿›è¡Œç›¸äº’å…³è”ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚ï¼ˆè¿™æ˜¯æœ¬äººè‡ªå·±çš„æ­ªåŠæ³•ï¼‰</p><h4 id="file-saver"><a href="https://github.com/eligrey/FileSaver.js">file-saver</a></h4><p>å‰ç«¯æ–‡ä»¶ä¸‹è½½åº“ã€‚</p><h4 id="html2canvas"><a href="https://github.com/niklasvh/html2canvas">html2canvas</a></h4><p>htmlé¡µé¢è½¬canvasï¼Œç”¨äºæˆªå–é¡µé¢ã€‚</p><h4 id="mustache"><a href="https://github.com/janl/mustache.js">mustache</a></h4><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ğŸ‚çš„æ’å€¼è¯­æ³•çš„åº“ï¼Œå¯ä»¥è§£æå­—ç¬¦ä¸²ä¸­çš„æ’å€¼è¯­æ³•ï¼Œå’Œ<code>vue</code>ä¸­çš„å†™æ³•ä¸€æ ·ï¼Œ<code>&#123;&#123;variable&#125;&#125;</code>ã€‚</p><h4 id="is-mobile"><a href="https://github.com/kaimallea/isMobile">is-mobile</a></h4><p>ä¸€ä¸ªç”¨äºåˆ¤æ–­å½“å‰æµè§ˆå™¨ç¯å¢ƒæ˜¯å¦æ˜¯ç§»åŠ¨ç«¯çš„åº“ã€‚</p><h4 id="localforage"><a href="https://github.com/localForage/localForage">localforage</a></h4><p>å‰ç«¯æµè§ˆå™¨æœ¬åœ°ç¼“å­˜åº“ã€‚</p><h4 id="lodash"><a href="https://github.com/lodash/lodash">lodash</a></h4><p>å„ç§å„æ ·å®ç”¨å‡½æ•°åº“ã€‚</p><h4 id="mockjs"><a href="https://github.com/nuysoft/Mock">mockjs</a></h4><p>ç”Ÿæˆå„ç§å„æ ·çš„å‡æ•°æ®ã€‚<br>æ­¤åº“ç”¨äºå®Œæˆå¤§å±é¡¹ç›®ä¸­å…³äº<code>mock</code>æ•°æ®ç›¸å…³çš„åŠŸèƒ½ã€‚</p><h4 id="moment"><a href="https://github.com/moment/moment">moment</a></h4><p>åŠŸèƒ½å¼ºå¤§çš„æ—¶é—´å¤„ç†åº“ã€‚</p><h4 id="nanoid"><a href="https://github.com/ai/nanoid">nanoid</a></h4><p>ç”Ÿæˆå”¯ä¸€<code>id</code>çš„åº“ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç»“æŸğŸ”šã€‚</p><p>é¡ºä¾¿åœ¨ä¸‹é¢é™„ä¸Šç›¸å…³çš„é“¾æ¥ã€‚</p><blockquote><p><a href="http://47.97.27.23/api/backend/screen/index.html">è¯•ç”¨åœ°å€</a><br><a href="https://github.com/food-billboard/create-chart/issues/2">è¯•ç”¨è´¦å·</a><br><a href="http://47.97.27.23/api/backend/create-chart-docs/index.html">æ“ä½œæ–‡æ¡£</a><br><a href="https://github.com/food-billboard/create-chart">ä»£ç åœ°å€</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>å¤§å±</category>
      
    </categories>
    
    
    <tags>
      
      <tag>lowcode react chart</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘</title>
    <link href="/2022/11/16/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91/"/>
    <url>/2022/11/16/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%A4%A7%E5%B1%8F%E8%AE%BE%E8%AE%A1%E5%99%A8%E5%BC%80%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<h1>æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘</h1><h2 id="å¼€å¤´">å¼€å¤´</h2><p>ä½ä»£ç å¹³å°ï¼Œç®—æ˜¯ä¸€ä¸ªå·²ç»çƒ­é—¨å¾ˆä¹…äº†çš„è¯é¢˜ï¼Œæœ¬äººä¹Ÿæ˜¯åœ¨çœ‹äº†å¾ˆå¤šçš„å¼€æºé¡¹ç›®ä»¥åŠä½“éªŒäº†ç›¸å…³çš„äº§å“ï¼Œå†³å®šè‡ªå·±æä¸€ä¸ªå‡ºæ¥ç©ç©ã€‚<br>æœ€ç»ˆå®šä¸‹çš„æ˜¯<code>æ•°æ®å¤§å±</code>çš„å¯è§†åŒ–è®¾è®¡å™¨ï¼Œç›¸å¯¹äºé¡µé¢ä½ä»£ç ï¼Œå¤§å±çš„ä½ä»£ç æ€»ä½“æ¥è¯´ï¼Œç›¸å¯¹æ›´ç®€å•ä¸€äº›ï¼Œä½†æ˜¯è€ƒè™‘åˆ°å½“ä¸­çš„ä¸€äº›ç»†èŠ‚åŠæ•ˆæœï¼Œé‚£ä¹Ÿç®—æ˜¯ç›¸å½“çš„å¤æ‚ã€‚</p><p>ç ”å‘å·¥ä½œå…¶å®å·²ç»å¼€å§‹äº†å¾ˆä¹…ï¼Œæœ€ç»ˆè¿˜æ˜¯å†³å®šå†™ä¸‹ä¸€ç¯‡æ°´æ–‡æ¥è®°å½•ä¸€ä¸‹ã€‚<br><a href="http://47.97.27.23/api/backend/screen/index.html">å¤§å±çš„ä½“éªŒåœ°å€</a><br>ä½“éªŒè´¦å·æ”¾åœ¨äº†ä»£ç çš„<a href="https://github.com/food-billboard/create-chart/issues/2">issue</a>ä¸­ï¼Œè¯·è‡ªå–ã€‚<br>å½“å‰ç‰ˆæœ¬ç»´æŒåœ¨<code>1.14</code>ç‰ˆæœ¬ï¼Œå¹¶ä¸”è¿˜åœ¨æŒç»­è¿­ä»£ä¸­ï¼Œè™½ç„¶å½“ä¸­è¿˜æœ‰å¾ˆå¤šçš„<code>bug</code>ï¼Œä½“éªŒçš„ä¼™ä¼´è½»å–·ğŸ™ğŸ»ã€‚</p><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/screenshoot-4.jpg" /><br/><br/><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/screenshoot-5.jpg" /><h2 id="å¼€å§‹">å¼€å§‹</h2><h3 id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</h3><p>å¤§å±æ•´ä½“ç»“æ„ä½¿ç”¨äº†<a href="https://github.com/umijs/umi">umi</a>ã€<a href="https://github.com/facebook/react">React</a>ã€<a href="https://github.com/apache/echarts">Echarts</a>ã€‚</p><h3 id="åŠŸèƒ½ç›¸å…³">åŠŸèƒ½ç›¸å…³</h3><h3 id="è®¾è®¡å™¨">è®¾è®¡å™¨</h3><ul><li>[x] ç»„ä»¶å¤åˆ¶ã€ç²˜è´´ï¼ˆæ”¯æŒè·¨å±ï¼‰</li><li>[x] ç»„ä»¶è½¬æ¢</li><li>[x] å‰è¿›ã€åé€€</li><li>[x] æˆç»„</li><li>[x] å¤šé€‰</li><li>[x] å¯¹é½</li><li>[x] æ•°æ®è¿‡æ»¤</li><li>[x] å…¨å±€å¸¸é‡</li><li>[x] æ»¤é•œ</li><li>[x] ä¸»é¢˜è‰²è½¬æ¢ï¼ˆæ”¯æŒå›¾ç‰‡ä¸Šä¼ ï¼‰</li><li>[x] å›¾å±‚ç®¡ç†</li><li>[ ] PCã€H5ä¸¤ç«¯æ”¯æŒ</li><li>[x] æ¨¡æ¿åˆ›å»ºä½¿ç”¨</li><li>[x] å¯¼å…¥ã€å¯¼å‡º</li><li>[x] è·¨å±å¤åˆ¶ç²˜è´´</li><li>[x] ç»„ä»¶è¾¹æ¡†å†…ç½®æ”¯æŒ</li><li>[x] æ¡ä»¶æ§åˆ¶</li><li>[x] ç»„ä»¶äº¤äº’è”åŠ¨æ”¯æŒ</li></ul><h3 id="æ•°æ®">æ•°æ®</h3><p>å½“å‰è®¾è®¡å™¨æ”¯æŒä¸‰ç§æ•°æ®æ ¼å¼ï¼š<code>é™æ€æ•°æ®</code>ã€<code>API</code>ã€<code>Mock</code>ã€‚</p><p><code>MOCK</code>æ•°æ®åº”ç”¨åœ¨ä¸€äº›åªéœ€ç®€å•æ¼”ç¤ºçš„åœºæ™¯ä¸­ï¼Œå¤§å±åŸºäº<a href="https://github.com/nuysoft/Mock">MockJs</a>åœ¨ç®¡ç†åå°å†…ç½®äº†ä¸€ä¸ªå¯è¡¨å•é…ç½®<code>Mockæ•°æ®</code>çš„åŠŸèƒ½ï¼Œå¯åœ¨å¤§å±ä¸­é€‰æ‹©è¯¥æ•°æ®ç±»å‹è¿›è¡Œå¿«é€Ÿçš„æ•°æ®å¡«å……ï¼ŒåŠ é€Ÿå¤§å±ç ”å‘é€Ÿåº¦ã€‚</p><h3 id="äº§å‡º">äº§å‡º</h3><p>å®Œæˆè®¾è®¡äº§å‡ºï¼Œå¯ä»¥è¿›è¡Œç®€å•é¢„è§ˆã€‚<br>æœ€åäº¤ä»˜åˆ™å¯é€‰æ‹©è¿›è¡Œå‘å¸ƒåˆ†äº«ï¼Œåˆ†äº«é¡µé¢ä¸éœ€è¦è¿›è¡Œç™»å½•è®¤è¯ï¼Œå¹¶ä¸”æ”¯æŒå¯†ç éªŒè¯ã€‚</p><h3 id="ps">ps</h3><p>è¯¦æƒ…åŠŸèƒ½åŠæ“ä½œå¯å‚çœ‹<a href="http://47.97.27.23/api/backend/create-chart-docs/index.html">å¤§å±æ“ä½œæ–‡æ¡£</a></p><p>å¯èƒ½å½“ä¸­é¡µé¢å¾ˆå¤šåœ°æ–¹ä¸é˜¿é‡Œçš„<code>datav</code>ç›¸ä¼¼ï¼Œä¸ç”¨æ€€ç–‘ï¼Œå› ä¸ºå¾ˆå¤šåœ°æ–¹çš„<code>ui</code>å‡å‚ç…§å…¶è¿›è¡Œä¿®æ”¹çš„ğŸ˜•ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ğŸŒ°<br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/screenshoot-1.png" /><br><br/><br><br/><br><img src="/images/æ•°æ®å¯è§†åŒ–å¤§å±è®¾è®¡å™¨å¼€å‘/screenshoot-2.png" /></p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>è¿™æ¬¡çš„æ°´æ–‡ç®—æ˜¯ä¸€ä¸ªæ•´ä½“çš„ä»‹ç»äº†ï¼Œå½“ä¸­çš„ç»†èŠ‚å®ç°å¯èƒ½ä¼šåœ¨åç»­çš„æ°´æ–‡ä¸­ä»‹ç»ã€‚<br>é¡ºä¾¿åœ¨ä¸‹é¢é™„ä¸Šç›¸å…³çš„é“¾æ¥ã€‚</p><blockquote><p><a href="http://47.97.27.23/api/backend/screen/index.html">è¯•ç”¨åœ°å€</a><br><a href="http://47.97.27.23/api/backend/create-chart-docs/index.html">æ“ä½œæ–‡æ¡£</a><br><a href="https://github.com/food-billboard/create-chart">ä»£ç åœ°å€</a></p></blockquote><p>å¦‚æœä½¿ç”¨ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥åœ¨<a href="https://github.com/food-billboard/create-chart/issues">issue</a>ä¸­ç•™è¨€ï¼Œæˆ–è€…ç›´æ¥åœ¨è¿™é‡Œç•™è¨€ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>å¤§å±</category>
      
    </categories>
    
    
    <tags>
      
      <tag>lowcode react chart</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docxåº“Tableè¸©å‘</title>
    <link href="/2022/11/11/docx%E5%BA%93Table%E8%B8%A9%E5%9D%91/"/>
    <url>/2022/11/11/docx%E5%BA%93Table%E8%B8%A9%E5%9D%91/</url>
    
    <content type="html"><![CDATA[<h2 id="docxåº“Tableè¸©å‘">docxåº“Tableè¸©å‘</h2><h2 id="ä»‹ç»">ä»‹ç»</h2><p>æœ€è¿‘å·¥ä½œä¸­é‡åˆ°äº†éœ€è¦å¯¼å‡º<code>word</code>æ–‡æ¡£çš„éœ€æ±‚ï¼Œåªæ˜¯ç®€å•çš„å°†åˆ—è¡¨è¯¦æƒ…çš„æ•°æ®å¯¼å‡ºæˆ<code>word</code>ä¸­çš„è¡¨æ ¼ã€‚<br>ç±»ä¼¼äºä¸‹é¢çš„æ•ˆæœï¼š</p><table><thead><tr><th>æ ‡é¢˜</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>æ ‡é¢˜</td><td>å†…å®¹</td></tr><tr><td>æ ‡é¢˜</td><td>å†…å®¹</td></tr></tbody></table><p>ä¹‹åæ‰¾åˆ°äº†ç›¸å…³çš„å·¥å…·åº“<a href="https://github.com/dolanmiu/docx">docx</a>ã€‚<br>åŠŸèƒ½å¼ºå¤§ï¼Œä»–å°è£…äº†<code>word</code>ä¸­çš„ç›¸å…³æ¨¡å—çš„æ„é€ æ–¹æ³•ï¼Œåªéœ€è¦ç®€å•çš„åˆ›å»ºä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥ç”Ÿæˆ<code>word</code>æ–‡æ¡£ã€‚<br>å…¶ä¸­çš„ä¸€äº›æ„é€ æ–¹æ³•æœ‰<code>Document</code>ã€<code>Table</code>ã€<code>Paragraph</code>ã€<code>TextRun</code>ç­‰ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><p>æ¥ç€å°±æ­£å¼å¼€å§‹å˜å˜ä¸€é¡¿æ“ä½œã€‚</p><h3 id="ç®€å•å®ç°">ç®€å•å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;<br>  Document,<br>Table,<br>TableCell,<br>TableRow,<br>Paragraph,<br>VerticalAlign,<br>WidthType,<br>TableLayoutType,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;docx&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exportDocx</span>(<span class="hljs-params">filename, value</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> table = <span class="hljs-keyword">new</span> Table(&#123;<br>    <span class="hljs-attr">rows</span>: value.reduce(<span class="hljs-function">(<span class="hljs-params">acc, item</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">const</span> &#123; key, value &#125; = item<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(value)) &#123;<br>acc.push(<br>...value.map(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> TableRow(&#123;<br><span class="hljs-attr">children</span>: [<br>...(index == <span class="hljs-number">0</span><br>? [<br><span class="hljs-keyword">new</span> TableCell(&#123;<br><span class="hljs-attr">rowSpan</span>: value.length,<br><span class="hljs-attr">children</span>: [<br><span class="hljs-keyword">new</span> Paragraph(&#123;<br><span class="hljs-attr">text</span>: key,<br>&#125;),<br>],<br><span class="hljs-attr">verticalAlign</span>: VerticalAlign.CENTER,<br>&#125;),<br>  ]<br>: []),<br><span class="hljs-keyword">new</span> TableCell(&#123;<br><span class="hljs-attr">children</span>: [<br><span class="hljs-keyword">new</span> Paragraph(&#123;<br><span class="hljs-attr">text</span>: item,<br>&#125;),<br>],<br><span class="hljs-attr">verticalAlign</span>: VerticalAlign.CENTER,<br>&#125;),<br>],<br>&#125;)<br>&#125;)<br>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>acc.push(<br><span class="hljs-keyword">new</span> TableRow(&#123;<br><span class="hljs-attr">children</span>: [<br><span class="hljs-keyword">new</span> TableCell(&#123;<br><span class="hljs-attr">children</span>: [<br><span class="hljs-keyword">new</span> Paragraph(&#123;<br><span class="hljs-attr">text</span>: key,<br>&#125;),<br>],<br><span class="hljs-attr">verticalAlign</span>: VerticalAlign.CENTER,<br>&#125;),<br><span class="hljs-keyword">new</span> TableCell(&#123;<br><span class="hljs-attr">children</span>: [<br><span class="hljs-keyword">new</span> Paragraph(&#123;<br><span class="hljs-attr">text</span>: value,<br>&#125;),<br>],<br><span class="hljs-attr">verticalAlign</span>: VerticalAlign.CENTER,<br>&#125;),<br>],<br>&#125;)<br>)<br>&#125;<br><span class="hljs-keyword">return</span> acc<br>&#125;, [])<br>  &#125;)<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç®€å•è¯•è¯•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">exportDocx(<span class="hljs-string">&#x27;example.docx&#x27;</span>, [<br>  &#123;<br>    <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;title1&quot;</span>,<br>    <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;value1&quot;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;title2&quot;</span>,<br>    <span class="hljs-attr">value</span>: [<br>      <span class="hljs-string">&quot;value2-1&quot;</span>,<br>      <span class="hljs-string">&quot;value2-2&quot;</span>,<br>      <span class="hljs-string">&quot;value2-3&quot;</span><br>    ]<br>  &#125;<br>])<br></code></pre></td></tr></table></figure><img src="/images/docxåº“Tableè¸©å‘/docx-1.jpg" />  <p>çœ‹ç€æ²¡å•¥é—®é¢˜ï¼Œä½†æ˜¯ä»–æ²¡æœ‰æ’‘æ»¡æ•´ä¸ªæ–‡æ¡£ã€‚<br>ç»™<code>Table</code>åŠ ä¸ªå®½åº¦ã€‚</p><ul><li>å› ä¸ºå­˜åœ¨ä¸€ä¸ªæ ‡é¢˜å­˜åœ¨å¤šæ¡æ•°æ®çš„æƒ…å†µï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨åˆ°<code>rowSpan</code>ï¼Œå’Œhtml<code>table</code>åŒç†ã€‚</li><li><code>verticalAlign</code>ï¼Œå†…å®¹å‚ç›´å¯¹é½æ–¹å¼ã€‚</li><li><code>Paragraph</code>æ®µè½å†…å®¹ï¼Œå¯ä»¥å½“æˆæ–‡å­—ä½¿ç”¨ã€‚</li><li><code>TableRow</code>ï¼Œç­‰åŒäºhtmlçš„<code>tr</code></li><li><code>TableCell</code>ï¼Œç­‰åŒäºhtmlçš„<code>td</code></li></ul><h3 id="æ·»åŠ å®½åº¦">æ·»åŠ å®½åº¦</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> Table(&#123;<br>  <span class="hljs-attr">width</span>: &#123;<br>    <span class="hljs-attr">type</span>: WidthType.PERCENTAGE,<br>    <span class="hljs-attr">size</span>: <span class="hljs-number">100</span> <br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><img src="/images/docxåº“Tableè¸©å‘/docx-2.jpg" />  <ul><li>WidthType æ˜¯ä¸€äº›å®½åº¦ç±»å‹çš„æšä¸¾å€¼<code>AUTO(default) | PERCENTAGE(ç™¾åˆ†æ¯”) | NIL(ç©º) | DXA(äºŒååˆ†ä¹‹ä¸€ç‚¹)</code></li><li>å…³äºè¿™ä¸ª<code>DXA</code>å•ä½ï¼Œå¤§è‡´çœ‹ä¸‹<a href="https://blog.csdn.net/weixin_36053926/article/details/112532485">è¿™é‡Œ</a>ã€‚</li></ul><p>çœ‹ç€æ²¡é—®é¢˜ã€‚ å†è¯•è¯•å¤šåŠ ç‚¹å†…å®¹çš„æƒ…å†µğŸ‘ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">exportDocx(<span class="hljs-string">&#x27;example.docx&#x27;</span>, [<br>  &#123;<br>    <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;title1&quot;</span>,<br>    <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;value1&quot;</span>.repeat(<span class="hljs-number">50</span>)<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;title2&quot;</span>,<br>    <span class="hljs-attr">value</span>: [<br>      <span class="hljs-string">&quot;value2-1&quot;</span>,<br>      <span class="hljs-string">&quot;value2-2&quot;</span>,<br>      <span class="hljs-string">&quot;value2-3&quot;</span><br>    ]<br>  &#125;<br>])<br></code></pre></td></tr></table></figure><img src="/images/docxåº“Tableè¸©å‘/docx-3.jpg" />   <p>æœ‰ç‚¹é—®é¢˜ï¼Œæ–‡å­—å¤šçš„é‚£ä¸€æ ï¼Œå®½åº¦è¶…å‡ºäº†å¤ªå¤šã€‚<br>å¹¶ä¸”åœ¨é’‰é’‰é‡Œçœ‹åˆ°çš„é¢„è§ˆæ•ˆæœæ˜¯è¿™æ ·çš„ã€‚</p><img src="/images/docxåº“Tableè¸©å‘/docx-4.jpg" /><div align="center"><img src="/images/docxåº“Tableè¸©å‘/emoji-1.jpg" />   </div><p>åœ¨ä»“åº“é‡Œé€›äº†ä¼šå„¿<code>issue</code>æ‰¾åˆ°äº†å¯¹åº”çš„é—®é¢˜ã€‚<br><a href="https://github.com/dolanmiu/docx/issues/349">è§£å†³åŠæ³•-1</a>ã€‚<br><a href="https://github.com/dolanmiu/docx/issues/1139">è§£å†³åŠæ³•-2</a>ã€‚</p><ul><li>ä¸å†ä½¿ç”¨ç™¾åˆ†æ¯”å®½åº¦ï¼Œè€Œæ˜¯ä½¿ç”¨<code>DXA</code>å®½åº¦ã€‚</li><li>å°†<code>Table</code>çš„å®½åº¦è®¾ç½®æˆ0ï¼Œå¹¶ä¸”è§„å®šå…¶åˆ—æ•°å’Œåˆ—å®½ã€‚</li><li>è®¾ç½®<code>Table</code>çš„<code>layout</code>ä¸º<code>FIXED</code>ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> Table(&#123;<br>  <span class="hljs-attr">layout</span>: TableLayoutType.FIXED,<br><span class="hljs-attr">columns</span>: <span class="hljs-number">3</span>,<br><span class="hljs-attr">width</span>: <span class="hljs-number">0</span>, <br><span class="hljs-attr">columnWidths</span>: [<span class="hljs-number">3213</span>, <span class="hljs-number">3213</span>, <span class="hljs-number">3212</span>] <span class="hljs-comment">// total page width is 9638 DXA for A4 portrait</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>å…³äºä¸Šé¢å®½åº¦è®¾ç½®æˆ<strong>0</strong>çš„é—®é¢˜ï¼Œæ‰“å¼€<code>word</code>æ–‡æ¡£æŸ¥çœ‹ï¼š<br><img src="/images/docxåº“Tableè¸©å‘/è¡¨æ ¼å¤§å°.jpg" /><br>è™½ç„¶æŒ‡å®šå®½åº¦çš„æŒ‰é’®æœªè¢«é€‰ä¸­ï¼Œä½†æ˜¯åœ¨é’‰é’‰ä¸­ä¾æ—§ç”Ÿæ•ˆäº†ã€‚<br>å°†å…¶æŒ‡å®šä¸º<code>0</code>ä¿è¯å®Œå…¨ä¸å—å½±å“ã€‚<br>è®¾ç½®<code>Table</code>çš„<code>layout</code>ä¸º<code>FIXED</code>ï¼Œè¡¨ç¤ºå›ºå®šå°ºå¯¸ï¼Œé˜²æ­¢å•å…ƒæ ¼è¢«å‹ç¼©å˜å½¢ã€‚<br>å…³äº<code>DXA</code>çš„é—®é¢˜ï¼Œä¸ªäººçŒœæµ‹æ˜¯å¯èƒ½ç™¾åˆ†æ¯”ä¸è¢«è¯†åˆ«ã€‚</p><p>æœ€åé™„ä¸Šå®Œæ•´çš„ä¾‹å­ã€‚</p><divsrc="https://stackblitz.com/edit/js-485wx8?file=index.js"class="iframe-viewer-button">ç‚¹å‡»æŸ¥çœ‹ä»£ç </div><img src="/images/docxåº“Tableè¸©å‘/docx-5.jpg" /><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç®€å•è®°å½•ä¸‹æ­¤æ¬¡ä½¿ç”¨<a href="https://github.com/dolanmiu/docx">docx</a>çš„è¸©å‘ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docx word</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¯æ—¥è¿›æ­¥å°è®°</title>
    <link href="/2022/10/24/%E6%AF%8F%E6%97%A5%E8%BF%9B%E6%AD%A5%E5%B0%8F%E8%AE%B0-1/"/>
    <url>/2022/10/24/%E6%AF%8F%E6%97%A5%E8%BF%9B%E6%AD%A5%E5%B0%8F%E8%AE%B0-1/</url>
    
    <content type="html"><![CDATA[<h1>æ¯æ—¥è¿›æ­¥å°è®°</h1><p>è®°å½•ä»Šå¤©çš„å°è¿›æ­¥ğŸ’ªğŸ»ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><p>æ—©å‰å‡ å¤©çš„æ–‡ç« ä¸­æåˆ°ï¼Œå¦‚ä½•ç»™<code>github</code>å¼€æºé¡¹ç›®è´¡çŒ®ä»£ç ï¼Œç»å†è¿‡ä¸€æ¬¡æ‹’ç»ä¹‹åï¼Œç»ˆäºè¿æ¥äº†æ˜¥å¤©ğŸ˜Šã€‚<br>åœ¨è°ƒè¯•è‡ªå·±çš„<a href="https://github.com/food-billboard/create-chart">å¯è§†åŒ–å¤§å±é¡¹ç›®</a>çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼š<br>è¾“å…¥æ¡†è¡¨å•è®¾ç½®çš„æ˜¯åœ¨<code>blur</code>æ—¶è§¦å‘ä¿å­˜ï¼ŒæŒ‰ç…§éœ€æ±‚ï¼Œä½¿ç”¨çš„æ˜¯<a href="https://github.com/ant-design/ant-design">antd</a>çš„<code>input</code>è¾“å…¥æ¡†ï¼Œå¹¶æ·»åŠ äº†<code>prefix</code>å±æ€§ï¼Œä½†æ˜¯å´å‡ºç°äº†å¥‡æ€ªçš„é—®é¢˜ï¼Œç‚¹å‡»è¾“å…¥æ¡†è¾¹æ¡†æˆ–è€…<code>prefix</code>éƒ½è§¦å‘äº†ä¿å­˜ï¼ŒåŒæ—¶ä¹Ÿè¯´æ˜å…¶åŒæ—¶è§¦å‘äº†<code>focus</code>å’Œ<code>blur</code>äº‹ä»¶ã€‚<br>éšåå‘ç°æ˜¯<a href="https://github.com/react-component/input">rc-input</a>å‡ºç°äº†é—®é¢˜ï¼Œå½“ä¸­ä½¿ç”¨çš„äº‹ä»¶æ˜¯<code>mousedown</code>ï¼Œè€Œåæœ¬äººå°±åªæ˜¯ç®€å•çš„å°†å…¶æ”¹æˆäº†<code>mouseup</code>è§£å†³äº†é—®é¢˜ã€‚<br>ä½†æ˜¯æäº¤ä¹‹ååˆå‘ç°ï¼Œä¹‹å‰æœ‰äººæäº¤<code>pr</code>ç§°ä½¿ç”¨<code>mouseup</code>ä¼šå¼•å‘åˆ«çš„é—®é¢˜ï¼Œæ— å¥ˆä¹‹ä¸‹é€‰æ‹©äº†ä¸€ä¸ªæ¯”è¾ƒå¤æ‚ä¸”ä¸å¤ªåˆç†çš„æ–¹å¼è§£å†³äº†é—®é¢˜ã€‚<br>æœ€ååœ¨ä¸ä½œè€…çš„ä¸€ç•ªæ²Ÿé€šäº¤æ¶‰åï¼Œé€‰æ‹©äº†<code>click</code>ä½œä¸ºæœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆã€‚<br>ä½œè€…ä¹Ÿå®¢æ°”çš„å«æˆ‘æäº¤<code>pr</code>ğŸ‘ğŸ»ã€‚</p><p>æ€»å¾—æ¥è¯´ç®—æ˜¯ä¸€æ¬¡éå¸¸ä¸é”™çš„ç»å†ã€‚</p><img src="/images/æ¯æ—¥è¿›æ­¥å°è®°/è´¡çŒ®åˆ—è¡¨.jpg" /><h2 id="ç»“æŸ">ç»“æŸ</h2><p>å®Œç¾ç»“æŸä»Šæ—¥ç¾å¥½ä¸€å¤©ğŸ˜Šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>fitting</category>
      
    </categories>
    
    
    <tags>
      
      <tag>fitting</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è´¡çŒ®ä»£ç ç»™Githubå¼€æºé¡¹ç›®</title>
    <link href="/2022/10/11/%E8%B4%A1%E7%8C%AE%E4%BB%A3%E7%A0%81%E7%BB%99Github%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/"/>
    <url>/2022/10/11/%E8%B4%A1%E7%8C%AE%E4%BB%A3%E7%A0%81%E7%BB%99Github%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h1>è´¡çŒ®ä»£ç ç»™Githubå¼€æºé¡¹ç›®</h1><h2 id="ä»‹ç»">ä»‹ç»</h2><p>ä¹‹å‰å°±ä¸€ç›´æƒ³ç»™å¼€æºé¡¹ç›®è´¡çŒ®è‡ªå·±çš„ä¸€ä»½åŠ›ï¼Œå¥ˆä½•éƒ½æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æœºä¼šï¼Œå‰å‡ å¤©å°è¯•ç»™å¼€æºé¡¹ç›®<a href="https://github.com/alibaba/hooks">ahooks</a>è´¡çŒ®ä¸€ä¸‹ä»£ç ï¼Œè™½ç„¶æ²¡æœ‰è¢«é‡‡çº³ï¼Œä½†æ˜¯ä¹Ÿåœ¨è¿™é‡Œåšä¸€ä¸‹è®°å½•å§ğŸ“ã€‚<br>å…¨æ–‡çš„è´¡çŒ®æµç¨‹å‡å‚è€ƒæ–‡ç« ã€Š<a href="https://juejin.cn/post/6844903944418787341">å¦‚ä½•è´¡çŒ®ä»£ç åˆ°Githubå¼€æºé¡¹ç›®</a>ã€‹ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><ol><li>æ‰¾åˆ°ç›®æ ‡é¡¹ç›®ã€‚</li></ol><p>é¦–å…ˆæ˜¯æ‰¾ä¸€ä¸ªé€‚åˆçš„å¼€æºç›®æ ‡é¡¹ç›®ï¼Œå¹¶ä¸”æœ‰è‡ªå·±å‘ç°çš„<code>bug</code>æˆ–è€…ä¼˜åŒ–ç­‰åœ°æ–¹ã€‚<br>æœ¬äººæ‰¾åˆ°çš„æ˜¯<code>ahooks</code>ï¼Œå› ä¸ºç›¸å¯¹æ¥è¯´ï¼Œå„ä¸ª<code>hook</code>ç›¸å¯¹ç‹¬ç«‹ï¼Œå¹¶ä¸”ä»£ç ç²¾ç®€ï¼Œé˜…è¯»æ–¹ä¾¿ã€‚<br>æœ¬äººå¸Œæœ›åœ¨å…¶ä¸­æ–°å¢ä¸€ä¸ª<code>hook</code>ï¼Œç”¨äºç›‘å¬æµè§ˆå™¨çš„<code>location hash</code>å˜åŒ–ä»¥åŠä¿®æ”¹ã€‚</p><ol start="2"><li>forké¡¹ç›®</li></ol><p>æ¥ç€å°†ç›®æ ‡é¡¹ç›®<code>fork</code>åˆ°è‡ªå·±çš„è´¦å·ä¸‹é¢ã€‚</p><img src="/images/è´¡çŒ®ä»£ç ç»™Githubå¼€æºé¡¹ç›®/fork.jpg" /><img src="/images/è´¡çŒ®ä»£ç ç»™Githubå¼€æºé¡¹ç›®/fork-self.jpg" /><ol start="3"><li>cloneé¡¹ç›®</li></ol><p>å°†è‡ªå·±ä»“åº“ä¸‹çš„é¡¹ç›®<code>clone</code>åˆ°æœ¬åœ°ã€‚<br><code>git clone git@github.com:food-billboard/è‡ªå·±ä»“åº“çš„é¡¹ç›®.git</code></p><ol start="4"><li>å»ºç«‹é“¾æ¥</li></ol><p>å¦‚æœè¦æäº¤æœ¬åœ°ä»£ç åˆ°å¼€æºé¡¹ç›®ï¼Œéœ€è¦å»ºç«‹å…¶é“¾æ¥ã€‚<br><code>git remote add upstream git@github.com:xxxx/å¼€æºä»“åº“.git</code><br>éªŒè¯ä»¥ä¸‹å‘½ä»¤ä¼šå‡ºç°ä¸¤ä¸ª<code>upstream</code>åœ°å€ã€‚<br><code>git remote -v</code></p><ol start="5"><li>æ–°å»ºåˆ†æ”¯&amp;ä¿®æ”¹ä»£ç &amp;æäº¤</li></ol><p>æ¥ç€å°±æ˜¯æŒ‰ç…§å¹³å¸¸çš„ç®€å•çš„æ–°åˆ†æ”¯ç¼–å†™ä»£ç å¹¶æäº¤ã€‚</p><ul><li>é¡ºå¸¦ä¸€æ<br>ä¸ºäº†ä¿è¯è´¨é‡ä¸å®‰å…¨ï¼Œä¸€èˆ¬éƒ½åº”è¯¥åœ¨æäº¤å‰ï¼Œå®Œæˆå¯¹åº”ä¿®æ”¹æˆ–æ–°å¢æ¨¡å—çš„åŠŸèƒ½æµ‹è¯•ä»¥åŠæ–‡æ¡£ä¿®æ”¹ã€‚</li></ul><ol start="6"><li>compare&amp;pull request</li></ol><p>æäº¤ä»£ç åï¼Œä¼šåœ¨è‡ªå·±ä»“åº“ä¸»é¡µä¸Šæ–¹å‡ºç°<code>compare&amp;pull request</code>æŒ‰é’®ã€‚<br>ç‚¹å‡»è¿›å…¥åˆ°æäº¤ç•Œé¢ã€‚</p><img src="/images/è´¡çŒ®ä»£ç ç»™Githubå¼€æºé¡¹ç›®/pull-request.jpg" /><p>ä¸€èˆ¬ä¼˜ç§€çš„å¼€æºé¡¹ç›®éƒ½ä¼šæœ‰å¯¹è±¡çš„<code>pr</code>æ¨¡æ¿ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‰ç…§ä»–ä»¬çš„æ¨¡æ¿æ¥è¿›è¡Œå¯¹åº”çš„ä¿¡æ¯å¡«å†™ï¼Œæ–¹ä¾¿ä½œè€…æ ¸å®ç›¸å…³ä¿¡æ¯ã€‚<br>å®Œæˆå¡«å†™åï¼Œç‚¹å‡»æäº¤ï¼Œå³å®Œæˆäº†ä¸€æ¬¡ä»£ç è´¡çŒ®ğŸ‘ã€‚</p><p>ä¸‹é¢ç»™ä¸€ä¸ª<code>antd</code>çš„æ¨¡æ¿ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs markdown">  &lt;!--<br>é¦–å…ˆï¼Œæ„Ÿè°¢ä½ çš„è´¡çŒ®ï¼ğŸ˜„<br><br>æ–°ç‰¹æ€§è¯·æäº¤è‡³ feature åˆ†æ”¯ï¼Œå…¶ä½™å¯æäº¤è‡³ master åˆ†æ”¯ã€‚<br>åœ¨ç»´æŠ¤è€…å®¡æ ¸é€šè¿‡åä¼šåˆå¹¶ã€‚<br>è¯·ç¡®ä¿å¡«å†™ä»¥ä¸‹ pull request çš„ä¿¡æ¯ï¼Œè°¢è°¢ï¼~<br>--&gt;<br><br>[<span class="hljs-string">[English Template / è‹±æ–‡æ¨¡æ¿</span>](<span class="hljs-link">https://github.com/ant-design/ant-design/blob/master/.github/PULL_REQUEST_TEMPLATE.md</span>)]<br><br><span class="hljs-section">### ğŸ¤” è¿™ä¸ªå˜åŠ¨çš„æ€§è´¨æ˜¯ï¼Ÿ</span><br><br><span class="hljs-bullet">-</span> [ ] æ–°ç‰¹æ€§æäº¤<br><span class="hljs-bullet">-</span> [ ] æ—¥å¸¸ bug ä¿®å¤<br><span class="hljs-bullet">-</span> [ ] ç«™ç‚¹ã€æ–‡æ¡£æ”¹è¿›<br><span class="hljs-bullet">-</span> [ ] æ¼”ç¤ºä»£ç æ”¹è¿›<br><span class="hljs-bullet">-</span> [ ] ç»„ä»¶æ ·å¼/äº¤äº’æ”¹è¿›<br><span class="hljs-bullet">-</span> [ ] TypeScript å®šä¹‰æ›´æ–°<br><span class="hljs-bullet">-</span> [ ] åŒ…ä½“ç§¯ä¼˜åŒ–<br><span class="hljs-bullet">-</span> [ ] æ€§èƒ½ä¼˜åŒ–<br><span class="hljs-bullet">-</span> [ ] åŠŸèƒ½å¢å¼º<br><span class="hljs-bullet">-</span> [ ] å›½é™…åŒ–æ”¹è¿›<br><span class="hljs-bullet">-</span> [ ] é‡æ„<br><span class="hljs-bullet">-</span> [ ] ä»£ç é£æ ¼ä¼˜åŒ–<br><span class="hljs-bullet">-</span> [ ] æµ‹è¯•ç”¨ä¾‹<br><span class="hljs-bullet">-</span> [ ] åˆ†æ”¯åˆå¹¶<br><span class="hljs-bullet">-</span> [ ] å…¶ä»–æ”¹åŠ¨ï¼ˆæ˜¯å…³äºä»€ä¹ˆçš„æ”¹åŠ¨ï¼Ÿï¼‰<br><br><span class="hljs-section">### ğŸ”— ç›¸å…³ Issue</span><br><br>&lt;!--<br><span class="hljs-bullet">1.</span> æè¿°ç›¸å…³éœ€æ±‚çš„æ¥æºï¼Œå¦‚ç›¸å…³çš„ issue è®¨è®ºé“¾æ¥ã€‚<br>--&gt;<br><br><span class="hljs-section">### ğŸ’¡ éœ€æ±‚èƒŒæ™¯å’Œè§£å†³æ–¹æ¡ˆ</span><br><br>&lt;!--<br><span class="hljs-bullet">1.</span> è¦è§£å†³çš„å…·ä½“é—®é¢˜ã€‚<br><span class="hljs-bullet">2.</span> åˆ—å‡ºæœ€ç»ˆçš„ API å®ç°å’Œç”¨æ³•ã€‚<br><span class="hljs-bullet">3.</span> æ¶‰åŠUI/äº¤äº’å˜åŠ¨éœ€è¦æœ‰æˆªå›¾æˆ– GIFã€‚<br>--&gt;<br><br><span class="hljs-section">### ğŸ“ æ›´æ–°æ—¥å¿—</span><br><br>&lt;!--<br>ä»ç”¨æˆ·è§’åº¦æè¿°å…·ä½“å˜åŒ–ï¼Œä»¥åŠå¯èƒ½çš„ breaking change å’Œå…¶ä»–é£é™©ã€‚<br>--&gt;<br><br>| è¯­è¨€    | æ›´æ–°æè¿° |<br>| ------- | -------- |<br>| ğŸ‡ºğŸ‡¸ è‹±æ–‡ |          |<br>| ğŸ‡¨ğŸ‡³ ä¸­æ–‡ |          |<br><br><span class="hljs-section">### â˜‘ï¸ è¯·æ±‚åˆå¹¶å‰çš„è‡ªæŸ¥æ¸…å•</span><br><br>âš ï¸ è¯·è‡ªæ£€å¹¶å…¨éƒ¨<span class="hljs-strong">**å‹¾é€‰å…¨éƒ¨é€‰é¡¹**</span>ã€‚âš ï¸<br><br><span class="hljs-bullet">-</span> [ ] æ–‡æ¡£å·²è¡¥å……æˆ–æ— é¡»è¡¥å……<br><span class="hljs-bullet">-</span> [ ] ä»£ç æ¼”ç¤ºå·²æä¾›æˆ–æ— é¡»æä¾›<br><span class="hljs-bullet">-</span> [ ] TypeScript å®šä¹‰å·²è¡¥å……æˆ–æ— é¡»è¡¥å……<br><span class="hljs-bullet">-</span> [ ] Changelog å·²æä¾›æˆ–æ— é¡»æä¾›<br><br></code></pre></td></tr></table></figure><h3 id="æ³¨æ„">æ³¨æ„</h3><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯æ¬¡åœ¨æäº¤ä»£ç å‰ï¼Œéƒ½åº”è¯¥å…ˆå°†æœ¬åœ°çš„ä»£ç ä¸è¿œç¨‹ä»“åº“è¿›è¡ŒåŒæ­¥ï¼Œä»¥å…å‡ºç°ä¸å¿…è¦çš„éº»çƒ¦ã€‚<br>è¿™é‡Œè¡¥å……ä¸‹åŒæ­¥ä»£ç çš„å‘½ä»¤ã€‚<br>å¦‚æœæ˜¯åˆšåˆšæ‰§è¡Œè¿‡ä¸Šè¿°å‘½ä»¤çš„æƒ…å†µä¸‹ï¼Œå¯è·³è¿‡ä»¥ä¸‹æ­¥éª¤ã€‚</p><ol><li>å»ºç«‹é“¾æ¥<br><code>git remote add upstream git@github.com:xxxx/å¼€æºä»“åº“.git</code></li><li>æ‹‰å–ä»£ç <br><code>git fetch upstream</code></li></ol><h2 id="ç»“æŸ">ç»“æŸ</h2><p>å¤§è‡´çš„æµç¨‹å°±æ˜¯è¿™ä¸ªæ ·å­ï¼Œå¸Œæœ›åœ¨ä¹‹åè¿˜èƒ½æ‰¾åˆ°åˆé€‚çš„æœºä¼šï¼Œä¸»è¦è¿˜æ˜¯æƒ³é”»ç‚¼ä¸€ä¸‹è‡ªå·±çš„ä»£ç æŠ€æœ¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>github</category>
      
    </categories>
    
    
    <tags>
      
      <tag>github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SVGå­¦ä¹ </title>
    <link href="/2022/09/19/SVG%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/09/19/SVG%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1>SVGå­¦ä¹ </h1><h2 id="ä»‹ç»">ä»‹ç»</h2><blockquote><p>SVG æŒ‡å¯ä¼¸ç¼©çŸ¢é‡å›¾å½¢ (Scalable Vector Graphics)<br>SVG ç”¨æ¥å®šä¹‰ç”¨äºç½‘ç»œçš„åŸºäºçŸ¢é‡çš„å›¾å½¢<br>SVG ä½¿ç”¨ XML æ ¼å¼å®šä¹‰å›¾å½¢<br>SVG å›¾åƒåœ¨æ”¾å¤§æˆ–æ”¹å˜å°ºå¯¸çš„æƒ…å†µä¸‹å…¶å›¾å½¢è´¨é‡ä¸ä¼šæœ‰æ‰€æŸå¤±<br>SVG æ˜¯ä¸‡ç»´ç½‘è”ç›Ÿçš„æ ‡å‡†<br>SVG ä¸è¯¸å¦‚ DOM å’Œ XSL ä¹‹ç±»çš„ W3C æ ‡å‡†æ˜¯ä¸€ä¸ªæ•´ä½“</p></blockquote><p>å­¦ä¹ <code>svg</code>çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†èƒ½åœ¨å‰ç«¯é¡µé¢å®ç°æ›´å¤šæœ‰æ„æ€çš„æ•ˆæœã€‚<br>ä»¥ä¸‹å°±æ˜¯æœ¬äººçš„å­¦ä¹ ç¬”è®°ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><h3 id="svg">svg</h3><p><code>svg</code>æ ‡ç­¾çš„å±æ€§</p><ul><li>width &amp; height</li><li>version ç‰ˆæœ¬</li><li>xmlns å‘½åç©ºé—´</li><li>viewbox å¯è§†åŒºåŸŸ<br>æ­¤å±æ€§è¡¨ç¤ºè£å‰ªä¸€ä¸ªçŸ©å½¢åŒºåŸŸä½œä¸ºæœ€ç»ˆçš„å¯è§†åŒºåŸŸï¼ˆleft top width heightï¼‰<br>æ¯”å¦‚<code>20 20 100 100</code>è¡¨ç¤ºèƒ½çœ‹åˆ°å·¦ä¸Šè§’(20, 20)ä¸ºèµ·ç‚¹çš„å®½é«˜å‡ä¸º100çš„çŸ©å½¢åŒºåŸŸã€‚</li></ul><h3 id="ä¸€äº›å¸¸ç”¨çš„å±æ€§">ä¸€äº›å¸¸ç”¨çš„å±æ€§</h3><p>åŸºæœ¬ä¸Šè¿™äº›å±æ€§éƒ½å’Œ<code>css</code>é€šç”¨ã€‚</p><h4 id="width-height-x-y">width &amp; height &amp; x &amp; y</h4><p>å…ƒç´ çš„å®½é«˜ä½ç½®ã€‚</p><h4 id="fill">fill</h4><p>é¢œè‰²å¡«å……</p><svg width="100" height="100">  <rect fill="red" width="50" height="50"></rect></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;rect fill=&quot;red&quot; width=&quot;50&quot; height=&quot;50&quot;&gt;&lt;/rect&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="stroke">stroke</h4><p>æè¾¹</p><svg width="100" height="100">  <rect x="10" y="10" fill="none" stroke="#f00" width="50" height="50"></rect></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;rect x=&quot;10&quot; y=&quot;10&quot; fill=&quot;none&quot; stroke=&quot;#f00&quot; width=&quot;50&quot; height=&quot;50&quot;&gt;&lt;/rect&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="stroke-width">stroke-width</h4><p>æè¾¹çš„çº¿æ¡å°ºå¯¸</p><svg width="100" height="100">  <rect x="10" y="10" fill="none" stroke="#f00" stroke-width="10" width="50" height="50"></rect></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;rect x=&quot;10&quot; y=&quot;10&quot; fill=&quot;none&quot; stroke=&quot;#f00&quot; stroke-width=&quot;10&quot; width=&quot;50&quot; height=&quot;50&quot;&gt;&lt;/rect&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="stroke-dashoffset">stroke-dashoffset</h4><p>è®¾ç½®è™šçº¿çš„åç§»é‡</p><svg width="200" height="100">  <polyline points="20 20 150 20" stroke-dasharray="50 10" stroke="red" stroke-width="5"></polyline>  <polyline points="20 50 150 50" stroke-dasharray="50 10" stroke="blue" stroke-width="5" stroke-dashoffset="20"></polyline></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;200&quot; height=&quot;100&quot;&gt;<br>  &lt;polyline points=&quot;20 20 150 20&quot; stroke-dasharray=&quot;50 10&quot; stroke=&quot;red&quot; stroke-width=&quot;5&quot;&gt;&lt;/polyline&gt;<br>  &lt;polyline points=&quot;20 50 150 50&quot; stroke-dasharray=&quot;50 10&quot; stroke=&quot;blue&quot; stroke-width=&quot;5&quot; stroke-dashoffset=&quot;20&quot;&gt;&lt;/polyline&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="stroke-linejoin">stroke-linejoin</h4><p>è½¬æŠ˜ç‚¹çš„æ ·å¼</p><svg width="200" height="200">  <polyline stroke-linejoin="miter" points="0 0 0 50 50 50" stroke="red" stroke-width="20" fill="none"></polyline>  <polyline stroke-linejoin="round" points="50 50 50 100 100 100" stroke="blue" stroke-width="20" fill="none"></polyline>  <polyline stroke-linejoin="bevel" points="100 100 100 150 150 150" stroke="blue" stroke-width="20" fill="none"></polyline></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;200&quot; height=&quot;100&quot;&gt;<br>  &lt;polyline stroke-linejoin=&quot;miter&quot; points=&quot;20 20 40 50 60 70&quot; stroke=&quot;red&quot; stroke-width=&quot;5&quot;&gt;&lt;/polyline&gt;<br>  &lt;polyline stroke-linejoin=&quot;round&quot; points=&quot;20 20 40 50 60 70&quot; stroke=&quot;blue&quot; stroke-width=&quot;5&quot;&gt;&lt;/polyline&gt;<br>  &lt;polyline stroke-linejoin=&quot;bevel&quot; points=&quot;20 20 40 50 60 70&quot; stroke=&quot;blue&quot; stroke-width=&quot;5&quot;&gt;&lt;/polyline&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="stroke-opacity">stroke-opacity</h4><p>æè¾¹çº¿æ¡çš„é€æ˜åº¦</p><h4 id="stroke-linecap">stroke-linecap</h4><p>æè¾¹çš„æœ«ç«¯å½¢çŠ¶</p><svg width="100" height="100">  <g fill="none" stroke="black" stroke-width="6">    <path stroke-linecap="butt" d="M5 20 l65 0" />    <path stroke-linecap="round" d="M5 40 l65 0" />    <path stroke-linecap="square" d="M5 60 l65 0" />  </g></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;g fill=&quot;none&quot; stroke=&quot;black&quot; stroke-width=&quot;6&quot;&gt;<br>    &lt;path stroke-linecap=&quot;butt&quot; d=&quot;M5 20 l65 0&quot; /&gt;<br>    &lt;path stroke-linecap=&quot;round&quot; d=&quot;M5 40 l65 0&quot; /&gt;<br>    &lt;path stroke-linecap=&quot;square&quot; d=&quot;M5 60 l65 0&quot; /&gt;<br>  &lt;/g&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="stroke-dasharray">stroke-dasharray</h4><p>ç»˜åˆ¶è™šçº¿</p><p>æ ¼å¼ä¸º<code>length margin, length margin, ...</code></p><ul><li>length è™šçº¿é•¿åº¦</li><li>margin è™šçº¿é—´è·</li></ul><svg width="100" height="100">  <g fill="none" stroke="black" stroke-width="4">    <path stroke-dasharray="5,5" d="M5 20 l215 0" />    <path stroke-dasharray="10,10" d="M5 40 l215 0" />    <path stroke-dasharray="20,10,5,5,5,10" d="M5 60 l215 0" />  </g></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;g fill=&quot;none&quot; stroke=&quot;black&quot; stroke-width=&quot;4&quot;&gt;<br>    &lt;path stroke-dasharray=&quot;5,5&quot; d=&quot;M5 20 l215 0&quot; /&gt;<br>    &lt;path stroke-dasharray=&quot;10,10&quot; d=&quot;M5 40 l215 0&quot; /&gt;<br>    &lt;path stroke-dasharray=&quot;20,10,5,5,5,10&quot; d=&quot;M5 60 l215 0&quot; /&gt;<br>  &lt;/g&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="rx-ry">rx &amp; ry</h4><p><strong>çŸ©å½¢</strong>çš„åœ†è§’<br><strong>æ¤­åœ†</strong>çš„æ°´å¹³å’Œå‚ç›´å°ºå¯¸</p><h4 id="cx-cy">cx &amp; cy</h4><p><strong>åœ†å½¢</strong>çš„åœ†å¿ƒ</p><h4 id="r">r</h4><p><strong>åœ†å½¢</strong>çš„åŠå¾„</p><h3 id="shapes-å½¢çŠ¶å’Œæ–‡å­—">shapes å½¢çŠ¶å’Œæ–‡å­—</h3><h4 id="rectï¼ˆçŸ©å½¢ï¼‰">rectï¼ˆçŸ©å½¢ï¼‰</h4><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100" height="100">  <rect width="50" height="50" fill="red" stroke-width="1" stroke="rgb(0,0,0)"/></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;100&quot; height=&quot;100&quot; &gt;<br>  &lt;rect width=&quot;50&quot; height=&quot;50&quot; fill=&quot;red&quot; stroke-width=&quot;1&quot; stroke=&quot;rgb(0,0,0)&quot;/&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="circleï¼ˆåœ†å½¢ï¼‰">circleï¼ˆåœ†å½¢ï¼‰</h4><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100" height="100">  <circle cx="30" cy="30" r="10" fill="red" stroke-width="1" stroke="rgb(0,0,0)"/></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;circle cx=&quot;30&quot; cy=&quot;30&quot; r=&quot;10&quot; fill=&quot;red&quot; stroke-width=&quot;1&quot; stroke=&quot;rgb(0,0,0)&quot;/&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="ellipseï¼ˆæ¤­åœ†ï¼‰">ellipseï¼ˆæ¤­åœ†ï¼‰</h4><p>ç±»ä¼¼äº<strong>åœ†å½¢</strong>ï¼Œåªæ˜¯æŠŠ<code>r</code>å˜æˆäº†<code>rx</code>å’Œ<code>ry</code>ã€‚</p><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100" height="100">  <ellipse cx="30" cy="30" rx="10" ry="5" fill="red" stroke-width="1" stroke="rgb(0,0,0)"/></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;ellipse cx=&quot;30&quot; cy=&quot;30&quot; rx=&quot;10&quot; ry=&quot;5&quot; fill=&quot;red&quot; stroke-width=&quot;1&quot; stroke=&quot;rgb(0,0,0)&quot;/&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="lineï¼ˆç›´çº¿ï¼‰">lineï¼ˆç›´çº¿ï¼‰</h4><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100" height="100">  <line x1='0' y1='0' x2='100' y2='100' stroke-width="1" stroke="rgb(0,0,0)"/></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;line x1=&#x27;0&#x27; y1=&#x27;0&#x27; x2=&#x27;100&#x27; y2=&#x27;100&#x27; stroke-width=&quot;1&quot; stroke=&quot;rgb(0,0,0)&quot;/&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="polylineï¼ˆå¤šçº¿æ®µï¼‰">polylineï¼ˆå¤šçº¿æ®µï¼‰</h4><p><code>points</code>ä¸ºç‚¹çš„é›†åˆï¼Œæ ¼å¼ä¸º<code>x1 y1, x2 y2, ...</code></p><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100" height="100">  <polyline points="0 0, 100 0, 0 100, 0 0" stroke-width="1" stroke="rgb(0,0,0)" fill="none" /></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;polyline points=&quot;0 0, 100 0, 0 100, 0 0&quot; stroke-width=&quot;1&quot; stroke=&quot;rgb(0,0,0)&quot; fill=&quot;none&quot; /&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="polygonï¼ˆå¤šè¾¹å½¢ï¼‰">polygonï¼ˆå¤šè¾¹å½¢ï¼‰</h4><p>å’Œ<code>polyline</code>ç›¸åŒï¼Œä½¿ç”¨<code>points</code>è®¾ç½®ç‚¹</p><svg height="210" width="500">  <polygon points="100 10, 40 198, 190 78, 10 78, 160 198" fill="lime" stroke="purple" stroke-width="5" fill-rule="nonzero" /></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;polygon points=&quot;100 10, 40 198, 190 78, 10 78, 160 198&quot; fill=&quot;lime&quot; stroke=&quot;purple&quot; stroke-width=&quot;5&quot; fill-rule=&quot;nonzero&quot; /&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="pathï¼ˆè·¯å¾„ï¼‰">pathï¼ˆè·¯å¾„ï¼‰</h4><p>é‡ç‚¹æ¥äº†ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯å¹³å¸¸ç”¨åˆ°çš„æœ€å¤šçš„ä¸€ä¸ªä¸œè¥¿ã€‚</p><p>å…³é”®çš„å±æ€§åœ¨<code>d</code>ä¸Šï¼Œæè¿°äº†å…ƒç´ çš„æ•´ä½“è·¯å¾„çš„å½¢çŠ¶ã€‚<br>ä»¥ä¸‹æ˜¯ç›¸å…³çš„è¯­æ³•ã€‚</p><blockquote><p>M = moveto ç§»åŠ¨åˆ°æŸä¸ªä½ç½®<br>L = lineto ä»å½“å‰ç‚¹è¿çº¿åˆ°æŒ‡å®šç‚¹<br>H = horizontal lineto ä»å½“å‰ç‚¹æ°´å¹³è¿æ¥æŒ‡å®šç‚¹<br>V = vertical lineto ä»å½“å‰ç‚¹å‚ç›´è¿æ¥æŒ‡å®šç‚¹<br>C = curveto ä¸‰æ¬¡è´å¡å°”æ›²çº¿<br>S = smooth curveto ä¸‰æ¬¡å¹³æ»‘è´å¡å°”æ›²çº¿<br>Q = quadratic BÃ©zier curve äºŒæ¬¡è´å¡å°”æ›²çº¿<br>T = smooth quadratic BÃ©zier curveto å¹³æ»‘äºŒæ¬¡è´å¡å°”æ›²çº¿<br>A = elliptical Arc åœ†å¼§ï¼ˆxè½´åŠå¾„ï¼Œyè½´åŠå¾„ï¼Œæ—‹è½¬è§’åº¦ï¼Œæ˜¯å¦é€‰æ‹©å¼§é•¿è¾ƒé•¿çš„ä¸€æ®µ0çŸ­è¾¹|1é•¿è¾¹ï¼Œé¡ºæ—¶é’ˆç»˜åˆ¶1|é€†æ—¶é’ˆ0ï¼Œç»ˆç‚¹xè½´åæ ‡ï¼Œç»ˆç‚¹yè½´åæ ‡ï¼‰<br>Z = closepath  é—­åˆè·¯å¾„</p></blockquote><p>ä»¥ä¸Šçš„å­—æ¯ï¼Œå¤§å°è¡¨ç¤ºç»å¯¹ä½ç½®ï¼Œå°å†™è¡¨ç¤ºç›¸å¯¹ä½ç½®ã€‚</p><p><code>d</code>ä»¥<code>M</code>å¼€å¤´ï¼Œ</p><svg width="200" height="200">  <path d="M10 10 L120 50 H140 V100" fill="none" stroke="red" stroke-width="2"></path></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;200&quot; height=&quot;200&quot;&gt;<br>  &lt;path d=&quot;M10 10 L120 50 H140 V100&quot; fill=&quot;none&quot; stroke=&quot;red&quot; stroke-width=&quot;2&quot;&gt;&lt;/path&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h5 id="A">A</h5><p>ä»ç‚¹(10, 10)å¼€å§‹ï¼Œç»˜åˆ¶xè½´åŠå¾„ä¸º50ï¼Œyè½´åŠå¾„æ˜¯20ï¼Œæ—‹è½¬100åº¦ï¼Œä»¥å°å¼§åº¦ï¼Œé€†æ—¶é’ˆåˆ°ç‚¹ï¼ˆ100ï¼Œ 100ï¼‰å¤„ã€‚</p><svg width="200" height="200">  <path d="M10 10 A50 20 100 0 0 100 100" fill="none" stroke="red" stroke-width="2"></path></svg><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">&lt;svg width=<span class="hljs-string">&quot;200&quot;</span> height=<span class="hljs-string">&quot;200&quot;</span>&gt;<br>  &lt;path d=<span class="hljs-string">&quot;M10 10 A50 20 180 1 0 100 100&quot;</span> fill=<span class="hljs-string">&quot;none&quot;</span> stroke=<span class="hljs-string">&quot;red&quot;</span> stroke-width=<span class="hljs-string">&quot;2&quot;</span>&gt;&lt;/path&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="textï¼ˆæ–‡æœ¬ï¼‰">textï¼ˆæ–‡æœ¬ï¼‰</h4><svg height="210" width="500">  <text x="50" y="50" fill="lime">I am Daniel</text></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg height=&quot;210&quot; width=&quot;500&quot;&gt;<br>  &lt;text x=&quot;50&quot; y=&quot;50&quot; fill=&quot;lime&quot;&gt;I am Daniel&lt;/text&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h3 id="å…¶ä»–">å…¶ä»–</h3><h4 id="defs">defs</h4><p>å°†ä¸€äº›ç‰¹æ®Šçš„é…ç½®æ”¾åœ¨<code>defs</code>æ ‡ç­¾ä¸­ï¼Œæ¯”å¦‚<strong>æ»¤é•œ</strong>ã€<strong>æ¸å˜</strong>ã€<strong>é˜´å½±</strong>ç­‰ã€‚</p><svg width="100" height="100">  <defs>    <filter id="f1">      <feGaussianBlur in="SourceGraphic" stdDeviation="15" />    </filter>  </defs>  <rect width="90" height="90" stroke="green" stroke-width="3" fill="yellow" filter="url(#f1)" /></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;defs&gt;<br>    &lt;filter id=&quot;f1&quot;&gt;<br>      &lt;feGaussianBlur in=&quot;SourceGraphic&quot; stdDeviation=&quot;15&quot; /&gt;<br>    &lt;/filter&gt;<br>  &lt;/defs&gt;<br>  &lt;rect width=&quot;90&quot; height=&quot;90&quot; stroke=&quot;green&quot; stroke-width=&quot;3&quot; fill=&quot;yellow&quot; filter=&quot;url(#f1)&quot; /&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h5 id="filterï¼ˆæ»¤é•œï¼‰">filterï¼ˆæ»¤é•œï¼‰</h5><p>æœ‰å¦‚ä¸‹æ»¤é•œï¼š</p><blockquote><p>feBlend - ä¸å›¾åƒç›¸ç»“åˆçš„æ»¤é•œ<br>feColorMatrix - ç”¨äºå½©è‰²æ»¤å…‰ç‰‡è½¬æ¢<br>feComponentTransfer<br>feComposite<br>feConvolveMatrix<br>feDiffuseLighting<br>feDisplacementMap<br>feFlood<br>feGaussianBlur<br>feImage<br>feMerge<br>feMorphology<br>feOffset - è¿‡æ»¤é˜´å½±<br>feSpecularLighting<br>feTile<br>feTurbulence<br>feDistantLight - ç”¨äºç…§æ˜è¿‡æ»¤<br>fePointLight - ç”¨äºç…§æ˜è¿‡æ»¤<br>feSpotLight - ç”¨äºç…§æ˜è¿‡æ»¤</p></blockquote><p>ç­‰ç­‰ã€‚</p><h5 id="æ¸å˜">æ¸å˜</h5><ul><li>çº¿æ€§æ¸å˜</li></ul><svg width="100" height="100">  <defs>    <linearGradient id="linear" x1="0%" y1="0%" x2="100%" y2="100%">      <stop offset="0%" stop-color="red" stop-opacity="1"></stop>      <stop offset="100%" stop-color="yellow" stop-opacity="1"></stop>    </linearGradient>  </defs>  <rect width="50" height="50" fill="url(#linear)"></rect></svg><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs svg">&lt;svg width=&quot;100&quot; height=&quot;100&quot;&gt;<br>  &lt;defs&gt;<br>    &lt;linearGradient id=&quot;linear&quot; x1=&quot;0%&quot; y1=&quot;0%&quot; x2=&quot;100%&quot; y2=&quot;100%&quot;&gt;<br>      &lt;stop offset=&quot;0%&quot; stop-color=&quot;red&quot; stop-opacity=&quot;1&quot;&gt;&lt;/stop&gt;<br>      &lt;stop offset=&quot;100%&quot; stop-color=&quot;yellow&quot; stop-opacity=&quot;1&quot;&gt;&lt;/stop&gt;<br>    &lt;/linearGradient&gt;<br>  &lt;/defs&gt;<br>  &lt;rect width=&quot;50&quot; height=&quot;50&quot; fill=&quot;url(#linear)&quot;&gt;&lt;/rect&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><ul><li><p>x1ã€y1ã€x2ã€y2è¡¨ç¤ºçº¿æ€§æ¸å˜çš„æ–¹å‘</p></li><li><p>id è¡¨ç¤ºæ¸å˜çš„åç§°</p></li><li><p>stop è¡¨ç¤ºå†…éƒ¨é¢œè‰²çš„å˜åŒ–æ­¥éª¤</p><ul><li>offset è¡¨ç¤ºçº¿æ€§çš„ä½ç½®</li><li>stop-color è¡¨ç¤ºé¢œè‰²</li><li>stop-opacity è¡¨ç¤ºé€æ˜åº¦</li></ul></li><li><p>å¾„å‘æ¸å˜</p></li></ul><svg width="100" height="100">  <defs>    <radialGradient id="radial" r="100%" cx="100%" cy="50%" fx="50%" fy="50%">      <stop offset="0%" stop-color="red" stop-opacity="1"></stop>      <stop offset="100%" stop-color="yellow" stop-opacity="1"></stop>    </radialGradient>  </defs>  <circle r="50" cx="50" cy="50" fill="url(#radial)"></rect></svg><p>ä¸çº¿æ€§æ¸å˜ç±»ä¼¼</p><ul><li>r è¡¨ç¤ºæ¸å˜çš„åœ†å½¢å¤§å°</li><li>fxã€fy è¡¨ç¤ºæ¸å˜çš„ç„¦ç‚¹ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ä¸ªç¯å…‰æ•ˆæœï¼Œæˆ–è€…è¯´æ¸å˜<code>åœ†å¿ƒ</code>åœ¨å›¾å½¢ä¸Šçš„ä½ç½®ã€‚</li><li>fr è¡¨ç¤ºç„¦ç‚¹çš„å¤§å°</li><li>cxã€cy è¡¨ç¤ºæ¸å˜ç»“æŸçš„åœ†å¿ƒä½ç½®</li></ul><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ä»¥ä¸Šå°±æ˜¯æœ¬äººç›¸å…³çš„ç¬”è®°ã€‚<br>ä¸‹é¢ç»™åˆ°ä¸€äº›é“¾æ¥ï¼š<br><a href="https://c.runoob.com/more/svgeditor/">ç¼–è¾‘å™¨</a><br><a href="https://www.runoob.com/svg/svg-reference.html">APIå‚è€ƒ</a></p><h2 id="é™„å¢">é™„å¢</h2><p>è¿™é‡Œä¿å­˜ä¸€äº›å¹³å¸¸çœ‹åˆ°çš„æœ‰æ„æ€çš„<code>svg</code>æ•ˆæœğŸ‘ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>css svg</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€åˆ›èšå®½å­¦ä¹ </title>
    <link href="/2022/09/12/%E4%B8%80%E5%88%9B%E8%81%9A%E5%AE%BD%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/09/12/%E4%B8%80%E5%88%9B%E8%81%9A%E5%AE%BD%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸€åˆ›èšå®½å­¦ä¹ ">ä¸€åˆ›èšå®½å­¦ä¹ </h2><h2 id="èƒŒæ™¯">èƒŒæ™¯</h2><p>ä½œä¸ºä¸€ä¸ªğŸŒ¶ğŸ”æŠ€æœ¯äººï¼Œæ¯å¤©æƒ³çš„éƒ½æ˜¯å¦‚ä½•æğŸ’°ï¼Œæ¯å¤©ç›¯ç€ğŸ”ğŸ’°æ¶¨æ¶¨è·Œè·Œï¼Œä¸€å¤œå›åˆ°è§£æ”¾å‰ï¼Œå—å¤Ÿäº†ã€‚æ˜¯æ—¶å€™é€šè¿‡çŸ¥è¯†åˆ›é€ è´¢å¯Œäº†ã€‚<br>å­¦ä¹ é‡åŒ–äº¤æ˜“ï¼Œå¦‚æœé€šè¿‡è‡ªåŠ¨åŒ–æ¥è¿›è¡Œäº¤æ˜“ï¼Œå®ç°è´¢å¯Œè‡ªç”±ğŸ‘ã€‚</p><h2 id="ä»‹ç»">ä»‹ç»</h2><p><a href="https://ycjq.95358.com/">ä¸€åˆ›èšå®½</a>æ˜¯å›½å†…æ¯”è¾ƒæœ‰åçš„è‚¡ç¥¨é‡åŒ–äº¤æ˜“å¹³å°ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…å°è£…äº†å¾ˆå¤šå®ç”¨çš„å‡½æ•°ï¼Œå¹¶æä¾›äº†å®ç›˜æ•°æ®ï¼Œä»¥åŠå®ç›˜æ¥å…¥å¸®åŠ©ã€‚å¤§å¤§ç®€åŒ–äº†å¼€å‘è€…çš„å¼€å‘è¿‡ç¨‹ã€‚æœ¬æ–‡å°±ç®€å•çš„è®°å½•ä¸€ä¸‹è‡ªå·±çš„å­¦ä¹ ç¬”è®°ğŸ“ã€‚</p><h3 id="æ€»ä½“ç»“æ„">æ€»ä½“ç»“æ„</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span>(<span class="hljs-params">context</span>):</span><br>  run_daily(period, time=<span class="hljs-string">&#x27;every_bar&#x27;</span>)<br>  g.security = <span class="hljs-string">&#x27;000001.XSHE&#x27;</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">period</span>(<span class="hljs-params">context</span>):</span><br>  order(g.security, <span class="hljs-number">100</span>) <br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªç®€å•çš„ç»“æ„ã€‚</p><ul><li><code>initialize</code>è¡¨ç¤ºåˆå§‹åŒ–ã€‚</li><li><code>run_daily</code>è¡¨ç¤ºå¾ªç¯æ‰§è¡Œçš„å‡½æ•°ã€‚<br><a href="https://ycjq.95358.com/help/api/help?name=api#run_daily">ä¼ é€é—¨</a></li><li><code>order</code>è¡¨ç¤ºä¹°å…¥å–å‡ºçš„å‡½æ•°ã€‚<br><a href="https://ycjq.95358.com/help/api/help?name=api#%E4%BA%A4%E6%98%93%E5%87%BD%E6%95%B0%E2%99%A0">ä¼ é€é—¨</a></li><li><code>g</code>æ˜¯ä¸€ä¸ªå…¨å±€çš„å˜é‡ï¼Œå¯ä»¥æŠŠè‡ªå®šä¹‰çš„ä¸€äº›å˜é‡èµ‹å€¼åˆ°å®ƒä¸‹é¢</li><li><code>context</code>ä¹Ÿæ˜¯ä¸ªç±»ä¼¼<code>g</code>çš„å˜é‡ï¼Œå½“ä¸­å­˜å‚¨äº†å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚<br><img src="/images/ä¸€åˆ›èšå®½å­¦ä¹ /context.png" /></li></ul><h3 id="ä¸€äº›å¸¸ç”¨çš„å‡½æ•°å’Œå±æ€§">ä¸€äº›å¸¸ç”¨çš„å‡½æ•°å’Œå±æ€§</h3><h4 id="SecurityUnitData">SecurityUnitData</h4><p>è‚¡ç¥¨è¡Œæƒ…æ•°æ®æ ¼å¼</p><blockquote><p>open: æ—¶é—´æ®µå¼€å§‹æ—¶ä»·æ ¼<br>close: æ—¶é—´æ®µç»“æŸæ—¶ä»·æ ¼<br>low: æœ€ä½ä»·<br>high: æœ€é«˜ä»·<br>volume: æˆäº¤çš„è‚¡ç¥¨æ•°é‡<br>money: æˆäº¤çš„é‡‘é¢<br>factor: å‰å¤æƒå› å­<br>avg: è¿™æ®µæ—¶é—´çš„å¹³å‡ä»·<br>pre_close: å‰ä¸€ä¸ªå•ä½æ—¶é—´ç»“æŸæ—¶çš„ä»·æ ¼<br>paused: è¿™åªè‚¡ç¥¨æ˜¯å¦åœç‰Œï¼Œæ˜¯åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0</p></blockquote><h4 id="get-index-stocks">get_index_stocks</h4><p>è·å–æŒ‡æ•°æˆåˆ†è‚¡<br><code>get_index_stocks(&quot;000300.XSHG&quot;, '2022-01-01')</code><br>è·å–<code>2022-01-01</code>æ—¶çš„æ²ªæ·±300çš„è‚¡ç¥¨é›†åˆ</p><h4 id="history">history</h4><p>è‚¡ç¥¨å†å²è¡Œæƒ…æ•°æ®</p><ul><li>count: ç»“æœé›†çš„è¡Œæ•°</li><li>unit: æ—¶é—´é•¿åº¦ <code>1d</code> || <code>1m</code></li><li>field æ•°æ®ç±»å‹ <code>SecurityUnitData</code></li><li>security_list è‚¡ç¥¨åˆ—è¡¨</li><li>df</li><li>skip_paused æ˜¯å¦è·³è¿‡ä¸äº¤æ˜“æ—¥æœŸï¼ˆåŒ…æ‹¬åœç‰Œ, æœªä¸Šå¸‚æˆ–è€…é€€å¸‚åçš„æ—¥æœŸï¼‰ï¼Œæš‚æ—¶æ²¡æœ‰å¤ªç†è§£ï¼Œåé¢ç”¨åˆ°äº†å†çœ‹ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">history(field=<span class="hljs-string">&#x27;close&#x27;</span>, count=<span class="hljs-number">3</span>, security_list=[<span class="hljs-string">&#x27;000001.XSHE&#x27;</span>,<span class="hljs-string">&#x27;000002.XSHE&#x27;</span>])<br><span class="hljs-comment"># æ•°æ®æ ¼å¼ï¼š</span><br><span class="hljs-comment"># ä¸¤æ”¯è‚¡ç¥¨çš„æ”¶ç›˜ä»·</span><br><span class="hljs-comment">#                      </span><br><span class="hljs-comment"># 2016-08-29  11.05  9.31</span><br><span class="hljs-comment"># 2016-08-30  11.1  9.33</span><br><span class="hljs-comment"># 2016-08-31  12.33  9.36</span><br></code></pre></td></tr></table></figure><h4 id="attribute-history">attribute_history</h4><p>ç±»ä¼¼äºä¸Šé¢çš„<code>history</code><br>ä½†æ˜¯åªèƒ½è·å–ä¸€æ”¯è‚¡ç¥¨ï¼Œå¹¶ä¸”èƒ½è·å¾—å¤šä¸ªå­—æ®µ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">attribute_history(field=[<span class="hljs-string">&#x27;money&#x27;</span>, <span class="hljs-string">&#x27;high&#x27;</span>], count=<span class="hljs-number">3</span>, security=<span class="hljs-string">&#x27;000001.XSHE&#x27;</span>)<br><span class="hljs-comment"># ç»“æœå¦‚ä¸‹ï¼š</span><br><span class="hljs-comment">#                    money  high</span><br><span class="hljs-comment"># 2016-08-29  5.322954e+08  9.31</span><br><span class="hljs-comment"># 2016-08-30  5.618541e+08  9.33</span><br><span class="hljs-comment"># 2016-08-31  4.638758e+08  9.36</span><br></code></pre></td></tr></table></figure><h4 id="get-fundamentals">get_fundamentals</h4><p>è·å–å…¬å¸<strong>è´¢åŠ¡æ•°æ®</strong></p><ul><li>query<br>æ•°æ®æŸ¥è¯¢ï¼Œç±»ä¼¼äº<code>mysql</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¿«é€Ÿä¸Šæ‰‹æ¨¡æ¿</span><br><span class="hljs-comment"># query(è¡¨.å­—æ®µ).filter(ç­›é€‰æ¡ä»¶).order_by(æ’åºæ–¹æ³•).limit(æ•°é‡ä¸Šé™)</span><br><span class="hljs-comment">#æ¯”è¾ƒé•¿çš„è¯å¯ä»¥åˆ†è¡Œå†™</span><br></code></pre></td></tr></table></figure><h3 id="ä¸€äº›æ¦‚å¿µ">ä¸€äº›æ¦‚å¿µ</h3><h4 id="å¸‚ä»·å•å’Œé™ä»·å•">å¸‚ä»·å•å’Œé™ä»·å•</h4><ul><li>å¸‚ä»·å•æ˜¯æŒ‡æŠ•èµ„è€…åœ¨äº¤æ˜“ä¸ªè‚¡æ—¶ï¼Œä»¥å¸‚åœºçš„ä»·æ ¼æˆäº¤ï¼Œè€Œé™ä»·å•ä¸€èˆ¬æ˜¯æŒ‡ä¸ªè‚¡çš„å¸‚åœºä»·æ ¼ï¼Œè¾¾åˆ°æŠ•èµ„è€…æŒ‡å®šçš„ä»·æ ¼æ—¶æ‰æˆäº¤ã€‚</li><li>å¸‚ä»·å•é€šå¸¸å¯ä»¥å¾ˆå¿«åœ°æˆäº¤ï¼Œè€Œé™ä»·å•çš„ä¼˜åŠ¿åœ¨äºä»¥ç†æƒ³çš„ä»·æ ¼æˆäº¤ï¼Œè¿™ä¸¤ç§å•é€‚åˆä¸åŒçš„è¡Œæƒ…ã€‚</li><li>æŠ•èµ„è€…ä»¥å¸‚ä»·å§”æ‰˜äº¤æ˜“çš„ä¼˜ç‚¹æ˜¯åœ¨ä¸Šæ¶¨è¡Œæƒ…ä¸‹èƒ½åŠæ—¶ä¹°è¿›ï¼Œåœ¨ä¸‹è·Œè¡Œæƒ…ä¸‹èƒ½åŠæ—¶å–å‡ºï¼Œè€Œä»¥é™ä»·å§”æ‰˜äº¤æ˜“çš„ä¼˜ç‚¹æ˜¯åˆ©äºæŠ•èµ„è€…æ§åˆ¶äº¤æ˜“æˆæœ¬ã€‚<br><a href="https://www.51credit.com/wenda/925559.html">åŸæ–‡</a></li></ul><h4 id="æŒ‡æ ‡">æŒ‡æ ‡</h4><p>äº¤æ˜“æ¬¡æ•°ã€ç­–ç•¥æ”¶ç›Šã€åŸºå‡†æ”¶ç›Šã€å¹´åŒ–æ”¶ç›Šç‡ã€æœ€å¤§å›æ’¤ç‡ã€Alphaã€Betaã€å¤æ™®æ¯”ç‡ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>å†…å®¹å¤§æ¦‚å°±è¿™äº›ï¼Œå…³äºä¸€äº›é«˜æ·±çš„ç”¨æ³•ï¼Œä»¥åŠä¸€äº›<code>API</code>çš„ä½¿ç”¨ï¼Œç­‰åé¢å®é™…ä½¿ç”¨æ—¶ï¼Œå†æ…¢æ…¢è¡¥å……å§ğŸ‘ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>äº¤æ˜“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>trade</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>parallaxä½¿ç”¨</title>
    <link href="/2022/07/08/parallax%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/07/08/parallax%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>æœ€è¿‘æƒ³ç»™è‡ªå·±çš„é¡¹ç›®è®¾è®¡ä¸€ä¸ªæ¯”è¾ƒç‚«é…·çš„é¦–é¡µï¼Œå‘ç°äº†è¿™ä¸ªå·¥å…·â€“<a href="http://matthew.wagerfield.com/parallax/">parallax</a>ï¼Œæ•…åœ¨è¿™é‡Œåšä¸€ä¸ªç®€å•çš„ä»‹ç»ğŸ‘ ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><p><code>parallax</code>é¡¾åæ€ä¹‰ï¼Œè§†å·®ã€‚<br>ç™¾åº¦è¿™æ ·è§£é‡Šï¼š</p><blockquote><p>è§†å·®å°±æ˜¯ä»æœ‰ä¸€å®šè·ç¦»çš„ä¸¤ä¸ªç‚¹ä¸Šè§‚å¯ŸåŒä¸€ä¸ªç›®æ ‡æ‰€äº§ç”Ÿçš„æ–¹å‘å·®å¼‚ã€‚ä»ç›®æ ‡çœ‹ä¸¤ä¸ªç‚¹ä¹‹é—´çš„å¤¹è§’ï¼Œå«åšè¿™ä¸¤ä¸ªç‚¹çš„è§†å·®ï¼Œä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ç§°ä½œåŸºçº¿ã€‚åªè¦çŸ¥é“è§†å·®è§’åº¦å’ŒåŸºçº¿é•¿åº¦ï¼Œå°±å¯ä»¥è®¡ç®—å‡ºç›®æ ‡å’Œè§‚æµ‹è€…ä¹‹é—´çš„è·ç¦»ã€‚</p></blockquote><p><code>parallax</code>å¸®åŠ©ä½ å®Œæˆäº†ç›¸å…³å·¥ä½œï¼Œä½ åªéœ€è¦å†™å¥½ç›¸å…³çš„<code>html</code>ç»“æ„ï¼Œå†é€šè¿‡ç®€å•çš„é…ç½®å³å¯å®Œæˆéå¸¸ç‚«é…·çš„è§†å·®åŠ¨ç”»ã€‚</p><h3 id="API">API</h3><p>ä¸‹é¢æ˜¯å¯¹å…¶é…ç½®åšçš„ä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚</p><h4 id="relativeInput">relativeInput</h4><p>å¯¹åœºæ™¯è¿›è¡Œå…¨æ–¹ä½çš„æ§åˆ¶ã€‚<br>å¼€å¯æ—¶ï¼Œå®¹å™¨å†…çš„å…ƒç´ çš„è§†å·®æ•ˆæœè¡¨ç°ä¸ºæ•´ä¸ªé¡µé¢ã€‚</p><h4 id="hoverOnly">hoverOnly</h4><p>æ˜¯å¦åªåœ¨é¼ æ ‡åœ¨åœºæ™¯å†…è§¦å‘æ•ˆæœã€‚<br>å½“å…³é—­è¯¥åŠŸèƒ½æ—¶ï¼Œåªæœ‰é¼ æ ‡åœ¨å®¹å™¨å…ƒç´ å†…æ—¶ï¼Œæ‰ä¼šæœ‰è§†å·®çš„åŠ¨ç”»æ•ˆæœã€‚</p><h4 id="clipRelativeInput">clipRelativeInput</h4><p>æ§åˆ¶è§†å·®æ•ˆæœçš„è¾¹ç•Œã€‚<br>å¼€å¯æ—¶ï¼Œå½“æ•ˆæœè§¦ç¢°åˆ°å®¹å™¨çš„è¾¹ç¼˜æ—¶ï¼Œä¾¿ä¼šåœæ­¢åŠ¨ç”»ã€‚</p><h4 id="inputElement">inputElement</h4><p>æ§åˆ¶è§¦å‘è§†å·®æ•ˆæœçš„èŒƒå›´ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚<br>å’Œ<code>relativeInput</code>å’Œ<code>hoverOnly</code>é…åˆä½¿ç”¨ã€‚</p><h4 id="selector">selector</h4><p>æ§åˆ¶éœ€è¦è§¦å‘è§†å·®åŠ¨ç”»çš„å…ƒç´ ï¼Œå½“é»˜è®¤ä¸º<code>null</code>æ—¶ï¼Œå®¹å™¨å†…çš„æ‰€æœ‰å…ƒç´ å‡ä¼šè§¦å‘ã€‚</p><h4 id="limitX-limitY">limitX &amp; limitY</h4><p>å…ƒç´ åœ¨è½´ä¸Šè¿åŠ¨çš„æœ€å¤§è·ç¦»ã€‚<br>è®¾ç½®<code>false</code>è¡¨ç¤ºä¸é™åˆ¶ã€‚</p><h4 id="invertX-invertY">invertX &amp; invertY</h4><p>åè½¬å…ƒç´ çš„è¿åŠ¨æ–¹å‘ï¼Œè®¾ç½®<code>true</code>åˆ™è¿åŠ¨æ–¹å‘ä¸é¼ æ ‡ç§»åŠ¨æ–¹å‘ç›¸åã€‚</p><h4 id="calibrateX-calibrateY">calibrateX &amp; calibrateY</h4><p>ä¿å­˜å…ƒç´ åˆå§‹çš„ä½ç½®ï¼Œå¹¶æ ¹æ®è¯¥å€¼è¿›è¡Œè¿åŠ¨ã€‚ï¼ˆğŸ¤”ï¼Œæ²¡å¤ªæ‡‚ï¼Œå¥½åƒæ²¡å•¥æ•ˆæœï¼‰</p><h4 id="scalarX-scalarY">scalarX &amp; scalarY</h4><p>è®¾ç½®è¿åŠ¨è·ç¦»çš„ä¹˜æ•°ï¼Œæ§åˆ¶å…ƒç´ è¿åŠ¨çš„å¤§å°ã€‚</p><h4 id="frictionX-frictionY">frictionX &amp; frictionY</h4><p>è®¾ç½®å…ƒç´ è¿åŠ¨çš„ç¼“å†²ï¼Œä½äº<code>1</code>æ—¶ï¼Œä¼šå‡ç¼“è¿åŠ¨çš„é€Ÿåº¦ï¼Œé»˜è®¤<code>1.5</code></p><h3 id="æ–¹æ³•">æ–¹æ³•</h3><p>ä¸Šé¢çš„ä¸€äº›<code>API</code>åŒæ ·å¯ä»¥é€šè¿‡å®ä¾‹è¿›è¡Œæ§åˆ¶ï¼Œæ¯”å¦‚<code>limit</code>ã€<code>invert</code>ã€<code>calibrate</code>ã€<code>scalar</code>ã€<code>friction</code><br>è¿˜æœ‰ä»¥ä¸‹å¸¸ç”¨æ–¹æ³•<br><code>enable</code>ã€<code>disable</code>ã€<code>destroy</code>ã€<code>version</code></p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CSS</tag>
      
      <tag>animation</tag>
      
      <tag>åŠ¨ç”»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gsapåŠ¨ç”»çš„ç®€å•ä½¿ç”¨</title>
    <link href="/2022/06/23/gsap%E5%8A%A8%E7%94%BB%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/06/23/gsap%E5%8A%A8%E7%94%BB%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>æœ€è¿‘çªç„¶éœ€è¦å†™ä¸€äº›åŒ…å«å¤šç§åŠ¨ç”»çš„é¦–é¡µï¼Œå¶ç„¶æ‰¾åˆ°äº†<a href="https://greensock.com/">gsap</a>ï¼Œå‘ç°æ˜¯çœŸçš„å¥½ç”¨ï¼Œè¿™é‡Œå¯¹å…¶ä¸€äº›<code>api</code>åšä¸‹ç®€å•ä»‹ç»ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><p><code>gsap</code>æ˜¯ä¸€ä¸ª<code>javascript</code>åŠ¨ç”»åº“ï¼Œå¯ä»¥è®©å¼€å‘è€…é€šè¿‡ç®€å•çš„<code>api</code>å®Œæˆéå¸¸å¤æ‚çš„åŠ¨ç”»ï¼ŒåŒ…å«éå¸¸å¤šç§ç±»å‹çš„åŠ¨ç”»çš„å®ç°ï¼Œæ¯”å¦‚<code>css3</code>åŠ¨ç”»ï¼Œ<code>svg</code>åŠ¨ç”»ä»¥åŠ<code>canvas</code>ã€<code>webgl</code>ç­‰ã€‚</p><p>å®˜ç½‘ç»™å‡ºäº†å¤§é‡çš„ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥<a href="https://codepen.io/collection/AQPByE">å‰å¾€æŸ¥çœ‹</a></p><blockquote><p>ä½†æ˜¯å®ƒçš„ç¼ºç‚¹å°±æ˜¯æœ‰äº›åŠŸèƒ½æ˜¯ä»˜è´¹çš„ğŸ¤·ğŸ»â€â™€ï¸ï¼Œæ¯”å¦‚<code>SplitText</code>ã€<code>DrawSvg</code>ç­‰åŠŸèƒ½ï¼Œä»–ä»¬èƒ½å®ç°éå¸¸ç‚«é…·çš„åŠ¨ç”»æ•ˆæœï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡Œè´­ä¹°ä½¿ç”¨ã€‚ï¼ˆåæ­£æˆ‘ä¸ä¹°ğŸ˜ºï¼‰</p></blockquote><ul><li>ä»¥ä¸‹çš„ä»‹ç»å…¨éƒ¨éƒ½æ˜¯<strong>gsap3</strong>çš„å†…å®¹ã€‚</li></ul><h3 id="ä½¿ç”¨">ä½¿ç”¨</h3><p>æœ¬æ¬¡ä½¿ç”¨å¤§æ¦‚ç”¨åˆ°äº†ä»¥ä¸‹å‡ ä¸ª<code>api</code>ï¼š<code>to</code>ã€<code>from</code>ã€<code>timeline</code>ã€‚<br>ç”¨åˆ°çš„æ’ä»¶ä¸ºï¼š<code>ScrollTrigger</code>ã€<code>TextPlugin</code>ã€<code>MotionPathPlugin</code></p><h4 id="æ’ä»¶">æ’ä»¶</h4><p>ä½¿ç”¨çš„æ’ä»¶éƒ½éœ€è¦æå‰æ³¨å†Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; gsap &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;gsap&#x27;</span><br><span class="hljs-keyword">import</span> &#123; ScrollTrigger &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;gsap/ScrollTrigger&#x27;</span><br><span class="hljs-keyword">import</span> &#123; TextPlugin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;gsap/TextPlugin&#x27;</span><br><span class="hljs-keyword">import</span> &#123; MotionPathPlugin &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;gsap/MotionPathPlugin&#x27;</span><br><br>gsap.registerPlugin(ScrollTrigger, TextPlugin, MotionPathPlugin)<br></code></pre></td></tr></table></figure><h5 id="ScrollTrigger">ScrollTrigger</h5><p><code>ScrollTrigger</code>ä¸ºæ»šåŠ¨æ“ä½œçš„å…³è”åŠ¨ç”»ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®æ»šåŠ¨å®ç°ç›¸å…³çš„åŠ¨ç”»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">gsap.to(<span class="hljs-string">&#x27;div&#x27;</span>, &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>,<br>  <span class="hljs-attr">scrollTrigger</span>: &#123;<br>    <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;div&#x27;</span>, <span class="hljs-comment">//è§¦å‘æ»šåŠ¨åŠ¨ç”»çš„å…ƒç´ </span><br>    <span class="hljs-attr">start</span>: <span class="hljs-string">&#x27;start bottom&#x27;</span>, <span class="hljs-comment">// åŠ¨ç”»å¼€å§‹æ‰§è¡Œçš„æ—¶æœºï¼ˆå¼€å§‹/ç»“æŸï¼‰</span><br>    <span class="hljs-comment">// å››ä¸ªå­—ç¬¦ä¸²ä»£è¡¨å››ä¸ªæ—¶æœºï¼šonEnter onLeave onEnterBack onLeaveBack</span><br>    <span class="hljs-comment">// æ¯ä¸ªæ—¶æœºæ‰€æœ‰çš„åŠ¨ç”»ç±»å‹ï¼šplay pause resume reset restart complete reverse none </span><br>    <span class="hljs-attr">toggleAction</span>: <span class="hljs-string">&#x27;play none none reverse&#x27;</span>, <span class="hljs-comment">// åŠ¨ç”»å¯¹åº”æ—¶é—´è§¦å‘çš„åŠ¨ä½œ  </span><br>    <span class="hljs-attr">scrub</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ˜¯å¦è·Ÿéšé¼ æ ‡æ»šåŠ¨æ‰§è¡ŒåŠ¨ç”»ï¼Œè¾¹æ»šåŠ¨è¾¹æ‰§è¡ŒåŠ¨ç”»</span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><a href="https://codepen.io/GreenSock/pens/tags/?selected_tag=scrolltrigger">å®˜ç½‘ä¾‹å­</a></p><h5 id="TextPlugin">TextPlugin</h5><p><code>TextPlugin</code>ä¸ºä¸€äº›æ–‡å­—åŠ¨ç”»çš„æ’ä»¶ï¼Œæˆ‘ç†è§£çš„æ˜¯æ–‡å­—åŠ¨ç”»çš„åŸºç¡€ç‰ˆã€‚<br>æš‚æ—¶æ²¡æœ‰ç”¨åˆ°å•¥ç‰¹æ®Šçš„é…ç½®ã€‚<br><a href="https://codepen.io/collection/DmQpRq">å®˜ç½‘ä¾‹å­</a></p><h5 id="MotionPathPlugin">MotionPathPlugin</h5><p><code>MotionPathPlugin</code>ä¸ºè·¯å¾„åŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡<code>svg</code>çš„<code>path</code>å®ç°ç›¸å…³çš„åŠ¨ç”»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">gsap.to(<span class="hljs-string">&#x27;div&#x27;</span>, &#123;<br>  <span class="hljs-attr">motionPath</span>: &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;#path&quot;</span>, <span class="hljs-comment">// svgè·¯å¾„å…ƒç´ </span><br>    <span class="hljs-attr">align</span>: <span class="hljs-string">&quot;#path&quot;</span>, <span class="hljs-comment">// å¯¹é½åˆ°è·¯å¾„</span><br>    <span class="hljs-attr">autoRotate</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è‡ªåŠ¨æ—‹è½¬ï¼Œä¼šè·Ÿéšè·¯å¾„è‡ªåŠ¨æ—‹è½¬åŠ¨ç”»å…ƒç´ </span><br>    <span class="hljs-attr">alignOrigin</span>: [<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>] <span class="hljs-comment">// ä¸è·¯å¾„çš„é‡åˆç¨‹åº¦ï¼Œå½“å‰è®¾ç½®è¡¨ç¤ºå±…ä¸­  </span><br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p><a href="https://codepen.io/GreenSock/pens/tags/?selected_tag=motionpathplugin">å®˜ç½‘ä¾‹å­</a></p><h4 id="to">to</h4><p>è¡¨ç¤ºå…ƒç´ ä»å½“å‰çŠ¶æ€è½¬æ¢ä¸º<code>to</code>æŒ‡å®šçš„ä¸€äº›åŠ¨ç”»çŠ¶æ€ã€‚<br>æ¯”å¦‚ï¼Œå°†å…ƒç´ ç§»åŠ¨åˆ°<code>(100, 100)</code>ï¼Œå¹¶ä¸”<code>opacity</code>ä»1åˆ°0ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">gsap.to(<span class="hljs-string">&#x27;div&#x27;</span>, &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>,<br>  <span class="hljs-attr">y</span>: <span class="hljs-number">100</span>,<br>  <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>,<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸‹é¢ä»‹ç»å…¶ä¸­ä¸€äº›å¸¸ç”¨çš„å±æ€§ï¼Œä¸ä¸‹é¢<code>from</code>æ–¹æ³•çš„å‚æ•°åŸºæœ¬ç›¸åŒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> Option = &#123;<br>  <span class="hljs-attr">duration</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// åŠ¨ç”»æ‰§è¡Œçš„æ—¶é—´</span><br>  <span class="hljs-attr">repeat</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// é‡å¤æ¬¡æ•°ï¼Œ-1æ— é™åˆ¶</span><br>  <span class="hljs-attr">repeatDelay</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// äºŒæ¬¡æ‰§è¡ŒåŠ¨ç”»çš„å»¶è¿Ÿæ—¶é—´  </span><br>  <span class="hljs-attr">yoyo</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// åŠ¨ç”»æ˜¯å¦é‡å¤å¾€è¿”æ‰§è¡Œï¼Œæ¯”å¦‚ï¼šä»1-2ï¼Œç„¶åä»2-1  </span><br>  <span class="hljs-attr">stagger</span>: <span class="hljs-number">0.5</span>, <span class="hljs-comment">// å¤šä¸ªåŠ¨ç”»é”™å¼€æ‰§è¡Œçš„æ—¶é—´é—´éš”  </span><br>  <span class="hljs-attr">ease</span>: <span class="hljs-string">&#x27;power1.inOut&#x27;</span>, <span class="hljs-comment">// åŠ¨ç”»çš„é€Ÿåº¦æ›²çº¿ï¼Œè¯¦ç»†å¯ä»¥æŸ¥çœ‹æ–‡ä»¶ /node_modules/gsap/types/ease.d.ts  </span><br>  <span class="hljs-comment">// css å±æ€§</span><br>  <span class="hljs-attr">scale</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// ç¼©æ”¾</span><br>  <span class="hljs-attr">rotate</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// æ—‹è½¬</span><br>  <span class="hljs-attr">transformOrigin</span>: <span class="hljs-string">&#x27;center&#x27;</span>, <span class="hljs-comment">// å˜æ¢ä¸­å¿ƒç‚¹</span><br>  <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// å®½åº¦ 100vh 100px 100% éƒ½å¯ä»¥</span><br>  <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// é«˜åº¦åŒç†</span><br>  <span class="hljs-attr">visibility</span>: <span class="hljs-string">&#x27;visible&#x27;</span>, <span class="hljs-comment">// æ˜¾ç¤ºéšè—  </span><br>  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-comment">// é¢œè‰²</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="from">from</h4><p>ä¸<code>to</code>ç›¸åï¼Œè¡¨ç¤ºå…ƒç´ ä»<code>from</code>çŠ¶æ€è½¬ä¸º<code>å…ƒç´ å½“å‰çŠ¶æ€</code>ã€‚</p><h4 id="timeline">timeline</h4><p><code>timeline</code>å¯ä»¥ç†è§£æˆä¸Šè¿°<code>api</code>çš„ä¸€ä¸ªé›†åˆã€‚<br>æœ‰æ—¶å¯èƒ½éœ€è¦æŒ‰ç…§æ—¶é—´é¡ºåºï¼ŒæŒ‰é¡ºåºçš„æ‰§è¡Œä¸€ç³»åˆ—çš„åŠ¨ç”»ä»»åŠ¡ï¼Œè¿™å°†æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚</p><p>æ¯”å¦‚ä¸€ä¸ªçŸ©å½¢å…ƒç´ ï¼Œé¦–å…ˆ<code>x</code>ç§»åŠ¨åˆ°<code>100</code>ï¼Œæ¥ç€<code>y</code>ç§»åŠ¨åˆ°<code>100</code>ï¼Œå³ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">gsap.timeline()<br>.to(<span class="hljs-string">&#x27;div&#x27;</span>, &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-number">100</span><br>&#125;)<br>.to(<span class="hljs-string">&#x27;div&#x27;</span>, &#123;<br>  <span class="hljs-attr">y</span>: <span class="hljs-number">100</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><a href="https://codepen.io/GreenSock/pens/tags/?selected_tag=timeline">å®˜ç½‘ç¤ºä¾‹</a></p><h4 id="å…¶ä»–">å…¶ä»–</h4><p><code>gsap</code>çš„åŠ¨ç”»èƒ½åŠ›éå¸¸çš„å¼ºï¼Œä½†æ˜¯ä¹Ÿæœ‰é™åˆ¶æ€§ï¼Œä»¥ä¸‹ä¸ºæœ¬äººè§‚ç‚¹ï¼Œä¸ä¸€å®šæ­£ç¡®ï¼š<br>å…¶å®ç°åŠ¨ç”»çš„<code>css</code>èƒ½åŠ›ä¸<code>transition</code>æœ‰éå¸¸å¤§çš„å…³ç³»ï¼Œåªæœ‰èƒ½å“åº”<code>transition</code>çš„å±æ€§æ‰èƒ½å½¢æˆåŠ¨ç”»ï¼Œæ¯”å¦‚<code>width</code>ã€<code>height</code>ã€<code>backgroundColor</code>ã€<code>scale</code>ç­‰ã€‚<br>ä½†æ˜¯æœ‰äº›å±æ€§æ˜¯æ— æ³•å“åº”çš„ï¼Œæ¯”å¦‚<code>display</code>ï¼Œå½“è®¾ç½®å…¶ä»<code>block</code>å˜ä¸º<code>none</code>æ—¶ï¼Œä¸ºç¬é—´å˜åŒ–ï¼Œæ— åŠ¨ç”»æ•ˆæœã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p><code>gsap</code>çš„åŠŸèƒ½éå¸¸çš„å¼ºå¤§ï¼Œä»¥ä¸Šä½¿ç”¨çš„åŠŸèƒ½åªæ˜¯çš®è‚¤ï¼Œå„ä½å¯ä»¥è‡ªå·±å»ç¢ç£¨ã€‚<br>é¡ºä¾¿çœ‹ä¸‹æœ¬äººä½¿ç”¨çš„æ•ˆæœï¼š<a href="https://food-billboard.github.io/create-chart-docs/">gh-pages</a>æˆ–<a href="http://47.97.27.23/api/backend/create-chart-docs/index.html">ç§äººæœåŠ¡å™¨</a>ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœåŠ¡ç«¯puppeteerçš„ä½¿ç”¨</title>
    <link href="/2022/04/21/%E6%9C%8D%E5%8A%A1%E7%AB%AFpuppeteer%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/04/21/%E6%9C%8D%E5%8A%A1%E7%AB%AFpuppeteer%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="æœåŠ¡ç«¯puppeteerçš„ä½¿ç”¨">æœåŠ¡ç«¯puppeteerçš„ä½¿ç”¨</h2><h2 id="ä»‹ç»">ä»‹ç»</h2><p>æœ€è¿‘çªç„¶ä½¿ç”¨åˆ°äº†<a href="https://github.com/puppeteer/puppeteer">puppeteer</a>ï¼ŒåŸæœ¬åœ¨æœ¬åœ°éƒ½æ˜¯å¥½å¥½çš„ï¼Œä½†æ˜¯å½“éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šä¹‹åå°±ä¸è¡Œäº†ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><p>è™½ç„¶å…·ä½“åŸå› ä¸ç¡®å®šï¼Œä½†æ˜¯æ ¹æ®ç™¾åº¦çš„åšæ³•æœ€åä¸å†æŠ¥é”™ã€‚</p><h3 id="å®‰è£…chrome">å®‰è£…chrome</h3><ol><li>åˆ›å»ºæ–‡ä»¶<br><code>touch /etc/yum.repos.d/google.repo</code></li><li>é…ç½®å†…å®¹</li></ol><p><code>vi /etc/yum.repos.d/google.repo</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">[google]<br>name=Google-x86_64<br>baseurl=http://dl.google.com/linux/rpm/stable/x86_64<br>enabled=1<br>gpgcheck=0<br>gpgkey=https://dl-ssl.google.com/linux/linux_signing_key.pub<br></code></pre></td></tr></table></figure><ol start="3"><li><code>yum update</code></li><li><code>yum install google-chrome-stable</code></li></ol><h4 id="æ’ä¸ªé¢˜å¤–è¯">æ’ä¸ªé¢˜å¤–è¯</h4><p>åœ¨å¼„è¿™ä¸ªä¸œè¥¿çš„æ—¶å€™çªç„¶ç¢°åˆ°äº†é˜¿é‡Œäº‘æœåŠ¡å™¨çš„<code>centos 8</code>æœåŠ¡å™¨æºå‘ç”Ÿå˜åŒ–ï¼Œ<code>yum</code>æ— æ³•ä¸‹è½½æ–°ä¸œè¥¿äº†<br>æ‰€ä»¥è¿™é‡Œä¹Ÿéšä¾¿è®°å½•ä¸€ä¸‹ï¼Œ<a href="https://blog.51cto.com/gagarin/5011005">æ¥æº</a></p><h3 id="ä¿®æ”¹puppeteerè°ƒç”¨æ–¹å¼">ä¿®æ”¹<code>puppeteer</code>è°ƒç”¨æ–¹å¼</h3><p><code>puppeteer.launch(&#123; args: ['--no-sandbox', '--disable-dev-shm-usage'], headless: true &#125;)</code></p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>åšä¸ªç®€å•è®°å½•ğŸ˜Š<br><a href="https://blog.csdn.net/Zeng__Yi/article/details/105661354">å‚è€ƒ</a></p>]]></content>
    
    
    <categories>
      
      <category>åç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>backend node puppeteer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœåŠ¡å™¨ä¸Šç”¨åˆ°çš„ä¸€äº›å‘½ä»¤</title>
    <link href="/2022/04/21/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/04/21/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h2 id="æœåŠ¡å™¨ä¸Šç”¨åˆ°çš„ä¸€äº›å‘½ä»¤">æœåŠ¡å™¨ä¸Šç”¨åˆ°çš„ä¸€äº›å‘½ä»¤</h2><h3 id="ä»‹ç»">ä»‹ç»</h3><p>è®°å½•ä¸€äº›å¹³å¸¸ç”¨åˆ°çš„ä¸€äº›å‘½ä»¤ï¼Œç»™è‡ªå·±æä¸ªé†’ã€‚</p><h3 id="æ­£æ–‡">æ­£æ–‡</h3><h4 id="ç«¯å£å ç”¨">ç«¯å£å ç”¨</h4><p>å¹³å¸¸ç¢°åˆ°æœ‰å ç”¨ç«¯å£çš„æƒ…å†µï¼Œéœ€è¦æ€æ­»è¯¥è¿›ç¨‹ã€‚<br><code>sudo lsof -i -P -n</code> // æŸ¥çœ‹æ‰€æœ‰å ç”¨ç«¯å£<br><code>kill -9 pid</code>  æ€æ­»è¿›ç¨‹ï¼Œ<code>pid</code>æ˜¯å¯¹åº”ç«¯å£çš„id</p><h3 id="ç»“æŸ">ç»“æŸ</h3><p>ç»“æŸä½†æ˜¯æ²¡æœ‰å®Œå…¨ç»“æŸ</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>deploy node backend</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å­—å·ä¸åƒç´ çš„å¯¹åº”å€¼</title>
    <link href="/2022/03/02/%E5%AD%97%E5%8F%B7%E4%B8%8E%E5%83%8F%E7%B4%A0%E7%9A%84%E5%AF%B9%E5%BA%94%E5%80%BC/"/>
    <url>/2022/03/02/%E5%AD%97%E5%8F%B7%E4%B8%8E%E5%83%8F%E7%B4%A0%E7%9A%84%E5%AF%B9%E5%BA%94%E5%80%BC/</url>
    
    <content type="html"><![CDATA[<p>å¹³å¸¸å¶å°”å¯èƒ½ä¼šç¢°åˆ°<code>px</code>å’Œ<code>word</code>çš„å­—å·çš„ç›¸äº’è½¬æ¢çš„æƒ…å†µï¼Œè¿™é‡Œä»ç½‘ä¸ŠæŠ„äº†ä¸‹ç®€å•åšä¸‹è®°å½•ã€‚</p><h2 id="å•ä½">å•ä½</h2><h3 id="pt-pointï¼Œç£…">pt (pointï¼Œç£…)</h3><p>æ˜¯ä¸€ä¸ªç‰©ç†é•¿åº¦å•ä½ï¼ŒæŒ‡çš„æ˜¯ 72 åˆ†ä¹‹ä¸€è‹±å¯¸ã€‚</p><h3 id="px-pixelï¼Œåƒç´ ">px (pixelï¼Œåƒç´ )</h3><p>æ˜¯ä¸€ä¸ªè™šæ‹Ÿé•¿åº¦å•ä½ï¼Œæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„æ•°å­—åŒ–å›¾åƒé•¿åº¦å•ä½ï¼Œå¦‚æœ px è¦æ¢ç®—æˆç‰©ç†é•¿åº¦ï¼Œéœ€è¦æŒ‡å®šç²¾åº¦ DPI(Dots Per Inchï¼Œæ¯è‹±å¯¸åƒç´ æ•°)ï¼Œåœ¨æ‰«ææ‰“å°æ—¶ä¸€èˆ¬éƒ½æœ‰ DPI å¯é€‰ã€‚Windows ç³»ç»Ÿé»˜è®¤æ˜¯ 96dpiï¼ŒApple ç³»ç»Ÿé»˜è®¤æ˜¯ 72dpiã€‚</p><h3 id="em-ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äºå½“å‰å¯¹è±¡å†…æ–‡æœ¬çš„å­—ä½“å°ºå¯¸">em(ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äºå½“å‰å¯¹è±¡å†…æ–‡æœ¬çš„å­—ä½“å°ºå¯¸)</h3><p>æ˜¯ä¸€ä¸ªç›¸å¯¹é•¿åº¦å•ä½ï¼Œæœ€åˆæ˜¯æŒ‡å­—æ¯ M çš„å®½åº¦ï¼Œæ•…å emã€‚ç°æŒ‡çš„æ˜¯å­—ç¬¦å®½åº¦çš„å€æ•°ï¼Œç”¨æ³•ç±»ä¼¼ç™¾åˆ†æ¯”ï¼Œå¦‚ï¼š0.8em, 1.2em,2em ç­‰ã€‚é€šå¸¸ 1em=16pxã€‚</p><h2 id="æ¢ç®—">æ¢ç®—</h2><ul><li>å­—å·ï¼šæ˜¯ä¸­æ–‡å­—åº“ä¸­ç‰¹æœ‰çš„ä¸€ç§å•ä½ï¼Œä»¥ä¸­æ–‡ä»£å·è¡¨ç¤ºç‰¹å®šçš„ç£…å€¼ ptï¼Œä¾¿äºè®°å¿†ã€è¡¨è¿°ã€‚<br>pt å’Œ px çš„æ¢ç®—å…¬å¼å¯ä»¥æ ¹æ® pt çš„å®šä¹‰å¾—å‡º:<br><code>px = 1/dpi(è‹±å¯¸)</code><br><code>pt = 1/72(è‹±å¯¸)</code><br><code>pt = px * dpi / 72</code><br>ä»¥ Windows ä¸‹çš„ <code>96dpi</code> æ¥è®¡ç®—ï¼Œ<code>1pt = px * 96/72 = px * 4/3</code></li></ul><h2 id="å¸¸ç”¨åˆ°çš„">å¸¸ç”¨åˆ°çš„</h2><p>ç›´æ¥<a href="https://www.runoob.com/w3cnote/px-pt-em-convert-table.html">ç™¾åº¦</a></p><h2 id="å¼•ç”³">å¼•ç”³</h2><h3 id="dpi-è®¡ç®—">dpi è®¡ç®—</h3><p>æ¥è‡ªç™¾åº¦ğŸ˜º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDPI</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> deviceXDPI = <span class="hljs-number">0</span> <br>  <span class="hljs-keyword">let</span> deviceYDPI = <span class="hljs-number">0</span>  <br>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.screen.deviceXDPI != <span class="hljs-literal">undefined</span>) &#123;<br>    deviceXDPI = <span class="hljs-built_in">window</span>.screen.deviceXDPI;<br>    deviceYDPI = <span class="hljs-built_in">window</span>.screen.deviceYDPI;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">const</span> tmpNode = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;div&#x27;</span>);<br>    tmpNode.style.cssText = <span class="hljs-string">`</span><br><span class="hljs-string">      width:1in;</span><br><span class="hljs-string">      height:1in;</span><br><span class="hljs-string">      position:absolute;</span><br><span class="hljs-string">      left:0px;</span><br><span class="hljs-string">      top:0px;</span><br><span class="hljs-string">      z-index:99;</span><br><span class="hljs-string">      visibility:hidden;</span><br><span class="hljs-string">    `</span><br>    <span class="hljs-built_in">document</span>.body.appendChild(tmpNode);<br>    deviceXDPI = <span class="hljs-built_in">parseInt</span>(tmpNode.offsetWidth);<br>    deviceYDPI = <span class="hljs-built_in">parseInt</span>(tmpNode.offsetHeight);<br>    tmpNode.parentNode.removeChild(tmpNode);<br>  &#125;<br>  <span class="hljs-keyword">return</span> [<br>    deviceXDPI,<br>    deviceYDPI<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¹³æ—¶ç”¨åˆ°çš„ä¸€äº›ä»£ç ç‰‡æ®µ</title>
    <link href="/2022/02/09/%E5%B9%B3%E6%97%B6%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"/>
    <url>/2022/02/09/%E5%B9%B3%E6%97%B6%E7%94%A8%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/</url>
    
    <content type="html"><![CDATA[<h2 id="å¹³æ—¶ç”¨åˆ°çš„ä¸€äº›ä»£ç ç‰‡æ®µ">å¹³æ—¶ç”¨åˆ°çš„ä¸€äº›ä»£ç ç‰‡æ®µ</h2><h2 id="ä»‹ç»">ä»‹ç»</h2><p>æ–°å¹´å¿«ä¹ğŸ¯ ğŸ†<br>è¿™é‡Œä»‹ç»çš„æ˜¯å¹³å¸¸å¯èƒ½ä¼šç”¨åˆ°çš„ä¸€äº›ä»£ç ç‰‡æ®µï¼Œå¯èƒ½å¯¹å„ä½æœ‰ç‚¹å¸®åŠ©ï¼Œæ–‡ç« ä¼šæŒç»­æ›´æ–°âœ¿âœ¿ãƒ½(Â°â–½Â°)ãƒâœ¿</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><h3 id="Modal">Modal</h3><ul><li><a href="https://ant.design/index-cn">antd</a></li><li>å†…éƒ¨æ§åˆ¶<code>visible</code></li><li>å¤–éƒ¨æ§åˆ¶æ˜¯å¦å¯å…³é—­</li></ul><h4 id="typescript">typescript</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> React, &#123; forwardRef, useImperativeHandle, useRef, useCallback, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; Modal, Button &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;antd&#x27;</span><br><span class="hljs-keyword">import</span> &#123; ModalProps &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;antd/es/modal&#x27;</span><br><br><span class="hljs-keyword">type</span> TModalRef = &#123;<br>  <span class="hljs-attr">open</span>: <span class="hljs-function">(<span class="hljs-params">value?: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span> <br>&#125;<br><br><span class="hljs-keyword">type</span> TModalProps = &#123;<br>  <span class="hljs-comment">// any props </span><br>&#125; &amp; Partial&lt;ModalProps&gt;<br><br><span class="hljs-comment">// modal </span><br><span class="hljs-keyword">const</span> InternalVisibleModal = forwardRef&lt;TModalRef, TModalProps&gt;(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">const</span> &#123;  <br>    <span class="hljs-attr">onCancel</span>: propsOnCancel,<br>    <span class="hljs-attr">onOk</span>: propsOnOk<br>  &#125; = props <br><br>  <span class="hljs-keyword">const</span> [ visible, setVisible ] = useState&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-literal">false</span>)<br><br>  <span class="hljs-keyword">const</span> open = useCallback(<span class="hljs-function">(<span class="hljs-params">value?: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(value)<br>    setVisible(<span class="hljs-literal">true</span>)<br>  &#125;, [])<br><br>  <span class="hljs-keyword">const</span> onCancel = useCallback(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> result = propsOnCancel?.(e)<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> result !== <span class="hljs-string">&#x27;boolean&#x27;</span> || result) &#123;<br>      setVisible(<span class="hljs-literal">false</span>)<br>    &#125;<br>  &#125;, [propsOnCancel])<br><br>  <span class="hljs-keyword">const</span> onOk = useCallback(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> result = propsOnOk?.(e)<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> result !== <span class="hljs-string">&#x27;boolean&#x27;</span> || result) &#123;<br>      setVisible(<span class="hljs-literal">false</span>)<br>    &#125;<br>  &#125;, [propsOnOk])<br><br>  useImperativeHandle(ref, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      open<br>    &#125;<br>  &#125;, [open])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Modal</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">visible</span>=<span class="hljs-string">&#123;visible&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">onCancel</span>=<span class="hljs-string">&#123;onCancel&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">onOk</span>=<span class="hljs-string">&#123;onOk&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">title</span>=<span class="hljs-string">&#x27;è‡ªå®šä¹‰modal&#x27;</span></span></span><br><span class="hljs-tag"><span class="xml">    &gt;</span></span><br><span class="xml">      hello world </span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span><br>  )<br><br>&#125;)<br><br><span class="hljs-comment">// parent </span><br><span class="hljs-keyword">const</span> ParentComponent = <span class="hljs-function">() =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">const</span> modalRef = useRef&lt;TModalRef&gt;(<span class="hljs-literal">null</span>)<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="xml">        modalRef.current?.open()</span><br><span class="xml">      &#125;&#125;&gt;open<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">InternalVisibleModal</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;modalRef&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  )<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure><h4 id="javascript">javascript</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> React, &#123; forwardRef, useImperativeHandle, useRef, useCallback, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123; Modal, Button &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;antd&#x27;</span><br><br><span class="hljs-comment">// modal </span><br><span class="hljs-keyword">const</span> InternalVisibleModal = forwardRef(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">const</span> &#123;  <br>    <span class="hljs-attr">onCancel</span>: propsOnCancel,<br>    <span class="hljs-attr">onOk</span>: propsOnOk<br>  &#125; = props <br><br>  <span class="hljs-keyword">const</span> [ visible, setVisible ] = useState(<span class="hljs-literal">false</span>)<br><br>  <span class="hljs-keyword">const</span> open = useCallback(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(value)<br>    setVisible(<span class="hljs-literal">true</span>)<br>  &#125;, [])<br><br>  <span class="hljs-keyword">const</span> onCancel = useCallback(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> result = propsOnCancel?.(e)<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> result !== <span class="hljs-string">&#x27;boolean&#x27;</span> || result) &#123;<br>      setVisible(<span class="hljs-literal">false</span>)<br>    &#125;<br>  &#125;, [propsOnCancel])<br><br>  <span class="hljs-keyword">const</span> onOk = useCallback(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> result = propsOnOk?.(e)<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> result !== <span class="hljs-string">&#x27;boolean&#x27;</span> || result) &#123;<br>      setVisible(<span class="hljs-literal">false</span>)<br>    &#125;<br>  &#125;, [propsOnOk])<br><br>  useImperativeHandle(ref, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      open<br>    &#125;<br>  &#125;, [open])<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Modal</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">visible</span>=<span class="hljs-string">&#123;visible&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">onCancel</span>=<span class="hljs-string">&#123;onCancel&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">onOk</span>=<span class="hljs-string">&#123;onOk&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">title</span>=<span class="hljs-string">&#x27;è‡ªå®šä¹‰modal&#x27;</span></span></span><br><span class="hljs-tag"><span class="xml">    &gt;</span></span><br><span class="xml">      hello world </span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span><br>  )<br><br>&#125;)<br><br><span class="hljs-comment">// parent </span><br><span class="hljs-keyword">const</span> ParentComponent = <span class="hljs-function">() =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">const</span> modalRef = useRef(<span class="hljs-literal">null</span>)<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="xml">        modalRef.current?.open()</span><br><span class="xml">      &#125;&#125;&gt;open<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">InternalVisibleModal</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;modalRef&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  )<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="html2canvas">html2canvas</h3><ul><li>é…åˆ<a href="https://github.com/niklasvh/html2canvas">html2canvas</a></li><li><code>html</code>è½¬<code>å›¾ç‰‡</code></li></ul><h4 id="typescript-2">typescript</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> html2canvas, &#123; Options &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;html2canvas&#x27;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">captureCover</span>(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">  query: <span class="hljs-built_in">string</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  html2canvasOptions: Partial&lt;Options&gt; = &#123;&#125;,</span></span><br><span class="hljs-params"><span class="hljs-function"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> element: HTMLElement | <span class="hljs-literal">null</span> = <span class="hljs-built_in">document</span>.querySelector(query);<br><br>  <span class="hljs-keyword">if</span> (!element) <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject();<br><br>  <span class="hljs-keyword">const</span> &#123; width, height &#125; = element.getBoundingClientRect() || &#123;&#125;;<br><br>  <span class="hljs-keyword">const</span> options: Partial&lt;Options&gt; = &#123;<br>    <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//å…è®¸è·¨åŸŸå›¾ç‰‡</span><br>    <span class="hljs-attr">allowTaint</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//å…è®¸è·¨åŸŸå›¾ç‰‡</span><br>    <span class="hljs-attr">logging</span>: <span class="hljs-literal">true</span>,<br>    width,<br>    height,<br>    <span class="hljs-attr">scrollY</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">scrollX</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;rgba(0, 0, 0, 0)&#x27;</span>,<br>    ...html2canvasOptions,<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>&lt;Blob&gt;(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    html2canvas(element <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>, options).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>&#123;<br>      context.toBlob(<br>        <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">if</span> (data) &#123;<br>            resolve(data);<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            reject();<br>          &#125;<br>        &#125;,<br>        <span class="hljs-string">&#x27;image/png&#x27;</span>,<br>        <span class="hljs-number">0.9</span>,<br>      );<br>    &#125;);<br>  &#125;);<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="javascript-2">javascript</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> html2canvas <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;html2canvas&#x27;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">captureCover</span>(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">  query,</span></span><br><span class="hljs-params"><span class="hljs-function">  html2canvasOptions</span></span><br><span class="hljs-params"><span class="hljs-function"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> element = <span class="hljs-built_in">document</span>.querySelector(query);<br><br>  <span class="hljs-keyword">if</span> (!element) <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject();<br><br>  <span class="hljs-keyword">const</span> &#123; width, height &#125; = element.getBoundingClientRect() || &#123;&#125;;<br><br>  <span class="hljs-keyword">const</span> options = &#123;<br>    <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//å…è®¸è·¨åŸŸå›¾ç‰‡</span><br>    <span class="hljs-attr">allowTaint</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">//å…è®¸è·¨åŸŸå›¾ç‰‡</span><br>    <span class="hljs-attr">logging</span>: <span class="hljs-literal">true</span>,<br>    width,<br>    height,<br>    <span class="hljs-attr">scrollY</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">scrollX</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;rgba(0, 0, 0, 0)&#x27;</span>,<br>    ...html2canvasOptions,<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    html2canvas(element, options).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>&#123;<br>      context.toBlob(<br>        <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">if</span> (data) &#123;<br>            resolve(data);<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            reject();<br>          &#125;<br>        &#125;,<br>        <span class="hljs-string">&#x27;image/png&#x27;</span>,<br>        <span class="hljs-number">0.9</span>,<br>      );<br>    &#125;);<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="jspdf">jspdf</h3><ul><li>é…åˆ<a href="https://github.com/niklasvh/html2canvas">html2canvas</a></li><li><code>html</code>è½¬<code>pdf</code></li></ul><h4 id="typescript-3">typescript</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> jsPDF <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;jspdf&#x27;</span><br><span class="hljs-keyword">import</span> html2Canvas, &#123; Options &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;html2canvas&#x27;</span><br><br><span class="hljs-keyword">const</span> A4_RATIO = <span class="hljs-number">630</span> / <span class="hljs-number">891</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> html2Pdf = <span class="hljs-keyword">async</span> (query: <span class="hljs-built_in">string</span>, <span class="hljs-attr">canvasOpts</span>: Partial&lt;Options&gt;=&#123;&#125;) =&gt; &#123;<br><br>  <span class="hljs-keyword">const</span> element: HTMLElement | <span class="hljs-literal">null</span> = <span class="hljs-built_in">document</span>.querySelector(query)<br><br>  <span class="hljs-keyword">if</span>(!element) <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject()<br><br>  <span class="hljs-keyword">const</span> originWidth = element.offsetWidth<br>  <span class="hljs-keyword">const</span> originHeight = element.offsetHeight<br><br>  <span class="hljs-keyword">const</span> scale = <span class="hljs-number">595.28</span> / originWidth<br>  <span class="hljs-keyword">const</span> scaleCanvas = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&#x27;canvas&#x27;</span>)<br>  scaleCanvas.width = <span class="hljs-number">595.28</span><br>  scaleCanvas.height = originHeight * scale <br><br>  <span class="hljs-keyword">var</span> opts: Partial&lt;Options&gt; = &#123;<br>    <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">//å…è®¸è·¨åŸŸå›¾ç‰‡</span><br>    <span class="hljs-attr">allowTaint</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">//å…è®¸è·¨åŸŸå›¾ç‰‡</span><br>    <span class="hljs-attr">logging</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">width</span>: originWidth, <br>    <span class="hljs-attr">height</span>: originHeight,<br>    <span class="hljs-attr">scrollY</span>: <span class="hljs-number">0</span>, <br>    <span class="hljs-attr">scrollX</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">canvas</span>: scaleCanvas,<br>    scale,<br>    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&quot;rgba(0, 0, 0, 0)&quot;</span>,<br>    <span class="hljs-attr">onclone</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">document</span></span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> deleteStyleKeys = [<span class="hljs-string">&#x27;transform&#x27;</span>, <span class="hljs-string">&#x27;transition&#x27;</span>, <span class="hljs-string">&#x27;boxShadow&#x27;</span>]<br>      <span class="hljs-keyword">const</span> element: HTMLElement | <span class="hljs-literal">null</span> = <span class="hljs-built_in">document</span>.querySelector(query)<br>      <span class="hljs-keyword">if</span>(!element) <span class="hljs-keyword">return</span> <br>      deleteStyleKeys.forEach(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> ((element.style <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)[key] = <span class="hljs-string">&#x27;&#x27;</span>))<br>    &#125;,<br>    ...canvasOpts<br>  &#125;;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    html2Canvas(element, opts).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>&#123;<br>  <br>      <span class="hljs-keyword">let</span> contentWidth = context.width <br>      <span class="hljs-keyword">let</span> contentHeight = context.height   <br>      <span class="hljs-keyword">let</span> pageHeight = contentWidth / A4_RATIO  <br>      <span class="hljs-keyword">let</span> leftHeight = contentHeight <br>      <span class="hljs-keyword">let</span> position = <span class="hljs-number">0</span><br>  <br>      <span class="hljs-keyword">let</span> pageData = context.toDataURL(<span class="hljs-string">&#x27;image/png&#x27;</span>, <span class="hljs-number">0.9</span>)<br>      <br>      <span class="hljs-keyword">let</span> PDF = <span class="hljs-keyword">new</span> jsPDF(<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;pt&#x27;</span>, <span class="hljs-string">&#x27;a4&#x27;</span>)<br>      <span class="hljs-keyword">if</span> (leftHeight &lt;= pageHeight) &#123;<br>        PDF.addImage(pageData, <span class="hljs-string">&#x27;PNG&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, contentWidth, contentHeight)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">while</span> (leftHeight &gt;= <span class="hljs-number">20</span>) &#123;<br>          PDF.addImage(pageData, <span class="hljs-string">&#x27;PNG&#x27;</span>, <span class="hljs-number">0</span>, position, contentWidth, contentHeight)<br>          leftHeight -= pageHeight<br>          position -= pageHeight<br>          <span class="hljs-keyword">if</span> (leftHeight &gt;= <span class="hljs-number">20</span>) &#123;<br>            PDF.addPage()<br>          &#125;<br>        &#125;<br>      &#125;<br><br>      resolve(PDF.output(<span class="hljs-string">&#x27;blob&#x27;</span>))<br>      <br>    &#125;)<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="SuperPartial">SuperPartial</h3><ul><li><code>typescript</code></li><li><code>Partial</code> æ·±å±‚æ¬¡ç‰ˆæœ¬</li></ul><h4 id="typescript-4">typescript</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">type</span> SuperPartial&lt;T&gt; = &#123;<br>  [K <span class="hljs-keyword">in</span> keyof T]?: SuperPartial&lt;T[K]&gt;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="withTry">withTry</h3><ul><li>å·¥å…·æ–¹æ³•</li><li>å¼‚æ­¥é”™è¯¯æ•è·</li></ul><h4 id="typescript-5">typescript</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">withTry</span>&lt;<span class="hljs-title">T</span>=<span class="hljs-title">any</span>&gt; (<span class="hljs-params">func: <span class="hljs-built_in">Function</span></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args: <span class="hljs-built_in">any</span>[]</span>): <span class="hljs-title">Promise</span>&lt;[<span class="hljs-title">any</span>, <span class="hljs-title">T</span> | <span class="hljs-title">null</span>]&gt; </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> func(...args)<br>      <span class="hljs-keyword">return</span> [<span class="hljs-literal">null</span>, data]<br>    &#125;<span class="hljs-keyword">catch</span>(err) &#123;<br>      <span class="hljs-keyword">return</span> [err, <span class="hljs-literal">null</span>]<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="javascript-3">javascript</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">withTry</span> (<span class="hljs-params">func</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> func(...args)<br>      <span class="hljs-keyword">return</span> [<span class="hljs-literal">null</span>, data]<br>    &#125;<span class="hljs-keyword">catch</span>(err) &#123;<br>      <span class="hljs-keyword">return</span> [err, <span class="hljs-literal">null</span>]<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="sleep">sleep</h3><ul><li>å»¶è¿Ÿæ–¹æ³•</li></ul><h4 id="javascript-4">javascript</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sleep</span>(<span class="hljs-params">time=<span class="hljs-number">1000</span></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, time))<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æœ€è¿‘å‡ å¤©">æœ€è¿‘å‡ å¤©</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRecentDay</span>(<span class="hljs-params">day, customDate</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = customDate ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(customDate) : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">const</span> today = date.getTime()<br>  <span class="hljs-keyword">const</span> oneDayMill = <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(day).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(today - (day - index - <span class="hljs-number">1</span>) * oneDayMill)<br>  &#125;)<br>&#125;<br><br></code></pre></td></tr></table></figure><p><code>æœ€è¿‘2å¤©ï¼šgetRecentDay(2)</code><br><code>2022-12-22çš„æœ€è¿‘2å¤©ï¼šgetRecentDay(2, '2022-12-22')</code></p><h3 id="æœ¬å‘¨">æœ¬å‘¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getThisWeek</span>(<span class="hljs-params">customDate</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = customDate ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(customDate) : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">const</span> time = date.getTime()<br>  <span class="hljs-keyword">const</span> oneDayMill = <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span><br>  <span class="hljs-keyword">const</span> day = date.getDay() || <span class="hljs-number">7</span><br>  <span class="hljs-keyword">const</span> dayPrev = day <br>  <span class="hljs-keyword">const</span> dayNext = <span class="hljs-number">7</span> - day <br>  <span class="hljs-keyword">return</span> [<br>    ...new <span class="hljs-built_in">Array</span>(dayPrev).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(time - oneDayMill * (dayPrev - index - <span class="hljs-number">1</span>))<br>    &#125;),<br>    ...new <span class="hljs-built_in">Array</span>(dayNext).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(time + oneDayMill * (index + <span class="hljs-number">1</span>))<br>    &#125;),<br>  ]<br>&#125;<br><br></code></pre></td></tr></table></figure><p><code>æœ¬å‘¨ï¼šgetThisWeek()</code><br><code>2022-12-22å½“å‘¨ï¼šgetThisWeek('2022-12-22')</code></p><h3 id="æœ¬æœˆ">æœ¬æœˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLeapYear</span>(<span class="hljs-params">year</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (year % <span class="hljs-number">4</span> === <span class="hljs-number">0</span> &amp;&amp; year % <span class="hljs-number">100</span> !== <span class="hljs-number">0</span>) || year % <span class="hljs-number">400</span> === <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMonthDay</span>(<span class="hljs-params">date</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> year = date.getFullYear()<br>  <span class="hljs-keyword">const</span> month = date.getMonth() + <span class="hljs-number">1</span><br>  <span class="hljs-keyword">const</span> day30Month = [<span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>]<br>  <span class="hljs-keyword">if</span>(month == <span class="hljs-number">2</span>) &#123;<br>    <span class="hljs-keyword">if</span>(isLeapYear(year)) <span class="hljs-keyword">return</span> <span class="hljs-number">29</span> <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">28</span> <br>  &#125;<br>  <span class="hljs-keyword">return</span> day30Month.includes(month) ? <span class="hljs-number">30</span> : <span class="hljs-number">31</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getThisMonth</span>(<span class="hljs-params">customDate</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = customDate ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(customDate) : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">const</span> time = date.getTime()<br>  <span class="hljs-keyword">const</span> oneDayMill = <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span><br>  <span class="hljs-keyword">const</span> day = date.getDate()<br>  <span class="hljs-keyword">const</span> monthDay = getMonthDay(date)<br>  <span class="hljs-keyword">const</span> dayPrev = day <br>  <span class="hljs-keyword">const</span> dayNext = monthDay - day <br>  <span class="hljs-keyword">return</span> [<br>    ...new <span class="hljs-built_in">Array</span>(dayPrev).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(time - oneDayMill * (dayPrev - index - <span class="hljs-number">1</span>))<br>    &#125;),<br>    ...new <span class="hljs-built_in">Array</span>(dayNext).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(time + oneDayMill * (index + <span class="hljs-number">1</span>))<br>    &#125;),<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure><p><code>æœ¬æœˆï¼šgetThisMonth()</code><br><code>2022-11-22å½“æœˆï¼šgetThisMonth('2022-11-22')</code></p><h3 id="æœ¬å¹´">æœ¬å¹´</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLeapYear</span>(<span class="hljs-params">year</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (year % <span class="hljs-number">4</span> === <span class="hljs-number">0</span> &amp;&amp; year % <span class="hljs-number">100</span> !== <span class="hljs-number">0</span>) || year % <span class="hljs-number">400</span> === <span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getThisYear</span>(<span class="hljs-params">customDate</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> date = customDate ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(customDate) : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()<br>  <span class="hljs-keyword">const</span> oneDayMill = <span class="hljs-number">1000</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">24</span><br>  <span class="hljs-keyword">const</span> year = date.getFullYear()<br>  <span class="hljs-keyword">const</span> startDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;year&#125;</span>`</span>).getTime()<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(isLeapYear(year) ? <span class="hljs-number">366</span> : <span class="hljs-number">365</span>).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(startDate + oneDayMill * index)<br>  &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="h5æ— é™æ»šåŠ¨ï¼ˆmobile2ï¼‰">h5æ— é™æ»šåŠ¨ï¼ˆmobile2ï¼‰</h3><h4 id="javascript-5">javascript</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> &#123;<br>  ListView,<br>  Flex,<br>  Icon,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;antd-mobile&#x27;</span><br><span class="hljs-keyword">import</span> &#123; Component <span class="hljs-keyword">as</span> RefastComponent &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;refast&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">RefastComponent</span> </span>&#123;<br><br>  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;<br>    <span class="hljs-built_in">super</span>(props, logic)<br>    <span class="hljs-keyword">const</span> dataSource = <span class="hljs-keyword">new</span> ListView.DataSource(&#123;<br>      <span class="hljs-attr">rowHasChanged</span>: <span class="hljs-function">(<span class="hljs-params">row1, row2</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> row1 == row2<br>      &#125;<br>    &#125;)<br>    <span class="hljs-built_in">this</span>.state = &#123;<br>      <span class="hljs-attr">dataSource</span>: dataSource.cloneWithRows(&#123;&#125;),<br>      <span class="hljs-attr">originValue</span>: [],<br>      <span class="hljs-attr">fetchLoading</span>: <span class="hljs-literal">false</span>,<br>      <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">pageSize</span>: <span class="hljs-number">10</span>,<br>      <span class="hljs-attr">total</span>: <span class="hljs-number">0</span>,<br>    &#125;<br>  &#125;<br><br>  row = <span class="hljs-function">(<span class="hljs-params">rowData, sectionID, rowID</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; originValue &#125; = <span class="hljs-built_in">this</span>.state<br>    <span class="hljs-keyword">const</span> &#123;  &#125; = rowData<br>    <span class="hljs-keyword">return</span> (<br>      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    )<br>  &#125;<br><br>  componentDidMount = <span class="hljs-keyword">async</span> () =&gt; &#123;<br>    <span class="hljs-built_in">this</span>.add_list_Listener()<br>    <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.fetchData()<br>  &#125;<br><br>  componentWillUnmount () &#123;<br>    <span class="hljs-built_in">this</span>.remove_list_Listener()<br>  &#125;<br><br>  <span class="hljs-comment">//å¢åŠ ç›‘å¬</span><br>  add_list_Listener = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.lv &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span>.lv.getInnerViewNode == <span class="hljs-string">&quot;function&quot;</span>) &#123;<br>      <span class="hljs-built_in">this</span>.lv.getInnerViewNode().addEventListener(<span class="hljs-string">&#x27;touchstart&#x27;</span>, <span class="hljs-built_in">this</span>.ts = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>        <span class="hljs-built_in">this</span>.tsPageY = e.touches[<span class="hljs-number">0</span>].pageY;<br>      &#125;);<br>      <span class="hljs-keyword">const</span> scrollNode = <span class="hljs-built_in">document</span>.scrollingElement ? <span class="hljs-built_in">document</span>.scrollingElement : <span class="hljs-built_in">document</span>.body;<br>      <span class="hljs-built_in">this</span>.lv.getInnerViewNode().addEventListener(<span class="hljs-string">&#x27;touchmove&#x27;</span>, <span class="hljs-built_in">this</span>.tm = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>        <span class="hljs-built_in">this</span>.tmPageY = e.touches[<span class="hljs-number">0</span>].pageY;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.tmPageY &gt; <span class="hljs-built_in">this</span>.tsPageY &amp;&amp; <span class="hljs-built_in">this</span>.scrollerTop &lt;= <span class="hljs-number">0</span> &amp;&amp; scrollNode.scrollTop &gt; <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-built_in">this</span>.domScroller.options.preventDefaultOnTouchMove = <span class="hljs-literal">false</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-built_in">this</span>.domScroller.options.preventDefaultOnTouchMove = <span class="hljs-literal">undefined</span>;<br>        &#125;<br>      &#125;)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// ç§»é™¤åˆ—è¡¨çš„ç›‘å¬</span><br>  remove_list_Listener = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.lv &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span>.lv.getInnerViewNode == <span class="hljs-string">&quot;function&quot;</span>) &#123;<br>      <span class="hljs-built_in">this</span>.lv.getInnerViewNode().removeEventListener(<span class="hljs-string">&#x27;touchstart&#x27;</span>, <span class="hljs-built_in">this</span>.ts);<br>      <span class="hljs-built_in">this</span>.lv.getInnerViewNode().removeEventListener(<span class="hljs-string">&#x27;touchmove&#x27;</span>, <span class="hljs-built_in">this</span>.tm);<br>    &#125;<br>  &#125;<br><br>  fetchData = <span class="hljs-keyword">async</span> (init = <span class="hljs-literal">false</span>) =&gt; &#123;<br>    <span class="hljs-built_in">this</span>.setState(&#123;<br>      <span class="hljs-attr">fetchLoading</span>: <span class="hljs-literal">true</span><br>    &#125;)<br>    <span class="hljs-keyword">const</span> &#123; originValue, dataSource, page, pageSize, name, cameraId, startTime, stopTime, status, algoModelType &#125; = <span class="hljs-built_in">this</span>.state<br>    <span class="hljs-built_in">this</span>.dispatch(<span class="hljs-string">&quot;queryWarnEvent&quot;</span>, &#123;<br>      algoModel,<br>      page,<br>      pageSize,<br>      algoModelType,<br>      status,<br>      name,<br>      cameraId,<br>      startTime,<br>      stopTime,<br>    &#125;, <span class="hljs-function">(<span class="hljs-params">content</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> data = content?.data?.list<br>      <span class="hljs-keyword">if</span> (status === <span class="hljs-string">&quot;0&quot;</span>) &#123;<br>        <span class="hljs-built_in">this</span>.setState(&#123; <span class="hljs-attr">todoCount</span>: content?.data.total &#125;)<br>      &#125;<br>      <span class="hljs-keyword">const</span> newValue = init ? [...data] : [...originValue, ...data]<br>      <span class="hljs-keyword">let</span> newDataSource = dataSource<br>      <span class="hljs-keyword">if</span> (init) &#123;<br>        newDataSource = <span class="hljs-keyword">new</span> ListView.DataSource(&#123;<br>          <span class="hljs-attr">rowHasChanged</span>: <span class="hljs-function">(<span class="hljs-params">row1, row2</span>) =&gt;</span> row1 == row2,<br>        &#125;)<br>      &#125;<br>      newDataSource = newDataSource.cloneWithRows(newValue)<br>      <span class="hljs-built_in">this</span>.setState(&#123;<br>        <span class="hljs-attr">originValue</span>: newValue,<br>        <span class="hljs-attr">dataSource</span>: newDataSource,<br>        <span class="hljs-attr">fetchLoading</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">total</span>: content?.data.total<br>      &#125;)<br>    &#125;)<br>  &#125;<br><br>  onEndReached = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">let</span> &#123; fetchLoading, page, originValue, total &#125; = <span class="hljs-built_in">this</span>.state<br>    <span class="hljs-keyword">if</span> (fetchLoading || originValue.length &gt;= total) &#123;<br>      <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-built_in">this</span>.setState(&#123; <span class="hljs-attr">page</span>: page + <span class="hljs-number">1</span> &#125;, <span class="hljs-built_in">this</span>.fetchData)<br>  &#125;<br><br>  render () &#123;<br>    <span class="hljs-keyword">const</span> &#123; dataSource, fetchLoading &#125; = <span class="hljs-built_in">this</span>.state<br>    <span class="hljs-keyword">return</span> (<br>      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ListView</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;warning-list&quot;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;el</span> =&gt;</span> this.lv = el&#125;</span><br><span class="xml">        dataSource=&#123;dataSource&#125;</span><br><span class="xml">        renderFooter=&#123;() =&gt; &#123;</span><br><span class="xml">          return (</span><br><span class="xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">30</span>, <span class="hljs-attr">textAlign:</span> &#x27;<span class="hljs-attr">center</span>&#x27; &#125;&#125;&gt;</span></span><br><span class="xml">              &#123;fetchLoading ? <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;loading&quot;</span> /&gt;</span> : &#x27;æ²¡æœ‰æ›´å¤šäº†&#x27;&#125;</span><br><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">          )</span><br><span class="xml">        &#125;&#125;</span><br><span class="xml">        renderRow=&#123;this.row&#125;</span><br><span class="xml">        style=&#123;&#123;</span><br><span class="xml">          height: &#x27;100vh&#x27;,</span><br><span class="xml">          overflow: &#x27;auto&#x27;,</span><br><span class="xml">        &#125;&#125;</span><br><span class="xml">        pageSize=&#123;10&#125;</span><br><span class="xml">        scrollRenderAheadDistance=&#123;500&#125;</span><br><span class="xml">        onEndReached=&#123;this.onEndReached&#125;</span><br><span class="xml">        onEndReachedThreshold=&#123;10&#125;</span><br><span class="xml">      /&gt;</span><br>    )<br>  &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="h5è¡¨å•å®¹å™¨ï¼ˆmobile2ï¼‰">h5è¡¨å•å®¹å™¨ï¼ˆmobile2ï¼‰</h3><h4 id="javascript-6">javascript</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123;<br>Picker <span class="hljs-keyword">as</span> AntPicker,<br>Icon,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;antd-mobile&#x27;</span><br><br><span class="hljs-keyword">const</span> CustomChildren = <span class="hljs-function">(<span class="hljs-params">&#123;extra, onClick, children&#125;</span>) =&gt;</span> (<br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="xml"><span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onClick&#125;</span></span></span><br><span class="hljs-tag"><span class="xml"><span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span></span></span><br><span class="hljs-tag"><span class="xml"><span class="hljs-attr">backgroundColor:</span> &#x27;#<span class="hljs-attr">F3F4F7</span>&#x27;,</span></span><br><span class="hljs-tag"><span class="xml"><span class="hljs-attr">lineHeight:</span> &#x27;<span class="hljs-attr">3.2rem</span>&#x27;,</span></span><br><span class="hljs-tag"><span class="xml"><span class="hljs-attr">fontSize:</span> &#x27;<span class="hljs-attr">1.3rem</span>&#x27;,</span></span><br><span class="hljs-tag"><span class="xml"><span class="hljs-attr">textAlign:</span> &#x27;<span class="hljs-attr">left</span>&#x27;,</span></span><br><span class="hljs-tag"><span class="xml"><span class="hljs-attr">overflow:</span> &#x27;<span class="hljs-attr">hidden</span>&#x27;,</span></span><br><span class="hljs-tag"><span class="xml"><span class="hljs-attr">padding:</span> &#x27;<span class="hljs-attr">0</span> <span class="hljs-attr">.4rem</span>&#x27;,</span></span><br><span class="hljs-tag"><span class="xml"><span class="hljs-attr">borderRadius:</span> <span class="hljs-attr">6</span></span></span><br><span class="hljs-tag"><span class="xml">&#125;&#125;</span></span><br><span class="hljs-tag"><span class="xml">&gt;</span></span><br><span class="xml">&#123;children&#125;</span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;color:</span> &#x27;<span class="hljs-attr">black</span>&#x27;&#125;&#125;&gt;</span>&#123;extra&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>)<br><br><br><span class="hljs-keyword">const</span> Picker = <span class="hljs-function">() =&gt;</span> &#123;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AntPicker</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">cols</span>=<span class="hljs-string">&#123;1&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">    &gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">CustomChildren</span>&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;float:</span> &#x27;<span class="hljs-attr">right</span>&#x27;, <span class="hljs-attr">display:</span> &#x27;<span class="hljs-attr">flex</span>&#x27;, <span class="hljs-attr">height:</span> &#x27;<span class="hljs-attr">3.2rem</span>&#x27;, <span class="hljs-attr">alignItems:</span> &#x27;<span class="hljs-attr">center</span>&#x27;, <span class="hljs-attr">color:</span> &quot;#<span class="hljs-attr">D8D8D8</span>&quot;&#125;&#125;&gt;</span></span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;down&quot;</span>/&gt;</span></span><br><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">CustomChildren</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">AntPicker</span>&gt;</span></span><br>  )<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="useDeepEffect">useDeepEffect</h3><h4 id="typescript-6">typescript</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; useEffect, useRef, EffectCallback, DependencyList &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; isEqual &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;lodash&#x27;</span>;<br> <br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useDeepEffect</span>(<span class="hljs-params">fn: EffectCallback, deps: DependencyList</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> isFirst = useRef(<span class="hljs-literal">true</span>);<br>  <span class="hljs-keyword">const</span> prevDeps = useRef(deps);<br> <br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> isSame = prevDeps.current.every(<span class="hljs-function">(<span class="hljs-params">obj, index</span>) =&gt;</span><br>      isEqual(obj, deps[index]),<br>    );<br> <br>    <span class="hljs-keyword">if</span> (isFirst.current || !isSame) &#123;<br>      fn();<br>    &#125;<br> <br>    isFirst.current = <span class="hljs-literal">false</span>;<br>    prevDeps.current = deps;<br>  &#125;, deps);<br>&#125;<br> <br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useDeepEffect;<br></code></pre></td></tr></table></figure><h3 id="useStateChange">useStateChange</h3><h4 id="typescript-7">typescript</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; useState, useEffect, useCallback, useRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">type</span> StateChangeReturnType&lt;T&gt; = [<br>  T,<br>  <span class="hljs-function">(<span class="hljs-params">value: T | ((prev: T) =&gt; T), callback?: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>,<br>];<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useStateChange</span>&lt;<span class="hljs-title">T</span> = <span class="hljs-title">any</span>&gt;(<span class="hljs-params">initialValue: T</span>): <span class="hljs-title">StateChangeReturnType</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">const</span> [value, setValue] = useState&lt;T&gt;(initialValue);<br>  <span class="hljs-keyword">const</span> callbackRef = useRef&lt;<span class="hljs-built_in">any</span>&gt;();<br><br>  <span class="hljs-keyword">const</span> realSetValue = useCallback(<br>    <span class="hljs-function">(<span class="hljs-params">value: T | ((prev: T) =&gt; T), callback?: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> &#123;<br>      callbackRef.current = callback;<br>      setValue(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> result =<br>          <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">&#x27;function&#x27;</span> ? (value <span class="hljs-keyword">as</span> (prev: T) =&gt; T)(prev) : value;<br>        <span class="hljs-keyword">return</span> result;<br>      &#125;);<br>    &#125;,<br>    [],<br>  );<br><br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    callbackRef.current?.();<br>  &#125;, [value]);<br><br>  <span class="hljs-keyword">return</span> [value, realSetValue];<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useStateChange;<br><br></code></pre></td></tr></table></figure><h2 id="ç»“æŸ">ç»“æŸ</h2><p>åˆ°è¿™é‡Œç»“æŸï¼Œå¸Œæœ›å¯¹å„ä½æœ‰å¸®åŠ©ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>fragment code</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </title>
    <link href="/2021/11/24/%E6%96%87%E4%BB%B6%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0/"/>
    <url>/2021/11/24/%E6%96%87%E4%BB%B6%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰ç«¯æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ æµç¨‹">å‰ç«¯æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ æµç¨‹</h2><h2 id="ä»‹ç»">ä»‹ç»</h2><p>ä½œä¸ºä¸€ä¸ªå‰ç«¯ï¼Œå¹³å¸¸å·¥ä½œä¸­è‚¯å®šç¦»ä¸å¼€æ–‡ä»¶ä¸Šä¼ çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå¯èƒ½å¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯å¯¹å›¾ç‰‡ï¼Œé™„ä»¶ç­‰ä¸€äº›å°æ–‡ä»¶è¿›è¡Œä¸Šä¼ ï¼Œä½†æ˜¯å½“éœ€è¦ä¸Šä¼ å¤§æ–‡ä»¶çš„æ—¶å€™ï¼Œä½¿ç”¨æ™®é€šä¸Šä¼ æ–¹å¼æ—¶ï¼Œå¯èƒ½å°±ä¼šçœ‹åˆ°æ¥å£è¿”å›<code>413</code>ï¼Œè¿™é‡Œå°±éœ€è¦æåˆ°æœ¬æ–‡æ‰€è¦è¯´çš„æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><h3 id="äºŒè¿›åˆ¶æ•°æ®ç±»å‹">äºŒè¿›åˆ¶æ•°æ®ç±»å‹</h3><p>å‰ç«¯å¯¹äºŒè¿›åˆ¶æ•°æ®çš„å­˜å‚¨æ ¼å¼æœ‰å¾ˆå¤šç§ã€‚</p><ul><li><code>input</code>è¾“å…¥æ¡†ä¸Šä¼ æ–‡ä»¶æ—¶ç”¨åˆ°çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/File">File</a>ç±»å‹ã€‚</li><li>è§†é¢‘ç½‘ç«™ä¸Šèƒ½çœ‹åˆ°çš„<code>blob</code>é“¾æ¥èµ„æº</li><li><code>es6</code>ä¸­å‡ºç°çš„<code>ArrayBuffer</code>ï¼Œå¹¶ä¸”æ˜¯æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ï¼Œæ–­ç‚¹ç»­ä¼ çš„åŸºç¡€ã€‚</li><li>è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯<code>base64</code></li></ul><h3 id="ä¸åŒç±»å‹çš„ç›¸äº’è½¬æ¢">ä¸åŒç±»å‹çš„ç›¸äº’è½¬æ¢</h3><p>å¾ˆå¤šæ•°æ®ç±»å‹çš„è½¬æ¢éƒ½éœ€è¦ä¾é äº<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader">FileReader</a></p><ol><li><code>ArrayBuffer to Blob</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> Blob([<span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(<span class="hljs-number">1024</span>)])  <br><span class="hljs-keyword">const</span> fileReader = <span class="hljs-keyword">new</span> FileReader()<br><br>fileReader.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(fileReader.result)<br>&#125;<br><br>fileReader.readAsArrayBuffer(blob)<br><br></code></pre></td></tr></table></figure><ol start="2"><li><code>Blob to Base64</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> Blob([<span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(<span class="hljs-number">1024</span>)])  <br><span class="hljs-keyword">const</span> fileReader = <span class="hljs-keyword">new</span> FileReader()<br><br>fileReader.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(fileReader.result)<br>&#125;<br><br>fileReader.readAsDataURL(blob)<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯ä¸¤ä¸ªç®€å•çš„æ•°æ®ç±»å‹è½¬æ¢çš„ä¾‹å­</p><h3 id="éœ€è¦ä½¿ç”¨åˆ°çš„npm-package">éœ€è¦ä½¿ç”¨åˆ°çš„npm package</h3><ul><li><code>spark-md5 </code><br><a href="https://www.npmjs.com/package/spark-md5">spark-md5</a>å¯ä»¥å°†å¯¹åº”çš„æ•°æ®è¿›è¡Œ<code>md5</code>åŠ å¯†ï¼Œè¿™æ ·åœ¨ä¸‹ä¸€æ¬¡å¯¹åŒä¸€ä¸ªæ–‡ä»¶è¿›è¡Œä¸Šä¼ æ—¶ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡æ•´ä¸ªä¸Šä¼ æµä¼ ï¼Œå®ç°ç§’ä¼ çš„æ•ˆæœã€‚</li></ul><h3 id="å…·ä½“æµç¨‹">å…·ä½“æµç¨‹</h3><ul><li><code>input</code>æ¥æ”¶æ–‡ä»¶<code>template.mp4</code></li><li>è·å–æ–‡ä»¶çš„åŸºç¡€ä¿¡æ¯<ul><li>æ–‡ä»¶çš„<code>mime</code>ï¼Œå½“å‰çš„ç±»å‹æ˜¯<code>video/mp4</code></li><li>æ–‡ä»¶çš„å¤§å°<code>file.size</code>ï¼Œå‡è®¾æœ¬æ¬¡æ–‡ä»¶çš„å¤§å°ä¸º<code>1G</code></li><li>è®¾ç½®æœ¬æ¬¡ä¸Šä¼ åˆ†ç‰‡çš„å¤§å°ä¸º<code>5M</code></li><li>è®¡ç®—æœ¬æ¬¡ä¸Šä¼ çš„åˆ†ç‰‡æ•°é‡ä¸º<code>1G / 5M = 205</code>ï¼Œæ‰€ä»¥æœ¬æ¬¡éœ€è¦ä¸Šä¼ 205æ¬¡</li></ul></li><li>å¯¹æ–‡ä»¶è¿›è¡Œåˆ†ç‰‡<ul><li>ä½¿ç”¨<code>spark-md5</code>è¿›è¡Œåˆ†ç‰‡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; <span class="hljs-built_in">ArrayBuffer</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;spark-md5&#x27;</span><br><br><span class="hljs-keyword">const</span> SparkMd5 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>()<br><br><span class="hljs-comment">// ä¿å­˜åˆ†ç‰‡ç”¨äºåœ¨åé¢ä¸Šä¼ æ—¶ç”¨  </span><br><span class="hljs-keyword">const</span> cacheChunks = []<br><span class="hljs-comment">// å½“å‰åˆ†ç‰‡çš„ç´¢å¼•</span><br><span class="hljs-keyword">const</span> index = <span class="hljs-number">0</span><br><span class="hljs-comment">// åˆ†ç‰‡çš„å¤§å°</span><br><span class="hljs-keyword">const</span> chunkSize = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">5</span> <br><span class="hljs-comment">// file åªéœ€è¦ç®€å•è°ƒç”¨ file.slice å°±å¯ä»¥</span><br><span class="hljs-keyword">const</span> currentChunk = file.slice(index * chunkSize, (index + <span class="hljs-number">1</span>) * chunkSize)  <br><br>cacheChunks.push(currentChunk)<br><br><span class="hljs-comment">// æ·»åŠ åˆ†ç‰‡  </span><br>SparkMd5.append(currentChunk)<br><br><span class="hljs-comment">// æ‰€æœ‰åˆ†ç‰‡æ·»åŠ å®Œæˆæ—¶  </span><br><span class="hljs-keyword">const</span> md5 = SparkMd5.end()<br><br><span class="hljs-comment">// å®Œæˆè§£æåé”€æ¯å¯¹åº”å®ä¾‹  </span><br>SparkMd5.destroy()<br><br></code></pre></td></tr></table></figure><ul><li><p>æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥<br>å°†æ–‡ä»¶çš„ä¸€äº›ä¿¡æ¯ä¼ é€’ç»™åå°ï¼ŒæœåŠ¡ç«¯æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚<br>å¦‚æœå­˜åœ¨ï¼Œåˆ™è·³è¿‡ä¹‹åçš„ä¸Šä¼ è¿‡ç¨‹ã€‚<br>å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç»§ç»­åé¢çš„ä¸Šä¼ æµç¨‹ã€‚</p></li><li><p>æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ <br>æŒ‰ç…§ç´¢å¼•é¡ºåºå¯¹æ–‡ä»¶åˆ†ç‰‡è¿›è¡Œä¸Šä¼ </p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> FormData()<br><span class="hljs-comment">// éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶åˆ†ç‰‡</span><br>formData.append(<span class="hljs-string">&quot;file&quot;</span>, chunk)<br><span class="hljs-comment">// å½“å‰åˆ†ç‰‡çš„ç´¢å¼•  </span><br>formData.append(<span class="hljs-string">&quot;index&quot;</span>, index)<br><span class="hljs-comment">// æ–‡ä»¶md5 </span><br>formData.append(<span class="hljs-string">&quot;md5&quot;</span>, md5)<br><br>axios.post(<span class="hljs-string">&quot;/path/to/upload&quot;</span>, formData)<br><br></code></pre></td></tr></table></figure><p>åç«¯é€šè¿‡è¿”å›ä¸‹ä¸€åˆ†ç‰‡çš„ç´¢å¼•æˆ–è€…æ˜¯ä¸‹ä¸€åˆ†ç‰‡çš„èŒƒå›´æ¥æŒ‡å®šå‰ç«¯æ¥ä¸‹æ¥éœ€è¦ä¸Šä¼ çš„åˆ†ç‰‡<br>åœ¨ä¸Šä¸€æ­¥éª¤ä¸­ä¹Ÿå¯ä»¥è¿”å›å’Œè¿™ä¸€æ­¥éª¤ç›¸åŒçš„å†…å®¹ã€‚</p><ul><li>æ–‡ä»¶ä¸Šä¼ å®Œæˆé€šçŸ¥<br>è¿™ä¸€æ­¥éª¤ä¸ºå¯é€‰æ­¥éª¤ï¼Œé€šè¿‡å‰ç«¯é€šçŸ¥åç«¯å®Œæˆäº†æ‰€æœ‰æ–‡ä»¶åˆ†ç‰‡çš„ä¸Šä¼ ã€‚<br>ä¸€èˆ¬ä¸éœ€è¦å‰ç«¯ä¸»åŠ¨å‘åç«¯é€šçŸ¥ã€‚</li></ul><h3 id="åç«¯å®ç°">åç«¯å®ç°</h3><p>è¿™é‡Œç®€å•ä½¿ç”¨<code>node</code>è®²è§£ä¸€ä¸‹åç«¯æ¥æ”¶æ–‡ä»¶çš„åŸºæœ¬é€»è¾‘<br>ä½¿ç”¨<code>koa</code>åšåŸºç¡€æœåŠ¡<br>ä½¿ç”¨<code>koa-body</code>æ¥æ”¶å‰ç«¯çš„æ–‡ä»¶å†…å®¹<br>ä½¿ç”¨<code>koa-router</code>åšå¯¹åº”çš„restfulè®¾è®¡</p><ol><li>æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-keyword">let</span> fileCache = &#123;&#125;<br><br>router<br>.get(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-keyword">async</span> (ctx) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> &#123; md5, chunkSize, filename, size, length &#125; = ctx.query <br>  <span class="hljs-keyword">if</span>(fileCache[md5] &amp;&amp; fileCache[md5].chunks.length === length) &#123;<br>    ctx.body = &#123;<br>      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">res</span>: &#123;<br>        <span class="hljs-attr">data</span>: <span class="hljs-literal">true</span> <br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span><br>  &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(fileCache[md5]) &#123;<br>    <span class="hljs-keyword">const</span> index = findLastUnUploadChunkIndex()<br>    ctx.body = &#123;<br>      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">res</span>: &#123;<br>        <span class="hljs-attr">data</span>: index<br>      &#125;<br>    &#125;<br>  &#125;<span class="hljs-keyword">else</span> &#123;<br>    fileCache[md5] = &#123;<br>      <span class="hljs-attr">chunks</span>: [],<br>      size,<br>      length,<br>      chunkSize,<br>      md5<br>    &#125;<br>    ctx.body = &#123;<br>      <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">res</span>: &#123;<br>        <span class="hljs-attr">data</span>: <span class="hljs-number">0</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><ol start="2"><li>æ–‡ä»¶ä¸Šä¼ </li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js">router.post(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-keyword">async</span> (ctx) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> files = ctx.request.files.file <br>  <span class="hljs-keyword">const</span> &#123; md5, index &#125; = ctx.request.body <br>  fileCache[md5].chunks.push(index) <br>  <span class="hljs-comment">// ä½¿ç”¨fsä¿å­˜å¯¹åº”çš„åˆ†ç‰‡è‡³æŒ‡å®šæ–‡ä»¶å¤¹</span><br>  <span class="hljs-comment">// åˆ†ç‰‡åç§°å¯ä»¥ä½¿ç”¨md5-indexçš„å½¢å¼</span><br>&#125;)<br></code></pre></td></tr></table></figure><ol start="3"><li>æ–‡ä»¶åˆå¹¶</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>)<br><span class="hljs-keyword">const</span> fsPromise = fs.promises  <br><br><span class="hljs-comment">// åˆå¹¶åˆ†ç‰‡</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeChunk</span>(<span class="hljs-params"></span>) </span>&#123;<br><br>  <span class="hljs-keyword">const</span> realFilePath = <span class="hljs-string">&quot;/path/to/real/file&quot;</span><br><br>  <span class="hljs-comment">// è·å–å¯¹åº”çš„æ–‡ä»¶åˆ†ç‰‡æ–‡ä»¶åç§°  </span><br>  <span class="hljs-keyword">const</span> chunkList = <span class="hljs-keyword">await</span> fsPromise.readdir(<span class="hljs-string">&quot;/path/to/chunk&quot;</span>)  <br><br>  <span class="hljs-comment">// å¯¹æ–‡ä»¶è¿›è¡Œæ’åº  </span><br>  chunkList.sort(<span class="hljs-function">(<span class="hljs-params">suffixA, suffixB</span>) =&gt;</span> <span class="hljs-built_in">Number</span>(suffixA.split(<span class="hljs-string">&#x27;-&#x27;</span>)[<span class="hljs-number">1</span>]) - <span class="hljs-built_in">Number</span>(suffixB.split(<span class="hljs-string">&#x27;-&#x27;</span>)[<span class="hljs-number">1</span>]))<br>  <br>  <span class="hljs-comment">//æ–‡ä»¶åˆå¹¶</span><br>  <span class="hljs-keyword">const</span> mergeTasks = <span class="hljs-keyword">async</span> () =&gt; &#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; chunkList.length; i ++) &#123;<br>      <span class="hljs-keyword">const</span> chunk = chunkList[i]<br>      <span class="hljs-keyword">await</span> fs.readFile(chunk)<br>      .then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> fs.appendFile(realFilePath, data))<br>      .then(<span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> fs.unlink(chunk))<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> fs.writeFile(realFilePath, <span class="hljs-string">&#x27;&#x27;</span>)<br>  .then(mergeTasks)<br>  .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;&#125;)<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ä»¥ä¸Šå°±æ˜¯æ•´ä¸ªæ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ çš„æµç¨‹ï¼Œå½“ä¸­çš„å…·ä½“ç»†èŠ‚å¯ä»¥æŸ¥çœ‹æœ¬äººå®Œæˆçš„å¯¹åº”çš„<a href="https://food-billboard.github.io/chunk-file-load/#/">ä¸Šä¼ å·¥å…·ç±»åº“</a>ï¼Œè¿˜æœ‰åŸºäºè¯¥ç±»åº“å°è£…çš„<code>React</code><a href="https://food-billboard.github.io/chunk-file-load-component/#/">ä¸Šä¼ ç»„ä»¶</a></p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>æ–‡ä»¶ä¸Šä¼ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>upload file chunk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gitmoji ä¼˜é›…æäº¤ä»£ç </title>
    <link href="/2021/11/19/gitmoji/"/>
    <url>/2021/11/19/gitmoji/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>ç›¸ä¿¡å¹³æ—¶åº”è¯¥å¤§å®¶éƒ½ç”¨è¿‡<code>github</code>å½“åšä»£ç ä»“åº“ï¼Œä½œä¸ºä¸€ä¸ªä¼˜è´¨çš„ä»“åº“ï¼Œå¯¹äºä»£ç çš„æäº¤ä¹Ÿæœ‰å¯¹åº”çš„è§„èŒƒï¼Œä¸ºäº†è®©æäº¤çœ‹å¾—æ›´æµ…æ˜¾æ˜“æ‡‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„å›¾æ ‡æ¥è¡¨ç¤ºä¸ä¸€æ ·çš„æ„æ€ï¼Œè¿™é‡Œå°±ä»‹ç»ä¸€ä¸ªæäº¤å·¥å…·<a href="https://gitmoji.dev/">gitmoji</a>ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><p>å…³äºè¿™ä¸ªåº“çš„ä½¿ç”¨ç›¸ä¿¡å®˜ç½‘å·²ç»æè¿°çš„éå¸¸è¯¦ç»†äº†ï¼Œè¿™é‡Œå°±ç®€å•åšä¸‹ç¿»è¯‘æ¥ä¾›è‡ªå·±æŸ¥çœ‹ã€‚</p><p>å¸¸ç”¨çš„å‡ ä¸ª</p><table><thead><tr><th>å›¾æ ‡</th><th>ä»£ç </th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ¨</td><td>:art:</td><td>æ”¹è¿›ä»£ç çš„ç»“æ„/æ ¼å¼ã€‚</td></tr><tr><td>ğŸ”¥</td><td>:fire:</td><td>åˆ é™¤ä»£ç æˆ–æ–‡ä»¶ã€‚</td></tr><tr><td>ğŸ›</td><td>:bug:</td><td>ä¿®å¤ä¸€ä¸ªé”™è¯¯ã€‚</td></tr><tr><td>âœ¨</td><td>:sparkles:</td><td>ä»‹ç»æ–°åŠŸèƒ½ã€‚</td></tr><tr><td>âœ…</td><td>:white_check_mark:</td><td>æ·»åŠ ã€æ›´æ–°æˆ–é€šè¿‡æµ‹è¯•ã€‚</td></tr><tr><td>ğŸš€</td><td>:rocket:</td><td>ä»£ç éƒ¨ç½²ã€‚</td></tr><tr><td>ğŸ’„</td><td>:lipstick:</td><td>æ·»åŠ æˆ–æ›´æ–° UI å’Œæ ·å¼æ–‡ä»¶ã€‚</td></tr><tr><td>ğŸ”’ï¸</td><td>:lock:</td><td>ä¿®å¤å®‰å…¨é—®é¢˜ã€‚</td></tr><tr><td>ğŸ”–</td><td>:bookmark:</td><td>å‘å¸ƒ/ç‰ˆæœ¬æ ‡ç­¾ã€‚</td></tr><tr><td>ğŸ”§</td><td>:wrench:</td><td>æ·»åŠ æˆ–æ›´æ–°é…ç½®æ–‡ä»¶ã€‚</td></tr><tr><td>âªï¸</td><td>:rewind:</td><td>è¿˜åŸæ›´æ”¹ã€‚</td></tr><tr><td>ğŸ¤¡</td><td>:clown_face:</td><td>mock ä»£ç </td></tr><tr><td>ğŸ™ˆ</td><td>:see_no_evil:</td><td>æ·»åŠ æˆ–æ›´æ–° .gitignore æ–‡ä»¶ã€‚</td></tr><tr><td>ğŸ—‘ï¸</td><td>:wastebasket:</td><td>å¼ƒç”¨éœ€è¦æ¸…ç†çš„ä»£ç ã€‚</td></tr><tr><td>âš°ï¸</td><td>:coffin:</td><td>åˆ é™¤æ­»ä»£ç ã€‚</td></tr><tr><td>ğŸ§ª</td><td>:test_tube:</td><td>æ·»åŠ å¤±è´¥çš„æµ‹è¯•ã€‚</td></tr><tr><td>ğŸ‘”</td><td>:necktie:</td><td>æ·»åŠ æˆ–æ›´æ–°ä¸šåŠ¡é€»è¾‘</td></tr></tbody></table><p>ç´¢å¼•</p><table><thead><tr><th>å›¾æ ‡</th><th>ä»£ç </th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸ¨</td><td>:art:</td><td>æ”¹è¿›ä»£ç çš„ç»“æ„/æ ¼å¼ã€‚</td></tr><tr><td>âš¡ï¸</td><td>:zap:</td><td>æé«˜æ€§èƒ½ã€‚</td></tr><tr><td>ğŸ”¥</td><td>:fire:</td><td>åˆ é™¤ä»£ç æˆ–æ–‡ä»¶ã€‚</td></tr><tr><td>ğŸ›</td><td>:bug:</td><td>ä¿®å¤ä¸€ä¸ªé”™è¯¯ã€‚</td></tr><tr><td>ğŸš‘ï¸</td><td>:ambulance:</td><td>å…³é”®ä¿®è¡¥ç¨‹åºã€‚</td></tr><tr><td>âœ¨</td><td>:sparkles:</td><td>ä»‹ç»æ–°åŠŸèƒ½ã€‚</td></tr><tr><td>ğŸ“</td><td>:memo:</td><td>æ·»åŠ æˆ–æ›´æ–°æ–‡æ¡£ã€‚</td></tr><tr><td>ğŸš€</td><td>:rocket:</td><td>ä»£ç éƒ¨ç½²ã€‚</td></tr><tr><td>ğŸ’„</td><td>:lipstick:</td><td>æ·»åŠ æˆ–æ›´æ–° UI å’Œæ ·å¼æ–‡ä»¶ã€‚</td></tr><tr><td>ğŸ‰</td><td>:tada:</td><td>é¡¹ç›®åˆ›å»º</td></tr><tr><td>âœ…</td><td>:white_check_mark:</td><td>æ·»åŠ ã€æ›´æ–°æˆ–é€šè¿‡æµ‹è¯•ã€‚</td></tr><tr><td>ğŸ”’ï¸</td><td>:lock:</td><td>ä¿®å¤å®‰å…¨é—®é¢˜ã€‚</td></tr><tr><td>ğŸ”–</td><td>:bookmark:</td><td>å‘å¸ƒ/ç‰ˆæœ¬æ ‡ç­¾ã€‚</td></tr><tr><td>ğŸš¨</td><td>:rotating_light:</td><td>ä¿®å¤ç¼–è¯‘å™¨/linter è­¦å‘Šã€‚</td></tr><tr><td>ğŸš§</td><td>:construction:</td><td>å·¥ä½œæ­£åœ¨è¿›è¡Œä¸­ã€‚</td></tr><tr><td>ğŸ’š</td><td>:green_heart:</td><td>ä¿®å¤ CI æ„å»ºã€‚</td></tr><tr><td>â¬‡ï¸</td><td>:arrow_down:</td><td>é™çº§ä¾èµ–é¡¹ã€‚</td></tr><tr><td>â¬†ï¸</td><td>:arrow_up:</td><td>å‡çº§ä¾èµ–é¡¹ã€‚</td></tr><tr><td>ğŸ“Œ</td><td>:pushpin:</td><td>å°†ä¾èµ–é¡¹å›ºå®šåˆ°ç‰¹å®šç‰ˆæœ¬ã€‚</td></tr><tr><td>ğŸ‘·</td><td>:construction_worker:</td><td>æ·»åŠ æˆ–æ›´æ–° CI æ„å»ºç³»ç»Ÿã€‚</td></tr><tr><td>ğŸ“ˆ</td><td>:chart_with_upwards_trend:</td><td>æ·»åŠ æˆ–æ›´æ–°åˆ†ææˆ–è·Ÿè¸ªä»£ç ã€‚</td></tr><tr><td>â™»ï¸</td><td>:recycle:</td><td>é‡æ„ä»£ç ã€‚</td></tr><tr><td>â•</td><td>:heavy_plus_sign:</td><td>æ·»åŠ ä¾èµ–é¡¹ã€‚</td></tr><tr><td>â–</td><td>:heavy_minus_sign:</td><td>åˆ é™¤ä¾èµ–é¡¹ã€‚</td></tr><tr><td>ğŸ”§</td><td>:wrench:</td><td>æ·»åŠ æˆ–æ›´æ–°é…ç½®æ–‡ä»¶ã€‚</td></tr><tr><td>ğŸ”¨</td><td>:hammer:</td><td>æ·»åŠ æˆ–æ›´æ–°å¼€å‘è„šæœ¬ã€‚</td></tr><tr><td>ğŸŒ</td><td>:globe_with_meridians:</td><td>å›½é™…åŒ–å’Œæœ¬åœ°åŒ–ã€‚</td></tr><tr><td>âœï¸</td><td>:pencil2:</td><td>ä¿®æ­£é”™åˆ«å­—ã€‚</td></tr><tr><td>ğŸ’©</td><td>:poop:</td><td>ç¼–å†™éœ€è¦æ”¹è¿›çš„ç³Ÿç³•ä»£ç ã€‚</td></tr><tr><td>âªï¸</td><td>:rewind:</td><td>è¿˜åŸæ›´æ”¹ã€‚</td></tr><tr><td>ğŸ”€</td><td>:twisted_rightwards_arrows:</td><td>åˆå¹¶åˆ†æ”¯ã€‚</td></tr><tr><td>ğŸ“¦ï¸</td><td>:package:</td><td>æ·»åŠ æˆ–æ›´æ–°å·²ç¼–è¯‘çš„æ–‡ä»¶æˆ–åŒ…ã€‚</td></tr><tr><td>ğŸ‘½ï¸</td><td>:alien:</td><td>ç”±äºå¤–éƒ¨ API æ›´æ”¹è€Œæ›´æ–°ä»£ç ã€‚</td></tr><tr><td>ğŸšš</td><td>:truck:</td><td>ç§»åŠ¨æˆ–é‡å‘½åèµ„æºï¼ˆä¾‹å¦‚ï¼šæ–‡ä»¶ã€è·¯å¾„ã€è·¯ç”±ï¼‰ã€‚</td></tr><tr><td>ğŸ“„</td><td>:page_facing_up:</td><td>æ·»åŠ æˆ–æ›´æ–°è®¸å¯è¯ã€‚</td></tr><tr><td>ğŸ’¥</td><td>:boom:</td><td>å¼•å…¥é‡å¤§æ›´æ”¹ã€‚</td></tr><tr><td>ğŸ±</td><td>:bento:</td><td>æ·»åŠ æˆ–æ›´æ–°é™æ€èµ„æº</td></tr><tr><td>â™¿ï¸</td><td>:wheelchair:</td><td>æé«˜å¯è®¿é—®æ€§ã€‚</td></tr><tr><td>ğŸ’¡</td><td>:bulb:</td><td>åœ¨æºä»£ç ä¸­æ·»åŠ æˆ–æ›´æ–°æ³¨é‡Šã€‚</td></tr><tr><td>ğŸ»</td><td>:beers:</td><td>é†‰é…’å†™ä»£ç ã€‚(æ²¡æ‡‚å•¥æ„æ€)</td></tr><tr><td>ğŸ’¬</td><td>:speech_balloon:</td><td>æ·»åŠ æˆ–æ›´æ–°æ–‡æœ¬å’Œæ–‡å­—ã€‚</td></tr><tr><td>ğŸ—ƒï¸</td><td>:card_file_box:</td><td>æ‰§è¡Œä¸æ•°æ®åº“ç›¸å…³çš„æ›´æ”¹ã€‚</td></tr><tr><td>ğŸ”Š</td><td>:loud_sound:</td><td>æ·»åŠ æˆ–æ›´æ–°æ—¥å¿—ã€‚</td></tr><tr><td>ğŸ”‡</td><td>:mute:</td><td>åˆ é™¤æ—¥å¿—ã€‚</td></tr><tr><td>ğŸ‘¥</td><td>:busts_in_silhouette:</td><td>æ·»åŠ æˆ–æ›´æ–°è´¡çŒ®è€…ã€‚</td></tr><tr><td>ğŸš¸</td><td>:children_crossing:</td><td>æ”¹å–„ç”¨æˆ·ä½“éªŒ/å¯ç”¨æ€§</td></tr><tr><td>ğŸ—ï¸</td><td>:building_construction:</td><td>è¿›è¡Œæ¶æ„æ›´æ”¹ã€‚</td></tr><tr><td>ğŸ“±</td><td>:iphone:</td><td>ä»äº‹å“åº”å¼è®¾è®¡ã€‚</td></tr><tr><td>ğŸ¤¡</td><td>:clown_face:</td><td>mock ä»£ç </td></tr><tr><td>ğŸ¥š</td><td>:egg:</td><td>æ·»åŠ æˆ–æ›´æ–°å¤æ´»èŠ‚å½©è›‹ã€‚</td></tr><tr><td>ğŸ™ˆ</td><td>:see_no_evil:</td><td>æ·»åŠ æˆ–æ›´æ–° .gitignore æ–‡ä»¶ã€‚</td></tr><tr><td>ğŸ“¸</td><td>:camera_flash:</td><td>æ·»åŠ æˆ–æ›´æ–°å¿«ç…§ã€‚</td></tr><tr><td>âš—ï¸</td><td>:alembic:</td><td>è¿›è¡Œå®éªŒã€‚</td></tr><tr><td>ğŸ”ï¸</td><td>:mag:</td><td>æ”¹è¿›æœç´¢å¼•æ“ä¼˜åŒ–ã€‚</td></tr><tr><td>ğŸ·ï¸</td><td>:label:</td><td>æ·»åŠ æˆ–æ›´æ–°ç±»å‹ã€‚</td></tr><tr><td>ğŸŒ±</td><td>:seedling:</td><td>æ·»åŠ æˆ–æ›´æ–°ç§å­æ–‡ä»¶ã€‚</td></tr><tr><td>ğŸš©</td><td>:triangular_flag_on_post:</td><td>æ·»åŠ ã€æ›´æ–°æˆ–åˆ é™¤åŠŸèƒ½æ ‡å¿—ã€‚</td></tr><tr><td>ğŸ¥…</td><td>:goal_net:</td><td>æ•æ‰é”™è¯¯ã€‚</td></tr><tr><td>ğŸ’«</td><td>:dizzy:</td><td>æ·»åŠ æˆ–æ›´æ–°åŠ¨ç”»å’Œè¿‡æ¸¡ã€‚</td></tr><tr><td>ğŸ—‘ï¸</td><td>:wastebasket:</td><td>å¼ƒç”¨éœ€è¦æ¸…ç†çš„ä»£ç ã€‚</td></tr><tr><td>ğŸ›‚</td><td>:passport_control:</td><td>å¤„ç†ä¸æˆæƒã€è§’è‰²å’Œæƒé™ç›¸å…³çš„ä»£ç ã€‚</td></tr><tr><td>ğŸ©¹</td><td>:adhesive_bandage:</td><td>å¯¹éå…³é”®é—®é¢˜çš„ç®€å•ä¿®å¤ã€‚</td></tr><tr><td>ğŸ§</td><td>:monocle_face:</td><td>æ•°æ®æ¢ç´¢/æ£€æŸ¥ã€‚</td></tr><tr><td>âš°ï¸</td><td>:coffin:</td><td>åˆ é™¤æ­»ä»£ç ã€‚</td></tr><tr><td>ğŸ§ª</td><td>:test_tube:</td><td>æ·»åŠ å¤±è´¥çš„æµ‹è¯•ã€‚</td></tr><tr><td>ğŸ‘”</td><td>:necktie:</td><td>æ·»åŠ æˆ–æ›´æ–°ä¸šåŠ¡é€»è¾‘</td></tr><tr><td>ğŸ©º</td><td>:stethoscope:</td><td>æ·»åŠ æˆ–æ›´æ–°å¥åº·æ£€æŸ¥ã€‚</td></tr></tbody></table><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ç®€å•æ°´ğŸ’§ä¸€ä¸‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ä»£ç æäº¤</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
      <tag>è§„èŒƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»0åˆ°1å®Œæˆé˜¿é‡Œäº‘nodeæœåŠ¡æ­å»ºéƒ¨ç½²</title>
    <link href="/2021/10/30/%E4%BB%8E0%E5%88%B01%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E9%83%A8%E7%BD%B2/"/>
    <url>/2021/10/30/%E4%BB%8E0%E5%88%B01%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»0åˆ°1å®Œæˆé˜¿é‡Œäº‘nodeæœåŠ¡æ­å»ºéƒ¨ç½²">ä»0åˆ°1å®Œæˆé˜¿é‡Œäº‘nodeæœåŠ¡æ­å»ºéƒ¨ç½²</h2><h2 id="ä»‹ç»">ä»‹ç»</h2><p>å‰æ®µæ—¶é—´è‡ªå·±æ ¹æ®ç½‘ä¸Šçš„æ•™ç¨‹æ£é¼“äº†ä¸€ä¸‹è‡ªå·±çš„æœåŠ¡å™¨ï¼Œç»ˆäºæŠŠè‡ªå·±çš„<code>node</code>æœåŠ¡éƒ¨ç½²åˆ°äº†é˜¿é‡Œäº‘ã€‚æ‰€ä»¥åœ¨è¿™é‡ŒæŠŠè‡ªå·±çš„ä¸€äº›ç»éªŒåˆ†äº«ç»™å„ä½ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰å¸®åŠ©áƒ¦( Â´ï½¥á´—ï½¥` )æ¯”å¿ƒã€‚</p><ol><li>å…ˆä»‹ç»ä¸€ä¸‹è¿™æ¬¡éƒ¨ç½²ç”¨åˆ°çš„ä¸€äº›ä¸œè¥¿ï¼Œå…å¾—æµªè´¹å„ä½çš„æ—¶é—´âœ… ã€‚</li></ol><ul><li>é¦–å…ˆæœ¬äººæ˜¯ä¸€ä¸ªå‰ç«¯ï¼Œæ‰€ä»¥è¿™æ¬¡çš„æœåŠ¡ç«¯è¯­è¨€ç”¨çš„æ˜¯<code>node</code>æ¡†æ¶<a href="https://koajs.com/">koa</a></li><li><code>node</code>ç”Ÿäº§ç¯å¢ƒè‡ªç„¶ç¦»ä¸å¼€<a href="https://pm2.keymetrics.io/">pm2</a>ï¼Œæœ¬æ¬¡è¿œç¨‹éƒ¨ç½²ä¹Ÿç”¨åˆ°äº†å®ƒ</li><li>æ•°æ®åº“ç”¨çš„<a href="https://docs.mongodb.com/">mongodb</a>ä»¥åŠå®ƒçš„<code>orm</code><a href="http://www.mongoosejs.net/">mongoose</a></li><li>ç¼“å­˜ç”¨çš„<code>redis</code>ï¼Œè¿™ä¸ªç”¨åˆ°çš„åœ°æ–¹ä¸æ˜¯å¾ˆå¤šã€‚</li><li><code>nginx</code>åšä»£ç†</li><li>å°†ä¸Šé¢çš„æ•°æ®åº“ã€ç¼“å­˜ã€<code>nginx</code>ç­‰åšå®¹å™¨åŒ–ä½¿ç”¨<code>docker</code>ï¼Œå¹¶ä½¿ç”¨<code>docker-compose</code>åšç»Ÿä¸€ç®¡ç†ã€‚</li><li>ci/ci ç”¨çš„<code>github actions</code>ï¼Œä¸¤ä¸ªå­—ï¼Œé¦™ï¼ï¼ï¼ˆä¹‹å‰ç”¨çš„<code>travis</code>ï¼Œä½†æ˜¯åæ¥å¾—çŸ¥å®ƒå±…ç„¶å¼€å§‹æ”¶è´¹äº†ï¼Œé‚£æ²¡äº‹äº†ï¼Œç™½å«–æ€ªä¸å¯èƒ½å¤šèŠ±ä¸€åˆ†é’±çš„ï¼‰</li></ul><ol start="2"><li>å½“å‰è¿˜æœ‰éƒ¨åˆ†æœªå®Œæˆçš„å†…å®¹â</li></ol><ul><li>æ¶ˆæ¯é˜Ÿåˆ—æ§åˆ¶<code>rabbitmq</code></li><li>è§†é¢‘ç»†åŒ–å¤„ç†<code>ffmpeg</code></li></ul><h2 id="æ­£æ–‡">æ­£æ–‡</h2><ol><li>æœåŠ¡ç«¯ä¾èµ–å®‰è£…<br>é¦–å…ˆæ˜¯æœåŠ¡å™¨ä¸Šç›¸å…³çš„ä¾èµ–å®‰è£…ï¼š<code>node</code>å’Œ<code>docker</code>ä»¥åŠ<code>docker-compose</code></li></ol><ul><li>node<br>å®‰è£…<code>node</code>å¯ä»¥å‚è€ƒè¿™è¾¹<a href="https://www.jianshu.com/p/2e31fd9eb048">æ–‡ç« </a>çš„å†…å®¹</li><li>docker<br>å®‰è£…<code>docker</code>å¯ä»¥å‚è€ƒ<a href="https://www.runoob.com/docker/ubuntu-docker-install.html">è¿™ä¸ª</a></li><li>docker-compose<br>å®‰è£…<code>docker-compose</code>å¯ä»¥å‚è€ƒ<a href="https://www.runoob.com/docker/ubuntu-docker-install.html">è¿™ä¸ª</a></li></ul><ol start="2"><li><p>github actions<br>å…³äºä»£ç é›†æˆéƒ¨ç½²æ–¹é¢ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨äº†<code>github actions</code>ï¼Œå¦‚æœæœ‰ä¸äº†è§£çš„è¯ï¼Œå¯ä»¥å‚è€ƒ<a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html">é˜®ä¸€å³°</a>çš„æ–‡ç« ã€‚<br>è¿™é‡Œå…³äºå®ƒå¯¹äºæœåŠ¡å™¨çš„ä¸€äº›é…ç½®é—®é¢˜ï¼Œæœ¬äººåœ¨ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ä¸­æœ‰è¯¦ç»†æè¿°ï¼Œå¯ä»¥å‚çœ‹<a href="https://food-billboard.github.io/2021/10/25/deploy/">é‚£ç¯‡æ–‡ç« </a>æ¥è¿›è¡Œé…ç½®ã€‚</p></li><li><p>docker docker-compose</p></li></ol><ul><li><p><code>docker</code></p><blockquote><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„é•œåƒä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linuxæˆ–Windowsæ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚<br><code>docker</code>ç®€åŒ–äº†æˆ‘ä»¬åœ¨æœåŠ¡éƒ¨ç½²ä¸Šçš„æµç¨‹ï¼Œå¹¶ä¸”å®ƒçš„å¯ç§»æ¤æ€§ä»¥åŠè·¨æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¸€æ¬¡é…ç½®ï¼Œå¤šå¤„ä½¿ç”¨ã€‚</p></blockquote></li><li><p><code>docker-compose</code></p><blockquote><p>Compose æ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡ Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ YML æ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚<br>é€šå¸¸éƒ¨ç½²æœåŠ¡ä¸€èˆ¬ç‰µæ‰¯åˆ°å…¶ä»–å¾ˆå¤šçš„é…ç½®ï¼Œæ¯”å¦‚æœ¬äººçš„<code>node</code>é¡¹ç›®ï¼Œéœ€è¦ç”¨åˆ°<code>mongodb</code>ã€<code>redis</code>ã€<code>nginx</code>ç­‰ï¼Œå¦‚æœè¿™äº›éƒ½å•ç‹¬é…ç½®ï¼Œä½†æ˜¯å®‰è£…å°±éœ€è¦åˆ†åˆ«å¤„ç†ä¸‰æ¬¡ï¼Œé€šè¿‡<code>docker</code>å®¹å™¨åŒ–å¹¶é…åˆ<code>docker-compose</code>è¿›è¡Œç»Ÿä¸€é…ç½®ï¼Œå¤§å¤§é™ä½äº†éš¾åº¦ã€‚</p></blockquote></li></ul><p>ä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹æœ¬äººä½¿ç”¨çš„å‡ ç§å®¹å™¨çš„é…ç½®ï¼ˆå¯èƒ½ä¸å…¨ï¼Œå¯ä»¥é€‰æ‹©å¾—çœ‹ğŸ˜ï¼‰</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># mongodb </span><br><span class="hljs-attr">mongo:</span><br>  <span class="hljs-attr">container_name:</span> <span class="hljs-string">mongo</span><br>  <span class="hljs-attr">image:</span> <span class="hljs-string">mongo:4.0.3</span><br>  <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-number">27017</span><span class="hljs-string">:27017</span><br>  <span class="hljs-attr">volumes:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">/home/movie/mongodb/data:/data/db</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">/usr/local/mongodb/log:/var/log/mongodb</span>  <br><br><span class="hljs-comment"># redis </span><br><span class="hljs-attr">image:</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attr">container_name:</span> <span class="hljs-string">redis</span><br>  <span class="hljs-attr">volumes:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">/usr/local/redis/redis.conf:/usr/local/etc/redis/redis.conf</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-number">6379</span><span class="hljs-string">:6379</span><br><br><span class="hljs-comment"># nginx </span><br><span class="hljs-attr">image:</span> <span class="hljs-string">nginx:1.19</span><br>  <span class="hljs-attr">container_name:</span> <span class="hljs-string">nginx</span><br>  <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>  <span class="hljs-attr">privileged:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-number">8080</span><span class="hljs-string">:80</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-number">80</span><span class="hljs-string">:80</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-number">443</span><span class="hljs-string">:443</span><br>  <span class="hljs-attr">volumes:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./bin/nginx/nginx.conf:/etc/nginx/conf.d/default.conf</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./bin/nginx/logs.log:/etc/nginx/logs/log.log</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./public:/movie/server/public:ro</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">./static:/movie/server/static:ro</span><br>  <span class="hljs-attr">network_mode:</span> <span class="hljs-string">host</span><br></code></pre></td></tr></table></figure><ul><li>å°±ä»¥ä¸Šçš„é…ç½®ï¼Œè¿™é‡Œåšä¸€ä¸‹è¯´æ˜ï¼š<ul><li>å¦‚ä¸Š<code>volumes</code>æ˜¯åšæ–‡ä»¶æ˜ å°„çš„ï¼Œå½“å¸Œæœ›å¤–éƒ¨æ–‡ä»¶æ˜ å°„åˆ°å†…éƒ¨æ–‡ä»¶ï¼Œå¹¶ä¸”åŒæ­¥ä¿®æ”¹æ—¶ï¼Œä¸è¦ç›´æ¥æ˜ å°„å¯¹åº”çš„æ–‡ä»¶ï¼Œè€Œæ˜¯æ˜ å°„å…¶å¤–éƒ¨çš„æ–‡ä»¶å¤¹ï¼Œå¦åˆ™çš„æ— æ³•åšåˆ°ä¿®æ”¹åŒæ­¥ã€‚</li><li>å¤–éƒ¨çš„æœåŠ¡ä¼šå’Œå®¹å™¨å†…çš„æœåŠ¡å‘ç”Ÿå†²çªï¼Œæ¯”å¦‚ä½ åœ¨å¤–éƒ¨å¯åŠ¨äº†<code>nginx</code>ï¼ŒåŒæ ·åœ¨å®¹å™¨é‡Œå¯ç”¨<code>docker</code>ï¼Œé‚£ä¹ˆå¯èƒ½å°±æ˜¯å¤–éƒ¨çš„<code>nginx</code>é…ç½®èµ·ä½œç”¨äº†ã€‚</li></ul></li></ul><p>å¦‚æœæœ‰åœ¨æœ¬åœ°åš<code>docker</code>æµ‹è¯•ï¼Œå¯ä»¥<code>vs code</code>çš„<code>docker</code>æ’ä»¶ï¼Œå¯ä»¥é‡‡ç”¨å¯è§†åŒ–çš„æ–¹å¼æŸ¥çœ‹åˆ°å®¹å™¨å†…éƒ¨çš„æ–‡ä»¶ç»“æ„ã€‚</p><ul><li>å¦å¤–<br>æ”¶é›†äº†å‡ ä¸ªæœ‰æ—¶å€™ç”¨åˆ°çš„<code>docker</code>å‘½ä»¤<ul><li><p>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„dockerå®¹å™¨ <code>docker ps</code></p></li><li><p>è¿›å…¥æŒ‡å®šå®¹å™¨å†…éƒ¨ <code>docker exec -it å®¹å™¨id sh</code></p></li><li><p>ä»å®¹å™¨ä¸­é€€å‡º <code>exit</code></p></li><li><p>æŸ¥çœ‹å®¹å™¨å†…éƒ¨æš´éœ²çš„ip <code>docker inspect å®¹å™¨id |grep IPA</code></p></li><li><p>å¤–éƒ¨æ‰§è¡Œmongodb <code>docker exec -it å®¹å™¨id mongo --host 127.0.0.1 --port 27017</code></p></li><li><p>å¤–éƒ¨æ‰§è¡Œredis <code>docker exec -it å®¹å™¨id redis-cli</code></p></li><li><p>æ–‡ä»¶å¤åˆ¶ <code>docker cp å®¹å™¨id:å®¹å™¨çš„è·¯å¾„ æœ¬åœ°çš„è·¯å¾„</code></p></li><li><p>åœæ­¢é•œåƒ <code>docker stop docker_id</code></p></li><li><p>åˆ é™¤å®¹å™¨ <code>docker rm docker_id</code></p></li><li><p>æ­£åœ¨è¿è¡Œçš„å®¹å™¨ <code>docker ps</code></p></li><li><p>æ‰€æœ‰å®¹å™¨ <code>docker ps -a</code></p></li><li><p>åˆ é™¤é•œåƒ <code>docker rmi docker_id</code></p></li><li><p>æŸ¥çœ‹é•œåƒ <code>docker images</code></p></li><li><p>æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¥å¿— <code>docker logs docker_id</code></p></li></ul></li></ul><ol start="4"><li>pm2</li></ol><blockquote><p>PM2 æ˜¯ä¸€ä¸ªå¸¦æœ‰è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„ Node åº”ç”¨è¿›ç¨‹ç®¡ç†å™¨ã€‚<br>åˆ©ç”¨<code>pm2</code>åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡ŒæœåŠ¡æŒä¹…æ€§è¿è¡Œï¼Œä»¥åŠè¾¾åˆ°ä»<code>local</code>åˆ°<code>remote</code>çš„ä»£ç éƒ¨ç½²ã€‚</p></blockquote><p>ä¸‹é¢æ˜¯å®ƒçš„é…ç½®ï¼Œå½“ä¸­æœ‰æ³¨é‡Šè¿›è¡Œè§£é‡Šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">module</span>.exports = &#123;<br>  <span class="hljs-comment">// åº”ç”¨åç§°</span><br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;app&quot;</span>,<br>  <span class="hljs-comment">// éœ€è¦å¯åŠ¨çš„æœåŠ¡  </span><br>  <span class="hljs-attr">apps</span> : [<br>    &#123;<br>      <span class="hljs-comment">// è¿›ç¨‹åç§°</span><br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;app&#x27;</span>,<br>      <span class="hljs-comment">// è¿›ç¨‹çš„å…¥å£æ–‡ä»¶  </span><br>      <span class="hljs-attr">script</span>: <span class="hljs-string">&#x27;app.js&#x27;</span>,<br>      <span class="hljs-comment">// ç¯å¢ƒå˜é‡</span><br>      <span class="hljs-attr">env</span>: &#123;<br>        <span class="hljs-attr">NODE_ENV</span>: <span class="hljs-string">&quot;production&quot;</span><br>      &#125;,<br>      <span class="hljs-comment">// è´Ÿè½½å‡è¡¡</span><br>      <span class="hljs-attr">exec_mode</span>: <span class="hljs-string">&quot;cluster_mode&quot;</span>,<br>      <span class="hljs-comment">// é”™è¯¯æ—¥å¿—è·¯å¾„</span><br>      <span class="hljs-attr">error_file</span>: <span class="hljs-string">&#x27;./src/logs/pm2/error.log&#x27;</span>,<br>      <span class="hljs-comment">// è¾“å‡ºè·¯å¾„  </span><br>      <span class="hljs-attr">out_file</span>: <span class="hljs-string">&#x27;./src/logs/pm2/output.log&#x27;</span><br>    &#125;, <br>    <span class="hljs-comment">// å¦ä¸€ä¸ªè¿›ç¨‹  </span><br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;socket&quot;</span>,<br>      <span class="hljs-attr">script</span>: <span class="hljs-string">&quot;./src/chat/index.js&quot;</span>,<br>      <span class="hljs-attr">exec_mode</span>: <span class="hljs-string">&quot;cluster_mode&quot;</span>,<br>    &#125;<br>  ],<br><br>  <span class="hljs-comment">// éƒ¨ç½²çš„é…ç½® </span><br>  <span class="hljs-attr">deploy</span> : &#123;<br>    <span class="hljs-attr">production</span> : &#123;<br>      <span class="hljs-attr">user</span>: <span class="hljs-string">&quot;è¿™é‡Œæ˜¯æœåŠ¡å™¨çš„ç”¨æˆ·å&quot;</span>,<br>      <span class="hljs-attr">host</span>: <span class="hljs-string">&quot;æœåŠ¡å™¨çš„ipåœ°å€(xx.xx.xx.xxæˆ–è€…å¯ä»¥ä½¿ç”¨æ•°ç»„è®¾ç½®å¤šä¸ª)&quot;</span>,<br>      <span class="hljs-attr">ssh_options</span>: <span class="hljs-string">&quot;sshè¿æ¥çš„å‚æ•°&quot;</span>,<br>      <span class="hljs-attr">ref</span>: <span class="hljs-string">&quot;githubåˆ†æ”¯&quot;</span>,<br>      <span class="hljs-attr">repo</span>: <span class="hljs-string">&quot;githubä»“åº“&quot;</span>,<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;éƒ¨ç½²çš„æœåŠ¡å™¨ä¸­çš„æ–‡ä»¶ç›®å½•&quot;</span>,<br>      <span class="hljs-comment">// ä»£ç è¢«cloneåæ‰§è¡Œçš„å‘½ä»¤</span><br>      <span class="hljs-string">&quot;post-deploy&quot;</span>:<br>        <span class="hljs-string">&quot;git pull origin master &amp;&amp; source ~/.nvm/nvm.sh &amp;&amp; yarn install&quot;</span>, <br>      <span class="hljs-comment">// ç¯å¢ƒå˜é‡</span><br>      <span class="hljs-attr">env</span>: &#123;<br>        <span class="hljs-string">&quot;NODE_ENV&quot;</span>: <span class="hljs-string">&quot;production&quot;</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜</h2><ol><li>å¯èƒ½å­˜åœ¨æ‹‰å–<code>docker</code>é•œåƒå‡ºç°<code>net/http: TLS handshake timeout</code>é—®é¢˜<br>ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿ</li></ol><blockquote><p>Ubuntu16.04+ã€Debian8+ã€CentOS7<br>å¯¹äºä½¿ç”¨ systemd çš„ç³»ç»Ÿï¼Œè¯·åœ¨ /etc/docker/daemon.json ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯·æ–°å»ºè¯¥æ–‡ä»¶ï¼‰ï¼š<br><code>&#123;&quot;registry-mirrors&quot;:[&quot;https://reg-mirror.qiniu.com/&quot;]&#125;</code><br>è¿™ä¸ªæ˜¯ä¸ƒç‰›äº‘çš„é•œåƒåŠ é€Ÿåœ°å€</p></blockquote><h2 id="ç»“æŸ">ç»“æŸ</h2><p>è¿™å°±æ˜¯æœ¬æ¬¡æˆ‘åœ¨æ­å»ºéƒ¨ç½²é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸­æ€»ç»“çš„ä¸€äº›ç»éªŒå’Œæ•™è®­ï¼Œå¦‚æœ‰é”™è¯¯çš„è¯è¯·æŒ‡æ­£ï¼Œå¸Œæœ›å¯¹å„ä½æœ‰å¸®åŠ©ã€‚<br>å®Œæ•´çš„é¡¹ç›®é…ç½®å¯ä»¥åˆ°<a href="https://github.com/food-billboard/node-server">è¿™é‡Œ</a>æŸ¥çœ‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>éƒ¨ç½²</category>
      
    </categories>
    
    
    <tags>
      
      <tag>deploy node</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mongodbæ“ä½œå®ä¾‹</title>
    <link href="/2021/10/26/mongodb%E6%93%8D%E4%BD%9C%E5%AE%9E%E4%BE%8B/"/>
    <url>/2021/10/26/mongodb%E6%93%8D%E4%BD%9C%E5%AE%9E%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>è¿™æ˜¯<code>mongodb</code>çš„ç¬¬äºŒç¯‡æ–‡ç« ï¼Œæœ¬æ–‡åŒ…å«äº†ä¸€äº›åœ¨å¹³æ—¶è‡ªå·±å¼€å‘è¿‡ç¨‹å½“ä¸­ä½¿ç”¨çš„ä¸€äº›æ“ä½œç¬¦ä»¥åŠç‰¹æ®Šæƒ…å†µï¼Œå¸Œæœ›å¯¹å„ä½æœ‰å¸®åŠ©ğŸ˜º ã€‚</p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><h3 id="filter">$filter</h3><ul><li><p>ç”¨äºä»å·²æœ‰æ•°æ®å¯¹è±¡ä¸­çš„æ•°ç»„ä¸­ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„æ•°æ®é¡¹</p></li><li><p>å‡è®¾æœ‰å¦‚ä¸‹é›†åˆåç§°ä¸º<code>users</code>çš„æ•°æ®:</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">students</span>: [<br>      &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">10</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Lisa&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">19</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Jack&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">17</span><br>      &#125;<br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><ul><li>ç­›é€‰å‡ºå¹´é¾„å¤§äº<code>18</code>çš„å­¦ç”Ÿ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">db.users.aggregate([<br>  &#123;<br>    <span class="hljs-attr">$project</span>: &#123;<br>      <span class="hljs-attr">student_gt_18</span>: &#123;<br>        <span class="hljs-attr">$filter</span>: &#123;<br>          <span class="hljs-attr">input</span>: <span class="hljs-string">&quot;$students&quot;</span>,<br>          <span class="hljs-attr">as</span>: <span class="hljs-string">&quot;student&quot;</span>,<br>          <span class="hljs-attr">cond</span>: &#123;<br>            <span class="hljs-attr">$gt</span>: [ <span class="hljs-string">&quot;$$student.age&quot;</span>, <span class="hljs-number">18</span> ]<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>])<br></code></pre></td></tr></table></figure><ul><li>ä½ å°†ä¼šå¾—åˆ°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">student_gt_18</span>: [<br>      &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Lisa&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">19</span><br>      &#125;<br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p><code>$filter</code>æœ‰ä¸‰ä¸ªå‚æ•°:</p><ol><li><code>input</code><br>å…ƒæ•°æ®ä¸­çš„æŸä¸€å­—æ®µ(å¦‚<code>students</code>)</li><li><code>as</code><br><code>students</code>çš„éå†é¡¹åç§°(å¦‚<code>student</code>)</li><li><code>cond</code><br>ç­›é€‰æ¡ä»¶ï¼Œå¯ä»¥åœ¨å…¶ä¸­ä½¿ç”¨éå†é¡¹çš„å€¼(å¦‚<code>$$student.age</code>ï¼Œå¾—åˆ°äº†å½“å‰é¡¹çš„<code>age</code>)</li></ol><h3 id="map">$map</h3><ul><li><p>ç”¨äºéå†å·²æœ‰æ•°æ®å¯¹è±¡ä¸­çš„æ•°ç»„ä¸­å¹¶è§£ææˆæ–°çš„æ•°ç»„<br>å…¶å®è¿™ä¸ªå’Œä¸Šé¢çš„<code>$filter</code>åœ¨è¯­ä¹‰ä¸Šä¸<code>javascript</code>çš„åŒåæ–¹æ³•çš„åŠŸèƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ ·çš„è¯åº”è¯¥ä¼šå¾ˆå¥½ç†è§£äº†ğŸ‘ ã€‚</p></li><li><p>å‡è®¾æœ‰å¦‚ä¸‹é›†åˆåç§°ä¸º<code>users</code>çš„æ•°æ®:</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">students</span>: [<br>      &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">10</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Lisa&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">19</span><br>      &#125;<br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><ul><li>å°†å­¦ç”Ÿ<code>name</code>å’Œ<code>age</code>å­—æ®µæ‹¼æ¥ç”Ÿæˆæ–°çš„å­—æ®µ<code>description</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js">db.users.aggregate([<br>  &#123;<br>    <span class="hljs-attr">$project</span>: &#123;<br>      <span class="hljs-attr">new_students</span>: &#123;<br>        <span class="hljs-attr">$map</span>: &#123;<br>          <span class="hljs-attr">input</span>: <span class="hljs-string">&quot;$students&quot;</span>,<br>          <span class="hljs-attr">as</span>: <span class="hljs-string">&quot;student&quot;</span>,<br>          <span class="hljs-attr">in</span>: &#123;<br>            <span class="hljs-attr">description</span>: &#123;<br>              <span class="hljs-attr">$concat</span>: [ <span class="hljs-string">&quot;$$student.name&quot;</span>, <span class="hljs-string">&quot;-&quot;</span>, <span class="hljs-string">&quot;$$student.age&quot;</span> ]<br>            &#125;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>])<br></code></pre></td></tr></table></figure><ul><li>ä½ å°†ä¼šå¾—åˆ°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">new_students</span>: [<br>      &#123;<br>        <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Join-10&quot;</span>,<br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">description</span>: <span class="hljs-string">&quot;Lisa-19&quot;</span>,<br>      &#125;<br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p><code>$map</code>æœ‰ä¸‰ä¸ªå‚æ•°:</p><ol><li><code>input</code><br>å…ƒæ•°æ®ä¸­çš„æŸä¸€å­—æ®µ(å¦‚<code>students</code>)</li><li><code>as</code><br><code>students</code>çš„éå†é¡¹åç§°(å¦‚<code>student</code>)</li><li><code>in</code><br>å°†ä¼šç”Ÿæˆçš„æ•°æ®å­—æ®µï¼Œ<code>key</code>ä¸ºå­—æ®µåç§°ï¼Œ<code>value</code>ä¸ºå­—æ®µå€¼ï¼Œå¯ä»¥åœ¨å…¶ä¸­ä½¿ç”¨éå†é¡¹çš„å€¼(å¦‚<code>$$student.age</code>ï¼Œå¾—åˆ°äº†å½“å‰é¡¹çš„<code>age</code>)<br>ç”šè‡³å¯ä»¥åœ¨å…¶ä¸­å¯¹ä¸€äº›æ•°ç»„è¿›è¡Œ<code>$filter</code>æ“ä½œï¼Œè¿™æ˜¯è¢«å…è®¸çš„ã€‚</li></ol><h3 id="lookup">$lookup</h3><ul><li>å¤æ‚å¤šè¡¨è”æŸ¥<br>è¿™ä¸ªåº”è¯¥åœ¨å¹³å¸¸å¼€å‘ä¸­ç”¨åˆ°çš„é¢‘ç‡éå¸¸çš„é«˜ï¼Œç”¨äºå°†åµŒå¥—çš„é›†åˆè¿›è¡ŒæŸ¥è¯¢<br>æƒ³è±¡ä¸€ä¸‹å¯èƒ½ä½ çš„<code>users</code>é›†åˆä¸­ä¿å­˜ç€<code>teacher</code>çš„å­—æ®µï¼Œå€¼ä¸ºå¦ä¸€ä¸ª<code>teachers</code>é›†åˆçš„<code>id</code>ï¼Œæ­¤æ—¶å°±éœ€è¦ç”¨åˆ°<code>$lookup</code>æ¥è¿›è¡ŒæŸ¥è¯¢</li></ul><p><strong>$lookupæœ‰ä¸¤ç§æŸ¥è¯¢å½¢å¼</strong></p><h4 id="ç®€å•æŸ¥è¯¢">ç®€å•æŸ¥è¯¢</h4><p>è¿™ç§é€‚åˆåªæŸ¥è¯¢ä¸€å±‚çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸Šé¢è¯´çš„<code>teachers</code>é›†åˆä¸­ä¸å­˜åœ¨å½“å‰æŸ¥è¯¢æ‰€éœ€è¦å†æ¬¡è”è¡¨æŸ¥è¯¢çš„å­—æ®µ<br>å¬ç€æœ‰äº›åˆ«æ‰­ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­</p><ul><li>å‡è®¾æœ‰å¦‚ä¸‹é›†åˆåç§°ä¸º<code>users</code>å’Œ<code>teachers</code>çš„æ•°æ®:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// users </span><br>[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span><br>  &#125;<br>]<br><br><span class="hljs-comment">// teachers </span><br>[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Lisa&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">40</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢<code>students</code>é›†åˆå¹¶åŒæ—¶æŸ¥è¯¢å‡ºå…¶ä¸­çš„<code>teacher</code>æ•°æ®</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js">db.users.aggregate([<br>  &#123;<br>    <span class="hljs-attr">$lookup</span>: &#123;<br>      <span class="hljs-attr">from</span>: <span class="hljs-string">&#x27;teachers&#x27;</span>,<br>      <span class="hljs-attr">localField</span>: <span class="hljs-string">&#x27;teacher&#x27;</span>,<br>      <span class="hljs-attr">foreignField</span>: <span class="hljs-string">&#x27;id&#x27;</span>,<br>      <span class="hljs-attr">as</span>: <span class="hljs-string">&#x27;teacher_data&#x27;</span><br>    &#125;<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">$project</span>: &#123;<br>      <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">age</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">teacher_data</span>: <span class="hljs-number">1</span><br>    &#125;<br>  &#125;<br>])<br></code></pre></td></tr></table></figure><ul><li>ä½ å°†ä¼šå¾—åˆ°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-comment">// æ³¨æ„è¿™é‡Œ</span><br>    <span class="hljs-attr">teacher_data</span>: [<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Lisa&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">40</span><br>      &#125;<br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p>æ³¨æ„çœ‹ä¸Šé¢çš„æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®çš„<code>teacher_data</code>å­—æ®µï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚é€šè¿‡<code>$lookup</code>æŸ¥è¯¢çš„ç»“æœéƒ½ä¼šå˜æˆä¸€ä¸ªæ•°ç»„ã€‚<br>å¦‚æœä¸æƒ³æ˜¯æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡<code>$unwind</code>æ¥è¿›è¡Œæ‹†åˆ†ï¼Œæœ‰å…³<code>$unwind</code>å¯åœ¨åæ–‡çœ‹åˆ°ã€‚</p><p>ç®€å•æŸ¥è¯¢åŒ…å«å››ä¸ªå‚æ•°ï¼š</p><ol><li><code>from</code><br>è¦æŸ¥è¯¢çš„ç›®æ ‡é›†åˆåç§°</li><li><code>localField</code><br>å½“å‰é›†åˆä¸­éœ€è¦è¿›è¡ŒæŸ¥è¯¢çš„å­—æ®µåç§°</li><li><code>foreignField</code><br>ä¸¤ä¸ªé›†åˆæ‰€å…³è”èµ·æ¥çš„å­—æ®µåç§°ï¼Œä¸Šé¢æ˜¯<code>id</code></li><li><code>as</code><br>æŸ¥è¯¢ç»“æœä¿å­˜çš„å­—æ®µåç§°ï¼Œä½ å¯ä»¥ä½¿ç”¨åŸå§‹å­—æ®µåç§°è¿›è¡Œè¦†ç›–ï¼Œä¹Ÿå¯ä»¥æ–°å¢ä¸€ä¸ª</li></ol><h4 id="å¤æ‚æŸ¥è¯¢">å¤æ‚æŸ¥è¯¢</h4><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­åº”è¯¥å¯ä»¥ç†è§£åˆšåˆšçš„é‚£å¥è¯äº†å§ï¼Œå¤æ‚æŸ¥è¯¢å¯ä»¥æŠŠé‚£äº›åµŒå¥—å…³è”äº†å¤šå±‚çš„æ•°æ®æŸ¥è¯¢å‡ºæ¥<br>è¿˜æ˜¯çœ‹ä¸‹é¢çš„ä¾‹å­ğŸŒ°</p><ul><li>å‡è®¾æœ‰å¦‚ä¸‹é›†åˆåç§°ä¸º<code>users</code>å’Œ<code>teachers</code>ä»¥åŠ<code>schools</code>çš„æ•°æ®:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// users </span><br>[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span><br>  &#125;<br>]<br><br><span class="hljs-comment">// teachers </span><br>[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Lisa&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">40</span>,<br>    <span class="hljs-attr">school</span>: <span class="hljs-string">&quot;custom_school_id_001&quot;</span><br>  &#125;<br>]<br><br><span class="hljs-comment">// schools </span><br>[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_school_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;high school&quot;</span>,<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢<code>students</code>é›†åˆå¹¶åŒæ—¶æŸ¥è¯¢å‡ºå…¶ä¸­çš„<code>teacher</code>æ•°æ®ä»¥åŠ<code>school</code>æ•°æ®<br>æ­¤æ—¶é€šè¿‡ç®€å•å¾—æŸ¥è¯¢å·²ç»æ— æ³•æ»¡è¶³è¦æ±‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs js">db.users.aggregate([<br>  &#123;<br>    <span class="hljs-attr">$lookup</span>: &#123;<br>      <span class="hljs-attr">from</span>: <span class="hljs-string">&#x27;teachers&#x27;</span>, <br>      <span class="hljs-attr">let</span>: &#123;<br>        <span class="hljs-attr">teacher_id</span>: <span class="hljs-string">&quot;$teacher&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">pipeline</span>: [<br>        &#123;<br>          <span class="hljs-attr">$match</span>: &#123;<br>            <span class="hljs-attr">$expr</span>: &#123;<br>              <span class="hljs-attr">$eq</span>: [<br>                <span class="hljs-string">&quot;$id&quot;</span>, <span class="hljs-string">&quot;$$teacher_id&quot;</span><br>              ]<br>            &#125;<br>          &#125;<br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">$lookup</span>: &#123;<br>            <span class="hljs-attr">from</span>: <span class="hljs-string">&#x27;schools&#x27;</span>,<br>            <span class="hljs-attr">as</span>: <span class="hljs-string">&#x27;school_data&#x27;</span>,<br>            <span class="hljs-attr">foreignField</span>: <span class="hljs-string">&quot;id&quot;</span>,<br>            <span class="hljs-attr">localField</span>: <span class="hljs-string">&quot;school&quot;</span><br>          &#125;<br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">$project</span>: &#123;<br>            <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-attr">name</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-attr">school</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-attr">age</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-attr">school_data</span>: <span class="hljs-string">&quot;$school_data&quot;</span><br>          &#125;<br>        &#125;<br>      ],<br>      <span class="hljs-attr">as</span>: <span class="hljs-string">&#x27;teacher_data&#x27;</span><br>    &#125;<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">$project</span>: &#123;<br>      <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">name</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">age</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">teacher_data</span>: <span class="hljs-number">1</span><br>    &#125;<br>  &#125;<br>])<br></code></pre></td></tr></table></figure><ul><li>ä½ å°†ä¼šå¾—åˆ°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher_data</span>: [<br>      &#123;<br>        <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span>,<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Lisa&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">40</span>,<br>        <span class="hljs-attr">school_data</span>: [<br>          &#123;<br>            <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_school_id_001&quot;</span>,<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;high school&quot;</span>,<br>          &#125;<br>        ]<br>      &#125;<br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p>å¤æ‚æŸ¥è¯¢ä¹Ÿæ˜¯å››ä¸ªå‚æ•°:</p><ol><li><code>from</code><br>ä¸ç®€å•æŸ¥è¯¢ç›¸åŒ</li><li><code>as</code><br>ä¸ç®€å•æŸ¥è¯¢ç›¸åŒ</li><li><code>let</code><br>åœ¨å½“å‰æŸ¥è¯¢å±‚å®šä¹‰çš„å˜é‡å¯ä»¥åœ¨æœ¬æ¬¡æŸ¥è¯¢ä¸­ä½¿ç”¨ï¼Œæ¯”å¦‚ä¸Šé¢å®šä¹‰çš„<code>teacher_id</code>ï¼Œç”¨äºåœ¨ä¸‹å±‚æŸ¥è¯¢æ—¶åšç­›é€‰æ¡ä»¶åˆ¤æ–­</li><li><code>pipeline</code><br>ä¸‹å±‚æŸ¥è¯¢æ“ä½œï¼Œé¡¾åæ€ä¹‰ï¼Œç®¡é“æ“ä½œï¼Œå€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå½“ä¸­å¯ä»¥ä½¿ç”¨ä¸å¤–å±‚ç›¸åŒçš„æŸ¥è¯¢æ“ä½œï¼Œå¯ä»¥è®¿é—®åˆ°ä¸Šå±‚<code>let</code>ä¸­å®šä¹‰çš„å˜é‡ï¼Œä½¿ç”¨<code>$$</code>å‰ç¼€</li></ol><ul><li><p>åº”è¯¥æœ‰æ³¨æ„åˆ°ä¸Šé¢åœ¨<code>pipeline</code>ç¬¬ä¸€é¡¹æ˜¯<code>$match</code>ï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·æ“ä½œï¼Ÿ<br>å½“ä½¿ç”¨å¤æ‚æŸ¥è¯¢æ—¶ï¼Œéœ€è¦è‡ªå·±æ¥å®šä¹‰ç­›é€‰æ¡ä»¶ï¼Œå¦åˆ™å®ƒå°†ä¼šæŠŠé›†åˆå½“ä¸­çš„æ‰€æœ‰æ•°æ®å…¨éƒ¨è¿”å›</p></li><li><p><code>$match</code> è¡¨ç¤ºçš„æ˜¯ç­›é€‰æ¡ä»¶<br>ä»¥åŠå…¶ä¸­è‹¥ä½¿ç”¨åˆ°<code>let</code>å®šä¹‰çš„å˜é‡æ—¶ï¼Œéœ€è¦ä½¿ç”¨<code>$expr</code>æ“ä½œç¬¦ï¼Œå…·ä½“çš„æˆ‘è¿˜æ²¡æœ‰äº†è§£è¿‡ğŸ˜Š ã€‚<br>è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“è¦åšæ¯”è¾ƒçš„å€¼å¾—ç±»å‹æ˜¯<code>mongodb</code>è‡ªå¸¦çš„<code>ObjectId</code>ç±»å‹æ—¶ï¼Œç›¸ç­‰åˆ¤æ–­æ¡ä»¶éœ€è¦ä½¿ç”¨<code>$eq</code>æ“ä½œç¬¦ï¼Œå¦åˆ™æ°¸è¿œè¿”å›<code>false</code></p></li><li><p>æ³¨æ„:</p></li><li><p><code>pipeline</code> ä¸­ä½¿ç”¨ <code>$match</code> åŒ¹é… <code>let</code>ä¸­å®šä¹‰çš„å­—æ®µæ—¶ï¼Œéœ€è¦åœ¨å¤–é¢åŒ…ä¸€ä¸ª <code>$expr</code>, å¦åˆ™æ— æ³•åŒ¹é…<br><code>$match: &#123; $expr: &#123; _id: &quot;$$customFields&quot; &#125; &#125;</code></p></li><li><p>å¦‚æœè¦åœ¨<code>$match</code>ä¸­åŒ¹é…<code>ObjectId</code>, éœ€è¦ä½¿ç”¨<code>$eq</code>, ç›´æ¥æ¯”è¾ƒä¼¼ä¹æ— æ•ˆ,åŸå› æœ‰å¾…æŸ¥è¯. <code>$expr: &#123; $eq: [ &quot;$_id&quot;, &quot;$$customFields&quot; ] &#125;</code></p></li><li><p>ps<br>è¿™æ˜¯æˆ‘å¦å¤–ç¢°åˆ°çš„ä¸€ä¸ªä¾‹å­ğŸŒ°<br>éœ€è¦åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦åœ¨æ•°ç»„ä¸­å­˜åœ¨ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨<code>$in</code>æ“ä½œç¬¦è¿›è¡Œåˆ¤æ–­<br>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦åˆ¤æ–­çš„å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æŸ¥è¯¢çš„æ•°ç»„</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ç®€å•æè¿°ä¸€ä¸‹</span><br>&#123;<br>  <span class="hljs-attr">let</span>: &#123;<br>    <span class="hljs-attr">teacher_id</span>: <span class="hljs-string">&quot;$teacher&quot;</span><br>  &#125;,<br>  <span class="hljs-attr">pipeline</span>: [<br>    &#123;<br>      <span class="hljs-attr">$match</span>: &#123;<br>        <span class="hljs-attr">$expr</span>: &#123;<br>          <span class="hljs-string">&quot;$in&quot;</span>: [ <span class="hljs-string">&quot;$name&quot;</span>, [<span class="hljs-string">&quot;Lisa&quot;</span>] ]<br>        &#125;<br>      &#125;<br>    &#125;<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="unwind">$unwind</h3><p>æ ¹æ®æŒ‡å®šçš„æ•°ç»„å­—æ®µè¿›è¡Œæ‹†åˆ†æˆå¤šé¡¹<br>å®ƒä¹Ÿæœ‰ä¸¤ç§å½¢å¼</p><h4 id="ç®€å•å½¢å¼">ç®€å•å½¢å¼</h4><ul><li>å‡è®¾æœ‰å¦‚ä¸‹é›†åˆåç§°ä¸º<code>users</code>çš„æ•°æ®:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// users </span><br>[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: [<br>      <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span>,<br>      <span class="hljs-string">&quot;custom_teacher_id_002&quot;</span><br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢<code>users</code>æ•°æ®å¹¶å°†<code>teacher</code>å­—æ®µè¿›è¡Œæ‹†åˆ†</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">db.users.aggregate([<br>  &#123;<br>    <span class="hljs-attr">$unwind</span>: <span class="hljs-string">&quot;$teacher&quot;</span><br>  &#125;<br>])<br></code></pre></td></tr></table></figure><ul><li>ä½ å°†ä¼šå¾—åˆ°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">_id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">_id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: <span class="hljs-string">&quot;custom_teacher_id_002&quot;</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p><code>teacher</code>ä¸ºæ‹†åˆ†çš„å­—æ®µï¼Œéœ€è¦æ·»åŠ <code>$</code>å‰ç¼€<br>è¿™ç§ç®€å•çš„å†™æ³•é€‚åˆé‚£ç§å­—æ®µè§„æ•´çš„æƒ…å†µï¼Œå½“éœ€è¦åšå¼‚å¸¸å¤„ç†æ—¶ï¼Œè¿™ç§æƒ…å†µå°±ä¸é€‚ç”¨äº†ã€‚</p><h4 id="å¤æ‚å½¢å¼">å¤æ‚å½¢å¼</h4><ul><li>å‡è®¾æœ‰å¦‚ä¸‹é›†åˆåç§°ä¸º<code>users</code>çš„æ•°æ®:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// users </span><br>[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: [<br>      <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span>,<br>      <span class="hljs-string">&quot;custom_teacher_id_002&quot;</span><br>    ]<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_student_id_002&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Lisa&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>,<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢<code>users</code>æ•°æ®å¹¶å°†<code>teacher</code>å­—æ®µè¿›è¡Œæ‹†åˆ†ï¼Œå¹¶è®¾ç½®å½“<code>teacher</code>ä¸å­˜åœ¨æ—¶ç»§ç»­ä¿ç•™</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">db.users.aggregate([<br>  &#123;<br>    <span class="hljs-attr">$unwind</span>: &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;$teacher&quot;</span>,<br>      <span class="hljs-attr">preserveNullAndEmptyArrays</span>: <span class="hljs-literal">true</span> <br>    &#125;<br>  &#125;<br>])<br></code></pre></td></tr></table></figure><ul><li>ä½ å°†ä¼šå¾—åˆ°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">_id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">_id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: <span class="hljs-string">&quot;custom_teacher_id_002&quot;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">_id</span>: <span class="hljs-string">&quot;custom_student_id_002&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Lisa&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>,<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œå½“<code>teacher</code>ä¸å­˜åœ¨æ—¶ï¼Œä¿ç•™äº†å¯¹åº”çš„å­—æ®µï¼Œå¦‚æœè®¾ç½®<code>preserveNullAndEmptyArrays</code>æ—¶ï¼Œç¬¬ä¸‰æ¡æ•°æ®å°†ä¸è¢«æŸ¥è¯¢åˆ°ã€‚</p><p>å¤æ‚å½¢å¼æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p><ol><li><code>path</code><br>åŒç®€å•å½¢å¼</li><li><code>preserveNullAndEmptyArrays</code><br>æ˜¯å¦ä¿ç•™ç©ºæ•°ç»„</li><li><code>includeArrayIndex</code><br>æš‚æ—¶æ²¡æœ‰ç”¨åˆ°è¿‡ï¼Œå†è¯´ã€‚</li></ol><h3 id="addToSet">$addToSet</h3><p>è¿™ä¸ªæ–¹æ³•åœ¨å‰é¢çš„<a href="https://food-billboard.github.io/2020/10/18/mongodb%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%A6/">mongodbå¸¸ç”¨æ“ä½œç¬¦æ–‡ç« ä¸­ä»‹ç»è¿‡</a>ä»‹ç»è¿‡ï¼Œä½†æ˜¯é‚£æ˜¯æ·»åŠ ä¸€é¡¹ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åŒæ—¶æ·»åŠ å¤šä¸ªé¡¹ã€‚</p><ul><li>å‡è®¾æœ‰å¦‚ä¸‹é›†åˆåç§°ä¸º<code>users</code>çš„æ•°æ®:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// users </span><br>[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: [<br>      <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span>,<br>    ]<br>  &#125;,<br>]<br></code></pre></td></tr></table></figure><ul><li>å‘<code>name</code>ä¸º<code>Join</code>çš„æ•°æ®å­—æ®µæ·»åŠ ä¸¤ä¸ª<code>teacher</code>é¡¹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">db.users.updateOne(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-attr">$addToSet</span>: &#123;<br>    <span class="hljs-attr">teacher</span>: &#123;<br>      <span class="hljs-attr">$each</span>: [<br>        <span class="hljs-string">&quot;custom_teacher_id_002&quot;</span>,<br>        <span class="hljs-string">&quot;custom_teacher_id_003&quot;</span><br>      ]<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><ul><li>è¯¥å­—æ®µä¼šå˜æˆ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">_id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">teacher</span>: [<br>      <span class="hljs-string">&quot;custom_teacher_id_001&quot;</span>,<br>      <span class="hljs-string">&quot;custom_teacher_id_002&quot;</span>,<br>      <span class="hljs-string">&quot;custom_teacher_id_003&quot;</span><br>    ]<br>  &#125;,<br>]<br></code></pre></td></tr></table></figure><p>é…åˆ<code>$each</code>æ·»åŠ å¤šé¡¹ï¼Œè¿™ä¸ªæ²¡å•¥å¥½è¯´çš„</p><h3 id="addFields">$addFields</h3><ul><li><p>å‘è¾“å‡ºç»“æœä¸­æ–°å¢å­—æ®µ<br>è¿™ç§çš„ä¸€èˆ¬ä½¿ç”¨æƒ…å†µæ˜¯å¯¹åŸå§‹çš„ä¸€äº›æ•°æ®å­—æ®µåšç‰¹æ®Šå¤„ç†ï¼Œæ¯”å¦‚ç»Ÿè®¡ç­‰ã€‚</p></li><li><p>å‡è®¾æœ‰å¦‚ä¸‹é›†åˆåç§°ä¸º<code>users</code>çš„æ•°æ®:</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// users </span><br>[<br>  &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">homework</span>: [<br>      <span class="hljs-number">30</span>,<br>      <span class="hljs-number">40</span><br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢<code>users</code>æ•°æ®å¹¶æ·»åŠ æ–°å­—æ®µ<code>total_homework</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.users.aggregate([<br>  &#123;<br>    <span class="hljs-attr">$addFields</span>: &#123;<br>      <span class="hljs-attr">total_homework</span>: &#123; <br>        <span class="hljs-attr">$sum</span>: <span class="hljs-string">&quot;$homework&quot;</span> <br>      &#125;<br>    &#125;<br>  &#125;,<br>])<br></code></pre></td></tr></table></figure><ul><li>ä½ å°†ä¼šå¾—åˆ°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js">[<br>  &#123;<br>    <span class="hljs-attr">_id</span>: <span class="hljs-string">&quot;custom_student_id_001&quot;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Join&quot;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-attr">homework</span>: [<br>      <span class="hljs-number">30</span>,<br>      <span class="hljs-number">40</span><br>    ],<br>    <span class="hljs-attr">total_homework</span>: <span class="hljs-number">70</span> <br>  &#125;,<br>]<br></code></pre></td></tr></table></figure><h3 id="push">$push</h3><p>è¿™ä¸ªä¹Ÿæ˜¯åœ¨<a href="https://food-billboard.github.io/2020/10/18/mongodb%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%A6/">å‰ä¸€ç¯‡æ–‡ç« </a>æœ‰ä»‹ç»</p><p>ä½†æ˜¯å½“éœ€è¦åŒæ—¶æ·»åŠ å¤šé¡¹æ—¶ï¼Œå¯èƒ½ä¼šéœ€è¦ç”¨åˆ°<code>$pushAll</code>æ“ä½œç¬¦ï¼Œä½†æ˜¯åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œ<code>$pushAll</code>ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥è¿™é‡Œè¿˜æ˜¯ä½¿ç”¨<code>$push</code><br>è‡³äºä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒå‰é¢çš„<code>$addToSet</code>æ“ä½œç¬¦ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>ä»¥ä¸Šå°±æ˜¯æœ¬äººåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ç¢°åˆ°çš„ä¸€éƒ¨åˆ†é—®é¢˜ï¼Œä»¥åå¦‚æœæœ‰æ–°çš„é—®é¢˜è¿˜ä¼šè¡¥å……ã€‚å¦‚æœæœ‰å“ªé‡Œé”™äº†æ¬¢è¿æŒ‡æ­£ğŸ˜Š ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>node</tag>
      
      <tag>mongodb</tag>
      
      <tag>æ•°æ®åº“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Github Actions éƒ¨ç½²nodeé¡¹ç›®</title>
    <link href="/2021/10/25/deploy/"/>
    <url>/2021/10/25/deploy/</url>
    
    <content type="html"><![CDATA[<h2 id="å¼€å¤´">å¼€å¤´</h2><p>ä½œä¸ºä¸€ä¸ªå‰ç«¯ï¼Œå…¶å®å¹³å¸¸å’ŒæœåŠ¡å™¨æ‰“äº¤é“çš„æ—¶é—´å¹¶ä¸å¤šï¼Œä½†ä½œä¸ºä¸€ä¸ªç¨‹åºçŒ¿ï¼Œåˆæ€ä¹ˆèƒ½ä¸æƒ³æä¸€æå‘¢ã€‚<br>è®²ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ğŸŒ°ï¼š<br>ä½ å‘ç°äº†ä½ é¡µé¢çš„ä¸€ä¸ªbugï¼Œæ”¹å¥½ä¹‹åéœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨äº†ï¼Œæ°å·§æ²¡æœ‰åå°äººå‘˜åœ¨ï¼Œéœ€è¦è‡ªå·±éƒ¨ç½²ã€‚ä½ è¾“å…¥è´¦å·å¯†ç ç™»å½•äº†æœåŠ¡å™¨ï¼Œè¿›å…¥åˆ°å¯¹åº”çš„ç›®å½•ï¼Œæ›¿æ¢äº†å¯¹åº”çš„æ–‡ä»¶ï¼Œå®Œæˆäº†æœ¬æ¬¡çš„ä¿®æ”¹ã€‚è¿‡äº†ä¸€ä¼šå„¿ï¼Œä½ å‘ç°å¥½åƒè¿˜æœ‰é—®é¢˜ï¼Œç„¶åä½ åˆé‡æ–°æ¥äº†ä¸€éã€‚ã€‚ã€‚<br>è¿™æ ·é‡å¤åšåŠŸç»å¯¹ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæ‰€ä»¥æ­¤æ—¶å°±éœ€è¦<code>github actions</code>ç™»åœºäº†ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬å®Œæˆäº†ä¸­é—´è¿™äº›å¤æ‚åˆé‡å¤çš„å·¥ä½œï¼Œè®©æˆ‘ä»¬èƒ½æœ‰æ›´å¤šçš„æ—¶é—´æ‘¸ğŸŸã€‚ğŸ˜</p><h2 id="ä»‹ç»">ä»‹ç»</h2><p>å…³äº<code>github actions</code>çš„ä»‹ç»ï¼Œè¿™é‡Œä¸å¤šè¯´ï¼Œå¤§å®¶å¯ä»¥å‚çœ‹<a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html">é˜®ä¸€å³°è€å¸ˆçš„æ–‡ç« </a></p><h2 id="æ­£æ–‡">æ­£æ–‡</h2><h3 id="æµç¨‹">æµç¨‹</h3><p>é¦–å…ˆæ˜¯å…·ä½“çš„æµç¨‹</p><ul><li>æœ¬åœ°å®Œæˆä»£ç ä¿®æ”¹ï¼Œæäº¤ä»£ç åˆ°<code>github</code></li><li><code>github</code>æ£€æµ‹åˆ°ä»£ç æäº¤ï¼Œè‡ªåŠ¨æ‰§è¡Œé¡¹ç›®ç›®å½•ä¸‹çš„<code>.github/workflows</code>çš„ymlæ–‡ä»¶ã€‚</li><li>è™šæ‹Ÿæœºå†…:</li></ul><ol><li>åˆ‡æ¢å¯¹åº”çš„åˆ†æ”¯ï¼Œæ¯”å¦‚<code>master</code></li><li>ç”Ÿæˆ<code>ssh</code>ç§˜é’¥æ–‡ä»¶</li><li>è®¾ç½®å¯¹åº”çš„<code>node</code>ç‰ˆæœ¬</li><li>å®‰è£…<code>yarn</code>ã€<code>pm2</code></li><li><code>pm2</code>éƒ¨ç½²ä»£ç è‡³æœåŠ¡å™¨</li><li><code>ssh</code>ç™»å½•æœåŠ¡å™¨ï¼Œ<code>pm2</code>æ›´æ–°å¹¶å¯åŠ¨<code>node</code>æœåŠ¡ï¼Œæ›´æ–°<code>docker</code>æœåŠ¡</li></ol><h3 id="å…·ä½“æµç¨‹">å…·ä½“æµç¨‹</h3><p>ä»¥ä¸‹æ–‡ä»¶è·¯å¾„åŸºæœ¬æºè‡ª<code>mac</code></p><ol><li>åœ¨æœ¬æœºçš„<code>.ssh</code>æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆç§˜é’¥ã€å…¬é’¥ï¼Œå¦‚æœæœ‰çš„è¯è¯·å¿½ç•¥</li></ol><ul><li>ä½¿ç”¨å‘½ä»¤ç”Ÿæˆ<code>ssh-keygen -t rsa -C ä½ çš„githubé‚®ç®±@.com</code></li><li>å°†å…¬é’¥æ–‡ä»¶<code>id_rsa.pub</code>å†…å®¹æ·»åŠ åˆ°<code>github</code>é…ç½®ä¸­(githubç½‘ç«™ä¸Šçš„ -&gt; <code>settings</code> -&gt; <code>SSH and GPG keys</code>)</li></ul><ol start="2"><li>åœ¨å¯¹åº”çš„æœåŠ¡å™¨ä¸­çš„<code>.ssh</code>æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆç§é’¥ã€å…¬é’¥ï¼Œæœ‰çš„è¯è¯·å¿½ç•¥</li></ol><ul><li>ä½¿ç”¨å‘½ä»¤<code>ssh-keygen -o</code></li></ul><ol start="3"><li>æ·»åŠ æœ¬æœºçš„å…¬é’¥è‡³æœåŠ¡å™¨</li></ol><ul><li>æœåŠ¡å™¨<code>.ssh</code>æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ª<code>authorized_keys</code>æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰çš„è¯è¯·åˆ›å»º<code>touch authorized_keys</code></li><li>æ·»åŠ æœ¬æœºçš„å…¬é’¥å†…å®¹è‡³<code>authorized_keys</code>ä¸­</li></ul><ol start="4"><li>æ·»åŠ æœåŠ¡å™¨å…¬é’¥è‡³<code>github</code></li></ol><ul><li>å°†æœåŠ¡å™¨å…¬é’¥å†…å®¹æ·»åŠ åˆ°<code>github</code> (githubç½‘ç«™ -&gt; <code>settings</code> -&gt; <code>SSH and GPG keys</code>) æˆ–è€… (githubé¡¹ç›®ä¸­ -&gt; <code>settings</code> -&gt; <code>deploy keys</code>)</li></ul><ol start="5"><li>æ·»åŠ æµç¨‹ä¸­æ‰€éœ€è¦çš„ä¸€äº›ç¯å¢ƒå˜é‡<br>å…¶ä¸­æœ‰äº›å˜é‡å¹¶ä¸æ˜¯å¿…é¡»å¾—ï¼Œå¯è‡ªè¡Œé€‰æ‹©æ·»åŠ <br>æ‰€æœ‰çš„è‡ªå®šä¹‰çš„ç¯å¢ƒå˜é‡éƒ½æ”¾åœ¨é¡¹ç›®çš„<code>secrets</code>ä¸­(githubé¡¹ç›®ä¸­ -&gt; <code>settings</code> -&gt; <code>secrets</code>)<br><code>name</code>å­—æ®µè‡ªå®šä¹‰</li></ol><ul><li>å°†æœ¬æœºç§é’¥æ–‡ä»¶<code>id_rsa</code>å†…å®¹æ·»åŠ è‡³ç¯å¢ƒå˜é‡ï¼Œ<code>name</code>è®¾ç½®ä¸º<code>LOCAL_SSH_PRIVATE_KEY</code>ï¼Œ<code>value</code>ä¸º<code>id_rsa</code>å†…å®¹</li><li>æ·»åŠ æœåŠ¡å™¨çš„<code>host</code>ï¼Œ<code>name</code>è®¾ç½®ä¸º<code>SSH_IP</code></li><li>æ·»åŠ æœåŠ¡å™¨<code>ssh</code>ç”¨æˆ·åï¼Œ<code>name</code>è®¾ç½®ä¸º<code>SSH_USERNAME</code></li><li>æ·»åŠ æœåŠ¡å™¨<code>ssh</code>å¯†ç ï¼Œ<code>name</code>è®¾ç½®ä¸º<code>SSH_PASSWORD</code></li><li>æ·»åŠ æœåŠ¡å™¨é¡¹ç›®æ–‡ä»¶ç›®å½•åœ°å€ï¼Œ<code>name</code>è®¾ç½®ä¸º<code>REMOTE_PATH</code></li></ul><ol start="6"><li>æ·»åŠ <code>github</code>è‡³æœåŠ¡å™¨çš„<code>known_hosts</code>æ–‡ä»¶ä¸­</li></ol><ul><li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤<code>ssh-keyscan -t rsa github.com &gt;&gt; ~/.ssh/known_hosts</code><br>è‹¥ä¸æ‰§è¡Œæ­¤æ“ä½œï¼Œ<code>github</code>è®¿é—®æœåŠ¡å™¨å¯èƒ½ä¼šå‡ºé”™</li></ul><p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œå³å¯å¼€å§‹é¡¹ç›®çš„éƒ¨ç½²æ–‡ä»¶é…ç½®</p><p>å®Œæ•´çš„ä»£ç åœ¨ä¸‹æ–¹ï¼Œå½“ä¸­çš„ä¸€äº›ç»†èŠ‚ç”¨æ³¨é‡Šæ ‡å‡º</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">server</span> <span class="hljs-string">to</span> <span class="hljs-string">aliyun</span> <br><span class="hljs-attr">on:</span> <br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">master</span> <br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">deploy-and-start:</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span> <span class="hljs-comment"># è¿è¡Œç¯å¢ƒ</span><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-comment"># åˆ‡æ¢åˆ†æ”¯</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span>  <br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@master</span><br><br>      <span class="hljs-comment"># è®¾ç½®sshæ–‡ä»¶</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">ssh</span><br>        <span class="hljs-attr">env:</span><br>          <span class="hljs-comment"># è¿™é‡Œç”¨åˆ°äº†åˆšåˆšçš„ç¯å¢ƒå˜é‡ï¼Œæœ¬æœºçš„ ssh ç§é’¥  </span><br>          <span class="hljs-attr">LOCAL_SSH_PRIVATE_KEY:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.LOCAL_SSH_PRIVATE_KEY</span> <span class="hljs-string">&#125;&#125;</span><br>        <span class="hljs-comment"># åœ¨è™šæ‹Ÿæœºä¸­ç”Ÿæˆå¯¹åº”çš„ ssh æ–‡ä»¶</span><br>        <span class="hljs-comment"># å¦åˆ™çš„è¯åœ¨ä¸‹é¢çš„ pm2 æ“ä½œä¸­ å°†æ— æ³•éªŒè¯é€šè¿‡  </span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|  </span><br><span class="hljs-string">          mkdir -p ~/.ssh/</span><br><span class="hljs-string">          echo &quot;$LOCAL_SSH_PRIVATE_KEY&quot; &gt; ~/.ssh/id_rsa </span><br><span class="hljs-string">          chmod 600 ~/.ssh/id_rsa</span><br><span class="hljs-string"></span><br>      <span class="hljs-comment"># è®¾ç½®node </span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">setup</span> <span class="hljs-string">node</span> <br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v1</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">node-version:</span> <span class="hljs-number">12.16</span><span class="hljs-number">.1</span><br>      <span class="hljs-comment"># å®‰è£…å¯¹åº”çš„æ¨¡å—  </span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          npm install yarn pm2 -g</span><br><span class="hljs-string"></span>      <span class="hljs-comment"># ä»£ç æ›´æ–°è‡³æœåŠ¡å™¨  </span><br>      <span class="hljs-comment"># å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡çš„è¯åˆ™æ‰§è¡Œ pm2 deploy pm2.config.js production setup</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          pm2 deploy pm2.config.js production update</span><br><span class="hljs-string"></span><br>      <span class="hljs-comment"># ç™»å½•æœåŠ¡å™¨å¹¶å¯åŠ¨dockeræœåŠ¡   </span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">the</span> <span class="hljs-string">remote</span> <span class="hljs-string">server</span> <br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">appleboy/ssh-action@master</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">username:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.SSH_USERNAME</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">password:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.SSH_PASSWORD</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">host:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">secrets.SSH_IP</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-comment"># è¿›å…¥åˆ°æœåŠ¡å™¨çš„é¡¹ç›®è·¯å¾„ä¸‹  </span><br>          <span class="hljs-comment"># å®‰è£…å…¨å±€ä¾èµ–  </span><br>          <span class="hljs-comment"># å®‰è£…é¡¹ç›®ä¾èµ–  </span><br>          <span class="hljs-comment"># å¯åŠ¨/é‡å¯ dockeræœåŠ¡  </span><br>          <span class="hljs-comment"># å¯åŠ¨é¡¹ç›®  </span><br>          <span class="hljs-attr">script:</span> <span class="hljs-string">|</span><br><span class="hljs-string">            cd $&#123;&#123; secrets.REMOTE_PATH &#125;&#125;</span><br><span class="hljs-string">            npm install pm2 yarn -g </span><br><span class="hljs-string">            yarn </span><br><span class="hljs-string">            docker-compose -f docker-compose.yml pull</span><br><span class="hljs-string">            docker-compose -f docker-compose.yml up -d</span><br><span class="hljs-string">            pm2 startOrRestart pm2.config.js</span><br></code></pre></td></tr></table></figure><h3 id="å½“ä¸­çš„é—®é¢˜">å½“ä¸­çš„é—®é¢˜</h3><ol><li>ä¸ºä»€ä¹ˆä½¿ç”¨<code>pm2</code><br><code>node</code>ä½œä¸ºä¸€ä¸ªåå°æœåŠ¡åº”ç”¨ï¼Œä¸åƒå‰ç«¯åº”ç”¨ä¸€æ ·å­˜åœ¨å‘¨æœŸçŸ­ï¼Œå®ƒè¢«è¦æ±‚éœ€è¦é•¿æœŸä¿æŒç¨³å®šçš„å¯åŠ¨çŠ¶æ€ï¼Œå½“ä¸­çš„è®¸å¤šç»†èŠ‚å¦‚æœå•é å¼€å‘è€…æ¥æ§åˆ¶çš„è¯ï¼Œä¼šæ˜¾å¾—ç›¸å½“çš„éº»çƒ¦ï¼Œæ­¤æ—¶ä¾é ä¸<code>pm2</code>æ¥è¿›è¡Œç®¡ç†ä¼šå˜å¾—éå¸¸çš„å®¹æ˜“ã€‚<br><code>pm2</code>å†…ç½®äº†è´Ÿè½½å‡è¡¡ï¼Œå‡ºé”™é‡å¯ï¼Œåå°è¿è¡Œç­‰çš„ç‰¹ç‚¹ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨è¿ç»´å½“ä¸­ç»™åˆ°äº†ç›¸å½“å¤§çš„ä¾¿åˆ©ï¼Œå¹¶ä¸”å®ƒè¿˜èƒ½å¸®ä½ è‡ªåŠ¨éƒ¨ç½²é¡¹ç›®åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚å…·ä½“çš„ç»†èŠ‚å¯è‡ªè¡Œå‰å¾€<a href="https://github.com/Unitech/pm2">github</a>æŸ¥çœ‹</li><li>ä¸ºä»€ä¹ˆä½¿ç”¨<code>docker</code></li></ol><blockquote><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„é•œåƒä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linuxæˆ–Windowsæ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚</p></blockquote><p>æƒ³è±¡ä¸€ä¸‹å½“ä½ è¾›è‹¦çš„åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²å®Œæˆäº†<code>nginx</code>ã€<code>mongodb</code>ã€<code>redis</code>ç­‰æœåŠ¡ä¹‹åï¼ŒæŸä¸€å¤©çªç„¶è¦æ±‚ä½ æ›´æ¢å¦ä¸€å°æœåŠ¡å™¨éƒ¨ç½²ï¼Œä½ æ˜¯å¦éœ€è¦é‡æ–°å°†åˆšåˆšçš„æœåŠ¡é‡æ–°å®‰è£…å¯ç”¨éƒ¨ç½²ï¼Œè¿™æ ·å°±æ˜¾å¾—éå¸¸éº»çƒ¦äº†ã€‚<br>è€Œ<code>docker</code>è¿™ç§å°é—­çš„ï¼Œå¯ç§»æ¤çš„ç‰¹æ€§ï¼Œå¯ä»¥æå¤§çš„ç®€åŒ–æˆ‘ä»¬çš„éƒ¨ç½²æµç¨‹ï¼Œæˆ‘ä»¬åªéœ€é…ç½®ä¸€æ¬¡ï¼Œå³å¯ï¼Œåç»­çš„æ‰€æœ‰æ“ä½œå…¨éƒ¨éƒ½åœ¨<code>docker</code>å®¹å™¨å½“ä¸­è¿›è¡Œã€‚å…·ä½“çš„ç»†èŠ‚ä¸åœ¨æœ¬æ¬¡è®¨è®ºèŒƒå›´ã€‚</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>è¿™æ˜¯æœ¬äººåœ¨è‡ªå·±çš„æ‘¸ç´¢ä¸­è¸©å‘çš„ä¸€äº›å†…å®¹ï¼Œå½“ä¸­å¯èƒ½è¿˜ä¸ä¹ä¸€äº›é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ğŸ™ğŸ»<br>æœ€åï¼Œè¿™æ˜¯æœ¬äººçš„<a href="https://github.com/food-billboard/node-server">åå°æœåŠ¡é¡¹ç›®</a>ï¼Œå…¶ä¸­æœ‰ä¸Šé¢çš„é…ç½®æ–‡ä»¶ç­‰ï¼Œæ¬¢è¿å¤§å®¶å‚è€ƒç‚¹è¯„ğŸ˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>éƒ¨ç½²</category>
      
    </categories>
    
    
    <tags>
      
      <tag>node</tag>
      
      <tag>github actions</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹</title>
    <link href="/2020/12/28/%E5%9F%BA%E4%BA%8ETus%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%B5%81%E7%A8%8B/"/>
    <url>/2020/12/28/%E5%9F%BA%E4%BA%8ETus%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>æœ€è¿‘ä¸€ç›´éƒ½åœ¨å¼„å…³äºæ–‡ä»¶ä¸Šä¼ æ–¹é¢çš„é—®é¢˜ï¼Œå¦‚æœåªæ˜¯å°æ–‡ä»¶çš„è¯ï¼ŒåŸºæœ¬ç›´æ¥<code>post</code>ä¸Šä¼ å°±å¯ä»¥è§£å†³ï¼Œä½†æ˜¯å½“é¢å¯¹å¤§æ–‡ä»¶æ—¶ï¼Œå¦‚æœè¿˜æ˜¯åªç”¨ç®€å•çš„è¯·æ±‚å¯èƒ½æ— æ³•å®Œæˆæ–‡ä»¶çš„ä¸Šä¼ .</p><p>å‡è®¾å½“å‰ç”¨æˆ·è¦ä¸Šä¼ ä¸€ä¸ª<code>2G</code>çš„è§†é¢‘æ–‡ä»¶. å¯èƒ½å°±ä¼šé‡åˆ°è®¸å¤šé—®é¢˜:</p><ol><li>é¦–å…ˆæœ€å¤§çš„é—®é¢˜å°±æ˜¯ï¼ŒæœåŠ¡ç«¯ä¸å¯èƒ½æ¥å—å‰ç«¯åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­ä¸Šä¼ å¦‚æ­¤å¤§çš„<code>body</code>.</li><li>æ‰€ä»¥ä¸å¾—ä¸é€‰æ‹©å°†å¤§æ–‡ä»¶åˆ†æˆå¤šä¸ªå°æ–‡ä»¶åˆ†å¤šæ¬¡ä¸Šä¼ ï¼ŒåŸºæœ¬å¯ä»¥è§£å†³é—®é¢˜. ä½†æ˜¯å¦‚æœå‡ºç°ä¸€äº›ä¸å¯æ§çš„åŸå› å¯¼è‡´æ–‡ä»¶ä¸Šä¼ ä¸­æ–­ï¼Œç”¨æˆ·åªèƒ½é€‰æ‹©é‡æ–°ä¸Šä¼ ï¼Œè€Œé‡æ–°ä¸Šä¼ æ„å‘³ç€ä¹‹å‰ä¸Šä¼ çš„å†…å®¹åˆå¾—å†ä¸€æ¬¡ä¸Šä¼ ï¼Œå¦‚æœç”¨æˆ·åœ¨ä¸€ä¸ªç½‘ç»œç¯å¢ƒå¾ˆå·®çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ ¹æœ¬æ— æ³•å®Œæˆä¸Šä¼ ã€‚</li></ol><p>åŸºäºä»¥ä¸Šçš„æƒ…å†µï¼Œé€šè¿‡<code>Tus</code>åè®®æ¥å®ç°åˆ†ç‰‡ä¸Šä¼ ä»¥åŠæ–­ç‚¹ç»­ä¼ çš„åŠŸèƒ½ä¾¿èƒ½è¾¾åˆ°ç›¸å½“å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ä¸‹é¢å°±æ¥è®²è®²è¿™ä¸ªå®ç°è¿‡ç¨‹ã€‚</p><h2 id="Tus">Tus</h2><p>ä»€ä¹ˆæ˜¯<code>Tus</code>ï¼Œ<code>Tus</code>æ˜¯åŸºäº<code>HTTP</code>çš„å¯æ¢å¤æ–‡ä»¶ä¸Šä¼ åè®®ã€‚å¯æ¢å¤æ„å‘³ç€å¯ä»¥éšæ—¶ä¸­æ–­ä¸Šè½½ï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­ä¸Šè½½è€Œæ— éœ€å†æ¬¡é‡æ–°ä¸Šè½½å…ˆå‰çš„æ•°æ®ã€‚</p><p><code>Tus</code>å®˜ç½‘ä¸Šæœ‰è®¸å¤šå®ç°çš„åº“å¯ä¾›ä½¿ç”¨ã€‚è€Œä½œä¸ºä¸€ä¸ªå‰ç«¯é€‰æ‰‹ï¼Œå¿…ç„¶ç”¨çš„<code>tus-js-client</code>ï¼Œè€Œæˆ‘ä¸€å¼€å§‹æ¥è§¦çš„æ—¶å€™ç”¨çš„æ˜¯æ–‡ä»¶ä¸Šä¼ å·¥å…·<code>filepond</code>(å…¶å®ä¹‹å‰è¿˜ç”¨è¿‡<code>uppy</code>ï¼Œå› ä¸ºå®ƒ<code>github</code>âœ¨å¤šï¼Œè€Œä¸”å®ƒåŸç”Ÿå°±æ”¯æŒ<code>Tus</code>åè®®ï¼Œä½ é—®æˆ‘ä¸ºä»€ä¹ˆä¸ç”¨é‚£ä¸ªï¼Œå› ä¸ºæˆ‘çœ‹ä¸æ‡‚ğŸ˜¬)ã€‚<br>å¹¸å¥½åœ¨<code>filepond</code>çš„issuesä¸­çœ‹åˆ°è²Œä¼¼å®ƒä¹Ÿå¯ä»¥å’Œ<code>Tus</code>ç»“åˆä½¿ç”¨ğŸ™‚ã€‚</p><p>å…¶å®<code>filepond</code>ä½¿ç”¨æ¥è¯´è¿˜ç®—æ˜¯ä¸é”™çš„ä½“éªŒï¼Œä½†æ˜¯å®ƒä¼¼ä¹æ²¡æœ‰é’ˆå¯¹<strong>æ–­ç‚¹ç»­ä¼ </strong>æ–¹é¢åšè¿‡å¤„ç†ï¼Œå¯èƒ½ä¹Ÿæœ‰å¯èƒ½æ˜¯å› ä¸ºæˆ‘å¤ªèœäº†å§ã€‚  ä¸‹é¢æ˜¯<code>filepond</code>çš„æ ·å­ï¼ŒæŒºå¥½çœ‹ã€‚<br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/filepondæ•ˆæœ.png" /></p><h2 id="å‰åç«¯åŸºæœ¬äº¤äº’æµç¨‹">å‰åç«¯åŸºæœ¬äº¤äº’æµç¨‹</h2><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/tus.jpg" /><p>åŸºäºä¸Šé¢çš„æµç¨‹å›¾è¿™é‡Œç®€å•æè¿°ä¸€ä¸‹å¹¶è®²è®²å…¶ä¸­ä¸€äº›æ³¨æ„çš„åœ°æ–¹ã€‚</p><ol><li>å®¢æˆ·ç«¯é¦–å…ˆå‘æœåŠ¡ç«¯å‘é€<code>options</code>è¯·æ±‚ã€‚è·å–æœåŠ¡ç«¯çš„é…ç½®ï¼Œ<br>æ¯”å¦‚æœåŠ¡ç«¯æ”¯æŒçš„<code>tus</code>ç‰ˆæœ¬ï¼Œæˆ–è€…æ”¯æŒçš„<code>tus</code>æ‰©å±•ã€‚</li><li>å¦‚æœæœåŠ¡ç«¯æ”¯æŒï¼Œå®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©:</li></ol><ul><li>å‘æœåŠ¡ç«¯å‘èµ·<code>post</code>è¯·æ±‚åˆ›å»ºæ–‡ä»¶å‰¯æœ¬</li><li>å‘é€<code>post</code>è¯·æ±‚çš„åŒæ—¶å‘é€éƒ¨åˆ†æ–‡ä»¶åˆ†ç‰‡</li><li>ç›´æ¥å‘é€<code>head</code>è¯·æ±‚å°è¯•æ¢å¤ä¸Šä¼ ï¼Œå¦‚æœå¤±è´¥åˆ™å›é€€åˆ°<code>post</code>åˆ›å»ºæ–‡ä»¶ã€‚</li></ul><ol start="3"><li>æœåŠ¡ç«¯è¿”å›æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ç”¨äºåç»­æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ã€‚</li></ol><ul><li>æ¢å¤ä¸Šä¼ : æ ¹æ®æœåŠ¡ç«¯è¿”å›çš„å“åº”å¤´<code>Upload-Offset</code>ä»æŒ‡å®šæ–‡ä»¶ä½ç½®å¼€å§‹æ¢å¤ä¸Šä¼ </li><li>é¦–æ¬¡ä¸Šä¼ : ä»æ–‡ä»¶å¼€å§‹ä½ç½®ä¸Šä¼ ã€‚ä¹Ÿå°±æ˜¯<code>0</code>ã€‚</li></ul><ol start="4"><li>é‡å¤å‘èµ·<code>patch</code>è¯·æ±‚å‘é€æ–‡ä»¶åˆ†ç‰‡ï¼Œæ ¹æ®æœåŠ¡ç«¯å“åº”çš„<code>Upload-Offset</code>æ¥ç¡®å®šä¸‹ä¸€åˆ†ç‰‡ä½ç½®ã€‚<br>å¦‚æœå®ƒçš„å€¼ç­‰äºæ–‡ä»¶çš„å¤§å°ï¼Œè¯´æ˜æ–‡ä»¶ä¸Šä¼ å·²ç»å®Œæˆã€‚</li><li>è‡³æ­¤æ•´ä¸ªæ–‡ä»¶ä¸Šä¼ æµç¨‹å®Œæˆã€‚</li></ol><h2 id="Tus-æ‰©å±•">Tus æ‰©å±•</h2><p><code>Tus</code>è¿˜æœ‰è®¸å¤šæ‰©å±•ç”¨äºå¸®åŠ©å¼€å‘è€…å®ç°æ›´å¤šçš„åŠŸèƒ½ã€‚åœ¨ä¸Šé¢çš„æµç¨‹ä¸­å·²ç»ç”¨åˆ°äº†ä¸€äº›ã€‚<br>ä»¥ä¸‹æ‰€æœ‰çš„æ‰©å±•éƒ½éœ€è¦æœåŠ¡ç«¯æ”¯æŒã€‚<br>å®˜æ–¹çš„æ–¹æ³•æ˜¯åœ¨<code>options</code>è¯·æ±‚å½“ä¸­çš„å“åº”ä¸­æ ¹æ®<code>Tus-Extension</code>å“åº”å¤´æ¥åˆ†æå…·ä½“æœåŠ¡ç«¯æ‰€æ¥å—çš„æ‰©å±•ã€‚<br>ä¸‹é¢çš„æ‰©å±•ä¼šå½±å“åˆ°ä¸Šé¢è¯·æ±‚æµç¨‹ä¸­çš„å¾ˆå¤šåœ°æ–¹ï¼Œä¹Ÿä¼šåœ¨ä¸‹é¢ä»‹ç»ã€‚(å¾ˆå¤šåœ°æ–¹å…¶å®è¿˜æ˜¯å¯¹å®˜ç½‘çš„ç¿»è¯‘ï¼Œå¦‚æœæœ‰å…´è¶£çš„å¯ä»¥å»å®˜ç½‘ç»§ç»­å­¦ä¹ æ›´å¤šçš„å†…å®¹ğŸ˜Š)</p><ol><li>Creation<br>åœ¨æ–‡ä»¶ä¸Šä¼ å‰åœ¨æœåŠ¡ç«¯åˆ›å»ºæ–‡ä»¶ä¿¡æ¯<br>å¯ä»¥å°†æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯é¢„å…ˆåœ¨å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œè¿™æ ·å¯ä»¥ä¸ºåç»­æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ åšå‚ç…§ã€‚<br>æ¯”å¦‚å¯ä»¥å°†æ–‡ä»¶å”¯ä¸€æ ‡è¯†ç¬¦<code>md5</code>å…ˆè¿›è¡Œä¸Šä¼ ï¼ŒæœåŠ¡ç«¯å­˜å‚¨æ•°æ®åº“ï¼Œä¿å­˜æ¯ä¸€ä¸Šä¼ çš„åˆ†ç‰‡ã€‚</li></ol><p>å‰ç«¯å¯ä»¥æŠŠä¸€äº›æ–‡ä»¶ä¿¡æ¯æ”¾åœ¨<code>Upload-Metadata</code>è¯·æ±‚å¤´ä¸­</p><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/creation-post-req.png" /><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/creation-post-response.png" /><p>æœåŠ¡ç«¯ä¼šè¿”å›<code>Location</code>å‘ŠçŸ¥å‰ç«¯æ–‡ä»¶çš„ä¸Šä¼ åœ°å€ã€‚</p><ol start="2"><li>Creation-With-Upload<br>åœ¨æœåŠ¡ç«¯åˆ›å»ºè¯·æ±‚ä¸­æ·»åŠ æ–‡ä»¶åˆ†ç‰‡å†…å®¹<br>ä¸ºäº†èŠ‚çœæµé‡ï¼Œåœ¨æœåŠ¡ç«¯å…è®¸çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨å‘æœåŠ¡ç«¯åˆ›å»ºè¯·æ±‚çš„åŒæ—¶ä¹Ÿå°†æŸä¸€åˆ†ç‰‡ä¸€åŒä¸Šä¼ ã€‚</li></ol><p>å’Œ<code>Creation</code>ç±»ä¼¼ï¼Œä¹Ÿä¼šè¿”å›<code>Location</code>å¤´ï¼ŒåŒæ—¶ä¼šè¿”å›<code>Upload-Offset</code>è®¾ç½®ä¸‹ä¸€åˆ†ç‰‡çš„ç´¢å¼•ã€‚<br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/creation-with-upload-req.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/creation-with-upload-res.png" /></p><ol start="3"><li>Expiration<br>ä¸´æ—¶æ–‡ä»¶çš„è¿‡æœŸæ—¶é—´<br>æœåŠ¡ç«¯çš„å­˜å‚¨ç©ºé—´æ¯•ç«Ÿæœ‰é™ï¼Œä¸å¯èƒ½æ— æ—¶é™çš„å°†æ–‡ä»¶çš„åˆ†ç‰‡ä¿å­˜åœ¨æœåŠ¡ç«¯çš„æ•°æ®åº“ä¸­ã€‚<br>æ‰€ä»¥æœåŠ¡ç«¯å¯ä»¥è®¾ç½®åˆ†ç‰‡çš„å­˜å‚¨æ—¶é—´ï¼Œå¹¶é€šè¿‡å“åº”å¤´<code>Upload-Expires</code>å‘ŠçŸ¥å‰ç«¯å®ƒçš„è¿‡æœŸæ—¶é—´ã€‚<br>å½“è¶…è¿‡æœåŠ¡ç«¯è§„å®šçš„æ—¶é—´ä¹‹åï¼Œç”¨æˆ·éœ€è¦é‡æ–°åœ¨æœåŠ¡ç«¯åˆ›å»ºæ–‡ä»¶å‰¯æœ¬ï¼Œé‡æ–°ä¸Šä¼ ã€‚<br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/expiration-req.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/expiration-res.png" /></li></ol><p>å½“å‰ç«¯å‘é€æ–‡ä»¶åˆ†ç‰‡å“åº”æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šæ·»åŠ å“åº”å¤´<code>Upload-Expires</code>å‘ŠçŸ¥å‰ç«¯è¯¥åˆ†ç‰‡è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœè¶…è¿‡æ—¶é—´ï¼ŒæœåŠ¡ç«¯å°†ä¼šè¿”å›<code>404</code>ï¼Œå‰ç«¯éœ€è¦é‡æ–°ä¸Šä¼ ã€‚</p><ol start="4"><li>Checksum<br>åˆ†ç‰‡å¤§å°æ£€æŸ¥<br>æœåŠ¡ç«¯å¯ä»¥å¯¹å‰ç«¯å‘é€çš„æ–‡ä»¶åˆ†ç‰‡è¿›è¡Œæ ¡éªŒã€‚<br>åœ¨ä¸Šä¼ å‰è·å–æœåŠ¡ç«¯ä¸Šä¼ é…ç½®æ”¯æŒåº¦ä¿¡æ¯æ—¶ï¼Œå‰ç«¯å¯ä»¥æ ¹æ®<code>Tus-Checksum-Algorithm</code>å­—æ®µçŸ¥é“æœåŠ¡ç«¯æ”¯æŒçš„åŠ å¯†ç®—æ³•ã€‚</li></ol><p>æœ‰æ—¶æ— æ³•ä¸€å¼€å§‹å°±åšå‡ºç›¸åº”çš„è®¡ç®—ï¼Œå¹¶ä¸”åœ¨æœåŠ¡ç«¯æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨<code>Trailer</code>è¯·æ±‚å¤´åœ¨å®Œæˆä¸Šä¼ åå†è¿›è¡Œæ ¡éªŒã€‚<br>æœåŠ¡ç«¯å¯ä»¥åœ¨ä¸€å¼€å§‹<code>options</code>çš„<code>Tus-Extension</code>ä¸­æ·»åŠ <code>Checksum-Trailer</code>å­—æ®µè¡¨ç¤ºæ”¯æŒè¯¥åŠŸèƒ½ã€‚<br>æ¯”å¦‚å¯¹æ–‡ä»¶è¿›è¡Œ<code>md5</code>åŠ å¯†ï¼Œéœ€è¦å¯¹æ–‡ä»¶åˆ†ç‰‡ä¸€ä¸€è¿›è¡Œå¤„ç†ã€‚</p><p>å½“ä¸Šä¼ æ ¡éªŒå¤±è´¥æ—¶ï¼ŒæœåŠ¡ç«¯ä¾¿ä¼šä¸¢å¼ƒæ­¤åˆ†ç‰‡ï¼Œç´¢å¼•ä¹Ÿä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚<br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/checksum-options-req.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/checksum-options-req.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/checksum-patch-req.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/checksum-patch-res.png" /></p><p>ä¸Šè¿°ä¾‹å­ä¸­</p><ul><li>æœåŠ¡ç«¯<code>options</code>å“åº”ä¸­<code>Tus-Checksum-Algorithm: md5,sha1,crc32</code>å±•ç¤ºäº†å…¶æ”¯æŒçš„æ ¡éªŒç®—æ³•</li><li>å‰ç«¯<code>patch</code>è¯·æ±‚<code>Upload-Checksum: sha1 Kq5sNclPz7QV2+lfQIuc6R7oRu0=</code>ä½¿ç”¨<code>sha1</code>ç®—æ³•ã€‚</li><li>æœåŠ¡ç«¯æ ¡éªŒé€šè¿‡è¿”å›<code>204</code></li><li>è‹¥å¤±è´¥ï¼Œåˆ™è¿”å›ä»¥ä¸‹çŠ¶æ€ç (<code>400</code>: ç®—æ³•ä¸æ”¯æŒï¼Œ<code>460</code>: æ ¡éªŒå’Œä¸åŒ¹é…)<br>å®˜ç½‘ä¸Šä»‹ç»<code>The Upload-Checksum request header contains information about the checksum of the current body payload. The header MUST consist of the name of the used checksum algorithm and the Base64 encoded checksum separated by a space.</code><br>å¤§æ¦‚è¯´ä¸Šé¢çš„<code>Upload-Checksum</code>å¤´ç”±<code>sha1</code>ç®—æ³•å’Œç”±<code>base64</code>ç¼–ç çš„æ ¡éªŒå’Œç»„æˆï¼Œä½†æ˜¯æˆ‘ä¸æ˜¯å¤ªèƒ½ç†è§£è¿™ä¸ªï¼Œä¸ç®¡æ˜¯ä½¿ç”¨base64è§£ç æˆ–è€…ç”¨sha1è§£ç ä¼¼ä¹éƒ½æ— æ³•è§£ç å‡º<code>Kq5sNclPz7QV2+lfQIuc6R7oRu0=</code>ï¼Œå¦‚æœæœ‰æ‡‚çš„å¤§ä½¬çš„è¯å¯ä»¥ç»™è§£é‡Šè§£é‡ŠğŸ˜ƒã€‚</li></ul><ol start="5"><li><p>Termination<br>æ–‡ä»¶åˆ é™¤<br>è¿™ä¸ªåº”è¯¥æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯å‘æœåŠ¡ç«¯è¯·æ±‚åˆ é™¤æ–‡ä»¶ä¿¡æ¯ã€‚<br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/termination-req.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/termination-res.png" /></p></li><li><p>Concatenation<br>å¹¶è¡Œä¸Šä¼ <br>å¯¹äºä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªä¸ªåˆ†ç‰‡ä¸²è¡Œä¸Šä¼ ï¼Œå¯èƒ½è¿˜æ˜¯æœ‰ç‚¹æ…¢ã€‚<br><code>tus</code>æ”¯æŒå¯ä»¥å®è¡Œå¹¶è¡Œä¸Šä¼ ï¼Œå¯ä»¥é’ˆå¯¹åŒä¸€ä¸ªæ–‡ä»¶èµ„æºåœ¨æœåŠ¡ç«¯ç”Ÿæˆå¤šä¸ªä¸Šä¼ åœ°å€ï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶ä¸Šä¼ æ–‡ä»¶çš„ä¸åŒåˆ†ç‰‡ã€‚<br>å½“ç„¶è¿™ä¹Ÿéœ€è¦æœåŠ¡ç«¯æ”¯æŒã€‚<br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-post-req-1.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-post-res-1.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-post-req-2.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-post-res-2.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-patch-req-1.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-patch-res-1.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-patch-req-2.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-patch-res-2.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-post-req-4.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-post-res-4.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-head-req.png" /><br><img src="/images/åŸºäºTusåè®®çš„æ–‡ä»¶ä¸Šä¼ æµç¨‹/Concatenation-head-res.png" /></p></li></ol><p>ä¸Šè¿°ä¾‹å­ä¸­</p><ul><li>å…ˆæ˜¯åœ¨å¼€å§‹æ—¶å‘é€ä¸¤ä¸ª<code>post</code>è¯·æ±‚å¹¶æºå¸¦<code>Upload-Concat: partial</code>è¯·æ±‚å¤´ï¼Œåœ¨æœåŠ¡ç«¯ç”Ÿæˆäº†ä¸¤ä¸ªä¸Šä¼ åœ°å€<code>https://tus.example.org/files/a</code>å’Œ<code>https://tus.example.org/files/b</code></li><li>æ¥ç€å°±å¯ä»¥åŒæ—¶åœ¨ä¸¤ä¸ªåœ°å€ä¸Šä¼ åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä»¥æ­¤æ¥æé«˜æ•ˆç‡ã€‚</li><li>å½“ä¸Šä¼ å®Œæ‰€æœ‰åˆ†ç‰‡åï¼Œå‘é€<code>post</code>è¯·æ±‚å¹¶æºå¸¦<code>Upload-Concat: final;/files/a /files/b</code>ï¼Œæ ¼å¼ä¸º<code>final;</code>åŠ ä¸Šä¸Šä¸€æ­¥ä¸­ç”Ÿæˆçš„ä¸Šä¼ åœ°å€ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚æœåŠ¡ç«¯å“åº”åˆæˆè·¯å¾„<code>Location: https://tus.example.org/files/ab</code>å‘ŠçŸ¥å‰ç«¯æ–‡ä»¶çš„åœ°å€ã€‚  è¯¥é¡ºåºéœ€è¦å’Œ<code>post</code>ä¸­è¿”å›çš„åœ°å€é¡ºåºä¸€è‡´ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡ç«¯æ–‡ä»¶åˆ†ç‰‡åˆå¹¶å‡ºé”™ã€‚</li><li>å‰ç«¯å‘é€<code>head</code>è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚å®Œæˆè¿™ä¸ªæ–‡ä»¶åˆ†ç‰‡çš„åˆå¹¶ã€‚</li></ul><p>å°±æˆ‘ä¸ªäººçœ‹æ³•ï¼Œ<code>Tus</code>åè®®æä¾›çš„æ˜¯ä¸€ç§æ€æƒ³ï¼Œè®©æˆ‘ä»¬åœ¨æ–‡ä»¶ä¸Šä¼ ä»»åŠ¡ä¸­å‡ºç°çš„ä»»ä½•æƒ…å†µéƒ½èƒ½å¾—åˆ°ç›¸åº”çš„åº”å¯¹æ–¹æ³•ï¼Œå®Œç¾å®Œæˆæ•´ä¸ªä¸Šä¼ æµç¨‹ã€‚<br>æ‰€åœ¨ä¸Šé¢æ‰€ä»‹ç»çš„æ‰©å±•ï¼Œä¸ä¸¥è°¨çš„è®²ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è‡ªå·±çš„æ–¹æ³•æ¥å®ç°ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯èƒ½è®©ä¸¤ç«¯èƒ½æ›´å¥½çš„ç†è§£å½“å‰çš„æ–‡ä»¶çš„ä¸Šä¼ æƒ…å†µã€‚<br>æˆ‘ä»¬ä¸å¿…å¤ªè¿‡äºæ‹˜æ³¥äºç›¸åº”çš„apiï¼Œåªéœ€è¦èƒ½è®©ä¸¤ç«¯æ›´å¥½ï¼Œæ›´å®¹æ˜“çš„åä½œå°±å¥½ã€‚</p><p>è¿˜æœ‰ï¼Œåœ¨æˆ‘ä½¿ç”¨å‰ç«¯<code>tus</code>çš„<code>tus-js-client</code>å·¥å…·æ—¶ï¼Œæ£€æŸ¥<code>api</code>ä»‹ç»ä»¥åŠç²—ç•¥æŸ¥æ‰¾äº†ä¸‹æºç ï¼Œçœ‹åˆ°å®ƒä¼¼ä¹å¯¹äº<code>tus</code>æ‰©å±•åªå®ç°äº†<code>Creation</code>ã€<code>Creation-With-Upload</code>ã€<code>Concatenation</code>è¿™å‡ ä¸ªæ‰©å±•ï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶ä»–æ‰©å±•å¯èƒ½éœ€è¦è‡ªè¡Œå®ç°ã€‚<br>ä¸è¿‡å…¶ä»–å‡ ä¸ªæ‰©å±•çš„é‡ç‚¹åœ¨åç«¯ï¼Œè¿™ä¹Ÿå¯èƒ½æ˜¯å®ƒæ²¡æœ‰å®ç°çš„åŸå› ã€‚(ä¹Ÿå¯èƒ½æ˜¯æˆ‘æ²¡çœ‹æ‡‚ğŸ˜)</p><h2 id="ç»“æŸ">ç»“æŸ</h2><p>æ–‡ä»¶ä¸Šä¼ å…¶ä¸­è¿˜æœ‰éœ€è¦çš„çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ–‡ä»¶çš„åˆ†ç‰‡ï¼Œå‰ç«¯çš„æ–‡ä»¶å¤„ç†æ–¹å¼ä»¥åŠå…³äºæ–‡ä»¶çš„åŠ å¯†ç­‰ã€‚åŒ…æ‹¬è¿™é‡Œçš„<code>Tus</code>ï¼Œä¹Ÿè¿˜æœ‰å¾ˆå¤šåœ°æ–¹ä¸æ˜¯å¾ˆç†è§£ï¼Œå¦‚æœæœ‰å“ªé‡Œé”™äº†ï¼Œå…ˆé“ä¸ªæ­‰ï¼Œæ¬¢è¿å„ä½ç»™æŒ‡æ­£ã€‚â€“å¥½å¥½å­¦ä¹ ğŸ±ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ–‡ä»¶</category>
      
    </categories>
    
    
    <tags>
      
      <tag>tus upload file</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mongodbå¸¸ç”¨æ“ä½œç¬¦</title>
    <link href="/2020/10/18/mongodb%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%A6/"/>
    <url>/2020/10/18/mongodb%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%A6/</url>
    
    <content type="html"><![CDATA[<h2 id="MongoDBæ“ä½œç¬¦">MongoDBæ“ä½œç¬¦</h2><h3 id="MongoDBä»‹ç»">MongoDBä»‹ç»</h3><p><code>MongoDB</code> æ˜¯ç”±<code>C++</code>è¯­è¨€ç¼–å†™çš„ï¼Œæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿã€‚<br>åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ æ›´å¤šçš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä¿è¯æœåŠ¡å™¨æ€§èƒ½ã€‚<br><code>MongoDB</code> æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚<br><code>MongoDB</code> å°†æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ•°æ®ç»“æ„ç”±é”®å€¼(<code>key=&gt;value</code>)<code>å¯¹ç»„æˆã€‚MongoDB</code> æ–‡æ¡£ç±»ä¼¼äº <code>JSON</code> å¯¹è±¡ã€‚å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚<br>å¦‚ä¸‹è¿™ç§ç»“æ„<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/mongodb-cover-page.png" /></p><h3 id="MongoDBå‘½ä»¤è¡Œç®€å•æ“ä½œ">MongoDBå‘½ä»¤è¡Œç®€å•æ“ä½œ</h3><p>å‡è®¾å­˜åœ¨æ•°æ®åº“åç§°ä¸º<code>database</code><br>å¹¶ä¸”å­˜åœ¨ä¸€ä¸ªé›†åˆä¸º<code>collection</code><br>é›†ä¸­<code>collection</code>ä¸­æœ‰å¦‚ä¸‹æ•°æ®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript">[<br>  &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Daniel&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">24</span>,<br>    <span class="hljs-string">&quot;job&quot;</span>: <span class="hljs-string">&quot;it&quot;</span>,<br>    <span class="hljs-string">&quot;hobby&quot;</span>: <span class="hljs-string">&quot;travel&quot;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-string">&quot;job&quot;</span>: <span class="hljs-string">&quot;student&quot;</span>,<br>    <span class="hljs-string">&quot;hobby&quot;</span>: <span class="hljs-string">&quot;travel&quot;</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure><ul><li><p>åˆ›å»ºæ•°æ®åº“æˆ–ä½¿ç”¨æ•°æ®åº“<br><code>use database</code></p></li><li><p>åˆ é™¤æ•°æ®åº“<br><code>db.dropDatabase()</code></p></li><li><p>æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨<br><code>show dbs</code></p></li><li><p>åˆ›å»ºé›†åˆ<br>æ‰§è¡Œ<code>use</code>æ“ä½œå<br><code>db.collection.opertion</code><br>æ²¡æœ‰åˆ›å»ºé›†åˆçš„è¯­æ³•ï¼Œç›´æ¥å¯¹æŒ‡å®šé›†åˆè¿›è¡Œæ“ä½œå°±ä¼šåˆ›å»ºè¯¥é›†åˆ</p></li><li><p>æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„é›†åˆåˆ—è¡¨<br><code>show collections</code></p></li><li><p>åˆ é™¤é›†åˆ<br><code>db.collection.drop()</code></p></li><li><p>æŸ¥æ‰¾</p></li></ul><ol><li>æ‰§è¡Œ<code>find</code>å‘½ä»¤<br><code>db.collection.find(&#123; hobby: &quot;travel&quot; &#125;)</code><br>å¾—åˆ°ä»¥ä¸‹ç»“æœ<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/find-common.png"  /></li></ol><p><code>find</code>å‘½ä»¤ä¼šæ‰¾åˆ°ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ‰€æœ‰ç»“æœ<br>å¯ä»¥åœ¨åé¢è·Ÿä¸Š<code>.pretty()</code>æ¥è®©æ•°æ®å±•ç¤ºæ›´ç¾è§‚ã€‚<br>åé¢è·Ÿ<code>.count()</code>è¿”å›æŸ¥æ‰¾åˆ°çš„æ•°é‡<br>åé¢è·Ÿ<code>.sort()</code>è¿”å›æ’åºåçš„æ•°æ®<br>æ¯”å¦‚è¿™æ ·<code>db.collection.find(&#123; hobby: &quot;travel&quot; &#125;).sort(&#123; age: 1 &#125;)</code>ï¼Œ<code>1</code>è¡¨ç¤ºå‡åºï¼Œ<code>2</code>é™åº</p><ol start="2"><li>æ‰§è¡Œ<code>findOne</code>å‘½ä»¤<br><code>db.collection.findOne(&#123; hobby: &quot;travel&quot; &#125;)</code><br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/findOne.png"  /><br><code>findOne</code>åªä¼šæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€æ¡</li></ol><ul><li>åˆ é™¤</li></ul><ol><li><p>æ‰§è¡Œ<code>deleteOne</code>å‘½ä»¤<br><code>db.collection.deleteOne(&#123; hobby: &quot;travel&quot; &#125;)</code><br>å¾—åˆ°ä»¥ä¸‹ç»“æœ<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/deleteOne.png"  /><br><code>deleteOne</code>å‘½ä»¤ä¼šåˆ é™¤ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„ç¬¬ä¸€æ¡æ•°æ®</p></li><li><p>æ‰§è¡Œ<code>deleteMany</code>å‘½ä»¤<br><code>db.collection.deleteMany(&#123; hobby: &quot;travel&quot; &#125;)</code><br><code>deleteMany</code>å‘½ä»¤ä¼šåˆ é™¤ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ‰€æœ‰æ•°æ®</p></li></ol><ul><li>æ’å…¥</li></ul><ol><li><p>æ‰§è¡Œ<code>insertOne</code>å‘½ä»¤<br><code>db.collection.insertOne(&#123; &quot;name&quot;: &quot;Rick&quot;, &quot;age&quot;: 32, &quot;job&quot;: &quot;teacher&quot;, &quot;hobby&quot;: &quot;sport&quot; &#125;)</code><br><code>insertOne</code>å‘½ä»¤å¯ä»¥æ·»åŠ ä¸€æ¡æ•°æ®åˆ°é›†åˆä¸­<br>ä»–æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°<code>&#123; writeConcern &#125;</code>ï¼Œå†™å…¥ç­–ç•¥ï¼Œé»˜è®¤ä¸º 1ï¼Œå³è¦æ±‚ç¡®è®¤å†™æ“ä½œï¼Œ0 æ˜¯ä¸è¦æ±‚ã€‚<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/insertOne.png"  /></p></li><li><p>æ‰§è¡Œ<code>insertMany</code>å‘½ä»¤</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.insertMany([<br>  &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Jack&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">12</span>,<br>    <span class="hljs-string">&quot;job&quot;</span>: <span class="hljs-string">&quot;student&quot;</span>,<br>    <span class="hljs-string">&quot;hobby&quot;</span>: <span class="hljs-string">&quot;watch tv&quot;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mary&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">8</span>,<br>    <span class="hljs-string">&quot;job&quot;</span>: <span class="hljs-string">&quot;student&quot;</span>,<br>    <span class="hljs-string">&quot;hobby&quot;</span>: <span class="hljs-string">&quot;book&quot;</span><br>  &#125;<br>])<br></code></pre></td></tr></table></figure><p><code>insertMany</code>å…è®¸åŒæ—¶æ’å…¥å¤šæ¡æ•°æ®åˆ°é›†åˆä¸­<br>ä»–æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°<code>&#123; writeConcern, ordered &#125;</code>ï¼ŒwriteConcernæ„ä¹‰åŒä¸Šï¼Œorderdè¡¨ç¤ºæ˜¯å¦æŒ‰é¡ºåºå†™å…¥ï¼Œé»˜è®¤ trueï¼ŒæŒ‰é¡ºåºå†™å…¥ã€‚</p><ul><li>æ›´æ–°</li></ul><ol><li><p>æ‰§è¡Œ<code>updateOne</code>å‘½ä»¤<br><code>db.collection.updateOne(&#123; &quot;name&quot;: &quot;Mike&quot; &#125;, &#123; $set: &#123; &quot;age&quot;: 20 &#125; &#125;)</code><br><code>updateOne</code>å‘½ä»¤å¯ä»¥æ›´æ–°åŒ¹é…æ¡ä»¶çš„ç¬¬ä¸€æ¡æ•°æ®<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/updateOne.png"  /></p></li><li><p>æ‰§è¡Œ<code>updateMany</code>å‘½ä»¤<br><code>db.collection.updateMany(&#123; &quot;hobby&quot;: &quot;travel&quot; &#125;, &#123; &quot;hobby&quot;: &quot;watch tv&quot; &#125;)</code><br><code>updateMany</code>å‘½ä»¤å¯ä»¥æ›´æ–°åŒ¹é…æ¡ä»¶çš„æ‰€æœ‰æ•°æ®</p></li></ol><p>è¿˜æœ‰å‡ ä¸ªå¯é€‰å‚æ•°ï¼Œå¯è‡ªè¡Œç™¾åº¦</p><h3 id="MongoDBæ“ä½œç¬¦-2">MongoDBæ“ä½œç¬¦</h3><p>æ¥ä¸‹æ¥ä»‹ç»çš„æ˜¯<code>MongoDB</code>ä¸­ä¸€äº›å¸¸ç”¨çš„æ“ä½œç¬¦ï¼Œæš‚æ—¶å°†æ“ä½œç¬¦åˆ†ä¸ºæ›´æ–°å’ŒæŸ¥æ‰¾ä¸¤ç±»ã€‚</p><h4 id="æ›´æ–°æ“ä½œç¬¦">æ›´æ–°æ“ä½œç¬¦</h4><h5 id="inc">$inc</h5><p>å¯¹ä¸€ä¸ªå­—æ®µå¢åŠ æŒ‡å®šæ•°é‡ï¼Œä¸”å­—æ®µçš„å€¼ç±»å‹ä¸ºæ•°å­—</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-string">&quot;$inc&quot;</span>: &#123; <span class="hljs-attr">age</span>: <span class="hljs-number">100</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>å½“ç„¶å¯ä»¥é€šè¿‡æŒ‡å®šæ•°å­—å€¼ä¸º<code>è´Ÿæ•°</code>å®ç°é€’å‡æ“ä½œã€‚<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$inc.png"  /></p><h5 id="set">$set</h5><p>è¿™æ˜¯ç›¸å½“å¸¸è§çš„æ“ä½œç¬¦ï¼Œè¡¨ç¤ºè®¾ç½®æŒ‡å®šçš„<code>key</code></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-string">&quot;$set&quot;</span>: &#123; <span class="hljs-attr">age</span>: <span class="hljs-number">1000</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°å°†<code>name</code>ä¸º<code>Mike</code>çš„å­—æ®µçš„<code>age</code>å­—æ®µè®¾ç½®ä¸º<code>1000</code><br>å¦‚æœ<code>key</code>ä¸å­˜åœ¨çš„è¯åˆ™åˆ›å»º<br>å½“ç„¶ä¹Ÿå¯ä»¥åŒæ—¶è®¾ç½®å¤šä¸ªå€¼ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœä¿®æ”¹çš„å€¼ä¹‹å‰æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–ä¸€ä¸ªæ•°ç»„çš„è¯ä¼šæ•´ä¸ªè¦†ç›–æ‰è¯¥å€¼ã€‚å…·ä½“çš„ä¿®æ”¹æ–¹æ³•å¯ä»¥å‚ç…§ä¸‹æ–¹çš„å…·ä½“å®ä¾‹ã€‚<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$set.png"  /></p><h5 id="unset">$unset</h5><p>å°†æŸä¸€ä¸ªå­—æ®µåˆ é™¤</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-string">&quot;$unset&quot;</span>: &#123; <span class="hljs-string">&quot;hobby&quot;</span>: <span class="hljs-string">&quot;&quot;</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°å°†<code>name</code>ä¸º<code>Mike</code>çš„å­—æ®µçš„<code>hobby</code>å­—æ®µåˆ é™¤ï¼Œå¦‚æœä¸å­˜åœ¨è¯¥å­—æ®µåˆ™ä¸è¿›è¡Œæ“ä½œ<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$unset.png"  /></p><h5 id="push">$push</h5><p>å¯¹æŸä¸€å­—æ®µè¿›è¡Œå†…å®¹è¿½åŠ ï¼Œåªèƒ½å¯¹æ•°ç»„å­—æ®µè¿›è¡Œæ“ä½œ(å¦åˆ™ä¼šæŠ¥é”™)ï¼Œä¸å­˜åœ¨åˆ™ç›´æ¥è®¾ç½®ä¸º<code>ç©ºæ•°ç»„</code>å¹¶æ·»åŠ </p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-string">&quot;$push&quot;</span>: &#123; <span class="hljs-string">&quot;like&quot;</span>: <span class="hljs-string">&quot;book&quot;</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°å°†<code>name</code>ä¸º<code>Mike</code>çš„å­—æ®µçš„<code>like</code>å­—æ®µè®¾ç½®ä¸º<code>[ &quot;book&quot; ]</code><br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$push.png"  /></p><h5 id="pushAll">$pushAll</h5><p>ç±»ä¼¼ä¸Šé¢çš„<code>$push</code>æ“ä½œç¬¦ï¼Œä½†æ˜¯æ¥æ”¶çš„å€¼æ—¶ä¸€ä¸ª<code>æ•°ç»„</code>ï¼Œè¡¨ç¤ºå¯åŒæ—¶è¿½åŠ å¤šä¸ªå€¼ï¼ŒåŒæ ·æ˜¯å¯¹æ•°ç»„å­—æ®µè¿›è¡Œæ“ä½œ</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Jack&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-string">&quot;$pushAll&quot;</span>: &#123; <span class="hljs-string">&quot;like&quot;</span>: [ <span class="hljs-string">&quot;tv&quot;</span>, <span class="hljs-string">&quot;sport&quot;</span> ] &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ç´§æ¥å‰é¢çš„æ“ä½œï¼Œå‘<code>like</code>å­—æ®µä¸­ç»§ç»­è¿½åŠ äº†<code>tv</code>å’Œ<code>sport</code><br>ä¸è¿‡ä¼¼ä¹åœ¨é«˜ç‰ˆæœ¬<code>mongodb</code>å·²ç»å–æ¶ˆäº†è¿™ä¸ªæ“ä½œç¬¦ï¼Œæœ‰å¾…è€ƒè¯ã€‚</p><h5 id="addToSet">$addToSet</h5><p>ç±»ä¼¼ä¸Šé¢çš„<code>$pushAll</code>æ“ä½œç¬¦ï¼Œä¸åŒçš„æ˜¯ï¼Œå½“ä¸”ä»…å½“è¯¥å€¼åœ¨å­—æ®µä¸­<code>ä¸å­˜åœ¨</code>æ—¶æ·»åŠ ï¼Œç›¸å½“äºæ˜¯è‡ªåŠ¨åšäº†å»é‡ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-string">&quot;$addToSet&quot;</span>: &#123; <span class="hljs-string">&quot;like&quot;</span>: [ <span class="hljs-string">&quot;tv&quot;</span>, <span class="hljs-string">&quot;hamberger&quot;</span> ] &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ç»§ç»­ä¸Šé¢çš„<code>like</code>æ·»åŠ æ•°æ®ï¼Œå› ä¸ºä¸Šé¢æ·»åŠ è¿‡<code>tv</code>å­—æ®µï¼Œæ‰€ä»¥å†æ¬¡æ·»åŠ è¢«å¿½ç•¥<br>å½“ç„¶æ­¤æ“ä½œç¬¦æ·»åŠ çš„å€¼ä¸ä¸€å®šæ˜¯æ•°ç»„ï¼Œä¹Ÿå¯ä»¥è¿™æ ·<br><code>$addToSet: &#123; &quot;like&quot;: &quot;hamberger&quot; &#125;</code><br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$addToSet.png"  /></p><h5 id="pop">$pop</h5><p>ä¸<code>$pop</code>æ“ä½œç¬¦ç›¸åï¼Œè¡¨ç¤ºåˆ é™¤æŒ‡å®šå­—æ®µçš„ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå€¼ï¼ŒåŒæ ·åªèƒ½æ˜¯æ•°ç»„</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-string">&quot;$pop&quot;</span>: &#123; <span class="hljs-string">&quot;like&quot;</span>: <span class="hljs-number">1</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°è¡¨ç¤ºåˆ é™¤<code>like</code>å­—æ®µçš„æœ€åä¸€ä¸ªå€¼ã€‚<br><code>1</code>è¡¨ç¤ºæœ€åä¸€ä¸ªå€¼ï¼Œ<code>-1</code>è¡¨ç¤ºç¬¬ä¸€ä¸ªå€¼<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$pop.png"  /></p><h5 id="pull">$pull</h5><p>è¡¨ç¤ºä»æŸä¸€å­—æ®µä¸­åˆ é™¤æŒ‡å®šçš„å€¼ï¼Œé’ˆå¯¹æ•°ç»„</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-string">&quot;$pull&quot;</span>: &#123; <span class="hljs-string">&quot;like&quot;</span>: <span class="hljs-string">&quot;hamberger&quot;</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°å°†<code>name</code>ä¸º<code>Mike</code>çš„å­—æ®µçš„<code>like</code>æ•°ç»„ä¸­çš„<code>hamberger</code>å­—æ®µåˆ é™¤<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$pull.png"  /></p><h5 id="pullAll">$pullAll</h5><p>ç±»ä¼¼<code>$pull</code>æ“ä½œç¬¦ï¼Œä¸åŒçš„æ˜¯å¯ä»¥åŒæ—¶åˆ é™¤å¤šä¸ªå€¼</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-string">&quot;$pullAll&quot;</span>: &#123; <span class="hljs-string">&quot;like&quot;</span>: [ <span class="hljs-string">&quot;hamberger&quot;</span>, <span class="hljs-string">&quot;book&quot;</span> ] &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°åˆ é™¤äº†<code>name</code>ä¸º<code>Mike</code>å­—æ®µçš„<code>like</code>ä¸­çš„<code>hamberger</code>å’Œ<code>book</code><br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$pullAll.png"  /></p><h5 id="rename">$rename</h5><p>è¿™ä¸ªæ“ä½œç¬¦è¡¨ç¤ºå¯¹ä¹‹å‰è®¾ç½®è¿‡çš„å­—æ®µè¿›è¡Œé‡å‘½åï¼Œè®¾ç½®çš„æ˜¯<code>key</code></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.updateOne(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>&#125;, &#123;<br>  <span class="hljs-attr">$rename</span>: &#123; <span class="hljs-string">&quot;like&quot;</span>: <span class="hljs-string">&quot;dislike&quot;</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°å°†<code>like</code>å­—æ®µä¿®æ”¹ä¸ºäº†<code>dislike</code>åç§°ã€‚<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$rename.png"  /></p><h4 id="æŸ¥æ‰¾æ“ä½œç¬¦">æŸ¥æ‰¾æ“ä½œç¬¦</h4><p>ä¸‹é¢ä»‹ç»çš„ï¼Œæ˜¯å¸¸ç”¨çš„æŸ¥è¯¢æ“ä½œç¬¦ğŸŒ°</p><h5 id="all">$all</h5><p>æŸ¥æ‰¾å­—æ®µä¸­åŒ…å«æŒ‡å®šå†…å®¹çš„å€¼ï¼Œä¸”éœ€è¦åŒ…å«å…¨éƒ¨æŒ‡å®šçš„å€¼ï¼Œé’ˆå¯¹æ•°ç»„å‹å­—æ®µ</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;like&quot;</span>: &#123; <span class="hljs-string">&quot;$all&quot;</span>: [ <span class="hljs-string">&quot;hamberger&quot;</span>, <span class="hljs-string">&quot;book&quot;</span> ] &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°èƒ½æŸ¥æ‰¾åˆ°<code>name</code>ä¸º<code>Mike</code>å­—æ®µï¼Œä½†æ˜¯æ— æ³•æŸ¥æ‰¾åˆ°å…¶ä»–å­—æ®µï¼Œå› ä¸ºä»–ä»¬æ— æ³•å®Œå…¨æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ã€‚<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$all.png"  /></p><h5 id="gt">$gt</h5><p>æŸ¥æ‰¾å¤§äº(great then)æŒ‡å®šå€¼çš„å­—æ®µ</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;age&quot;</span>: &#123; <span class="hljs-string">&quot;$gt&quot;</span>: <span class="hljs-number">18</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>age</code>å¤§äº<code>18</code>çš„å­—æ®µï¼Œä¸åŒ…å«<code>18</code><br><code>æ—¥æœŸ</code>ä¹Ÿå¯ç›´æ¥é‚£è¿™ä¸ªè¿›è¡Œæ¯”è¾ƒ<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$gt.png"  /></p><h5 id="gte">$gte</h5><p>è¡¨ç¤ºä¸å°äºæŒ‡å®šå€¼ï¼Œä¹Ÿå°±æ˜¯å¤§äºç­‰äº</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;age&quot;</span>: &#123; <span class="hljs-string">&quot;$gte&quot;</span>: <span class="hljs-number">20</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>age</code>ä¸å°äº<code>20</code>çš„å­—æ®µï¼Œæ‰€ä»¥åŒ…æ‹¬ç­‰äº<code>20</code>çš„å­—æ®µ<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$gte.png"  /></p><h5 id="lt">$lt</h5><p>ä¸ä¸Šé¢çš„<code>$gt</code>æ“ä½œç¬¦ç›¸åï¼Œè¡¨ç¤ºå°äº(less then)æŒ‡å®šå€¼</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;age&quot;</span>: &#123; <span class="hljs-string">&quot;$lt&quot;</span>: <span class="hljs-number">20</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>age</code>å°äº<code>20</code>çš„å­—æ®µï¼Œä¸”ä¸åŒ…å«<code>20</code><br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$lt.png"  /></p><h5 id="lte">$lte</h5><p>è¡¨ç¤ºä¸å¤§äºæŒ‡å®šå€¼ï¼Œä¹Ÿå°±æ˜¯å°äºç­‰äº</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: &#123; <span class="hljs-string">&quot;$lte&quot;</span>: <span class="hljs-number">18</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>age</code>å°äº<code>18</code>çš„å­—æ®µï¼Œä¸”åŒ…å«<code>18</code><br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$lte.png"  /></p><h5 id="in">$in</h5><p>æŸ¥æ‰¾å­˜åœ¨æŒ‡å®šæ•°ç»„ä¸­å€¼å¾—é¡¹ï¼Œä¸<code>$all</code>ä¸åŒçš„æ˜¯ï¼Œå­—æ®µåªéœ€è¦æ»¡è¶³å…¶ä¸­ä»»æ„ä¸€é¡¹å³å¯</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;age&quot;</span>: &#123; <span class="hljs-string">&quot;$in&quot;</span>: [ <span class="hljs-number">18</span>, <span class="hljs-number">20</span> ] &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°å¯ä»¥æ‰¾åˆ°æ‰€æœ‰åœ¨<code>age</code>å­—æ®µç­‰äº<code>18</code>æˆ–<code>20</code>çš„æ•°æ®<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$in.png"  /></p><h5 id="nin">$nin</h5><p>ä¸ä¸Šé¢çš„<code>$in</code>æ“ä½œç¬¦ç›¸åï¼Œè¡¨ç¤ºæŸ¥æ‰¾ä¸å­˜åœ¨æŒ‡å®šæ•°ç»„ä¸­çš„å€¼çš„é¡¹</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;like&quot;</span>: &#123; <span class="hljs-string">&quot;$nin&quot;</span>: [ <span class="hljs-string">&quot;tv&quot;</span> ] &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>like</code>å­—æ®µä¸­ä¸å­˜åœ¨<code>tv</code>çš„é¡¹<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$nin.png"  /></p><h5 id="ne">$ne</h5><p>æœ‰ç›¸ç­‰å°±ä¼šæœ‰ä¸ç›¸ç­‰ï¼Œè¿™ä¸ªæ“ä½œç¬¦å°±æ˜¯æŸ¥æ‰¾ä¸ç­‰äºæŒ‡å®šå€¼å¾—é¡¹ï¼Œç›¸å½“äºåªæœ‰ä¸€é¡¹çš„<code>$nin</code></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;like&quot;</span>: &#123; <span class="hljs-string">&quot;$ne&quot;</span>: <span class="hljs-string">&quot;book&quot;</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>like</code>å­—æ®µä¸­ä¸å­˜åœ¨<code>book</code>çš„é¡¹<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$ne.png"  /></p><h5 id="and">$and</h5><p>æŸ¥æ‰¾åŒæ—¶æ»¡è¶³æ‰€æœ‰æŒ‡å®šæ¡ä»¶çš„é¡¹ï¼Œå¹¶ä¸”è‡³å°‘éœ€è¦åŒ…å«<strong>ä¸¤ä¸ª</strong>æ¡ä»¶</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;$and&quot;</span>: [<br>    &#123;<br>      <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">18</span><br>    &#125;<br>  ]<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>name</code>ä¸º<code>Mike</code>å¹¶ä¸”<code>age</code>ä¸º<code>20</code>çš„å­—æ®µ<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$and.png"  /></p><h5 id="nor">$nor</h5><p>ä¸ä¸Šé¢çš„<code>$and</code>ç›¸åï¼Œè¡¨ç¤ºæŸ¥æ‰¾åŒæ—¶ä¸æ»¡è¶³æ‰€æœ‰æŒ‡å®šæ¡ä»¶çš„é¡¹ï¼ŒåŒæ ·è‡³å°‘éœ€è¦åŒ…å«<strong>ä¸¤ä¸ª</strong>æ¡ä»¶</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;$nor&quot;</span>: [<br>    &#123;<br>      <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">18</span><br>    &#125;<br>  ]<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>name</code>ä¸ä¸º<code>Mike</code>å¹¶ä¸”<code>age</code>ä¸ç­‰äº<code>18</code>çš„æ•°æ®<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$nor.png"  /></p><h5 id="not">$not</h5><p>æŒ‡å®šä¸èƒ½æ»¡è¶³æŒ‡å®šæ¡ä»¶çš„æ•°æ®é¡¹ï¼Œæ­¤æ“ä½œç¬¦åªèƒ½åŒ…å«<strong>ä¸€ä¸ª</strong>æ¡ä»¶ï¼Œè€Œä¸”å®ƒæ— æ³•å•ç‹¬å®ŒæˆæŸ¥è¯¢ï¼Œéœ€è¦ä¸å…¶ä»–æ“ä½œç¬¦é…åˆä¸€èµ·ä½¿ç”¨ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;age&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;$not&quot;</span>: &#123; <span class="hljs-string">&quot;$gt&quot;</span>: <span class="hljs-number">18</span> &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>age</code>å­—æ®µå°äºç­‰äº<code>18</code>çš„æ•°æ®é¡¹ï¼Œå½“ç„¶åƒä¾‹å­è¿™æ ·çš„æƒ…å†µä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<code>$lte</code>æ“ä½œç¬¦å®Œæˆã€‚<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$not.png"  /></p><h5 id="or">$or</h5><p>è¡¨ç¤ºæŸ¥æ‰¾èƒ½è‡³å°‘æ»¡è¶³<strong>ä¸€ä¸ª</strong>æ¡ä»¶çš„é¡¹ï¼Œå¹¶ä¸”éœ€è¦è‡³å°‘åŒ…å«<strong>ä¸¤ä¸ª</strong>ç­›é€‰æ¡ä»¶</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;$or&quot;</span>: [<br>    &#123;<br>      <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">20</span><br>    &#125;<br>  ]<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°è¡¨ç¤ºæŸ¥æ‰¾<code>name</code>ä¸º<code>Mike</code>æˆ–è€…<code>age</code>ä¸º<code>20</code>çš„æ•°æ®é¡¹<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$or.png"  /></p><h5 id="exists">$exists</h5><p>æ­¤æ“ä½œç¬¦ç”¨äºå­—æ®µçš„<code>key</code>çš„åˆ¤æ–­ï¼Œè¡¨ç¤ºæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å¦å­—æ®µ<code>key</code>çš„æ•°æ®é¡¹ï¼Œå¯é€‰å€¼ä¸º<code>true</code>å’Œ<code>false</code>ï¼Œé€‰æ‹©<strong>true</strong>è¡¨ç¤ºå­˜åœ¨ï¼Œ<strong>false</strong>åˆ™ä¸å­˜åœ¨æŒ‡å®šå­—æ®µçš„é¡¹</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: &#123; <span class="hljs-string">&quot;$exists&quot;</span>: <span class="hljs-literal">true</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾å­˜åœ¨<code>name</code>å­—æ®µçš„æ•°æ®é¡¹<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$exists.png"  /></p><h5 id="mod">$mod</h5><p>è¡¨ç¤ºæŸ¥æ‰¾æ»¡è¶³è®¡ç®—ç»“æœçš„æ•°æ®é¡¹ï¼Œæ­¤æ“ä½œç¬¦ä¸ºå–æ¨¡</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;age&quot;</span>: &#123; <span class="hljs-string">&quot;$mod&quot;</span>: [ <span class="hljs-number">3</span>, <span class="hljs-number">0</span> ] &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°è¡¨ç¤º<code>age</code>å­—æ®µçš„å€¼å¯¹3å–æ¨¡ç­‰äº0çš„å€¼ã€‚<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$mod.png"  /></p><h5 id="type">$type</h5><p>è¡¨ç¤ºé€‰æ‹©æŒ‡å®šæ•°æ®ç±»å‹çš„æ•°æ®é¡¹</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: &#123; <span class="hljs-string">&quot;$type&quot;</span>: <span class="hljs-string">&quot;string&quot;</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>name</code>å­—æ®µå€¼ç±»å‹ä¸º<code>string</code>çš„æ•°æ®é¡¹<br>æ­¤æ“ä½œç¬¦è¡¨ç¤ºèƒ½æŸ¥æ‰¾å¯¹åº”çš„æ•°æ®ç±»å‹çš„æ•°æ®é¡¹ï¼Œå®ƒä¹Ÿæœ‰å¯¹åº”çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><blockquote><p>Double: 1<br>String<br>Object3<br>Array4<br>Binary data5<br>Undefined6å·²åºŸå¼ƒã€‚<br>Object id7<br>Boolean8<br>Date9<br>Null10<br>Regular Expression11<br>JavaScript13<br>Symbol14<br>JavaScript (with scope)15<br>32-bit integer16<br>Timestamp17<br>64-bit integer18<br>Min key255Query with -1.<br>Max key127<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$type.png"  /></p></blockquote><h5 id="regex">$regex</h5><p>å°±æ˜¯å­—é¢æ„æ€ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å­—æ®µ</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;name&quot;</span>: &#123; <span class="hljs-string">&quot;$regex&quot;</span>: <span class="hljs-regexp">/mike/</span>, <span class="hljs-string">&quot;$options&quot;</span>: <span class="hljs-string">&quot;i&quot;</span> &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°åŒ¹é…<code>name</code>å­—æ®µå€¼åŒ…å«<code>mike</code>ï¼ˆä¸åŒºåˆ†å¤§å°å†™æ˜¯å› ä¸ºé…ç½®äº†<code>$options</code>ï¼‰çš„æ•°æ®é¡¹<br><code>$options</code>è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ï¼Œå…¶ä»–çš„è¿˜æœ‰<code>i</code>(ä¸åŒºåˆ†å¤§å°å†™),<code>g</code>(å…¨å±€åŒ¹é…),<code>m</code>(å¤šè¡ŒåŒ¹é…),<code>s</code>(.åŒ…å«æ¢è¡Œç¬¦<code>\n</code>)<br>å½“ç„¶ç›´æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$regex.png"  /></p><h5 id="where">$where</h5><p>æœ‰äº›æƒ…å†µä¸‹æ™®é€šæ–¹æ³•å¾ˆéš¾åšå‡ºç­›é€‰ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ“ä½œç¬¦ç”¨<code>javascript</code>è¯­æ³•æ¥è¿›è¡Œç­›é€‰</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">db.collection.find(&#123;<br>  <span class="hljs-string">&quot;$where&quot;</span>: <span class="hljs-string">&quot;this.name=&#x27;Jack&#x27;&amp;&amp;this.like.some(key =&gt; key == &#x27;hamberger&#x27;)&quot;</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æŸ¥æ‰¾<code>name</code>ä¸º<code>Jack</code>ä¸”<code>like</code>å­—æ®µåŒ…å«<code>hamberger</code>å€¼å¾—æ•°æ®é¡¹<br>å®ƒç”šè‡³å¯ä»¥ç›´æ¥å†™ä¸€ä¸ªå‡½æ•°<code>&#123; function() &#123; return this.name == 'Jack' &amp;&amp; this.like.some(key =&gt; key == 'hamberger') &#125; &#125;</code><br><strong>æ³¨æ„</strong><br>è™½ç„¶è¿™ç§æ–¹æ³•å¯ä»¥æœ‰æ•ˆçš„è§£å†³ä¸€äº›é—®é¢˜ï¼Œä½†æ˜¯è¿˜æ˜¯å°½é‡ä¸è¦ä½¿ç”¨è¿™ä¸ªæ“ä½œç¬¦ï¼Œå› ä¸ºå®ƒä¼šå°†MongoDBé‡Œé¢ä¿å­˜çš„BSONæ•°æ®å˜ä¸ºJavaScriptçš„è¯­æ³•ç»“æ„ï¼Œè¿™æ ·çš„æ–¹å¼ä¸æ–¹ä¾¿ä½¿ç”¨æ•°æ®åº“çš„ç´¢å¼•æœºåˆ¶ã€‚<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$where.png"  /></p><h5 id="elemMatch">$elemMatch</h5><p>æ­¤æ“ä½œç¬¦ç”¨äºå¯¹ç±»ä¼¼ä¸€ä¸ªåµŒå¥—æ•°ç»„å¯¹è±¡æ¥è¿›è¡Œå¤šæ¡ä»¶çš„æŸ¥è¯¢<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$elemMatch.png"  /><br>ä¸Šè¿°æŸ¥æ‰¾äº†<code>like</code>å­—æ®µæ•°ç»„ä¸­<code>type</code>ä¸º<code>eat</code>å¹¶ä¸”<code>target</code>ä¸º<code>hamberger</code>çš„æ•°æ®é¡¹</p><h5 id="slice">$slice</h5><p>å°†æ•°æ®ä¸­çš„æ•°ç»„å­—æ®µåšåˆ‡å‰²ï¼Œé€‰å‡ºä¸€æ®µé€‰åŒº</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åŸºæœ¬æŸ¥è¯¢</span><br>db.collection.find(&#123;&#125;, &#123;<br>  <span class="hljs-attr">like</span>: &#123;<br>    <span class="hljs-attr">$slice</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>]<br>  &#125;<br>&#125;)<br><span class="hljs-comment">//èšåˆæŸ¥è¯¢</span><br>db.collection.aggregate([<br>  &#123;<br>    <span class="hljs-attr">$project</span>: &#123;<br>      <span class="hljs-attr">like</span>: &#123;<br>        <span class="hljs-attr">$slice</span>: [ <span class="hljs-string">&quot;$like&quot;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span> ]<br>      &#125;<br>    &#125;<br>  &#125;<br>])<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šä¸¤ç§æ–¹æ³•éƒ½èƒ½å–å‡ºå¯¹åº”çš„æ•°ç»„é¡¹çš„ç¬¬ä¸€æ¡ï¼Œä¸¤ä¸ªæ•°å­—åˆ†åˆ«ä»£è¡¨ï¼šèµ·å§‹çš„ç´¢å¼•ã€åˆ‡å‰²çš„æ•°é‡</p><ul><li>åŸºæœ¬æŸ¥è¯¢<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$slice-normal.jpg"  /></li><li>èšåˆæŸ¥è¯¢<br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/$slice-aggregate.jpg" /></li></ul><h3 id="ç›¸å…³å®ä¾‹">ç›¸å…³å®ä¾‹</h3><p>è®²å®Œäº†æ“ä½œç¬¦ï¼Œè¿™é‡Œç®€å•è®²å‡ ä¸ªä¹‹å‰åœ¨å®è·µå½“ä¸­ç¢°åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œä»¥åŠè§£å†³æ–¹æ³•ï¼Œæ¬¢è¿å„ä½å‚è€ƒã€‚</p><h5 id="æŸ¥æ‰¾æˆ–ä¿®æ”¹æ•°ç»„ä¸­åµŒå¥—çš„å¯¹è±¡çš„å±æ€§">æŸ¥æ‰¾æˆ–ä¿®æ”¹æ•°ç»„ä¸­åµŒå¥—çš„å¯¹è±¡çš„å±æ€§</h5><p>å‡è®¾<code>database</code>çš„<code>collection</code>ä¸­å­˜åœ¨ä»¥ä¸‹æ•°æ®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs javascript">[<br>  &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Mike&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-string">&quot;job&quot;</span>: <span class="hljs-string">&quot;student&quot;</span>,<br>    <span class="hljs-string">&quot;like&quot;</span>: [<br>      &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;eat&quot;</span>,<br>        <span class="hljs-string">&quot;target&quot;</span>: <span class="hljs-string">&quot;hamberger&quot;</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;sport&quot;</span>,<br>        <span class="hljs-string">&quot;target&quot;</span>: <span class="hljs-string">&quot;running&quot;</span><br>      &#125;<br>    ]<br>  &#125;,<br>  &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Jack&quot;</span>,<br>    <span class="hljs-string">&quot;age&quot;</span>: <span class="hljs-number">50</span>,<br>    <span class="hljs-string">&quot;job&quot;</span>: <span class="hljs-string">&quot;teacher&quot;</span>,<br>    <span class="hljs-string">&quot;like&quot;</span>: [<br>      &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;eat&quot;</span>,<br>        <span class="hljs-string">&quot;target&quot;</span>: <span class="hljs-string">&quot;vegetable&quot;</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;sport&quot;</span>,<br>        <span class="hljs-string">&quot;target&quot;</span>: <span class="hljs-string">&quot;baseball&quot;</span><br>      &#125;<br>    ]<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p>æ™®é€šæƒ…å†µä¸‹æ— æ³•ç›´æ¥é€‰ä¸­å¯¹åº”æ•°ç»„å¯¹è±¡çš„å±æ€§ï¼Œä½†æ˜¯<code>mongodb</code>ä¸­æ”¯æŒ<code>.</code>æ¥é€‰æ‹©æ•°ç»„å¯¹è±¡ä¸­çš„å±æ€§</p><ul><li><p><code>parent_field.child_field</code><br>æ¯”å¦‚åƒä¸Šé¢çš„<code>like</code>å­—æ®µé€‰æ‹©<code>target=vegetable</code><br><code>db.collection.find(&#123; &quot;like.target&quot;: &quot;vegetable&quot; &#125;)</code><br><img src="/images/mongodbå¸¸ç”¨æ“ä½œç¬¦/æ•°ç»„å¯¹è±¡åµŒå¥—æŸ¥è¯¢.png"  /></p><h5 id="ä¿®æ”¹å¤šå±‚åµŒå¥—çš„æ•°ç»„å¯¹è±¡">ä¿®æ”¹å¤šå±‚åµŒå¥—çš„æ•°ç»„å¯¹è±¡</h5></li></ul><p>æœ‰æ—¶å€™ä¸æ­¢ä¼šæœ‰ä¸€å±‚åµŒå¥—ï¼Œå¤šå±‚åµŒå¥—ä¸Šé¢çš„æ–¹æ³•ä¸é€‚ç”¨ï¼Œè™½ç„¶è¿™ç§å­˜å‚¨æ–¹å¼ä¸å¤ªå¸¸è§ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥è§£å†³<br>å‡è®¾æœ‰å¦‚ä¸‹çš„æ•°æ®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript">[<br>  &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Jack&quot;</span>,<br>    <span class="hljs-string">&quot;like&quot;</span>: [<br>      &#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;eat&quot;</span>,<br>        <span class="hljs-attr">target</span>: [<br>          &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;hamberger&quot;</span>,<br>            <span class="hljs-attr">price</span>: <span class="hljs-number">100</span><br>          &#125;,<br>          &#123; <br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;salad&quot;</span>,<br>            <span class="hljs-attr">price</span>: <span class="hljs-number">200</span><br>          &#125;<br>        ]<br>      &#125;<br>    ]<br>  &#125;<br>]<br><br><span class="hljs-comment">//æ‰§è¡Œæ›´æ–°æ“ä½œ</span><br>db.collection.updateOne(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Jack&quot;</span> &#125;, &#123; <span class="hljs-attr">$set</span>: &#123; <span class="hljs-string">&quot;like.$[stepone].target.$[steptwo].price&quot;</span> : <span class="hljs-number">200</span> &#125; &#125;, &#123;<br> <span class="hljs-attr">arrayFilters</span>: [<br>  &#123;<br>   <span class="hljs-string">&quot;stepone&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;$type&quot;</span>: <span class="hljs-string">&quot;object&quot;</span><br>   &#125;,<br>   <span class="hljs-string">&quot;stepone.type&quot;</span>: <span class="hljs-string">&quot;eat&quot;</span> <br>  &#125;,<br>  &#123;<br>   <span class="hljs-string">&quot;steptwo&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;$type&quot;</span>: <span class="hljs-string">&quot;object&quot;</span><br>   &#125;<br>  &#125;<br> ]<br>&#125;)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æ“ä½œæ˜¯é€‰æ‹©ä¸Šé¢æ•°æ®ä¸­<code>like</code>å­—æ®µçš„<code>type</code>ä¸º<code>eat</code>å¹¶ä¸”<code>target</code>æ•°ç»„ä¸­çš„<code>name</code>ä¸º<code>hamberger</code>çš„ä»·æ ¼<code>price</code>æ”¹æˆäº†200<br><code>updateOne</code>çš„ç¬¬ä¸‰ä¸ªå‚æ•°ç”¨æˆ·å®šä¹‰ç¬¬äºŒå‚æ•°ä¸­ç”¨åˆ°çš„åµŒå¥—åç§°çš„ç­›é€‰æ¡ä»¶ï¼Œå¹¶ä¸”å®ƒçš„åç§°å®šä¹‰ä¸º<strong>ä»¥å°å†™å­—æ¯å¼€å¤´çš„å­—æ¯æ•°å­—å­—ç¬¦ä¸²</strong></p><h3 id="ç»“æŸ">ç»“æŸ</h3><p><code>MongoDB</code>çš„æ“ä½œç¬¦ä»¥åŠå‘½ä»¤è¿œä¸æ­¢è¿™äº›ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡Œå»MongoDBå®˜ç½‘æŸ¥æ‰¾å­¦ä¹ ï¼Œæœ¬äººä¹Ÿä¼šåœ¨åç»­çš„å®è·µå­¦ä¹ ä¸­ç»§ç»­æ›´æ–°ã€‚ğŸ˜¸</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>node</tag>
      
      <tag>mongodb</tag>
      
      <tag>æ•°æ®åº“</tag>
      
      <tag>database</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Chai</title>
    <link href="/2020/08/28/Chai/"/>
    <url>/2020/08/28/Chai/</url>
    
    <content type="html"><![CDATA[<h2 id="Chaiä»‹ç»">Chaiä»‹ç»</h2><p>Chai æ˜¯ä¸€ä¸ªé’ˆå¯¹ Node.js å’Œæµè§ˆå™¨çš„è¡Œä¸ºé©±åŠ¨æµ‹è¯•å’Œæµ‹è¯•é©±åŠ¨æµ‹è¯•çš„è¯Šæ–­åº“ï¼Œå¯ä¸ä»»ä½• JavaScript æµ‹è¯•æ¡†æ¶é›†æˆã€‚<br>æœ¬æ–‡ä»‹ç»çš„Chaiä¸‹çš„expect/shouldé£æ ¼å±äºBDD(è¡Œä¸ºé©±åŠ¨å¼€å‘)<br>å› ä¸ºæœ¬èº«è¯­æ³•ç›¸å¯¹ç®€å•ï¼Œæ‰€ä»¥æœ¬æ–‡æ˜¯ç±»ä¼¼äºapiçš„ä¸­æ–‡æ–‡æ¡£ï¼Œå…¶ä¸­æœ‰è®¸å¤šä¸è¶³ï¼Œè§è°…ã€‚</p><h2 id="æ­£ç‰‡å¼€å§‹">æ­£ç‰‡å¼€å§‹</h2><ul><li><code>to</code></li><li><code>be</code></li><li><code>been</code></li><li><code>is</code></li><li><code>that</code></li><li><code>which</code></li><li><code>and</code></li><li><code>has</code></li><li><code>have</code></li><li><code>with</code></li><li><code>at</code></li><li><code>of</code></li><li><code>same</code><br>ä»¥ä¸Šä»…åšè¯­ä¹‰åŒ–ç”¨ï¼Œæ— å®é™…ä½œç”¨</li></ul><h3 id="å…·ä½“apiä»‹ç»">å…·ä½“apiä»‹ç»</h3><p><span id="top"></span></p><ul><li><a href="#not">not</a><br>å¯¹ä¹‹åçš„æ–­è¨€å–å</li><li><a href="#deep">deep</a><br>é’ˆå¯¹å¯¹è±¡ã€æ•°ç»„ç­‰è¿›è¡Œæ·±å±‚æ¬¡çš„é”®å€¼å¯¹åˆ¤æ–­</li><li><a href="#any">any</a><br>ä¸<code>keys</code>ä¸€åŒä½¿ç”¨æ—¶è¡¨ç¤ºè‡³å°‘æ»¡è¶³ä¸€é¡¹</li><li><a href="#all">all</a><br>ä¸keysä¸€åŒä½¿ç”¨æ—¶è¡¨ç¤ºè‡³å°‘å…¨éƒ¨æ»¡è¶³</li><li><a href="#a">a | an</a><br>æ—¢å¯åšé“¾å¼è°ƒç”¨ä¹Ÿå¯åšæ–­è¨€</li><li><a href="#include">include | contains</a><br>æ˜¯å¦åŒ…å«æŒ‡å®šçš„å€¼ æ—¢å¯åšé“¾å¼è°ƒç”¨ä¹Ÿå¯åšæ–­è¨€</li><li><a href="#nested">nested</a><br>ç”¨äºåœ¨<code>property</code>ã€<code>include</code>ç­‰ç”¨<code>.</code>è¯­æ³•è·å–æ·±å±‚æ¬¡å±æ€§</li><li><a href="#ok">ok</a><br>çœŸå€¼</li><li><a href="#true">true</a><br>true</li><li><a href="#false">false</a><br>false</li><li><a href="#null">null</a><br>null</li><li><a href="#undefined">undefined</a><br>undefined</li><li><a href="#NaN">NaN</a><br>NaN</li><li><a href="#exist">exist</a><br>énull éundefined</li><li><a href="#finite">finite</a><br>é<code>NaN</code> é<code>Infinity</code></li><li><a href="#empty">empty</a><br>åˆ¤æ–­å€¼é•¿åº¦ä¸º<code>0 [] '' &#123;&#125;</code></li><li><a href="#arguments">arguments</a><br>æ˜¯å¦ä¸ºargumentså¯¹è±¡</li><li><a href="#equal">equal</a><br><code>===</code></li><li><a href="#eql">eql</a><br>ç›¸å½“äº<code>deep</code>å’Œ<code>equal</code>çš„ç®€å†™</li><li><a href="#above">above</a><br>å¤§äº</li><li><a href="#least">least</a><br>å¤§äºç­‰äº</li><li><a href="#below">below</a><br>å°äº</li><li><a href="#most">most</a><br>å°äºç­‰äº</li><li><a href="#within">within</a><br>åŒºé—´å†…(æ•°å­—)</li><li><a href="#instanceof">instanceof</a><br>æ˜¯å¦ä¸ºè¯¥å®ä¾‹</li><li><a href="#property">property</a><br>æ˜¯å¦æ‹¥æœ‰æŒ‡å®šå±æ€§</li><li><a href="#ownProperty">ownProperty</a><br>æ˜¯å¦æ‹¥æœ‰è‡ªèº«çš„å±æ€§</li><li><a href="#ownPropertyDescriptor">ownPropertyDescriptor</a><br>å±æ€§æè¿°å¯¹è±¡</li><li><a href="#lengthOf">length</a><br>lengthå±æ€§</li><li><a href="#lengthOf">lengthOf</a><br>æ˜¯å¦ä¸ºæŒ‡å®šé•¿åº¦å€¼</li><li><a href="#match">match</a><br>æ˜¯å¦åŒ¹é…æŒ‡å®šæ­£åˆ™</li><li><a href="#string">string</a><br>æ˜¯å¦åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²</li><li><a href="#keys">keys</a><br>é…åˆå…¶ä»–å­—æ®µä½¿ç”¨ï¼Œæ˜¯å¦åŒ…å«æˆ–ä¸åŒ…å«æŒ‡å®šçš„key</li><li><a href="#throw">throw</a><br>æ˜¯å¦æŠ›å‡ºæŒ‡å®šé”™è¯¯æˆ–å­—ç¬¦ä¸²æˆ–åŒ¹é…æŒ‡å®šé”™è¯¯ä¿¡æ¯</li><li><a href="#respondTo">respondTo</a><br>æ–­è¨€æ˜¯å¦ä¼šå“åº”ä¸€ä¸ªæ–¹æ³•</li><li><a href="#itself">itself</a><br>é…åˆ<code>respondTo</code>ç”¨æ¥åˆ¤æ–­æ˜¯å¦ä¸ºè‡ªèº«çš„æ–¹æ³•</li><li><a href="#satisfy">satisfy</a><br>è¿”å›ä¸€ä¸ªå‡½æ•°ä¸”å‚æ•°ä¸ºç›®æ ‡å€¼ä¸”è¿”å›å€¼ä¸º<code>boolean</code>ï¼Œç”¨æ¥æŒ‡å®šæ˜¯å¦é€šè¿‡æ£€æµ‹</li><li><a href="#closeTo">closeTo</a><br>åˆ¤æ–­å€¼æ˜¯å¦åœ¨æœŸæœ›å€¼æ¥æ”¶èŒƒå›´å†…</li><li><a href="#members">members</a><br>ç±»ä¼¼äº<code>contains</code>ã€<code>include</code>ï¼Œä½†æ˜¯èƒ½æ¥æ”¶æ•°ç»„ï¼Œä¸»è¯­åªèƒ½æ˜¯æ•°ç»„</li><li><a href="#oneOf">oneOf</a><br>åˆ¤æ–­å€¼æ˜¯å¦å‡ºç°åœ¨æŒ‡å®šæ•°ç»„ä¸­</li><li><a href="#change">change</a><br>åˆ¤æ–­æ–¹æ³•æ˜¯å¦ä¼šæ”¹å˜æŒ‡å®šå¯¹è±¡çš„æŒ‡å®šå±æ€§çš„å€¼</li><li><a href="#increase">increase</a><br>åˆ¤æ–­æ–¹æ³•æ˜¯å¦ä¼šå¢åŠ æŒ‡å®šå¯¹è±¡çš„å±æ€§çš„å€¼</li><li><a href="#decrease">decrease</a><br>åˆ¤æ–­æ–¹æ³•æ˜¯å¦ä¼šå‡å°‘æŒ‡å®šå¯¹è±¡çš„å±æ€§çš„å€¼</li><li><a href="#extensible">extensible</a><br>åˆ¤æ–­æŒ‡å®šå€¼æ˜¯å¦å¯æ‰©å±•(å¯ä»¥æ·»åŠ æ–°å±æ€§)</li><li><a href="#sealed">sealed</a><br>åˆ¤æ–­æŒ‡å®šå€¼æ˜¯å¦å°é—­(ä¸å¯æ·»åŠ æ–°å±æ€§ã€ä¸å¯åˆ é™¤æ—§å±æ€§ã€å¯ä¿®æ”¹æ—§å±æ€§)</li><li><a href="#frozen">frozen</a><br>åˆ¤æ–­å€¼æ˜¯å¦å†»ç»“(ä¸å¯æ·»åŠ æ–°å±æ€§ã€ä¸å¯åˆ é™¤æ—§å±æ€§ã€ä¸å¯ä¿®æ”¹æ—§å±æ€§)</li><li><a href="#own">own</a><br>åˆ¤æ–­å€¼æ˜¯å¦æ‹¥æœ‰æŒ‡å®šçš„å±æ€§ï¼Œä¸åŒ…å«ä¸Šå±‚å±æ€§</li><li><a href="#by">by</a><br>é…åˆ<code>descrease</code> æˆ– <code>increase</code>ã€ <code>change</code>ç­‰æ¥åˆ¤æ–­æ–­è¨€å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–åœ¨æŒ‡å®šèŒƒå›´å†…</li><li><a href="#fail">fail</a><br>åˆ¤æ–­æ˜¯å¦ä¼šå¤±è´¥</li><li><a href="#ordered">ordered</a><br>é…åˆ<code>members</code>ç”¨äºæŒ‡å®š<code>members</code>å‚æ•°æ•°ç»„çš„é¡ºåºä¸ä¸»è¯­æ•°ç»„çš„é¡ºåºä¸€è‡´</li></ul><p><span id="not"></span></p><p><strong>.not</strong><br>å¯¹ä¹‹åçš„æ–­è¨€å–å</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(&#123;<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>&#125;).to.not.equal(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.not.have.a.keys(<span class="hljs-string">&#x27;b&#x27;</span>)<br>expect([<span class="hljs-number">100</span>, <span class="hljs-number">200</span>]).to.be.not.lengthOf(<span class="hljs-number">3</span>)<br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]).to.be.length.not.within(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="deep"></span></p><p><strong>.deep</strong><br>æ™®é€šçš„å¯¹è±¡æˆ–æ•°ç»„æ¯”è¾ƒæ˜¯æ¯”è¾ƒå®ƒä»¬çš„æ•´ä½“æ˜¯å¦ç›¸ç­‰ã€‚<br>æ¯”å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.not.equal(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;)<br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]).to.be.not.equal([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>])<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.deep.equal(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;)<br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]).to.be.deep.equal([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>])<br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: &#123; <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125; &#125; &#125;).to.be.deep.equal(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: &#123; <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125; &#125; &#125;)<br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125; &#125;).to.have.nested.deep.property(<span class="hljs-string">&#x27;a.b&#x27;</span>)<br></code></pre></td></tr></table></figure><p>ç›¸å½“äºæ˜¯ä¸¥æ ¼ç›¸ç­‰ <code>===</code><br><a href="#top">é¡¶</a></p><p><span id="any"></span></p><p><strong>.any</strong><br>ä¸<code>keys</code>ä½¿ç”¨æ—¶è‡³å°‘æ»¡è¶³ä¸€é¡¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">expect([<span class="hljs-number">100</span>, <span class="hljs-number">200</span>]).to.have.any.keys(<span class="hljs-number">0</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">200</span> &#125;).to.have.any.keys(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="all"></span></p><p><strong>.all</strong><br>ä¸<code>any</code>ç±»ä¼¼ï¼Œä½†æ˜¯è‡³å°‘æ»¡è¶³æ‰€æœ‰é¡¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">expect([<span class="hljs-number">100</span>, <span class="hljs-number">200</span>]).to.has.all.keys(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br>expect([<span class="hljs-number">100</span>, <span class="hljs-number">200</span>]).to.not.has.all.keys(<span class="hljs-number">0</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">200</span> &#125;).to.has.all.keys(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125;).to.not.has.all.keys(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>)<br></code></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚ä¸Šæœ€åä¸€æ¡æ–­è¨€æ‰€ç¤ºï¼Œå½“<code>all</code>å’Œ<code>keys</code>ä¸€åŒä½¿ç”¨æ—¶ï¼Œæ–­è¨€å¯¹è±¡çš„<code>key</code>å¿…é¡»å’Œ<code>keys</code>å®Œå…¨ä¸€æ ·æ‰èƒ½é€šè¿‡<br><a href="#top">é¡¶</a></p><p><span id="a"></span></p><p><strong>.a .an</strong><br>æ—¢å¯ä»¥ç”¨åšé“¾å¼åˆ¤æ–­ä¹Ÿå¯ç”¨äºæ–­è¨€<br>ç”¨ä½œåˆ¤æ–­æ—¶æ— å®é™…ä½œç”¨ï¼Œä»…ç”¨äºè¯­ä¹‰åŒ–<br>ç”¨åšæ–­è¨€æ—¶ç”¨äºåˆ¤æ–­å€¼æ˜¯å¦ä¸ºæŸä¸€ç±»å‹<br>æ–¹æ³•<code>type a = (type: 'string' | 'object' | 'null' | 'undefined' | 'array' | 'number' | 'symbol' | 'error' | 'promise'/*è¿˜æœ‰åˆ«çš„ç±»å‹...*/, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-number">100</span>).to.be.a(<span class="hljs-string">&#x27;number&#x27;</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">100</span> &#125;).to.has.a.property(<span class="hljs-string">&#x27;a&#x27;</span>)<br>expect(<span class="hljs-built_in">Symbol</span>()).to.be.a(<span class="hljs-string">&#x27;symbol&#x27;</span>)<br>expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()).to.be.a(<span class="hljs-string">&#x27;error&#x27;</span>)<br><span class="hljs-comment">//è‡ªå®šä¹‰ç±»å‹</span><br><span class="hljs-keyword">const</span> object = &#123;<br>  [<span class="hljs-built_in">Symbol</span>.toStringTag]: <span class="hljs-string">&#x27;diyObj&#x27;</span><br>&#125;<br>expect(object).to.be.a(<span class="hljs-string">&#x27;diyObj&#x27;</span>)<br><span class="hljs-comment">//ç»§ç»­æ–­è¨€</span><br>expect(<span class="hljs-number">100</span>).to.be.a(<span class="hljs-string">&#x27;number&#x27;</span>).and.to.equal(<span class="hljs-number">100</span>)<br><span class="hljs-comment">//è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</span><br>expect(<span class="hljs-number">100</span>).to.be.a(<span class="hljs-string">&#x27;number&#x27;</span>, <span class="hljs-string">&#x27;it is not impossible&#x27;</span>)<br></code></pre></td></tr></table></figure><ul><li>å¯ç”¨äºè‡ªå®šä¹‰ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚ä¸Šä½¿ç”¨<code>Symbol.toStringTag</code>è¿›è¡Œè‡ªå®šä¹‰ç±»å‹å®šä¹‰</li><li>ç”±<code>a</code>å’Œ<code>an</code>æ–­è¨€ä¼šè¿”å›æ–­è¨€çš„å€¼ï¼Œå¯ä»¥ç»§ç»­åšé“¾å¼è°ƒç”¨ç»§ç»­åšå…¶ä»–åˆ¤æ–­</li><li><code>a</code>å’Œ<code>an</code> æœ‰å¯é€‰çš„ç¬¬äºŒå‚æ•°å¯ä»¥æŒ‡å®šå‡ºé”™æ—¶çš„é”™è¯¯ä¿¡æ¯<br><a href="#top">é¡¶</a></li></ul><p><span id="include"></span></p><p><strong>.include .contains</strong><br>ç”¨äºåˆ¤æ–­æ–­è¨€å€¼æ˜¯å¦åŒ…å«æŸä¸ªæŒ‡å®šçš„å€¼ï¼Œä½†æ˜¯åªèƒ½æŒ‡å®šä¸€ä¸ªå€¼<br><code>includes</code> ã€ <code>contains</code> <code>contain</code> åŒä¹‰<br>æ—¢å¯ä»¥ç”¨åšé“¾å¼åˆ¤æ–­ä¹Ÿå¯ç”¨äºæ–­è¨€<br>æ–¹æ³• <code>type include = (value: any, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//å­—ç¬¦ä¸²åŒ…å«</span><br>expect(<span class="hljs-string">&#x27;Daniel&#x27;</span>).to.be.include(<span class="hljs-string">&#x27;iel&#x27;</span>)<br><span class="hljs-comment">//æ•°ç»„</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]).to.be.a(<span class="hljs-string">&#x27;array&#x27;</span>).and.include(<span class="hljs-number">1</span>)<br><span class="hljs-comment">//ä¸¥æ ¼ç›¸ç­‰</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>]).to.not.be.include(<span class="hljs-number">2</span>)<br><span class="hljs-comment">//å¯¹è±¡</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;).to.be.include(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;)<br><span class="hljs-comment">//mapå€¼åŒ…å«</span><br>expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])).to.be.include(<span class="hljs-number">2</span>)<br><span class="hljs-comment">//setå€¼åŒ…å«</span><br>expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])).to.be.include(<span class="hljs-number">3</span>)<br><span class="hljs-comment">//æ·±å±‚æ¬¡ä¸¥æ ¼ç›¸ç­‰</span><br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125; &#125;).to.be.not.include(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125; &#125;)<br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125; &#125;).to.be.deep.include(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125; &#125;)<br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125; &#125;).to.be.nested.deep.include(&#123; <span class="hljs-string">&#x27;a.b&#x27;</span>: <span class="hljs-number">2</span> &#125;)<br><span class="hljs-comment">//è‡ªå®šä¹‰æ–­è¨€é”™è¯¯ä¿¡æ¯</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]).to.be.not.include(<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;it is not impossible&#x27;</span>)<br><span class="hljs-comment">//é…åˆmembersé“¾å¼è°ƒç”¨</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.be.include.members([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>])<br><span class="hljs-comment">//é…åˆkeys</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125;).to.be.include.any.keys(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;).to.be.include.all.keys(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>)<br><span class="hljs-comment">//å¯¹è±¡å¯ä»¥è·å–ä¸Šå±‚å±æ€§</span><br><span class="hljs-built_in">Object</span>.prototype.say = <span class="hljs-string">&#x27;Daniel&#x27;</span><br>expect(&#123;&#125;).to.be.include(&#123; <span class="hljs-attr">say</span>: <span class="hljs-string">&#x27;Daniel&#x27;</span> &#125;).but.not.own.include(&#123; <span class="hljs-attr">say</span>: <span class="hljs-string">&#x27;Daniel&#x27;</span> &#125;)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="nested"></span></p><p><strong>.nested</strong><br>ç”¨äºåœ¨<code>property</code>ã€<code>include</code>ç­‰ç”¨<code>.</code>è¯­æ³•è·å–æ·±å±‚æ¬¡å±æ€§<br>æœ‰æ—¶å€™å¯¹äºæ·±å±‚æ¬¡çš„å¯¹è±¡æˆ–æ•°ç»„æ— æ³•ç›´æ¥åˆ¤æ–­è¯¥å†…å®¹ï¼Œå¯ä»¥é€šè¿‡<code>nested</code>æ¥å®ç°æ·±å±‚æ¬¡çš„å€¼è·å–</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ·±å±‚æ¬¡åµŒå¥—è·å–</span><br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: &#123; <span class="hljs-attr">c</span>: <span class="hljs-number">1</span> &#125; &#125; &#125;).to.be.nested.have.a.property(<span class="hljs-string">&#x27;a.b.c&#x27;</span>)<br><span class="hljs-comment">//è½¬ä¹‰</span><br>expect(&#123; <span class="hljs-string">&#x27;.a&#x27;</span>: &#123; <span class="hljs-string">&#x27;..b&#x27;</span>: &#123; <span class="hljs-string">&#x27;[c]&#x27;</span>: <span class="hljs-number">1</span> &#125; &#125; &#125;).to.be.nested.have.a.property(<span class="hljs-string">&#x27;\\.a.\\.\\.b.\\[c\\]&#x27;</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="ok"></span></p><p><strong>.ok</strong><br>è¡¨ç¤ºçœŸå€¼ï¼Œå¦‚<code>true</code> <code>[]</code> <code>&#123;&#125;</code>ç­‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">expect([]).to.be.ok<br>expect(&#123;&#125;).to.be.ok<br><span class="hljs-comment">//è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</span><br>expect(<span class="hljs-literal">false</span>, <span class="hljs-string">&#x27;it is not impossible&#x27;</span>).to.be.not.ok<br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹ä¸å¤ªéœ€è¦ä½¿ç”¨æ­¤å±æ€§<br>å…³äºå…¶ä»–è±¡å¾æ€§çš„å€¼ç›´æ¥ä½¿ç”¨å¯¹åº”çš„å±æ€§å°±å¯ä»¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-number">0</span>).to.be.equal(<span class="hljs-number">0</span>)<br>expect(<span class="hljs-literal">true</span>).to.be.true<br>expect(<span class="hljs-literal">null</span>).to.be.null<br>expect(<span class="hljs-literal">undefined</span>).to.be.undefined<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="true"></span></p><p><strong>.true</strong><br>åŒä¸Šè¡¨ç¤ºçœŸå€¼ï¼Œä½†ä¸è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥åªæœ‰<code>true</code>èƒ½é€šè¿‡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-literal">true</span>).to.be.true<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="false"></span></p><p><strong>false</strong><br>ä¸<code>true</code>ç›¸åï¼Œè¡¨ç¤ºå‡å€¼ï¼Œä¸è¿›è¡Œç±»å‹è½¬æ¢</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-literal">false</span>).to.be.false<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="null"></span></p><p><strong>.null</strong><br>ç”¨äºåˆ¤æ–­å€¼æ˜¯å¦ä¸º<code>null</code>å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-literal">false</span>).to.be.false<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="undefined"></span></p><p><strong>.undefined</strong><br>ç”¨äºåˆ¤æ–­å€¼æ˜¯å¦ä¸º<code>undefined</code>å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-literal">undefined</span>).to.be.undefined<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="NaN"></span></p><p><strong>.NaN</strong><br>ç”¨äºåˆ¤æ–­å€¼æ˜¯å¦ä¸º<code>NaN</code>å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//ä¸æ¨èä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå­—ç¬¦ä¸²ç­‰ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨equal</span><br><span class="hljs-comment">//expect(&#x27;Daniel&#x27;).to.be.NaN</span><br>expect(<span class="hljs-number">100</span>).to.be.not.NaN<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="exist"></span></p><p><strong>.exist</strong><br>ç”¨äºåˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨ï¼Œå³é<code>null</code> ä¸” é<code>undefined</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-number">100</span>).to.be.exist<br>expect(<span class="hljs-literal">null</span>).to.be.not.exist<br>expect([]).to.be.exist<br>expect(<span class="hljs-literal">undefined</span>).to.be.not.exist<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="finite"></span></p><p><strong>.finite</strong><br>è¡¨ç¤ºæœ‰é™æ•°ç»„ï¼Œå³é<code>NaN</code> ä¸” é<code>Infinity</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-number">200</span>).to.be.finite<br>expect(<span class="hljs-literal">Infinity</span>).to.be.not.finite<br>expect(<span class="hljs-string">&#x27;Daniel&#x27;</span>).to.be.not.finite<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="empty"></span></p><p><strong>.empty</strong><br>åˆ¤æ–­å€¼å¾—é•¿åº¦æ˜¯å¦ä¸º<code>0</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//å­—ç¬¦ä¸²çš„é•¿åº¦</span><br>expect(<span class="hljs-string">&#x27;&#x27;</span>).to.be.empty<br><span class="hljs-comment">//æ•°ç»„é•¿åº¦</span><br>expect([]).to.be.empty<br><span class="hljs-comment">//å¯¹è±¡åˆ™æ˜¯åˆ¤æ–­å¯æšä¸¾çš„å±æ€§çš„æ•°é‡(Object.keys(obj).length)</span><br>expect(&#123;&#125;).to.be.empty<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="arguments"></span></p><p><strong>.arguments</strong><br>åˆ¤æ–­å€¼æ˜¯å¦ä¸º<code>arguments</code>å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-built_in">arguments</span>).to.be.arguments<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="equal"></span></p><p><strong>.equal</strong><br>åˆ¤æ–­å€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼Œç›¸å½“äº<code>===</code><br><code>type equal = (value: any, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ¯”è¾ƒå€¼çš„ç›¸ç­‰</span><br>expect(<span class="hljs-number">1</span>).to.be.equal(<span class="hljs-number">1</span>)<br><span class="hljs-comment">//æ•°ç»„å’Œå¯¹è±¡åˆ™æ— æ³•ä¸¥æ ¼ç›¸ç­‰</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.be.not.equal([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br><span class="hljs-comment">//æ•°ç»„å’Œå¯¹è±¡æ¯”è¾ƒå¯ä»¥ç”¨ä¹‹å‰ä»‹ç»çš„deep</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.be.deep.equal([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.deep.equal(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;)<br><span class="hljs-comment">//è‡ªå®šä¹‰é”™è¯¯æç¤ºä¿¡æ¯</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]).to.be.not.equal([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], <span class="hljs-string">&#x27;it is not impossible&#x27;</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="eql"></span></p><p><strong>.eql</strong><br>å¯ä»¥å½“åšæ˜¯<code>deep</code> å’Œ <code>equal</code>çš„ç»„åˆ<br><code>type eql = (value: any, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ•°ç»„å¯¹è±¡ç­‰å€¼å†…å®¹ç›¸ç­‰</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.be.eql([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.eql(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;)<br><span class="hljs-comment">//ç»§ç»­æ–­è¨€</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.eql(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).and.not.be.empty<br></code></pre></td></tr></table></figure><ul><li>å¦‚ä¸Šæ‰€ä¾‹ğŸŒ°ï¼Œeqlè¿”å›å€¼æœ¬èº«ï¼Œå¯ä»¥ç»§ç»­å‘ååšæ–­è¨€<br><a href="#top">é¡¶</a></li></ul><p><span id="above"></span></p><p><strong>.above</strong><br>åˆ¤æ–­å€¼æ˜¯å¦<code>å¤§äº</code>æŒ‡å®šå€¼<br><code>type above = (value: number, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-number">100</span>).to.be.above(<span class="hljs-number">10</span>)<br>expect(<span class="hljs-number">100</span>).to.be.not.above(<span class="hljs-number">101</span>)<br></code></pre></td></tr></table></figure><ul><li>å¯¹äºå­—ç¬¦ä¸²ï¼Œæ•°ç»„ç­‰é•¿åº¦çš„æ¯”è¾ƒå»ºè®®ç›´æ¥ä½¿ç”¨<code>lengthOf</code><br><a href="#top">é¡¶</a></li></ul><p><span id="least"></span></p><p><strong>.least</strong><br>åˆ¤æ–­å€¼æ˜¯å¦<code>ä¸å°äºï¼ˆå¤§äºç­‰äºï¼‰</code>æŒ‡å®šå€¼<br><code>type least = (value: number, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-number">100</span>).to.be.least(<span class="hljs-number">100</span>)<br>expect(<span class="hljs-number">100</span>).to.be.least(<span class="hljs-number">99</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><strong>.below</strong><br>åˆ¤æ–­å€¼æ˜¯å¦<code>å°äº</code>æŒ‡å®šå€¼<br><code>type below = (value: number, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-number">100</span>).to.be.below(<span class="hljs-number">101</span>)<br>expect(<span class="hljs-number">100</span>).to.be.not.below(<span class="hljs-number">99</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="most"></span></p><p><strong>.most</strong><br>åˆ¤æ–­å€¼æ˜¯å¦<code>ä¸å¤§äºï¼ˆå°äºç­‰äºï¼‰</code>æŒ‡å®šå€¼<br><code>type most = (value: number, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-number">100</span>).to.be.most(<span class="hljs-number">100</span>)<br>expect(<span class="hljs-number">100</span>).to.be.most(<span class="hljs-number">101</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="within"></span></p><p><strong>.within</strong><br>åˆ¤æ–­å€¼æ˜¯å¦åœ¨æŒ‡å®šåŒºé—´å†…<br><code>type within = (start: number, end: number, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//åŒ…å«å¼€å§‹å’Œç»“æŸ</span><br>expect(<span class="hljs-number">100</span>).to.be.within(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>)<br>expect(<span class="hljs-string">&#x27;Daniel&#x27;</span>).to.have.a.lengthOf.within(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>)<br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.have.a.lengthOf.within(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>)<br></code></pre></td></tr></table></figure><ul><li>ä¸æ¨èä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿå®ç°çš„æµ‹è¯•åŸºæœ¬éƒ½å¯ä»¥é€šè¿‡<code>equal</code>æˆ–æ˜¯<code>lengthOf</code>æ¥å®ç°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//ä½¿ç”¨equalå’ŒlengthOfå®ç°æµ‹è¯•</span><br>expect(<span class="hljs-number">100</span>).to.be.equal(<span class="hljs-number">100</span>)<br>expect(<span class="hljs-string">&#x27;Daniel&#x27;</span>).to.have.a.lengthOf(<span class="hljs-number">6</span>)<br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.have.a.lengthOf(<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="instanceof"></span></p><p><strong>.instanceof</strong><br>åˆ¤æ–­å€¼æ˜¯å¦ä¸ºæŒ‡å®šå€¼çš„å®ä¾‹<br><code>type instanceof = (constructor: object, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Father</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br><span class="hljs-keyword">const</span> father = <span class="hljs-keyword">new</span> Father()<br>expect(father).to.be.instanceof(Father)<br>expect([]).to.be.instanceof(<span class="hljs-built_in">Array</span>)<br>expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(<span class="hljs-number">100</span>)).to.be.instanceof(<span class="hljs-built_in">Number</span>)<br>expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">&#x27;Daniel&#x27;</span>)).to.be.instanceof(<span class="hljs-built_in">String</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="property"></span></p><p><strong>.property</strong><br>åˆ¤æ–­å€¼æ˜¯å¦åŒ…å«æŒ‡å®šå±æ€§<br><code>type property = (key: string, value?: any, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//ç®€å•åˆ¤æ–­æ˜¯å¦æ‹¥æœ‰è¯¥å±æ€§</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.have.a.property(<span class="hljs-string">&#x27;a&#x27;</span>)<br><span class="hljs-comment">//å¹¶ä¸”åˆ¤æ–­æ˜¯å¦ä¸ºè¯¥å€¼</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.have.a.property(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">1</span>)<br><span class="hljs-comment">//é’ˆå¯¹æ·±å±‚æ¬¡çš„å€¼æ¯”è¾ƒéœ€è¦ deep å‚ä¸</span><br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">1</span> &#125; &#125;).to.be.not.have.a.property(<span class="hljs-string">&#x27;a&#x27;</span>, &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">1</span> &#125;)<br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">1</span> &#125; &#125;).to.be.have.a.deep.property(<span class="hljs-string">&#x27;a&#x27;</span>, &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">1</span> &#125;)<br><span class="hljs-comment">//é…åˆ own ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºå½“å‰æ‰€æœ‰çš„å®ä¾‹å®è¡Œ</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.have.a.property(<span class="hljs-string">&#x27;a&#x27;</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.have.a.property(<span class="hljs-string">&#x27;toString&#x27;</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.have.a.own.property(<span class="hljs-string">&#x27;a&#x27;</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.not.have.a.own.property(<span class="hljs-string">&#x27;toString&#x27;</span>)<br><span class="hljs-comment">//é…åˆ nested è¿›è¡Œæ·±å±‚æ¬¡çš„æ¯”è¾ƒ</span><br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125; &#125;).to.be.have.nested.deep.property(<span class="hljs-string">&#x27;a.b&#x27;</span>, <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="own"></span></p><p><strong>.own</strong><br>åˆ¤æ–­å€¼æ˜¯å¦æ‹¥æœ‰æŒ‡å®šçš„å±æ€§ï¼Œä¸åŒ…å«ä¸Šå±‚å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//ç»“åˆpropertyä½¿ç”¨</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.have.own.property(<span class="hljs-string">&#x27;a&#x27;</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.not.have.own.property(<span class="hljs-string">&#x27;toString&#x27;</span>)<br><span class="hljs-comment">//é…åˆ deep å’Œ propertyè¿›è¡Œæ·±å±‚æ¬¡çš„æ¯”è¾ƒ</span><br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125; &#125;).to.be.have.own.deep.property(<span class="hljs-string">&#x27;a&#x27;</span>, &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="ownProperty"></span></p><p><strong>.ownProperty</strong><br>åˆ¤æ–­æ˜¯å¦ä¸ºæœ¬èº«å±æ€§ï¼Œç›¸å½“äºæ˜¯ <code>.own.property</code>çš„ç»“åˆ<br><code>type ownProperty = (key: string, value?: any, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.have.own.property(<span class="hljs-string">&#x27;a&#x27;</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.have.ownProperty(<span class="hljs-string">&#x27;a&#x27;</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="ownPropertyDescriptor"></span></p><p><strong>.ownPropertyDescriptor</strong><br>ç±»ä¼¼äºä¸Šé¢çš„æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºæœ¬èº«çš„å±æ€§<br>ä½†æ˜¯å®ƒå¯ä»¥ä¼ é€’ç¬¬äºŒå‚æ•°ï¼Œè¡¨ç¤ºè¯¥å±æ€§çš„æè¿°å¯¹è±¡ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ˜¯æè¿°å¯¹è±¡çš„è‡ªè¡Œç™¾åº¦<br><code>type ownPropertyDescriptor = (key: string, value?: &#123; get?: (undifiend || () =&gt; any)=undefined, set?: (undefined || () =&gt; any)=undefined, configurable?: boolean=false, enumerable?: boolean=false, value?: any=undefined, writable?: boolean=false &#125;, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> object = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Daniel&#x27;</span><br>&#125;<br><span class="hljs-keyword">const</span> descriper = &#123;<br>  <span class="hljs-comment">//æ˜¯å¦å¯æšä¸¾</span><br>  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-comment">//å€¼</span><br>  <span class="hljs-comment">//value: &#x27;hello world&#x27;,</span><br>  <span class="hljs-comment">//æ˜¯å¦å¯å†™</span><br>  <span class="hljs-comment">//writable: false,</span><br>  <span class="hljs-comment">//æ˜¯å¦å¯ä¿®æ”¹æè¿°ç¬¦å¯¹è±¡</span><br>  <span class="hljs-comment">//æ³¨æ„å¦‚æœè®¾ç½®ä¸ºfalseï¼Œåç»­å°†æ— æ³•å†ä¿®æ”¹å…¶æè¿°å¯¹è±¡</span><br>  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-comment">//è·å–å€¼æ‹¦æˆª</span><br>  <span class="hljs-comment">//è®¾ç½®äº†æ‹¦æˆªå°±ä¸èƒ½è®¾ç½®writableå’Œvalue</span><br>  <span class="hljs-function"><span class="hljs-title">get</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;I love China&#x27;</span><br>  &#125;,<br>  <span class="hljs-comment">//è®¾ç½®å€¼æ‹¦æˆª</span><br>  <span class="hljs-function"><span class="hljs-title">set</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.value<br>  &#125;<br>&#125;<br><span class="hljs-built_in">Object</span>.defineProperty(object, <span class="hljs-string">&#x27;name&#x27;</span>, descriper)<br><br>expect(object).to.be.ownPropertyDescriptor(<span class="hljs-string">&#x27;name&#x27;</span>)<br>expect(object).to.be.ownPropertyDescriptor(<span class="hljs-string">&#x27;name&#x27;</span>, descriper)<br><span class="hljs-comment">//è‡ªå®šä¹‰é”™è¯¯</span><br>expect(object).to.be.ownPropertyDescriptor(<span class="hljs-string">&#x27;name&#x27;</span>, descriper, <span class="hljs-string">&#x27;it is impossible&#x27;</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="lengthOf"></span></p><p><strong>.lengthOf .length</strong><br>åˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨<code>length</code>å±æ€§ä¸”ä¸ºæŒ‡å®šå€¼<br>æ–¹æ³• <code>type lengthOf = (value: number, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.be.lengthOf(<span class="hljs-number">3</span>)<br><span class="hljs-comment">//ç”¨äºé“¾å¼è°ƒç”¨ï¼Œä½†æ˜¯ä¸æ¨è</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.have.a.lengthOf.below(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="match"></span></p><p><strong>.match</strong><br>åˆ¤æ–­å€¼æ˜¯å¦ä¸æŒ‡å®š<code>æ­£åˆ™</code>åŒ¹é…<br>å’Œæ™®é€š<code>match</code>æ–¹æ³•ä¸€æ ·ï¼Œæ‰€ä»¥ä¸»è¯­å°±æ˜¯<code>string</code><br><code>matches</code>æ•ˆæœä¸<code>match</code>ç›¸åŒ<br><code>type match = (reg: Regexp, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-string">&#x27;Daniel&#x27;</span>).to.be.match(<span class="hljs-regexp">/^D.+l$/</span>)<br>expect(<span class="hljs-string">&#x27;2020-08-10&#x27;</span>).to.be.match(<span class="hljs-regexp">/^\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;$/</span>)<br>expect(<span class="hljs-string">&#x27;13456787654&#x27;</span>).to.be.match(<span class="hljs-regexp">/^1[^12]\d&#123;9&#125;$/</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="string"></span></p><p><strong>.string</strong><br>åˆ¤æ–­å€¼æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­—ç¬¦ä¸²<br><code>type string = (value: string, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">expect(<span class="hljs-string">&#x27;Daniel&#x27;</span>).to.be.have.a.string(<span class="hljs-string">&#x27;iel&#x27;</span>)<br>expect(<span class="hljs-string">&#x27;hello&#x27;</span>).to.be.not.have.a.string(<span class="hljs-string">&#x27;world&#x27;</span>)<br><span class="hljs-comment">//å¿…é¡»æ˜¯è¿ç»­å­ä¸²</span><br>expect(<span class="hljs-string">&#x27;world&#x27;</span>).to.be.not.have.a.string(<span class="hljs-string">&#x27;rd&#x27;</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="keys"></span></p><p><strong>.keys</strong><br>ç”¨äºåˆ¤æ–­<code>æ•°ç»„</code>ã€<code>å¯¹è±¡</code>ã€<code>Set</code>ã€<code>Map</code>ç­‰æ˜¯å¦åŒ…å«ç›¸åº”çš„<code>key</code><br><code>type keys = (...args: Array&lt;string | number&gt;) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ™®é€šä½¿ç”¨éœ€è¦å°†æ‰€æœ‰keyå…¨éƒ¨ä¼ å…¥</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;).to.be.have.keys(<span class="hljs-string">&#x27;a&#x27;</span>)<br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]).to.be.have.keys(<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>)<br>expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>])).to.be.have.keys(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([[ <span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">1</span> ]])).to.be.have.keys(<span class="hljs-string">&#x27;a&#x27;</span>)<br><span class="hljs-comment">//é…åˆall å’Œ any ä½¿ç”¨</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;).to.be.have.any.keys(<span class="hljs-string">&#x27;a&#x27;</span>)<br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;).to.be.be.have.all.keys(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>)<br><span class="hljs-comment">//åŒ…å«</span><br>expect(&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125;).to.be.include.keys(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>)<br><span class="hljs-comment">//æ·±å±‚æ¬¡æ¯”è¾ƒ</span><br>expect(&#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: &#123; <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125; &#125; &#125;).to.be.have.deep.keys(<span class="hljs-string">&#x27;a.b&#x27;</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="throw"></span></p><p><strong>.throw</strong><br>åˆ¤æ–­å€¼æ˜¯å¦æŠ›å‡ºæŒ‡å®šçš„é”™è¯¯ã€é”™è¯¯ä¿¡æ¯ç­‰ã€‚<br>.throw(errConstructor | string | reg) æ˜¯å¦æŠ›å‡ºæŒ‡å®šé”™è¯¯æˆ–å­—ç¬¦ä¸²æˆ–åŒ¹é…æŒ‡å®šé”™è¯¯ä¿¡æ¯<br><code>type throw = (errorLike?: Error | Construcotr, errMsgMatcher?: string | Regexp, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> errors = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&#x27;oops&#x27;</span>)<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">throw</span> errors &#125;<br><span class="hljs-comment">//å½“ä¸ç¡®å®šä¼šæŠ›å‡ºå“ªä¸€ç§é”™è¯¯æ—¶ï¼Œç›´æ¥ä¸ä¼ å‚æ•°</span><br>expect(error).to.be.throw()<br><span class="hljs-comment">//ä¼ é€’å…·ä½“çš„é”™è¯¯ç±»å‹</span><br>expect(error).to.be.throw(<span class="hljs-built_in">TypeError</span>)<br><span class="hljs-comment">//ä¼ é€’é”™è¯¯å®ä¾‹</span><br>expect(error).to.be.throw(errors, <span class="hljs-string">&#x27;oops&#x27;</span>)<br><span class="hljs-comment">//ç¬¬äºŒå‚æ•°å¯ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”è¡¨ç¤ºä¸ºå­ä¸²</span><br>expect(error).to.be.throw(errors, <span class="hljs-string">&#x27;oop&#x27;</span>)<br><span class="hljs-comment">//ä¹Ÿæ”¯æŒæ­£åˆ™</span><br>expect(error).to.be.throw(<span class="hljs-built_in">TypeError</span>, <span class="hljs-regexp">/.+/</span>)<br><span class="hljs-comment">//å¯ç›´æ¥ä¼ é€’å­—ç¬¦ä¸²è¡¨ç¤ºæŠ›å‡ºçš„é”™è¯¯å†…å®¹</span><br>expect(error).to.be.throw(<span class="hljs-string">&#x27;oop&#x27;</span>)<br><span class="hljs-comment">//åŒæ ·æ”¯æŒæ­£åˆ™</span><br>expect(error).to.be.throw(<span class="hljs-regexp">/^o.+s$/</span>)<br><span class="hljs-comment">//æ–­è¨€åçš„ä¸»è¯­æ›´æ”¹ä¸ºé”™è¯¯å¯¹è±¡</span><br>errors.code = <span class="hljs-number">404</span><br>expect(error).to.be.throw(errors).and.that.have.a.property(<span class="hljs-string">&#x27;code&#x27;</span>, <span class="hljs-number">404</span>)<br></code></pre></td></tr></table></figure><p><code>throws</code> å’Œ <code>Throw</code>åŒä¹‰ğŸ™†<br><a href="#top">é¡¶</a></p><p><span id="respondTo"></span></p><p><strong>.respondTo</strong><br>ç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æˆ–æ„é€ å‡½æ•°æ˜¯å¦æœ‰ç›¸å…³çš„æ–¹æ³•<br><code>type respondTo = (methodName: string ,errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Father</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br>Father.prototype.sayFather = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br>Father.saySon = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;&#125;<br><span class="hljs-comment">//æ­£å¸¸å“åº”æ‰€æœ‰æ–¹æ³•</span><br>expect(<span class="hljs-keyword">new</span> Father()).to.be.respondTo(<span class="hljs-string">&#x27;sayFather&#x27;</span>)<br><span class="hljs-comment">//å®ä¾‹æ— æ³•è·å–è¶…é›†é™æ€å±æ€§</span><br>expect(<span class="hljs-keyword">new</span> Father()).to.be.not.respondTo(<span class="hljs-string">&#x27;saySon&#x27;</span>)<br>expect(&#123;&#125;).to.be.respondTo(<span class="hljs-string">&#x27;toString&#x27;</span>)<br><span class="hljs-comment">//æ·»åŠ itselfåªèƒ½å“åº”è‡ªèº«çš„æ–¹æ³•</span><br>expect(Father).to.be.itself.respondTo(<span class="hljs-string">&#x27;saySon&#x27;</span>).but.not.respondTo(<span class="hljs-string">&#x27;sayFather&#x27;</span>)<br></code></pre></td></tr></table></figure><p><code>respondsTo</code>ä¸æ­¤æ–¹æ³•åŒä¹‰<br><a href="#top">é¡¶</a></p><p><span id="itself"></span></p><p><strong>.itself</strong><br>é…åˆä¸Šè¿°çš„<code>respondTo</code>æ–¹æ³•åˆ¤æ–­å€¼æ˜¯å¦å“åº”æŒ‡å®šçš„æ–¹æ³•ï¼Œä½†æ˜¯ä¸ºè‡ªèº«çš„æ–¹æ³•ï¼Œä¸åŒ…å«<code>prototype</code>ä¸Šçš„æ–¹æ³•<br>å…·ä½“äº‹ä¾‹å¯ä»¥çœ‹ä¸Šé¢çš„<code>respondTo</code><br><a href="#top">é¡¶</a></p><p><span id="satisfy"></span></p><p><strong>.satisfy</strong><br>æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå‡½æ•°å‚æ•°ä¸ºæ–­è¨€ç›®æ ‡å€¼ï¼Œè¿”å›å€¼ä¸ºbooleanï¼Œåˆ¤æ–­æ˜¯å¦é€šè¿‡æ–­è¨€</p><ul><li><code>type satisfy = (method: (target: any) =&gt; boolean, errmsg?: string) =&gt; any</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//ç›®æ ‡å€¼åœ¨[0, 100]å†…</span><br>expect(<span class="hljs-number">100</span>).to.be.satisfy(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">target</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> target &gt;= <span class="hljs-number">0</span> &amp;&amp; target &lt;= <span class="hljs-number">100</span><br>&#125;)<br>expect(<span class="hljs-number">100</span>).to.be.satisfies(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">target</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> target &gt;= <span class="hljs-number">0</span> &amp;&amp; target &lt;= <span class="hljs-number">100</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><code>satisfies</code>ä¸æ­¤æ–¹æ³•åŒä¹‰<br><a href="#top">é¡¶</a></p><p><span id="closeTo"></span></p><p><strong>.closeTo</strong><br>æŒ‡å®šå€¼ï¼ˆä»…<code>æ•°å­—</code>ï¼‰æ˜¯å¦åœ¨æœŸæœ›å€¼çš„æ¥æ”¶èŒƒå›´å†…<br>æ­¤æ–¹æ³•ä¸<code>within</code>çš„åŒºåˆ«å°±æ˜¯withinæ¥æ”¶çš„ä¸¤ä¸ªå‚æ•°æ˜¯ä¸Šé™å’Œä¸‹é™<br><code>closeTo</code>çš„å‚æ•°ï¼Œç¬¬ä¸€å‚æ•°ä¸ºæœŸæœ›çš„ä¸­é—´å€¼ï¼Œç¬¬äºŒå‚æ•°ä¸ºä¸Šä¸‹é™ï¼ˆç¬¬ä¸€å‚æ•°åŠ å‡ç¬¬äºŒå‚æ•°ï¼‰</p><ul><li><code>type closeTo = (expected: number, delta: number, errmsg?: string) =&gt; any</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æŒ‡å®šå€¼åœ¨[-90, 110]ä¹‹é—´</span><br>expect(<span class="hljs-number">100</span>).to.be.closeTo(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>)<br><span class="hljs-comment">//åŒ…å«ä¸´ç•Œå€¼</span><br>expect(<span class="hljs-number">110</span>).to.be.closeTo(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>)<br>expect(-<span class="hljs-number">90</span>).to.be.closeTo(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>)<br></code></pre></td></tr></table></figure><p>è™½ç„¶æ­¤æ–¹æ³•å¯ä»¥ç”¨äºåˆ¤æ–­å€¼æ˜¯å¦åœ¨ä¸€ä¸ªåŒºé—´å†…ï¼Œä½†æ˜¯ç›´æ¥ä½¿ç”¨<code>equal</code>è¿›è¡Œç›¸ç­‰åˆ¤æ–­ä¸€æ ·å¯ä»¥<br><a href="#top">é¡¶</a></p><p><span id="members"></span></p><p><strong>.members</strong><br>ç±»ä¼¼äºcontainsã€includeï¼Œä½†æ˜¯æ¥æ”¶å‚æ•°ä¸ºæ•°ç»„ï¼Œä¸»è¯­åªèƒ½æ˜¯æ•°ç»„<br><code>type members = (target: Array&lt;any&gt;, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//ä¸»è¯­å¿…é¡»ä¸ºæ•°ç»„</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.be.have.members([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br><span class="hljs-comment">//éç®€å•ç±»å‹æ•°ç»„éœ€é…åˆdeep</span><br>expect([ &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125; ]).to.be.have.deep.members([ &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125; ])<br><span class="hljs-comment">//é…åˆorderdæ¥å¼ºåˆ¶æ•°ç»„é¡ºåºä¸ä¸»è¯­ä¸€è‡´</span><br>expect([ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> ]).to.be.have.ordered.members([ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> ])<br><span class="hljs-comment">//é…åˆincludeé“¾å¼è°ƒç”¨å¯ä»¥å¯¹ä¸å¿…è¦çš„æ•°ç»„é¡¹ä¸è¿›è¡ŒéªŒè¯</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.be.include.members([ <span class="hljs-number">1</span>, <span class="hljs-number">2</span> ])<br><span class="hljs-comment">//ç›¸å¯¹äºéªŒè¯ä¸å­˜åœ¨çš„æ•°ç»„é¡¹æ¨èä½¿ç”¨include</span><br>expect([<span class="hljs-number">1</span>]).to.be.not.include(<span class="hljs-number">2</span>).and.not.include(<span class="hljs-number">3</span>)<br><span class="hljs-comment">//å¤åˆä½¿ç”¨</span><br>expect([ &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;, &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;, &#123; <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125; ]).to.be.include.deep.ordered.members([ &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;, &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125; ])<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="oneOf"></span></p><p><strong>.oneOf</strong><br>åˆ¤æ–­å€¼æ˜¯å¦å‡ºç°åœ¨æŒ‡å®šæ•°ç»„ä¸­<br><code>type oneOf = (list: Array&lt;any&gt;, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ–­è¨€å€¼åœ¨æŒ‡å®šæ•°ç»„ä¸­</span><br>expect(<span class="hljs-number">100</span>).to.be.oneOf([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">100</span>])<br><span class="hljs-comment">//æ¨èç›´æ¥ä½¿ç”¨equal</span><br>expect(<span class="hljs-number">100</span>).to.be.equal(<span class="hljs-number">100</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="change"></span></p><p><strong>.change</strong><br>åˆ¤æ–­æ–¹æ³•æ˜¯å¦ä¼šæ”¹å˜æŒ‡å®šçš„å€¼ï¼Œä¸»è¯­æ¥æ”¶çš„æ˜¯ä¸€ä¸ªæ”¹å˜åˆ¤å®šå¯¹è±¡çš„å€¼çš„æ–¹æ³•<br>å¯ä»¥æŠŠå®ƒå½“åšæ˜¯<code>increase</code>å’Œ<code>decrease</code>çš„ç»“åˆ<br>ä½†æ˜¯æ¨èç›´æ¥ä½¿ç”¨ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•<br><code>type change = (value: ((value: any) =&gt; any) | any, prop?: string, errmsg?: string) =&gt; any</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ™®é€šå€¼</span><br><span class="hljs-keyword">let</span> number = <span class="hljs-number">0</span><br><span class="hljs-keyword">let</span> string = <span class="hljs-string">&#x27;0&#x27;</span><br><span class="hljs-keyword">let</span> array = [ <span class="hljs-number">0</span> ]<br><span class="hljs-keyword">let</span> object = &#123; <span class="hljs-number">0</span>: <span class="hljs-number">0</span> &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeNumber</span>(<span class="hljs-params"></span>) </span>&#123; number ++ &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeString</span>(<span class="hljs-params"></span>) </span>&#123; string += <span class="hljs-number">1</span> &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeArray</span>(<span class="hljs-params"></span>) </span>&#123; array[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span> &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeObject</span>(<span class="hljs-params"></span>) </span>&#123; object[<span class="hljs-number">0</span>] += <span class="hljs-number">1</span> &#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNumber</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">return</span> number &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getString</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">return</span> string &#125;<br><br><span class="hljs-comment">//æ™®é€šå€¼éœ€è¦å€ŸåŠ©å‡½æ•°</span><br><span class="hljs-comment">//æ•°å­—</span><br>expect(changeNumber).to.be.change(getNumber)<br><span class="hljs-comment">//å­—ç¬¦ä¸²</span><br>expect(changeString).to.be.change(getString)<br><span class="hljs-comment">//å¤åˆå€¼åˆ™éœ€æ·»åŠ ç¬¬äºŒå‚æ•°ï¼Œæ”¹å˜çš„å±æ€§å</span><br><span class="hljs-comment">//æ•°ç»„</span><br>expect(changeArray).to.be.change(array, <span class="hljs-string">&#x27;0&#x27;</span>)<br><span class="hljs-comment">//å¯¹è±¡</span><br>expect(changeObject).to.be.change(object, <span class="hljs-string">&#x27;0&#x27;</span>)<br><br><span class="hljs-comment">//ç»“åˆbyå…·ä½“æ–­è¨€æ”¹å˜çš„èŒƒå›´</span><br>expect(changeNumber).to.be.change(getNumber).by(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="increase"></span><br><span id="decrease"></span></p><p><strong>.increase | .decrease</strong><br><code>increase</code> åˆ¤æ–­æ–¹æ³•æ˜¯å¦ä¼šå¢åŠ æŒ‡å®šå¯¹è±¡çš„å±æ€§æˆ–è€…æ™®é€šå€¼çš„å€¼<br><code>decrease</code> åˆ¤æ–­æ–¹æ³•æ˜¯å¦ä¼šå‡å°‘æŒ‡å®šå¯¹è±¡çš„å±æ€§æˆ–è€…æ™®é€šå€¼çš„å€¼<br><code>const increase = (value: any, prop?: string, errmsg?: string)</code><br><code>const decrease = (value: any, prop?: string, errmsg?: string)</code><br>å¹¶ä¸”åªèƒ½æ˜¯æ•°ç»„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ™®é€šå€¼</span><br><span class="hljs-keyword">let</span> number = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increase</span>(<span class="hljs-params"></span>) </span>&#123; number ++ &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decrease</span>(<span class="hljs-params"></span>) </span>&#123; number -- &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-keyword">return</span> number &#125;<br>expect(increase).to.be.increase(get)<br>expect(decrease).to.be.decrease(get)<br><br><span class="hljs-comment">//å¯¹è±¡</span><br><span class="hljs-keyword">let</span> obj = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objIncrease</span>(<span class="hljs-params"></span>) </span>&#123; obj.a ++ &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objDecrease</span>(<span class="hljs-params"></span>) </span>&#123; obj.a -- &#125;<br>expect(objIncrease).to.be.increase(obj, <span class="hljs-string">&#x27;a&#x27;</span>)<br>expect(objDecrease).to.be.decrease(obj, <span class="hljs-string">&#x27;a&#x27;</span>)<br><br><span class="hljs-comment">//æ•°ç»„</span><br><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayIncrease</span>(<span class="hljs-params"></span>) </span>&#123; arr[<span class="hljs-number">0</span>] += <span class="hljs-number">2</span> &#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayDecrease</span>(<span class="hljs-params"></span>) </span>&#123; arr[<span class="hljs-number">0</span>] -= <span class="hljs-number">2</span> &#125;<br>expect(arrayIncrease).to.be.increase(arr, <span class="hljs-string">&#x27;0&#x27;</span>).by(<span class="hljs-number">2</span>)<br>expect(arrayDecrease).to.be.decrease(arr, <span class="hljs-string">&#x27;0&#x27;</span>).by(<span class="hljs-number">2</span>)<br><br><span class="hljs-comment">//é€šè¿‡byåˆ¤æ–­å¢åŠ çš„å¹…åº¦</span><br>expect(objIncrease).to.be.increase(obj, <span class="hljs-string">&#x27;a&#x27;</span>).by(<span class="hljs-number">1</span>)<br>expect(objDecrease).to.be.decrease(obj, <span class="hljs-string">&#x27;a&#x27;</span>).by(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="extensible"></span></p><p><strong>.extensible</strong><br>åˆ¤æ–­æŒ‡å®šå€¼æ˜¯å¦å¯æ‰©å±•(ä¸å¯ä»¥æ·»åŠ æ–°å±æ€§)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> object = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Daniel&#x27;</span>,<br>  <span class="hljs-attr">sayName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.name<br>  &#125;<br>&#125;<br><span class="hljs-comment">//è®¾ç½®å¯¹è±¡ä¸ºä¸å¯æ‰©å±•</span><br><span class="hljs-built_in">Object</span>.preventExtensions(object)<br><span class="hljs-comment">//å¯ä¿®æ”¹</span><br><span class="hljs-built_in">console</span>.log(object)<br>object.name = <span class="hljs-string">&#x27;Mike&#x27;</span><br><span class="hljs-built_in">console</span>.log(object)<br><span class="hljs-comment">//å¯åˆ é™¤</span><br><span class="hljs-built_in">console</span>.log(object)<br><span class="hljs-keyword">delete</span> object.name<br><span class="hljs-built_in">console</span>.log(object)<br><span class="hljs-comment">//ä¸å¯æ–°å¢</span><br><span class="hljs-built_in">console</span>.log(object)<br>object.age = <span class="hljs-number">18</span><br><span class="hljs-built_in">console</span>.log(object)<br><br><span class="hljs-comment">//ä½¿ç”¨</span><br>expect(object).to.be.extensible<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="sealed"></span></p><p><strong>.sealed</strong><br>åˆ¤æ–­æŒ‡å®šå€¼æ˜¯å¦å°é—­(ä¸å¯æ·»åŠ æ–°å±æ€§ã€ä¸å¯åˆ é™¤æ—§å±æ€§ã€å¯ä¿®æ”¹æ—§å±æ€§)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> object = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Daniel&#x27;</span>,<br>  <span class="hljs-attr">sayName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.name<br>  &#125;<br>&#125;<br><span class="hljs-comment">//è®¾ç½®å¯¹è±¡ä¸ºå°é—­</span><br><span class="hljs-built_in">Object</span>.seal(object)<br><br><span class="hljs-comment">//ä¸å¯æ–°å¢</span><br><span class="hljs-built_in">console</span>.log(object)<br>object.age = <span class="hljs-number">18</span><br><span class="hljs-built_in">console</span>.log(object)<br><br><span class="hljs-comment">//å¯ä¿®æ”¹</span><br><span class="hljs-built_in">console</span>.log(object)<br>object.name = <span class="hljs-string">&#x27;Mike&#x27;</span><br><span class="hljs-built_in">console</span>.log(object)<br><br><span class="hljs-comment">//ä¸å¯åˆ é™¤</span><br><span class="hljs-built_in">console</span>.log(object)<br><span class="hljs-keyword">delete</span> object.name<br><span class="hljs-built_in">console</span>.log(object)<br><br><span class="hljs-comment">//ä½¿ç”¨</span><br>expect(object).to.be.sealed<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="frozen"></span></p><p><strong>.frozen</strong><br>åˆ¤æ–­å€¼æ˜¯å¦å†»ç»“(ä¸å¯æ·»åŠ æ–°å±æ€§ã€ä¸å¯åˆ é™¤æ—§å±æ€§ã€ä¸å¯ä¿®æ”¹æ—§å±æ€§)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> object = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Daniel&#x27;</span>,<br>  <span class="hljs-attr">sayName</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.name<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//è®¾ç½®å¯¹è±¡ä¸ºå†»ç»“</span><br><span class="hljs-built_in">Object</span>.freeze(object)<br><br><span class="hljs-comment">//ä¸å¯æ–°å¢</span><br><span class="hljs-built_in">console</span>.log(object)<br>object.age = <span class="hljs-number">18</span><br><span class="hljs-built_in">console</span>.log(object)<br><br><span class="hljs-comment">//ä¸å¯ä¿®æ”¹</span><br><span class="hljs-built_in">console</span>.log(object)<br>object.name = <span class="hljs-string">&#x27;Mike&#x27;</span><br><span class="hljs-built_in">console</span>.log(object)<br><br><span class="hljs-comment">//ä¸å¯åˆ é™¤</span><br><span class="hljs-built_in">console</span>.log(object)<br><span class="hljs-keyword">delete</span> object.name<br><span class="hljs-built_in">console</span>.log(object)<br><br><span class="hljs-comment">//ä½¿ç”¨</span><br>expect(object).to.be.frozen<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="by"></span></p><p><strong>.by</strong><br>é…åˆ<code>descrease</code> æˆ– <code>increase</code>ã€ <code>change</code>ç­‰æ¥åˆ¤æ–­æ–­è¨€å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–åœ¨æŒ‡å®šèŒƒå›´å†…<br>å…·ä½“äº‹ä¾‹ğŸŒ°å¯ä»¥ç›´æ¥æŸ¥çœ‹ä¸Šè¿°ä¸‰ä¸ªæ–¹æ³•çš„ä¾‹å­ğŸ‘†<br><a href="#top">é¡¶</a></p><p><span id="fail"></span></p><p><strong>.fail</strong><br>åˆ¤æ–­æ˜¯å¦ä¼šå¤±è´¥<br>æœ‰ä¸¤ç§å‚æ•°ä¼ é€’æ–¹å¼</p><ol><li><code>type fail = (message?: string) =&gt; any</code></li><li><code>type fail = (actual: any, expected: any, message?: string, operator: string) =&gt; any</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//ä»¥ä¸‹å‡ä¼šå‡ºé”™</span><br><span class="hljs-comment">//ç›´æ¥ä½¿ç”¨</span><br>expect.fail()<br>expect.fail(<span class="hljs-string">&#x27;it is error&#x27;</span>)<br><span class="hljs-comment">//å€¼åˆ¤æ–­</span><br>expect.fail(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;it is impossible&#x27;</span>)<br>expect.fail(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;it is impossible&#x27;</span>, <span class="hljs-string">&#x27;&gt;&#x27;</span>)<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><p><span id="ordered"></span></p><p><strong>.ordered</strong><br>é…åˆ<code>members</code>ç”¨äºæŒ‡å®š<code>members</code>å‚æ•°æ•°ç»„çš„é¡ºåºä¸ä¸»è¯­æ•°ç»„çš„é¡ºåºä¸€è‡´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//memberså‚æ•°å¿…é¡»æŒ‰é¡ºåº</span><br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.be.ordered.members([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br>expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]).to.be.not.ordered.members([<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>])<br></code></pre></td></tr></table></figure><p><a href="#top">é¡¶</a></p><h2 id="å®Œç»“">å®Œç»“</h2><p>ğŸ˜Š<br>å¦‚æœæœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹ï¼Œè¯·æŒ‡å‡ºã€‚</p>]]></content>
    
    
    <categories>
      
      <category>åç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Chai</tag>
      
      <tag>BDD</tag>
      
      <tag>expect</tag>
      
      <tag>test</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœ‰è¶£çš„csså±æ€§content</title>
    <link href="/2020/08/13/%E6%9C%89%E8%B6%A3%E7%9A%84css%E5%B1%9E%E6%80%A7content/"/>
    <url>/2020/08/13/%E6%9C%89%E8%B6%A3%E7%9A%84css%E5%B1%9E%E6%80%A7content/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©è¯´ä¸€ä¸ªéå¸¸æœ‰è¶£çš„<code>css</code>å±æ€§<code>content</code>ï¼Œå¯èƒ½å¾ˆå¤šäººéƒ½ä¼šè¯´ï¼Œè¿™ä¸ªå±æ€§è°ä¼šä¸çŸ¥é“ï¼Œå¯¹äºä¸€äº›è€æ‰‹æ¥è¯´ï¼Œè¿™ä¸ªå±æ€§ç¡®å®å¯èƒ½æ˜¯ç»å¸¸ä¼šç”¨åˆ°ï¼Œä½†æ˜¯æ€»ä¼šæœ‰ä½ æ²¡æœ‰å‘ç°çš„åœ°æ–¹ï¼Œä»Šå¤©å°±æ¥å¥½å¥½çš„è®²è®²è¿™ä¸ªæœ‰è¶£çš„<code>css</code>å±æ€§ã€‚<br>ä»¥ä¸‹çŸ¥è¯†å†…å®¹å‡æ¥è‡ªäº<a href="https://www.zhangxinxu.com/">å¼ é‘«æ—­çš„ã€Šcssä¸–ç•Œã€‹</a>ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»çœ‹çœ‹ã€‚</p><h2 id="content-ä»‹ç»">content ä»‹ç»</h2><p><code>content</code>ç”¨äºå…ƒç´ å†…å®¹çš„å±•ç¤ºï¼Œå¹³å¸¸ç”¨çš„å¤šçš„åœ°æ–¹åœ¨äºå†…å®¹å‰åçš„å…·ä½“æ–‡å­—å†…å®¹æˆ–è€…æ˜¯å›¾ç‰‡ã€‚å›¾ç‰‡å…¶å®æ²¡æœ‰å¾ˆå¤šå¥½ä»‹ç»ï¼Œä½†æ˜¯å…³äºæ–‡å­—æ–¹é¢ï¼Œå®ƒæœ‰å¾ˆå¤šç§çš„ç±»å‹ï¼Œä¸‹é¢å°±ä¸€ä¸€å°†<code>content</code>çš„å€¼ç±»å‹è¿›è¡Œä»‹ç»ã€‚</p><h3 id="content-å±æ€§">content å±æ€§</h3><ol><li><strong>normal</strong></li></ol><p>è¿™æ˜¯<code>content</code>å±æ€§çš„é»˜è®¤å€¼ï¼Œåœ¨ä¼ªå…ƒç´ ä¸­ä¼šè¢«è®¤å®šä¸º<code>none</code></p><ol start="2"><li><strong>none</strong></li></ol><p>æŒ‡å®šä¸äº§ç”Ÿä¼ªå…ƒç´ </p><ol start="3"><li><strong>url</strong></li></ol><p>å¯ä»¥ä½¿ç”¨å›¾ç‰‡æ¥è¿›è¡Œå±•ç¤ºï¼Œæ¯”å¦‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-tag">div</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">::after</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">content</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;/images/æœ‰è¶£çš„csså±æ€§content/cssä¸–ç•Œ.jpg&#x27;</span>);</span><br><span class="css">    <span class="hljs-attribute">display</span>: block;</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹å›¾</p><img src="/images/æœ‰è¶£çš„csså±æ€§content/url-show.png" width="188" height="334" /><p><code>url</code>çš„å‚æ•°æœ‰å¾ˆå¤šç§ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯è·¯å¾„<br>ç„¶åå°±æ˜¯<code>icon</code>ã€<code>svg</code>ã€<code>base64</code>ç¼–ç çš„å›¾ç‰‡ï¼Œä½†æ˜¯ä¸æ”¯æŒ<code>css3æ¸å˜</code>èƒŒæ™¯å›¾ã€‚</p><p>è™½ç„¶æœ‰è¿™ç§æ–¹æ³•å¯ä»¥ç”Ÿæˆå›¾ç‰‡ï¼Œä½†æ˜¯å®é™…ä¸­å¹¶æ— å¤ªå¤§ç”¨å¤„ï¼ŒåŸå› å°±åœ¨äºæ— æ³•é€šè¿‡è®¾ç½®å®½é«˜æ¥æ”¹å˜å›¾ç‰‡çš„å›ºæœ‰å°ºå¯¸ã€‚</p><p>ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨<code>background-image</code>æ¥å®ç°ç›¸å…³çš„åŠŸèƒ½ã€‚</p><p>ä¸è¿‡<code>base64</code>å½¢å¼å´èƒ½è§£å†³ä¸Šé¢çš„é—®é¢˜<br>ä¸€èˆ¬æƒ…å†µä¸‹å›¾ç‰‡åœ¨åŠ è½½è¿‡ç¨‹ä¸­éƒ½ä¼šå­˜åœ¨å°ºå¯¸ä¸º<code>0</code>çš„æ—¶å€™ï¼Œæ‰€ä»¥åœ¨åŠ è½½å®Œæˆæ—¶é¡µé¢ä¼šå­˜åœ¨å›¾ç‰‡æ™ƒåŠ¨çš„æƒ…å†µã€‚<br><code>base64</code>å›¾ç‰‡æ²¡æœ‰è¿™ä¸ªè¿‡ç¨‹ã€‚<br>ä½†æ˜¯<code>base64</code>ä¹Ÿæœ‰ä¸å¥½çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼Œ<code>base64</code>ç¼–ç åçš„å›¾ç‰‡ä½“ç§¯æ¯”ä¹‹å‰è¦å¤§ä¸Š1/3å·¦å³ã€‚</p><ol start="4"><li><strong>attr</strong></li></ol><p><code>attr</code>å’Œå®ƒåå­—ä¸€æ ·ï¼Œå®ƒèƒ½å¤Ÿé€‰æ‹©åˆ°è¯¥å…ƒç´ èº«ä¸Šçš„å±æ€§ã€‚<br>æ¯”å¦‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css"><span class="hljs-selector-tag">img</span>&#123;</span><br><span class="css">  <span class="hljs-attribute">text-align</span>:center;</span><br><span class="css">&#125;</span><br><span class="css"><span class="hljs-selector-tag">img</span><span class="hljs-selector-pseudo">::after</span>&#123;</span><br><span class="css">  <span class="hljs-attribute">content</span>: <span class="hljs-built_in">attr</span>(width);  </span><br><span class="css">&#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;100&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;å›¾ç‰‡&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><img src="/images/æœ‰è¶£çš„csså±æ€§content/attr-show.png" width="188" height="334" /><p>è¿™æ ·å¯ä»¥æ˜¾ç¤ºåˆ°<code>img</code>å…ƒç´ çš„<code>width</code>å±æ€§çš„å€¼ã€‚<br>å¹¶ä¸”ï¼Œå®ƒè¿˜èƒ½å¤Ÿè·å–åˆ°è‡ªå®šä¹‰å±æ€§çš„å€¼ï¼Œæ¯”å¦‚<code>attr(data-name)</code></p><p>æ³¨æ„ä¸€ä¸‹ï¼Œè¿™é‡Œçš„å±æ€§åç§°æ˜¯ä¸éœ€è¦<strong>å¼•å·</strong>çš„ã€‚</p><ol start="5"><li><strong>string</strong></li></ol><p>è¿™ä¸ªçš„è¯æˆ‘æƒ³åº”è¯¥ä¸ç”¨å¤šè¯´ï¼Œå¤§å®¶ç”¨çš„ä¹Ÿæ˜¯ç›¸å½“ç†Ÿç»ƒçš„ã€‚ä½†æ˜¯ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰ä½¿ç”¨è¿‡<code>Unicode</code>å­—ç¬¦ï¼Ÿ<br>åœ¨ä¹¦ä¸­å‘ç°äº†ä¸€ä¸ªåˆ©ç”¨æ­¤ç‰¹æ€§çš„å°æ —å­ğŸŒ°ï¼Œæ„Ÿè§‰éå¸¸å¥½ç”¨ï¼Œè¿™é‡Œå†™å‡ºæ¥ç»™å¤§å®¶å‚è€ƒä¸€ä¸‹ã€‚<br>ä¸‹é¢å®ç°äº†ä¸€ä¸ªåŠ¨æ€loadingåŠ è½½çš„æ•ˆæœã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">  dot&#123;</span><br><span class="css">    <span class="hljs-attribute">display</span>:inline-block;</span><br><span class="css">    <span class="hljs-attribute">height</span>:<span class="hljs-number">1em</span>;</span><br><span class="css">    <span class="hljs-attribute">line-height</span>:<span class="hljs-number">1</span>;</span><br><span class="css">    <span class="hljs-attribute">overflow</span>:hidden;</span><br><span class="css">    <span class="hljs-attribute">text-align</span><span class="hljs-selector-pseudo">:left</span>;</span><br><span class="css">    <span class="hljs-attribute">vertical-align</span>: -.<span class="hljs-number">25em</span>;</span><br><span class="css">  &#125;</span><br><span class="css">  dot<span class="hljs-selector-pseudo">::before</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;...\A..\A.&#x27;</span>;</span><br><span class="css">    <span class="hljs-attribute">animation</span>: loading <span class="hljs-number">3s</span> infinite step-start both;</span><br><span class="css">    <span class="hljs-attribute">display</span>:block;</span><br><span class="css">    <span class="hljs-attribute">white-space</span>: pre-wrap;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-keyword">@keyframes</span> loading &#123;</span><br><span class="css">    <span class="hljs-number">33%</span> &#123; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2em</span>); &#125;</span><br><span class="css">    <span class="hljs-number">66%</span> &#123; <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">1em</span>); &#125;</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>åŠ è½½ä¸­<br>  <span class="hljs-tag">&lt;<span class="hljs-name">dot</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">dot</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯æ•ˆæœï¼Œå¯èƒ½å›¾ç‰‡çœ‹èµ·æ¥æœ‰äº›ä¸æµç•…ï¼Œä½†æ˜¯å®é™…æ•ˆæœæ˜¯æµç•…çš„ã€‚</p><img src="/images/æœ‰è¶£çš„csså±æ€§content/loading.GIF" width="376" height="668" /><p>è¿™ä¸€æ–¹æ³•çš„å¥½å¤„å°±æ˜¯ç›¸å½“å¥½çš„å…¼å®¹æ€§ï¼Œå®ƒåˆ©ç”¨ä¸Šè¿°ç‰¹æ€§å’Œ<code>css3</code>çš„åŠ¨ç”»æ•ˆæœæ¥å®ç°ã€‚</p><p>å¹¶ä¸”åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸‹è™½ç„¶æ”¯æŒä¸äº†<code>animation</code>å±æ€§ï¼Œä½†æ˜¯å®ƒä¹Ÿèƒ½è‰¯å¥½çš„å±•ç¤ºé™æ€æ•ˆæœã€‚</p><ol start="6"><li><strong>open-quoteã€close-quote</strong></li></ol><p>å…³äºè¿™ä¸ªå±æ€§ï¼Œç®—æ˜¯ä¸€ä¸ªå¥½ç”¨å´åˆä¸å®ç”¨çš„å±æ€§å§ï¼Œå®ƒæœ¬èº«è‰¯å¥½çš„ç‰¹æ€§å¯ä»¥å®Œæˆå¹³å¸¸çš„è®¸å¤šä¸šåŠ¡é—®é¢˜ï¼Œä½†æ˜¯å´åˆæ˜¾å¾—æ²¡æœ‰é‚£ä¹ˆå¿…è¦ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">1</span>)&#123;</span><br><span class="css">    <span class="hljs-attribute">quotes</span>: <span class="hljs-string">&#x27;æé—®: &quot;&#x27;</span> <span class="hljs-string">&#x27;&quot;&#x27;</span>;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">1</span>)&#123;</span><br><span class="css">    <span class="hljs-attribute">quotes</span>: <span class="hljs-string">&#x27;å›ç­”: &quot;&#x27;</span> <span class="hljs-string">&#x27;&quot;&#x27;</span>;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">::before</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">content</span>: open-quote;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-tag">div</span> <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">::after</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">content</span>: close-quote;</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ques&quot;</span>&gt;</span>ä¸ºä»€ä¹ˆæˆ‘è¿™ä¹ˆå¸…ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;answ&quot;</span>&gt;</span>å¤©ç”Ÿçš„ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><img src="/images/æœ‰è¶£çš„csså±æ€§content/quotes-show.png" width="188" height="334" /><p>è¿˜æœ‰<code>no-open-quote</code> <code>no-close-quote</code>ï¼Œå’Œåå­—ä¸€ä¸‹ï¼Œå°±æ˜¯åœ¨å¼€å§‹å’Œç»“æŸä¸éœ€è¦è¯¥å†…å®¹ã€‚</p><ol start="7"><li><strong>counter</strong></li></ol><p>æ¥ä¸‹æ¥æœ€åè¦ç€é‡ä»‹ç»çš„ä¸€ä¸ªå±æ€§ï¼Œ<code>counter</code>ã€‚è®¡æ•°å™¨ã€‚</p><p>å¤§å®¶åº”è¯¥æœ‰è§è¿‡<code>word</code>æ–‡æ¡£ä¸­çš„é‚£ç§æ ‡é¢˜å§ï¼Œå…¶å®é‚£ç§æ ·å¼å¯ä»¥é€šè¿‡<code>css</code>æ¥è‡ªåŠ¨ç”Ÿæˆã€‚<br>æ²¡æœ‰é”™ï¼Œç”¨åˆ°çš„å°±æ˜¯ç°åœ¨ä»‹ç»çš„è¿™ä¸ªå±æ€§ã€‚<br>å®ƒåªéœ€è¦å‡ è¡Œcssä»£ç å°±èƒ½å®ç°é‚£æ ·çš„æ•ˆæœã€‚</p><p>é¦–å…ˆæ˜¯ç›¸å…³çš„å‡ ä¸ªå±æ€§ã€‚<br><code>counter-reset</code> <code>counter-increment</code> <code>counter()</code> <code>counters()</code></p><p>ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li><strong>å®šä¹‰è®¡æ•°å™¨åç§° counter-reset</strong></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-tag">div</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">counter-reset</span>: counter-name <span class="hljs-number">2</span>;  </span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">::after</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">content</span>: <span class="hljs-built_in">counter</span>(counter-name);</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è¿™æ˜¯counterè®¡æ•°å™¨çš„åˆå§‹å€¼: <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œåç§°å«<code>counter-name</code> å¹¶ä¸”èµ·å§‹ä¸º2<br><img src="/images/æœ‰è¶£çš„csså±æ€§content/counter-init-show.png" width="188" height="334" /></p><p>å…³äºåé¢<code>èµ·å§‹æ•°å­—</code>çš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>è´Ÿæ•°</code>ï¼Œä¹Ÿå¯ä»¥å†™æˆ<code>å°æ•°</code>ã€‚<br>ä¸è¿‡å¯¹äº<code>ie</code>å’Œ<code>firefox</code>æ˜¯ç›´æ¥æ— è§†çš„ï¼Œé»˜è®¤ä¸º<code>0</code>ï¼Œè€Œå¯¹äº<code>chrome</code>æ¥è¯´åˆ™æ˜¯å¤„ç†æˆå‘ä¸‹å–æ•´ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥åŒæ—¶å®šä¹‰å¤šä¸ªè®¡æ•°å™¨ã€‚å¦‚ä¸‹<br><code>counter-reset: coutner-name1 3 counter-name2 4</code></p><ul><li><strong>é€’å¢</strong></li></ul><p>ç¬¬ä¸€æ­¥ä¸­å®ç°çš„æ˜¯æ˜¾ç¤ºè®¡æ•°å™¨çš„å€¼ï¼Œè€Œæ­¤æ­¥éª¤åˆ™æ˜¯çœŸæ­£èƒ½è®©è®¡æ•°å™¨å¼€å§‹è®¡æ•°çš„å…³é”®ã€‚</p><p><code>counter-increment</code> ç”¨æ¥è®©è®¡æ•°å™¨ç´¯åŠ ï¼Œå¦‚ä¸‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-tag">div</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">counter-reset</span>: counter;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">::before</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;é€’å¢å‰æˆ‘æ˜¯: &#x27;</span> <span class="hljs-built_in">counter</span>(counter);</span><br><span class="css">    <span class="hljs-attribute">display</span>:block;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">::after</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">counter-increment</span>: counter <span class="hljs-number">2</span>;</span><br><span class="css">    <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;é€’å¢åæˆ‘æ˜¯: &#x27;</span> <span class="hljs-built_in">counter</span>(counter);</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾æ‰€ç¤º</p><img src="/images/æœ‰è¶£çš„csså±æ€§content/counter-increment-show.png" width="188" height="334" />  <p>ä¸Šé¢æŒ‡å®šäº†<code>counter</code>è®¡æ•°å™¨å¢åŠ äº†<code>2</code>ï¼Œåé¢çš„æ•°å­—ä¹Ÿå¯ä»¥æ˜¯<code>è´Ÿå€¼</code>ï¼Œè¿™æ ·å°±å®ç°äº†é€’å‡çš„æ•ˆæœã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶åœ¨ä¸åŒå…ƒç´ ä¸Šè®¡æ•°å™¨å¹¶ä¸ä¼šäº§ç”Ÿæ•ˆæœï¼Œä½†æ˜¯å¦‚æœåœ¨å…¶ä¸­ä½¿ç”¨äº†<code>counter-increment</code>é‚£ä¹ˆå®ƒå°±ä¼šäº§ç”Ÿæ•ˆæœã€‚</p><p><code>counter()</code>å’Œ<code>counters()</code>è¿˜æœ‰ä¸€äº›å‚æ•°å¯ä»¥é€‰æ‹©</p><blockquote><p>counter(name, style)<br>counters(name, string)<br>counters(name, string, style)</p></blockquote><p><code>strig</code>å°±æ˜¯è¿æ¥ç¬¦</p><p><code>style</code>çš„è¯ï¼Œå®ƒçš„å€¼å’Œ<code>list-style</code>çš„å€¼ç›¸åŒ<br>æ‰€ä»¥åœ¨å±•ç¤ºæ—¶ï¼Œå¯ä»¥ä¸ä¸€å®šæ˜¾ç¤ºæ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤ºå…¶ä»–çš„å­—ç¬¦ã€‚<br>å…·ä½“å¯ä»¥å‚è€ƒ <a href="https://www.w3school.com.cn/css/pr_list-style-type.asp">list-style</a></p><p>æ¯”å¦‚ä¸‹é¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"></span><br><span class="css">  <span class="hljs-selector-class">.box</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">counter-reset</span>: counter;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-class">.box</span><span class="hljs-selector-pseudo">::before</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;æˆ‘æœ‰å¤šå¸…?&#x27;</span>;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-class">.counter</span><span class="hljs-selector-pseudo">::after</span>&#123;</span><br><span class="css">    <span class="hljs-attribute">counter-increment</span>: counter;</span><br><span class="css">    <span class="hljs-attribute">quotes</span>: <span class="hljs-string">&#x27;ç»å¯¹&quot;&#x27;</span> <span class="hljs-string">&#x27;+&quot;å•Š&#x27;</span>;</span><br><span class="css">    <span class="hljs-attribute">content</span>: open-quote <span class="hljs-built_in">counters</span>(counter, <span class="hljs-string">&#x27;-&#x27;</span>, upper-latin) close-quote;</span><br><span class="css">  &#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;counter&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <br></code></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹å›¾<br><img src="/images/æœ‰è¶£çš„csså±æ€§content/quotes-show.png" width="188" height="334" /></p><p>å…³äºå‰é¢è¯´çš„<code>word</code>æ–‡æ¡£æ ‡é¢˜çš„çº§è”æ•ˆæœï¼Œç”¨åˆ°çš„å°±æ˜¯<code>counters()</code>è¿™ä¸ªæ–¹æ³•</p><p>ä¸‹é¢æ˜¯ç®€å•çš„æ•ˆæœã€‚</p><pre><code class="language-html">&lt;style&gt;  .reset&#123;    counter-reset: counter;  &#125;  .counter::after&#123;    counter-increament: counter;    content: couters(counter, '-') '.';  &#125;&lt;/style&gt;&lt;div class=&quot;reset&quot;&gt;  &lt;div class=&quot;counter&quot;&gt;    ç¬¬ä¸€    &lt;div class=&quot;reset&quot;&gt;      &lt;div class=&quot;counter&quot;&gt;ç¬¬ä¸€ä¸€&lt;/div&gt;      &lt;div class=&quot;counter&quot;&gt;ç¬¬ä¸€äºŒ&lt;/div&gt;    &lt;/div&gt;  &lt;/div&gt;  &lt;div class=&quot;counter&quot;&gt;    ç¬¬äºŒ    &lt;div class=&quot;reset&quot;&gt;      &lt;div class=&quot;counter&quot;&gt;        ç¬¬äºŒä¸€        &lt;div class=&quot;reset&quot;&gt;          &lt;div class=&quot;counter&quot;&gt;ç¬¬äºŒä¸€&lt;/div&gt;          &lt;div class=&quot;counter&quot;&gt;ç¬¬äºŒäºŒ&lt;/div&gt;        &lt;/div&gt;      &lt;/div&gt;      &lt;div class=&quot;counter&quot;&gt;ç¬¬äºŒäºŒ&lt;/div&gt;    &lt;/div&gt;  &lt;/div&gt;    &lt;div class=&quot;counter&quot;&gt;    ç¬¬ä¸‰  &lt;/div&gt;&lt;/div&gt;</code></pre><p>æ•ˆæœå¦‚ä¸‹å›¾</p><img src="/images/æœ‰è¶£çš„csså±æ€§content/counters.png" width="188" height="334" />  <h2 id="å®Œç»“">å®Œç»“</h2><p>åˆç†çš„ä½¿ç”¨csså±æ€§å¯ä»¥è®©ä½ åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­å‡å°‘å¾ˆå¤šçš„å·¥ä½œï¼Œä½¿ç”¨csså®Œæˆçš„æ•ˆæœæ€»æ¯”ç”¨csså®Œæˆæ€§èƒ½è¦å¥½çš„å¤šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CSS</tag>
      
      <tag>content</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Reactæ—¥å†ç»„ä»¶</title>
    <link href="/2020/07/26/React%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6/"/>
    <url>/2020/07/26/React%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯æœ¬äººå†™çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæ¬¢è¿å„ä½è§‚çœ‹çš„æœ‹å‹ğŸ‘­ã€‚<br><img src="/images/Reactæ—¥å†ç»„ä»¶/2de9716fa4db0bdb643f6a0e87ad6819.JPG" width=100 height=100 /><br>å…ˆä»‹ç»ä¸€ä¸‹è‡ªå·±ï¼Œæœ¬äººæ˜¯ä¸€ä¸ªåˆšåˆšè¿›å…¥ç¤¾ä¼šçš„å‰ç«¯èœé¸Ÿï¼Œç›®å‰æœåŠ¡äºä¸€å®¶å…¬å¸ğŸ­ã€‚</p><h2 id="1-æ•…äº‹èƒŒæ™¯">1 æ•…äº‹èƒŒæ™¯</h2><p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œæœ€è¿‘åœ¨å…¬å¸çš„h5é¡¹ç›®ä¸­ç¢°åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œé¡µé¢ä¸­éœ€è¦æœ‰ä¸€ä¸ªç”¨äºæ˜¾ç¤ºæœ€è¿‘è®¢å•çš„æ—¥å†æ ·å¼ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼Œä¸€ä¸ªæ—¥å†ï¼Œè¿™ç»™æˆ‘éš¾åˆ°äº†ï¼Œæœ¬æ¥æƒ³ç€ä¸å°±æ˜¯æ˜¯ä¸€ä¸ªæ—¥å†å—ï¼Œè¿™æœ‰ä»€ä¹ˆéš¾çš„ï¼Œåæ¥æˆ‘å‘ç°å¥½åƒä¼¼ä¹æ˜¯é«˜ä¼°äº†è‡ªå·±ã€‚</p><p>å…ˆä»‹ç»ä¸‹å…³äºè¿™ä¸ªæ—¥å†çš„æ ·å¼ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œè„‘è¡¥ä¸€ä¸‹è‹¹æœä¸­è‡ªå¸¦çš„æ—¥å†æˆ–çœ‹ä¸‹å›¾ï¼ŒåŸºæœ¬å’Œå®ƒå·®ä¸å¤šã€‚å¤šäº†ä¸€ç‚¹éœ€æ±‚æ˜¯ï¼Œåœ¨ç‚¹å‡»æŸä¸€ä¸ªæ—¥æœŸæˆ–è€…æ˜¯æ‰‹æŒ‡æ»‘åŠ¨è¿‡ç¨‹ä¸­ï¼Œæ—¥å†ä¸‹æ–¹çš„è®¢å•åˆ—è¡¨ä¼šæ ¹æ®æ—¥æœŸçš„å˜åŠ¨è‡ªåŠ¨è·³è½¬åˆ°å½“å‰æ—¥æœŸçš„è®¢å•ã€‚<br><img src="/images/Reactæ—¥å†ç»„ä»¶/IMG_0144.PNG" width=188 height=334 /><br><img src="/images/Reactæ—¥å†ç»„ä»¶/IMG_0145.PNG" width=188 height=334 /></p><p>å› ä¸ºé¡¹ç›®ç”¨çš„æŠ€æœ¯æ ˆæ˜¯Reactï¼Œä¼¼ä¹ç†æ‰€åº”å½“è¯¥ç”¨ Ant Design æ¥å®Œæˆï¼Œå°±pcç«¯è€Œè¨€ï¼ŒAnt Design çš„<a href="https://ant.design/components/calendar-cn/">æ—¥å†ç»„ä»¶</a>ç›¸å¯¹äºæ¥è¯´ç®—æ˜¯éå¸¸ä¸é”™ä¸”è¿˜ç®—å¥‘åˆçš„ï¼Œå¥ˆä½•h5ä½¿ç”¨çš„æ˜¯Ant Design Mobileï¼Œç›¸å¯¹äºæ¥è¯´çš„è¯ï¼Œä»¥ä¸ªäººä¹‹è§ï¼Œç¡®å®è¿˜æœ‰è®¸å¤šå¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Œmobileä¸­çš„<a href="https://mobile.ant.design/components/calendar-cn/">æ—¥å†ç»„ä»¶</a>å¾ˆå¤šåœ°æ–¹è¡¨ç°çš„è¿˜æ˜¯ä¸å¤Ÿçµæ´»ï¼Œæœ‰äº›åœ°æ–¹è¿˜æ˜¯è¿‡äºå®šåˆ¶åŒ–ï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥å®Œå–„ã€‚</p><p>æ‰€ä»¥ï¼Œç»è¿‡è‡ªå·±å†ä¸‰çš„å¯¹mobileçš„Calendarç»„ä»¶çš„ä¿®æ”¹ï¼ˆç78ä¹±æï¼‰ä»¥åŠæ€æƒ³æ–—äº‰ï¼ˆä¸æƒ³æäº†ï¼‰ä¹‹åã€‚ç»ˆäºï¼Œé€‰æ‹©è‡ªå·±åšå°è£…ï¼Œåœ¨å°è£…çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿè®©æœ¬äººå­¦ä¹ åˆ°äº†ä¸€äº›ä¹‹å‰è¿˜æ²¡æœ‰æ³¨æ„çš„ä¸œè¥¿ã€‚ä»Šå¤©ä¹Ÿä¸€å¹¶ä½œä»‹ç»ï¼Œè¿™ä¹Ÿæ˜¯å¯¹æ–°çŸ¥è¯†çš„å†ä¸€æ¬¡å¤ä¹ ã€‚</p><h2 id="2-æ­£ç‰‡å¼€å§‹">2 æ­£ç‰‡å¼€å§‹</h2><p>è¿™é‡Œå…ˆä¸ä»‹ç»å…·ä½“ä¸šåŠ¡ä¸Šå…³äºåˆ—è¡¨è·³è½¬æ–¹é¢çš„å†…å®¹ã€‚åªå¯¹æ—¥å†ç›¸å…³ä½œä»‹ç»ğŸ™‚ã€‚</p><h3 id="Date">Date</h3><p>é¦–å…ˆæ˜¯ä¸æ—¥å†æœ‰é‡è¦å…³ç³»çš„API Dateã€‚å¯èƒ½å¾ˆå¤šäººä¼šè¯´ï¼Œä¸ä¼šå§ï¼Œä¸ä¼šå§ï¼Œä¸ä¼šè¿˜æœ‰äººä¼šå»ç”¨åŸç”ŸDateå§ã€‚ç°åœ¨ç¡®å®åœ¨momentjså’Œdayjsé¢å‰ï¼ŒåŸç”ŸDateçš„æ“ä½œç¡®å®æ˜¾å¾—æœ‰äº›å¤æ‚ï¼Œä½†æ˜¯æ€»å½’æ¥è¯´è¿˜æ˜¯è¦å¥½å¥½å­¦ä¹ åŸç”Ÿjsçš„çŸ¥è¯†ï¼Œè¿™æ ·æ‰èƒ½æœ‰æ›´å¥½çš„æå‡ã€‚æ€»çš„æ¥è¯´ï¼Œå¤šå­¦æ€»ä¸ä¼šé”™ï¼ˆè™½ç„¶è¿˜æ˜¯å¾ˆæ‡’ï¼‰ã€‚</p><ol><li>æ—¥æœŸåˆ›å»º<br><code>new Date()</code></li></ol><ul><li>é»˜è®¤ä¸ä¼ å‚æ•°æ—¶ï¼Œè¿”å›çš„å½“å‰çš„æ—¶é—´ <code>new Date()</code></li><li>ä¼ é€’æ—¶é—´æˆ³ <code>new Date(19999009090)</code></li><li>æˆ–è€…å†æ”¾ä¸€ä¸ªDateå®ä¾‹ <code>new Date(new Date())</code></li><li>ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æŒ‰é¡ºåº å¹´ã€æœˆã€æ—¥â€¦ <code>new Date(2020, 6, 1)</code></li><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…³äºæœˆä»½çš„å‚æ•°ï¼ŒèŒƒå›´æ˜¯0-11ã€‚</li></ul><p>æœ‰äº›æƒ…å†µä¸‹åœ¨éœ€è¦åšç›¸å…³è®¡ç®—æ—¶ï¼Œä¼ é€’å‚æ•°ä¼šç»™æˆ‘ä»¬çœä¸‹å¾ˆå¤šåŠŸå¤«<br>æ¯”å¦‚ï¼š<br><strong>è·å–å½“å‰æœˆä»½çš„å¤©æ•°</strong><br>æ¯”å¦‚ç°åœ¨æ˜¯7æœˆä»½ï¼Œä½ æƒ³è®¡ç®—ä¸Šä¸€æœˆä»½çš„å¤©æ•°ï¼Œä½ å¯ä»¥è¿™æ ·<br><code>new Date(2020, 6, 0).getDate() //30</code><br>å½“å‚æ•°dayä¸º0æ—¶ï¼Œmonthä¼šè‡ªåŠ¨-1ï¼Œç›¸å½“äº<code>new Date(2020, 6, 30)</code><br><strong>è·å–å½“å‰æœˆç¬¬ä¸€å¤©æˆ–è€…æœ€åä¸€å¤©çš„ä¿¡æ¯</strong><br>åŸç†åŒä¸Šï¼Œå¯ä»¥è¿™æ ·<code>new Date(2020, 6).getDay()</code>ï¼Œè¡¨ç¤º7æœˆç¬¬ä¸€å¤©æ˜ŸæœŸå‡ <br>2. æ—¥æœŸè®¾ç½®<br><code>setDate()</code> è®¾ç½®å‡ å·<br><code>setMonth()</code> è®¾ç½®å‡ æœˆï¼Œæ³¨æ„å’Œä¹‹å‰è¯´çš„ä¸€æ ·ï¼ŒèŒƒå›´æ˜¯0-11<br><code>setFullYear()</code> è®¾ç½®å¹´ä»½ï¼ŒsetYearçš„æ›¿ä»£ç‰ˆ<br>3. æ—¥æœŸè·å–<br><code>getTime()</code> è¿”å›è‡ª1970å¹´1æœˆ1æ—¥åˆ°ç°åœ¨çš„æ¯«ç§’æ•°<br><code>getDay()</code> æ˜ŸæœŸå‡ ï¼ˆèŒƒå›´æ˜¯0-6ï¼Œä¸€ä¸ªæ˜ŸæœŸä»æ˜ŸæœŸå¤©å¼€å§‹ï¼‰<br><code>getDate()</code> å‡ å·<br><code>getMonth()</code> å‡ æœˆ<br><code>getFullYear()</code> å“ªä¸€å¹´</p><p>æœ‰äº†è¿™å‡ ä¸ªAPIçš„æ”¯æŒï¼Œåœ¨åšä¸€äº›æ—¥æœŸè®¡ç®—æ—¶ä¼šæ˜¾å¾—éå¸¸çš„æ–¹ä¾¿ã€‚</p><h3 id="Grid">Grid</h3><p>ç¬¬äºŒä¸ªä»‹ç»çš„ä¸jsæ— å…³ï¼Œä¸cssç›¸å…³ï¼Œæ˜¯å…³äºæ—¥å†çš„å¸ƒå±€é—®é¢˜ã€‚Gridæ …æ ¼å¸ƒå±€ï¼Œå¬è¯´è¿™ç©æ„å„¿è€æ—©å°±å‡ºäº†ï¼Œå¥ˆä½•æœ¬äººçœ¼ç•Œçª„å±…ç„¶ç°åœ¨æ‰çŸ¥é“ï¼Œç”¨äº†ä¹‹åå‘ç°è¿™ä¸ªä¸œè¥¿çœŸçš„å¥½é¦™ï¼Œæœ¬äººè®¤ä¸ºæ˜¯éå¸¸é€‚åˆåšåƒæ—¥å†è¿™æ ·çš„ç»„ä»¶å·¥å…·çš„å¸ƒå±€ã€‚</p><p>ç›¸å…³ç”¨åˆ°APIæœ‰å¦‚ä¸‹ï¼ˆåé¢çš„å›¾åŸºæœ¬éƒ½æ¥è‡ªå·±<a href="http://www.ruanyifeng.com/home.html">é˜®ä¸€å³°è€å¸ˆ</a>çš„åšå®¢ï¼‰</p><p><strong>å®¹å™¨æ ·å¼</strong></p><ol><li>display<br>å¯ä»¥æ˜¯å—çº§æ …æ ¼ <img src="https://www.wangbase.com/blogimg/asset/201903/bg2019032504.png" alt="grid"><br>ä¹Ÿå¯ä»¥æ˜¯è¡Œå†…æ …æ ¼ <img src="https://www.wangbase.com/blogimg/asset/201903/bg2019032505.png" alt="inline-grid"><br>å’Œæ™®é€šçš„è¡Œå†…å—çº§æ„æ€ä¸€æ ·ï¼Œè¡Œå†…èƒ½æœ‰å¤šä¸ªæ …æ ¼å¸ƒå±€å¹¶æ’<br>å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯åœ¨girdå¸ƒå±€ä¸‹ï¼Œæœ‰ä¸€äº›æ ·å¼çš„è®¾ç½®æ— æ³•äº§ç”Ÿæ•ˆæœï¼Œæ¯”å¦‚:</li></ol><blockquote><p>floatã€display: inline-blockã€display: table-cellã€vertical-alignå’Œcolumn-*</p></blockquote><ol start="2"><li>grid-template-columns &amp; grid-template-rows<br>ç”¨äºå®šä¹‰gridå¸ƒå±€ä¸‹è¡Œå’Œåˆ—çš„æ•°é‡ï¼Œå®ƒçš„å€¼æœ‰å¾ˆå¤šç§</li></ol><ul><li>é•¿åº¦å•ä½<br><code>grid-template-columns: 100px 100px 100px;</code><br><code>grid-template-rows: 100px 100px 100px;</code><br>è¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ª 3è¡Œä¸‰åˆ—çš„å¸ƒå±€<br><img src="https://www.wangbase.com/blogimg/asset/201903/bg2019032506.png" alt=""></li><li>fr<br>æ„æ€å¤§æ¦‚å°±æ˜¯ä¸€ä¸ªç‰‡æ®µï¼Œæ¯”å¦‚<br><code>grid-template-columns: 1fr 1fr;</code><br>æ„æ€æ˜¯å°†æ•´ä½“å¸ƒå±€åˆ†å‰²æˆç›¸ç­‰çš„ä¸¤åˆ—<br><img src="https://www.wangbase.com/blogimg/asset/201903/1_bg2019032509.png" alt=""><br><code>grid-template-columns: 150px 1fr 2fr;</code><br>æ„æ€æ˜¯ç¬¬äºŒä¸ªç‰‡æ®µæ˜¯ç¬¬ä¸€ä¸ªçš„ä¸¤å€<img src="https://www.wangbase.com/blogimg/asset/201903/bg2019032510.png" alt=""></li><li>repeatå‡½æ•°<br>æœ‰æ—¶å€™ä½ ä¼šè§‰å¾—ä¸€ä¸ªä¸ªè®¾ç½®å—çš„å®½åº¦å¾ˆéº»çƒ¦ï¼Œrepeatå‡½æ•°å¯ä»¥å°†ä½ è®¾å®šçš„å—æ•°æ®è¿›è¡ŒæŒ‡å®šçš„é‡å¤<br><code>grid-template-columns: repeat(3, 100px);</code><br>ç­‰åŒäº<br><code>grid-template-columns: 100px 100px 100px;</code><br>è¿˜å¯ä»¥ä½¿ç”¨å…³é”®å­— <code>auto-fill</code><br><code>grid-template-columns: repeat(auto-fill, 100px);</code><br>å®ƒä¼šæŒç»­å¹³é“º100pxå®½çš„å—ç›´åˆ°å½“å‰è¡Œå®½åº¦ä¸è¶³æ—¶ï¼Œæ¢è¡Œ</li><li>minmaxå‡½æ•°<br><code>grid-template-columns: 100px minmax(100px, 200px) 100px;</code><br>è¡¨ç¤ºä¸­é—´åˆ—çš„å®½åº¦èŒƒå›´åœ¨100px å’Œ 200pxä¹‹é—´<br>å‚æ•°ä¹Ÿæ”¯æŒ fr å…³é”®å­—</li><li>auto<br>å½“ä½ æŒ‡å®šäº†3åˆ—ï¼Œå¹¶è®¾ç½®äº†ä¸¤åˆ—çš„å®½åº¦ï¼Œä¸”å¸Œæœ›å¦ä¸€åˆ—å®½åº¦è‡ªé€‚åº”æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å…³é”®å­—ã€‚å¦‚<br><code>grid-template-columns: 100px auto 100px;</code>ä¸­é—´åˆ—ä¼šè‡ªåŠ¨è‡ªé€‚åº”</li></ul><ol start="3"><li><p>grid-row-gap &amp; grid-columns-gap &amp; grid-gap<br>è®¾ç½®å„ä¸ªå•å…ƒæ ¼ä¹‹é—´çš„é—´è·<br><code>grid-row-gap: 20px;</code><br><code>grid-column-gap: 20px;</code><br><img src="https://www.wangbase.com/blogimg/asset/201903/bg2019032511.png" alt=""><br>grid-gapåˆ™æ˜¯å‰ä¸¤ä¸ªçš„æ··åˆå†™æ³•</p></li><li><p>justify-items &amp; align-items &amp; place-items<br>å€¼ï¼š<code>start | end | center | stretch</code><br>è®¾ç½®å•å…ƒæ ¼çš„æ°´å¹³å‚ç›´å¯¹é½æ–¹å¼ï¼Œå‚æ•°å’Œflexå·®ä¸å¤šå°±ä¸è¯´äº†ï¼ˆæ‡’ï¼‰</p></li><li><p>justify-content &amp; align-content &amp; place-content<br>å€¼ï¼š<code>start | end | center | stretch | space-around | space-between | space-evenly</code><br>å®¹æ˜“çš„æ°´å¹³å‚ç›´å¯¹é½æ–¹å¼ï¼Œå‚æ•°å’Œflexå·®ä¸å¤šå°±ä¸è¯´äº†ï¼ˆæ‡’ï¼‰</p></li></ol><p><strong>é¡¹ç›®æ ·å¼</strong></p><ol><li>grid-column-start &amp; grid-column-end &amp; grid-row-start &amp; grid-row-end<br>å°±å’Œåå­—å·®ä¸å¤šçš„æ„æ€ï¼Œä»–å¯ä»¥è®©å•å…ƒæ ¼çš„æ”¾ç½®ä½ç½®å‘ç”Ÿåç§»ï¼Œæœ‰äº†è¿™ä¸ªå±æ€§ï¼Œå¯ä»¥è®©æœ¬é¡¹ç›®ä¸­æ—¥å†çš„æœˆå¼€å¤´å‘ç”Ÿåç§»è€Œä¸å¿…åšå…¶ä»–çš„jsæ“ä½œã€‚<br>æŒ‰ç…§é˜®è€å¸ˆä¸Šé¢è¯´çš„å¯èƒ½æ›´å®¹æ˜“ç†è§£ï¼Œå®¹å™¨åˆ†æˆäº†æŒ‡å®šçš„è¡Œå’Œåˆ—ï¼Œä¹Ÿä¼šéšå³ç”Ÿæˆç±»ä¼¼è¡¨æ ¼çš„è¾¹æ¡†çº¿ï¼Œä½†æ˜¯ä¸ä¼šæ˜¾ç¤ºã€‚æ‰€ä»¥åç§»çš„æŒ‰ç…§ç½‘æ ¼çº¿çš„ç´¢å¼•è¿›è¡Œåç§»ã€‚<br><img src="https://www.wangbase.com/blogimg/asset/201903/1_bg2019032503.png" alt=""><br>æ¯”å¦‚<br><code>grid-column-start: 2;</code> è¡¨ç¤ºæŸä¸€å•å…ƒæ ¼çš„èµ·å§‹ä½ç½®æ˜¯å®¹å™¨çš„åˆ—ç½‘æ ¼çº¿çš„ç¬¬äºŒæ ¹ã€‚<br><code>grid-column-end: 4;</code> è¡¨ç¤ºæŸä¸€ä½†äº‘å“¥çš„ç»“æŸä½ç½®æ˜¯å®¹å™¨çš„åˆ—ç½‘æ ¼çº¿çš„ç¬¬å››æ ¹ã€‚<br><img src="https://www.wangbase.com/blogimg/asset/201903/bg2019032526.png" alt=""></li></ol><p><strong>å…¶ä»–å±æ€§</strong></p><p><code>grid-column-end</code> å•å…ƒæ ¼çš„åˆ—ç»“æŸä½ç½®<br><code>grid-row-start</code> å•å…ƒæ ¼çš„è¡Œèµ·å§‹ä½ç½®<br><code>grid-row-end</code> å•å…ƒæ ¼çš„è¡Œç»“æŸä½ç½®</p><ol start="2"><li>justify-self &amp; align-self &amp; place-self<br>è®¾ç½®å•å…ƒæ ¼çš„æ°´å¹³å‚ç›´å¯¹é½æ–¹å¼ï¼Œå’Œä¸Šé¢å®¹å™¨çš„<code>justify-items</code>ç­‰æ•ˆæœç›¸åŒï¼Œåªæ˜¯æ­¤å±æ€§æ˜¯é’ˆå¯¹å•ä¸ªå•å…ƒæ ¼çš„ã€‚<br>ã€å…·ä½“ç»†èŠ‚ç›¸å…³çš„APIå¯ä»¥å‚è€ƒ<a href="http://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html">é˜®ä¸€å³°è€å¸ˆçš„åšå®¢</a>æˆ–è€…è‡ªè¡ŒæŸ¥çœ‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/grid">MDN</a>è¿›è¡Œäº†è§£ã€‘</li></ol><h3 id="Calendar">Calendar</h3><p>å…·ä½“æ ·å¼æŸ¥çœ‹ä¸‹å›¾</p><ol><li><p>å•æ—¥ç€é‡<br><img src="/images/Reactæ—¥å†ç»„ä»¶/1595859653524_95CA67F7-E00E-4AA0-A51C-85895C099433.png" width="200" height="100" /></p></li><li><p>å‘¨ç€é‡<br><img src="/images/Reactæ—¥å†ç»„ä»¶/1595859783955_DE771404-5E95-4876-BA63-44D01118D2EF.png" width="200" height="100" /></p></li><li><p>è‰²è°ƒæ›´æ”¹<br><img src="/images/Reactæ—¥å†ç»„ä»¶/1595859830441_DBC34DF0-2308-4DBB-90F7-A70B70795B82.png" width="200" height="100" /></p></li><li><p>æ˜¾ç¤ºå•å‘¨<br><img src="/images/Reactæ—¥å†ç»„ä»¶/1595860081764_790B7081-F485-487D-9B74-5E88C13FD5FF.png" width="200" height="100" /></p></li><li><p>è®¾ç½®é¢å¤–å†…å®¹<br><img src="/images/Reactæ—¥å†ç»„ä»¶/15938957-5F8F-4A7A-9F91-544D239677EC.png" width="200" height="100" /></p></li></ol><p>å› ä¸ºæ¯ä¸€ä¸ªå•å…ƒæ ¼å¤–å±‚è®¾ç½®äº†ç›¸å¯¹å®šä½<code>relative</code>ï¼Œæ‰€ä»¥å¦‚æœä¸å¸Œæœ›é¢å¤–å†…å®¹å¯¼è‡´ä¸ªåˆ«å•å…ƒæ ¼ä½ç½®ä¸ç»Ÿä¸€ï¼Œå¯ä»¥å°†å†…å®¹è®¾ç½®ä¸º<code>position: absolute;</code></p><p>å…·ä½“çš„å…¶ä»–åŠŸèƒ½å¯æŸ¥çœ‹ä¸‹æ–¹API</p><p><strong>API</strong></p><table><thead><tr><th style="text-align:center">props</th><th style="text-align:center">è¯´æ˜</th><th style="text-align:center">ç±»å‹</th><th style="text-align:center">é»˜è®¤å€¼</th></tr></thead><tbody><tr><td style="text-align:center">collapse</td><td style="text-align:center"><div style="width:300pt">æ˜¯å¦æŠ˜å ï¼ŒæŠ˜å æ—¶åªæ˜¾ç¤ºä¸€å‘¨çš„æ—¥æœŸ</div></td><td style="text-align:center">boolean</td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">lunerVisible</td><td style="text-align:center">æ˜¯å¦æ˜¾ç¤ºå†œå†æ—¶é—´</td><td style="text-align:center">boolean</td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">showToday</td><td style="text-align:center">æ˜¯å¦ç€é‡æ˜¾ç¤ºå½“å¤©ï¼Œå¯¹å½“å¤©æ—¶é—´ç€é‡è¡¨ç¤º</td><td style="text-align:center">boolean</td><td style="text-align:center">true</td></tr><tr><td style="text-align:center">showWeek</td><td style="text-align:center">æ˜¯å¦ç€é‡æ˜¾ç¤ºå½“å‰å‘¨ï¼Œå¯¹æœ¬å‘¨æ—¶é—´ç€é‡è¡¨ç¤ºï¼Œå½“showTodayå’ŒshowWeekåŒæ—¶å­˜åœ¨æ—¶ï¼ŒshowWeekç”Ÿæ•ˆ</td><td style="text-align:center">boolean</td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">activeStyle</td><td style="text-align:center">ç€é‡æ˜¾ç¤ºçš„æ ·å¼ï¼Œå¯ä»¥è‡ªå®šä¹‰ç€é‡æ˜¾ç¤ºçš„æ ·å¼</td><td style="text-align:center">Object</td><td style="text-align:center">{}</td></tr><tr><td style="text-align:center">value</td><td style="text-align:center">å½“å‰æ—¶é—´ï¼Œå¯é…åˆrc-formè¿›è¡Œä½¿ç”¨ï¼Œä¸ä¼ é€’æ­¤å‚æ•°æ—¶ç”±å†…éƒ¨æ§åˆ¶çŠ¶æ€å˜åŒ–</td><td style="text-align:center">Date</td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">onChange</td><td style="text-align:center">ç›‘å¬æ—¥æœŸæ—¶é—´å˜åŒ–</td><td style="text-align:center">(date: Date) =&gt; any</td><td style="text-align:center">æ— </td></tr><tr><td style="text-align:center">hot</td><td style="text-align:center">æ—¥æœŸä¸‹ç€é‡ç‚¹</td><td style="text-align:center">æ˜¯å¦æ˜¾ç¤ºå†œå†æ—¶é—´</td><td style="text-align:center">Array<Date></td></tr><tr><td style="text-align:center">renderHeader</td><td style="text-align:center">æ—¥å†çš„header</td><td style="text-align:center">(date: Date) =&gt; ReactNode</td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">renderFooter</td><td style="text-align:center">æ—¥å†çš„footer</td><td style="text-align:center">(date: Date) =&gt; ReactNode</td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">renderDateFooter</td><td style="text-align:center">æ¯æ—¥çš„footer</td><td style="text-align:center">(date: Date) =&gt; ReactNode | ReactNode</td><td style="text-align:center">false</td></tr><tr><td style="text-align:center">colorStyle</td><td style="text-align:center">æ—¥å†çš„æ•´ä½“é¢œè‰²é£æ ¼</td><td style="text-align:center">é¢œè‰²ï¼ˆç›®å‰åªæ”¯æŒåå…­è¿›åˆ¶é¢œè‰²ï¼‰</td><td style="text-align:center">#00CC73</td></tr><tr><td style="text-align:center">showLastNext</td><td style="text-align:center">æ˜¯å¦æ˜¾ç¤ºä¸Šä¸‹æœˆä»½çš„æ—¶é—´ä»¥å¡«å……æœˆå‰å’Œæœˆåçš„ç©ºç¼º</td><td style="text-align:center">boolean</td><td style="text-align:center">false</td></tr></tbody></table><p>è¿˜æœ‰ä¸€äº›æ–¹æ³•ä¾›è°ƒç”¨ï¼Œå¯åˆ©ç”¨<code>ref</code>æ¥è·å–ç›¸å…³æ–¹æ³•</p><table><thead><tr><th style="text-align:center">name</th><th style="text-align:center">è¯´æ˜</th><th style="text-align:center">ä½¿ç”¨</th></tr></thead><tbody><tr><td style="text-align:center">getMonthStart</td><td style="text-align:center">å½“æœˆç¬¬ä¸€å¤©</td><td style="text-align:center">getMonthStart(month?, year?) =&gt; Date</td></tr><tr><td style="text-align:center">getMonthEnd</td><td style="text-align:center">å½“æœˆæœ€åä¸€å¤©</td><td style="text-align:center">getMonthEnd(month?, year?) =&gt; Date</td></tr><tr><td style="text-align:center">getMonthDays</td><td style="text-align:center">è·å–å½“æœˆå¤©æ•°</td><td style="text-align:center">getMonthDays(month?, year?) =&gt; number</td></tr><tr><td style="text-align:center">getThisWeek</td><td style="text-align:center">æœ¬å‘¨å¼€å§‹å’Œç»“æŸ</td><td style="text-align:center">getThisWeek(date) =&gt; [start:Date, end:Date]</td></tr><tr><td style="text-align:center">lastYear</td><td style="text-align:center">å»å¹´</td><td style="text-align:center">lastYear(date?) =&gt; Date</td></tr><tr><td style="text-align:center">lastMonth</td><td style="text-align:center">ä¸Šä¸ªæœˆ</td><td style="text-align:center">lastMonth(date?) =&gt; Date</td></tr><tr><td style="text-align:center">lastWeek</td><td style="text-align:center">ä¸Šå‘¨</td><td style="text-align:center">lastWeek(date?) =&gt; Date</td></tr><tr><td style="text-align:center">lastDay</td><td style="text-align:center">æ˜¨å¤©</td><td style="text-align:center">lastDay(date?) =&gt; Date</td></tr><tr><td style="text-align:center">nextYear</td><td style="text-align:center">æ˜å¹´</td><td style="text-align:center">nextYear(date) =&gt; Date</td></tr><tr><td style="text-align:center">nextMonth</td><td style="text-align:center">ä¸‹ä¸ªæœˆ</td><td style="text-align:center">nextMonth(date?) =&gt; Date</td></tr><tr><td style="text-align:center">nextWeek</td><td style="text-align:center">ä¸‹å‘¨</td><td style="text-align:center">nextWeek(date?) =&gt; Date</td></tr><tr><td style="text-align:center">nextDay</td><td style="text-align:center">æ˜å¤©</td><td style="text-align:center">nextDay(date?) =&gt; Date</td></tr></tbody></table><p>ä»<code>lastYear</code>å¼€å§‹çš„åé¢å‡ ä¸ªæ–¹æ³•ï¼Œåœ¨ä¼ å…¥Dateå‚æ•°æ—¶åªä¼šè¿”å›ç»“æœï¼Œè‹¥æœªä¼ å‚æ•°åˆ™ç»„ä»¶çŠ¶æ€ç”±å¤–éƒ¨æ§åˆ¶æˆ–ç”±å†…éƒ¨æ§åˆ¶ä¼šè§¦å‘<code>onChange</code>å›è°ƒã€‚</p><h2 id="3-ç»“æŸ">3 ç»“æŸ</h2><p>è¿™å°±æ˜¯æ­¤æ¬¡æ‰€è¦è¯´çš„æ‰€æœ‰ï¼Œå¦‚æœ‰ä»»ä½•é—®é¢˜å¯ç›´æ¥è”ç³»æˆ‘ã€‚å¦‚æœè§‰å¾—ä¸œè¥¿å¾ˆçƒ‚å¯ä»¥ç›´æ¥æŒ‡å‡ºã€‚å¦‚æœå¯¹æ­¤ç»„ä»¶æ„Ÿå…´è¶£å¯ä»¥å»<a href="https://github.com/food-billboard/React-Component-Calendar">github</a>ä¸Šç»™ä¸€ä¸ªstarâœ¨ï¼Œå¦‚æœè§‰å¾—æ–‡ç« å†…å®¹å¯¹ä½ æœ‰ç”¨ï¼Œå¯ä»¥ç»™ä¸€ä¸ªèµğŸ‘æˆ–ä¸€ä¸ªè¯„è®ºğŸ“šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>CSS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>Component</tag>
      
      <tag>Calendar</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>

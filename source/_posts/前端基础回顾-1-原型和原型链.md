---
title: å‰ç«¯åŸºç¡€å›é¡¾-1-åŸå‹å’ŒåŸå‹é“¾
date: 2023-01-15 16:20:00
tags: basic   
banner_img: /images/å‰ç«¯åŸºç¡€å›é¡¾/åŸå‹å’ŒåŸå‹é“¾/background.jpeg
index_img: /images/å‰ç«¯åŸºç¡€å›é¡¾/åŸå‹å’ŒåŸå‹é“¾/background.jpeg
categories: 
  - åŸºç¡€ 
---

å…œå…œè½¬è½¬å·¥ä½œäº†ä¹Ÿæœ‰å¿«ä¸¤å¹´äº†ï¼Œæœ€ç»ˆè¿˜æ˜¯å†³å®šæ‹¾èµ·å½“åˆçš„`js`åŸºç¡€ã€‚  
æ¯•ç«Ÿå®Œå…¨ç†è§£å®ƒæ‰èƒ½æ›´åŠ æ·±å…¥å‰ç«¯è¿™ä¸ªè¡Œä¸šï¼ŒæŠ€æœ¯æ‰èƒ½æœ‰æ›´å¤§çš„çªç ´ã€‚  

æœ¬æ–‡æ˜¯é‡å­¦åŸºç¡€çš„ç¬¬ä¸€ç¯‡ï¼Œå…³äº**åŸå‹å’ŒåŸå‹é“¾**ã€‚  

## å¼€å§‹

æœ€è¿‘æƒ³å°è¯•é˜…è¯»ä¸€ä¸‹[axios](https://github.com/axios/axios)çš„æºç ï¼Œå‚è€ƒå¤§ä½¬çš„[æ¶æ„æ–‡ç« ](https://mp.weixin.qq.com/s/GNYpgHo97xml0NxT93dHxQ)ï¼Œåœ¨çœ‹åˆ°ç¬¬ä¸€ä¸ªå‡½æ•°æ—¶å°±æœ‰ç‚¹åƒåŠ› ğŸ˜“ã€‚  
```javascript 
function createInstance(defaultConfig) {
  const context = new Axios(defaultConfig);

  const instance = bind(Axios.prototype.request, context);

  // Copy axios.prototype to instance
  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});

  // Copy context to instance
  utils.extend(instance, context, null, {allOwnKeys: true});

  // Factory for creating new instances
  instance.create = function create(instanceConfig) {
    return createInstance(mergeConfig(defaultConfig, instanceConfig));
  };

  return instance;
}
const axios = createInstance(defaults)

axios.xxx = xxx 
// ...

```
å¹³å¸¸åœ¨ä½¿ç”¨çš„æ—¶å€™å°±å‘ç°ï¼Œ`axios`å¯¼å‡ºçš„å®ä¾‹æœ‰éå¸¸å¤šçš„å†™æ³•ä»¥åŠ`api`ã€‚  
`axios.post()`  
`axios()`  
`axios.create`  
ä¼¼ä¹æ˜¯æ›´æ”¹äº†å®ä¾‹çš„åŸå‹é“¾å…³ç³»ã€‚  
<img src="/images/å‰ç«¯åŸºç¡€å›é¡¾/åŸå‹å’ŒåŸå‹é“¾/axios-structure.jpeg" />  

> å›¾ç‰‡æ¥æº [å­¦ä¹  axios æºç æ•´ä½“æ¶æ„ï¼Œæ‰“é€ å±äºè‡ªå·±çš„è¯·æ±‚åº“](https://mp.weixin.qq.com/s/GNYpgHo97xml0NxT93dHxQ) 

### æ¦‚å¿µ  

- åŸå‹ 
`js`å½“ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡ï¼ˆé™¤äº†`null`ï¼‰éƒ½ä¼šæœ‰ä¸€ä¸ªå…³è”å¯¹è±¡ï¼Œåƒæ˜¯çˆ¶å­å…³ç³»ï¼Œå®ƒå°±æ˜¯åŸå‹ã€‚  
**å¯¹è±¡**éƒ½ä¼šä»åŸå‹ä¸Šé¢ç»§æ‰¿å®ƒçš„å±æ€§ã€‚  
- åŸå‹é“¾  
è¿ç»­å…³è”çš„åŸå‹å³æ˜¯åŸå‹é“¾ã€‚  
æ¯”å¦‚`A -> B -> Object`  
- åŸºç¡€ç±»å‹å’Œå¼•ç”¨ç±»å‹  
åŸºç¡€ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«å°±æ˜¯åœ¨å †æ ˆä¸­çš„**å­˜å‚¨æ–¹å¼**ä¸åŒã€‚  
**åŸºç¡€ç±»å‹**å­˜å‚¨çš„æ˜¯ä»–çš„å€¼ã€‚  
**å¼•ç”¨ç±»å‹**å­˜å‚¨çš„æ˜¯ä»–çš„å€¼çš„å¼•ç”¨ã€‚  
æ¯”å¦‚ä¸‹é¢è¿™æ ·  
```js
  var a = 100 
  var b = a 
  a = 200 
  console.log(a, b) // 200 100 

  var objA = { a: 100 }
  var objB = objA 
  objA.a = 200 
  // å¼•ç”¨ç±»å‹çš„å€¼åªæ˜¯ä¸€ä¸ªå¼•ç”¨çš„åœ°å€ï¼Œå½“å®é™…å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰å¼•ç”¨åœ°å€çš„å€¼éƒ½ä¼šå‘ç”Ÿå˜åŒ–
  console.log(objA.a, objB.a) // 200 200
```
- \_\_proto\_\_   
æ‰€æœ‰çš„å¼•ç”¨ç±»å‹éƒ½æœ‰ä¸€ä¸ª`__proto__`å±æ€§ï¼Œä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ã€‚  
<img src="/images/å‰ç«¯åŸºç¡€å›é¡¾/åŸå‹å’ŒåŸå‹é“¾/proto.jpg" />  
```js
{
  constructor: xxx,
  __proto__: xx
}
```

- prototype  
`__proto__`æŒ‡å‘å‘äº†å®ƒçš„æ„é€ å‡½æ•°çš„`prototype`å±æ€§   
<img src="/images/å‰ç«¯åŸºç¡€å›é¡¾/åŸå‹å’ŒåŸå‹é“¾/prototype.jpg" />  
```js
{
  constructor: xxx,
}
```

æ ¹æ®ä¸Šé¢çš„å›¾å¯ä»¥çœ‹åˆ°`const obj = {}`çš„`__proto__`æŒ‡å‘çš„å°±æ˜¯æ„é€ å‡½æ•°`Object`çš„`prototype`  
å½“è¯•å›¾å»è·å–ä¸€ä¸ªå½“å‰å€¼ä¸Šä¸å­˜åœ¨çš„æŸä¸ªå±æ€§æ—¶ï¼Œå®ƒä¼šå»å®ƒçš„`__proto__`ä¸Šæ‰¾ï¼Œä¸€ç›´å¾€ä¸Šï¼Œç›´åˆ°ä¸º`null`ä¸ºæ­¢ï¼ˆæœ€é¡¶å±‚ä¸º`null`ï¼‰ã€‚  

> æ¯ä¸ªå¯¹è±¡éƒ½æœ‰`__proto__`å¯¹è±¡ï¼Œåªæœ‰å‡½æ•°å¯¹è±¡æ‰ä¼šæœ‰`prototype`å¯¹è±¡ã€‚  

#### æ„é€ å‡½æ•°çš„åŸå‹é“¾å…³ç³»  

è®°å½•ä¸€ä¸‹å®Œæ•´çš„æ„é€ å‡½æ•°çš„åŸå‹é“¾å…³ç³»
```javascript 
class Parent {

  name = "parent"

  getName() {
    return this.name 
  }

}

class Child extends Parent {

  name = "child"

}

const parent = new Parent()
const child = new Child() 

console.log(parent.__proto__ === Parent.prototype) // true 
console.log(child.__proto__ === Child.prototype) // true 
console.log(child.__proto__ === Parent.prototype) // false 
console.log(Child.prototype === Parent.prototype) // false  
console.log(Child.__proto__ === Parent) // true 
console.log(Parent.prototype.__proto__ === Object.prototype) // true 

```

> å›¾ç‰‡æ¥æº [è½»æ¾ç†è§£JS åŸå‹åŸå‹é“¾](https://juejin.cn/post/6844903989088092174)   

### å°ç»ƒä¹   

1. parent.__proto__ === Parent.prototype
<details>
  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>
  <pre>true</pre>
</details>  

2. child.__proto__ === Child.prototype
<details>
  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>
  <pre>true</pre>
</details>

3. Child.__proto__ === Parent
<details>
  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>
  <pre>true</pre>
</details>

4. Parent.prototype.__proto__ === Object.prototype
<details>
  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>
  <pre>true</pre>
</details>

5. Parent.prototype.constructor === Parent  
<details>
  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>
  <pre>true</pre>
</details>

6. Object.prototype.__proto__ = ?  
<details>
  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>
  <pre>null</pre>
</details>

7. Function.prototype.__proto__ = ?  
<details>
  <summary>ç‚¹å‡»æ˜¾ç¤ºç­”æ¡ˆ</summary>
  <pre>Object.prototype</pre>
</details>

### ç»§æ‰¿  

- æ„é€ å‡½æ•°ç»§æ‰¿
```js
function Parent(name) {
  this.name = name 
}
Parent.prototype.say = function() {
  console.log(this.name)
}
function Child(name, subName) {

}
// åŸå‹æ‰§è¡ŒParentï¼Œå¯ä»¥è®¿é—®åˆ°Parentçš„åŸå‹ä¸Šçš„å±æ€§
Child.prototype = new Parent()
// æ„é€ å™¨è¿˜æ˜¯æŒ‡å‘è‡ªå·±
Child.prototype.constructor = Child 
```

- ç»„åˆç»§æ‰¿
```js
function Parent(name) {
  this.name = name 
}
Parent.prototype.say = function() {
  console.log(this.name)
}
function Child(name, subName) {
  // å”¯ä¸€å’Œä¸Šé¢ä¸ä¸€æ ·çš„åœ°æ–¹
  // ä¸ºäº†èƒ½å°†å‚æ•°æ­£ç¡®èµ‹å€¼ç»™æ„é€ å‡½æ•°
  Parent.call(this, name)
  this.subName = subName
}
// åŸå‹æ‰§è¡ŒParentï¼Œå¯ä»¥è®¿é—®åˆ°Parentçš„åŸå‹ä¸Šçš„å±æ€§
Child.prototype = new Parent()
// æ„é€ å™¨è¿˜æ˜¯æŒ‡å‘è‡ªå·±
Child.prototype.constructor = Child 
```

## æ€»ç»“  
### å››å‡†åˆ™

1. jsåˆ†ä¸ºå‡½æ•°å¯¹è±¡å’Œæ™®é€šå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰__proto__å±æ€§ï¼Œä½†æ˜¯åªæœ‰å‡½æ•°å¯¹è±¡æ‰æœ‰prototypeå±æ€§  
2. Objectã€Functionéƒ½æ˜¯jså†…ç½®çš„å‡½æ•°, ç±»ä¼¼çš„è¿˜æœ‰æˆ‘ä»¬å¸¸ç”¨åˆ°çš„Arrayã€RegExpã€Dateã€Booleanã€Numberã€String  
3. å±æ€§__proto__æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰ä¸¤ä¸ªå±æ€§ï¼Œconstructorå’Œ__proto__  
4. åŸå‹å¯¹è±¡prototypeæœ‰ä¸€ä¸ªé»˜è®¤çš„constructorå±æ€§ï¼Œç”¨äºè®°å½•å®ä¾‹æ˜¯ç”±å“ªä¸ªæ„é€ å‡½æ•°åˆ›å»º  

## ç»“æŸ  

  ç»“æŸğŸ”šã€‚  

  > å‚è€ƒèµ„æ–™
  [è½»æ¾ç†è§£JS åŸå‹åŸå‹é“¾](https://juejin.cn/post/6844903989088092174)  
  [åšäº†ä¸€ä»½å‰ç«¯é¢è¯•å¤ä¹ è®¡åˆ’ï¼Œä¿ç†Ÿï½](https://juejin.cn/post/7061588533214969892#heading-32)  
  [å­¦ä¹  axios æºç æ•´ä½“æ¶æ„ï¼Œæ‰“é€ å±äºè‡ªå·±çš„è¯·æ±‚åº“](https://mp.weixin.qq.com/s/GNYpgHo97xml0NxT93dHxQ)  
  [é¢ä¸é¢è¯•çš„ï¼Œä½ éƒ½å¾—æ‡‚åŸå‹å’ŒåŸå‹é“¾](https://juejin.cn/post/6934498361475072014#heading-2)  
  [åŸå‹é“¾ç»§æ‰¿å›¾è§£](https://github.com/vortesnail/blog/issues/1)  

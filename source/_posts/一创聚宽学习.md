---
title: 一创聚宽学习
date: 2022-09-12 17:50:00
tags: trade 
banner_img: /images/一创聚宽学习/background.jpg
index_img: /images/一创聚宽学习/background.jpg
categories: 
  - 量化交易 
---

## 一创聚宽学习

## 背景  
作为一个🌶🐔技术人，每天想的都是如何搞💰，每天盯着🐔💰涨涨跌跌，一夜回到解放前，受够了。是时候通过知识创造财富了。  
学习量化交易，如果通过自动化来进行交易，实现财富自由👍。  

## 介绍  
[一创聚宽](https://ycjq.95358.com/)是国内比较有名的股票量化交易平台，它帮助开发者封装了很多实用的函数，并提供了实盘数据，以及实盘接入帮助。大大简化了开发者的开发过程。本文就简单的记录一下自己的学习笔记📝。  

### 总体结构  
```python 
  def initialize(context):
    run_daily(period, time='every_bar')
    g.security = '000001.XSHE'

  def period(context):
    order(g.security, 100) 
```
以上就是一个简单的结构。  
- `initialize`表示初始化。  
- `run_daily`表示循环执行的函数。  
[传送门](https://ycjq.95358.com/help/api/help?name=api#run_daily)  
- `order`表示买入卖出的函数。  
[传送门](https://ycjq.95358.com/help/api/help?name=api#%E4%BA%A4%E6%98%93%E5%87%BD%E6%95%B0%E2%99%A0)  
- `g`是一个全局的变量，可以把自定义的一些变量赋值到它下面  
- `context`也是个类似`g`的变量，当中存储了很多有用的信息。  
<img src="/images/一创聚宽学习/context.png" />

### 一些常用的函数和属性  

#### SecurityUnitData
股票行情数据格式  
> open: 时间段开始时价格
close: 时间段结束时价格
low: 最低价
high: 最高价
volume: 成交的股票数量
money: 成交的金额
factor: 前复权因子
avg: 这段时间的平均价
pre_close: 前一个单位时间结束时的价格
paused: 这只股票是否停牌，是则为1，否则为0  

#### get_index_stocks  
获取指数成分股  
`get_index_stocks("000300.XSHG", '2022-01-01')`  
获取`2022-01-01`时的沪深300的股票集合  

#### history   
股票历史行情数据  
- count: 结果集的行数  
- unit: 时间长度 `1d` || `1m`   
- field 数据类型 `SecurityUnitData`  
- security_list 股票列表  
- df  
- skip_paused 是否跳过不交易日期（包括停牌, 未上市或者退市后的日期），暂时没有太理解，后面用到了再看。  

``` python
  history(field='close', count=3, security_list=['000001.XSHE','000002.XSHE'])
  # 数据格式：
  # 两支股票的收盘价
  #                      
  # 2016-08-29  11.05  9.31
  # 2016-08-30  11.1  9.33
  # 2016-08-31  12.33  9.36
```

#### attribute_history  
类似于上面的`history`  
但是只能获取一支股票，并且能获得多个字段  

```python 
  attribute_history(field=['money', 'high'], count=3, security='000001.XSHE')
  # 结果如下：
  #                    money  high
  # 2016-08-29  5.322954e+08  9.31
  # 2016-08-30  5.618541e+08  9.33
  # 2016-08-31  4.638758e+08  9.36
```

#### get_fundamentals 
获取公司**财务数据**  


### 一些概念  
###￥ 市价单和限价单  
- 市价单是指投资者在交易个股时，以市场的价格成交，而限价单一般是指个股的市场价格，达到投资者指定的价格时才成交。  
- 市价单通常可以很快地成交，而限价单的优势在于以理想的价格成交，这两种单适合不同的行情。  
- 投资者以市价委托交易的优点是在上涨行情下能及时买进，在下跌行情下能及时卖出，而以限价委托交易的优点是利于投资者控制交易成本。  
[原文](https://www.51credit.com/wenda/925559.html)  